/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var n=[],i=t.document,r=Object.getPrototypeOf,a=n.slice,s=n.concat,o=n.push,l=n.indexOf,u={},c=u.toString,h=u.hasOwnProperty,d=h.toString,f=d.call(Object),p={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},g=function(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function y(t,e,n){var r,a=(e=e||i).createElement("script");if(a.text=t,n)for(r in v)n[r]&&(a[r]=n[r]);e.head.appendChild(a).parentNode.removeChild(a)}function _(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?u[c.call(t)]||"object":typeof t}var x=function(t,e){return new x.fn.init(t,e)},b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function w(t){var e=!!t&&"length"in t&&t.length,n=_(t);return!m(t)&&!g(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}x.fn=x.prototype={jquery:"3.3.1",constructor:x,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var t,e,n,i,r,a,s=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==typeof s||m(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(t=arguments[o]))for(e in t)n=s[e],s!==(i=t[e])&&(u&&i&&(x.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,a=n&&Array.isArray(n)?n:[]):a=n&&x.isPlainObject(n)?n:{},s[e]=x.extend(u,a,i)):void 0!==i&&(s[e]=i));return s},x.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==c.call(t)||(e=r(t))&&("function"!=typeof(n=h.call(e,"constructor")&&e.constructor)||d.call(n)!==f))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){y(t)},each:function(t,e){var n,i=0;if(w(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(b,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?x.merge(n,"string"==typeof t?[t]:t):o.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,a=t.length,s=!n;r<a;r++)!e(t[r],r)!==s&&i.push(t[r]);return i},map:function(t,e,n){var i,r,a=0,o=[];if(w(t))for(i=t.length;a<i;a++)null!=(r=e(t[a],a,n))&&o.push(r);else for(a in t)null!=(r=e(t[a],a,n))&&o.push(r);return s.apply([],o)},guid:1,support:p}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){u["[object "+e+"]"]=e.toLowerCase()}));var T=function(t){var e,n,i,r,a,s,o,l,u,c,h,d,f,p,m,g,v,y,_,x="sizzle"+1*new Date,b=t.document,w=0,T=0,M=st(),S=st(),E=st(),C=function(t,e){return t===e&&(h=!0),0},A={}.hasOwnProperty,L=[],P=L.pop,R=L.push,I=L.push,O=L.slice,z=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",k="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+N+"*("+k+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+k+"))|)"+N+"*\\]",F=":("+k+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",U=new RegExp(N+"+","g"),H=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),G=new RegExp("^"+N+"*,"+N+"*"),j=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),V=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),W=new RegExp(F),q=new RegExp("^"+k+"$"),X={ID:new RegExp("^#("+k+")"),CLASS:new RegExp("^\\.("+k+")"),TAG:new RegExp("^("+k+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,K=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),tt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},it=function(){d()},rt=yt((function(t){return!0===t.disabled&&("form"in t||"label"in t)}),{dir:"parentNode",next:"legend"});try{I.apply(L=O.call(b.childNodes),b.childNodes),L[b.childNodes.length].nodeType}catch(t){I={apply:L.length?function(t,e){R.apply(t,O.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,r){var a,o,u,c,h,p,v,y=e&&e.ownerDocument,w=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return i;if(!r&&((e?e.ownerDocument||e:b)!==f&&d(e),e=e||f,m)){if(11!==w&&(h=J.exec(t)))if(a=h[1]){if(9===w){if(!(u=e.getElementById(a)))return i;if(u.id===a)return i.push(u),i}else if(y&&(u=y.getElementById(a))&&_(e,u)&&u.id===a)return i.push(u),i}else{if(h[2])return I.apply(i,e.getElementsByTagName(t)),i;if((a=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return I.apply(i,e.getElementsByClassName(a)),i}if(n.qsa&&!E[t+" "]&&(!g||!g.test(t))){if(1!==w)y=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((c=e.getAttribute("id"))?c=c.replace(et,nt):e.setAttribute("id",c=x),o=(p=s(t)).length;o--;)p[o]="#"+c+" "+vt(p[o]);v=p.join(","),y=Q.test(t)&&mt(e.parentNode)||e}if(v)try{return I.apply(i,y.querySelectorAll(v)),i}catch(t){}finally{c===x&&e.removeAttribute("id")}}}return l(t.replace(H,"$1"),e,i,r)}function st(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function ot(t){return t[x]=!0,t}function lt(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function ct(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ft(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pt(t){return ot((function(e){return e=+e,ot((function(n,i){for(var r,a=t([],n.length,e),s=a.length;s--;)n[r=a[s]]&&(n[r]=!(i[r]=n[r]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},a=at.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},d=at.setDocument=function(t){var e,r,s=t?t.ownerDocument||t:b;return s!==f&&9===s.nodeType&&s.documentElement?(p=(f=s).documentElement,m=!a(f),b!==f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",it,!1):r.attachEvent&&r.attachEvent("onunload",it)),n.attributes=lt((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=lt((function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Z.test(f.getElementsByClassName),n.getById=lt((function(t){return p.appendChild(t).id=x,!f.getElementsByName||!f.getElementsByName(x).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(K,tt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(K,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,i,r,a=e.getElementById(t);if(a){if((n=a.getAttributeNode("id"))&&n.value===t)return[a];for(r=e.getElementsByName(t),i=0;a=r[i++];)if((n=a.getAttributeNode("id"))&&n.value===t)return[a]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},v=[],g=[],(n.qsa=Z.test(f.querySelectorAll))&&(lt((function(t){p.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+N+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+N+"*(?:value|"+D+")"),t.querySelectorAll("[id~="+x+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]")})),lt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+N+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Z.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",F)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),e=Z.test(p.compareDocumentPosition),_=e||Z.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},C=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===f||t.ownerDocument===b&&_(b,t)?-1:e===f||e.ownerDocument===b&&_(b,e)?1:c?z(c,t)-z(c,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,r=t.parentNode,a=e.parentNode,s=[t],o=[e];if(!r||!a)return t===f?-1:e===f?1:r?-1:a?1:c?z(c,t)-z(c,e):0;if(r===a)return ct(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)o.unshift(n);for(;s[i]===o[i];)i++;return i?ct(s[i],o[i]):s[i]===b?-1:o[i]===b?1:0},f):f},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&d(t),e=e.replace(V,"='$1']"),n.matchesSelector&&m&&!E[e+" "]&&(!v||!v.test(e))&&(!g||!g.test(e)))try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return at(e,f,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!==f&&d(t),_(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==f&&d(t);var r=i.attrHandle[e.toLowerCase()],a=r&&A.call(i.attrHandle,e.toLowerCase())?r(t,e,!m):void 0;return void 0!==a?a:n.attributes||!m?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null},at.escape=function(t){return(t+"").replace(et,nt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],r=0,a=0;if(h=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(C),h){for(;e=t[a++];)e===t[a]&&(r=i.push(a));for(;r--;)t.splice(i[r],1)}return c=null,t},r=at.getText=function(t){var e,n="",i=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(i=at.selectors={cacheLength:50,createPseudo:ot,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(K,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(K,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(K,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=M[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&M(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=at.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(U," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var a="nth"!==t.slice(0,3),s="last"!==t.slice(-4),o="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,f,p,m=a!==s?"nextSibling":"previousSibling",g=e.parentNode,v=o&&e.nodeName.toLowerCase(),y=!l&&!o,_=!1;if(g){if(a){for(;m;){for(d=e;d=d[m];)if(o?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(_=(f=(u=(c=(h=(d=g)[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&u[1])&&u[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(_=f=0)||p.pop();)if(1===d.nodeType&&++_&&d===e){c[t]=[w,f,_];break}}else if(y&&(_=f=(u=(c=(h=(d=e)[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===w&&u[1]),!1===_)for(;(d=++f&&d&&d[m]||(_=f=0)||p.pop())&&((o?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++_||(y&&((c=(h=d[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[w,_]),d!==e)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return r[x]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ot((function(t,n){for(var i,a=r(t,e),s=a.length;s--;)t[i=z(t,a[s])]=!(n[i]=a[s])})):function(t){return r(t,0,n)}):r}},pseudos:{not:ot((function(t){var e=[],n=[],i=o(t.replace(H,"$1"));return i[x]?ot((function(t,e,n,r){for(var a,s=i(t,null,r,[]),o=t.length;o--;)(a=s[o])&&(t[o]=!(e[o]=a))})):function(t,r,a){return e[0]=t,i(e,null,a,n),e[0]=null,!n.pop()}})),has:ot((function(t){return function(e){return at(t,e).length>0}})),contains:ot((function(t){return t=t.replace(K,tt),function(e){return(e.textContent||e.innerText||r(e)).indexOf(t)>-1}})),lang:ot((function(t){return q.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(K,tt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return Y.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt((function(){return[0]})),last:pt((function(t,e){return[e-1]})),eq:pt((function(t,e,n){return[n<0?n+e:n]})),even:pt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:pt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:pt((function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t})),gt:pt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=dt(e);function gt(){}function vt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function yt(t,e,n){var i=e.dir,r=e.next,a=r||i,s=n&&"parentNode"===a,o=T++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,r);return!1}:function(e,n,l){var u,c,h,d=[w,o];if(l){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(c=(h=e[x]||(e[x]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((u=c[a])&&u[0]===w&&u[1]===o)return d[2]=u[2];if(c[a]=d,d[2]=t(e,n,l))return!0}return!1}}function _t(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function xt(t,e,n,i,r){for(var a,s=[],o=0,l=t.length,u=null!=e;o<l;o++)(a=t[o])&&(n&&!n(a,i,r)||(s.push(a),u&&e.push(o)));return s}function bt(t,e,n,i,r,a){return i&&!i[x]&&(i=bt(i)),r&&!r[x]&&(r=bt(r,a)),ot((function(a,s,o,l){var u,c,h,d=[],f=[],p=s.length,m=a||function(t,e,n){for(var i=0,r=e.length;i<r;i++)at(t,e[i],n);return n}(e||"*",o.nodeType?[o]:o,[]),g=!t||!a&&e?m:xt(m,d,t,o,l),v=n?r||(a?t:p||i)?[]:s:g;if(n&&n(g,v,o,l),i)for(u=xt(v,f),i(u,[],o,l),c=u.length;c--;)(h=u[c])&&(v[f[c]]=!(g[f[c]]=h));if(a){if(r||t){if(r){for(u=[],c=v.length;c--;)(h=v[c])&&u.push(g[c]=h);r(null,v=[],u,l)}for(c=v.length;c--;)(h=v[c])&&(u=r?z(a,h):d[c])>-1&&(a[u]=!(s[u]=h))}}else v=xt(v===s?v.splice(p,v.length):v),r?r(null,s,v,l):I.apply(s,v)}))}function wt(t){for(var e,n,r,a=t.length,s=i.relative[t[0].type],o=s||i.relative[" "],l=s?1:0,c=yt((function(t){return t===e}),o,!0),h=yt((function(t){return z(e,t)>-1}),o,!0),d=[function(t,n,i){var r=!s&&(i||n!==u)||((e=n).nodeType?c(t,n,i):h(t,n,i));return e=null,r}];l<a;l++)if(n=i.relative[t[l].type])d=[yt(_t(d),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[x]){for(r=++l;r<a&&!i.relative[t[r].type];r++);return bt(l>1&&_t(d),l>1&&vt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(H,"$1"),n,l<r&&wt(t.slice(l,r)),r<a&&wt(t=t.slice(r)),r<a&&vt(t))}d.push(n)}return _t(d)}function Tt(t,e){var n=e.length>0,r=t.length>0,a=function(a,s,o,l,c){var h,p,g,v=0,y="0",_=a&&[],x=[],b=u,T=a||r&&i.find.TAG("*",c),M=w+=null==b?1:Math.random()||.1,S=T.length;for(c&&(u=s===f||s||c);y!==S&&null!=(h=T[y]);y++){if(r&&h){for(p=0,s||h.ownerDocument===f||(d(h),o=!m);g=t[p++];)if(g(h,s||f,o)){l.push(h);break}c&&(w=M)}n&&((h=!g&&h)&&v--,a&&_.push(h))}if(v+=y,n&&y!==v){for(p=0;g=e[p++];)g(_,x,s,o);if(a){if(v>0)for(;y--;)_[y]||x[y]||(x[y]=P.call(l));x=xt(x)}I.apply(l,x),c&&!a&&x.length>0&&v+e.length>1&&at.uniqueSort(l)}return c&&(w=M,u=b),_};return n?ot(a):a}return gt.prototype=i.filters=i.pseudos,i.setFilters=new gt,s=at.tokenize=function(t,e){var n,r,a,s,o,l,u,c=S[t+" "];if(c)return e?0:c.slice(0);for(o=t,l=[],u=i.preFilter;o;){for(s in n&&!(r=G.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),n=!1,(r=j.exec(o))&&(n=r.shift(),a.push({value:n,type:r[0].replace(H," ")}),o=o.slice(n.length)),i.filter)!(r=X[s].exec(o))||u[s]&&!(r=u[s](r))||(n=r.shift(),a.push({value:n,type:s,matches:r}),o=o.slice(n.length));if(!n)break}return e?o.length:o?at.error(t):S(t,l).slice(0)},o=at.compile=function(t,e){var n,i=[],r=[],a=E[t+" "];if(!a){for(e||(e=s(t)),n=e.length;n--;)(a=wt(e[n]))[x]?i.push(a):r.push(a);(a=E(t,Tt(r,i))).selector=t}return a},l=at.select=function(t,e,n,r){var a,l,u,c,h,d="function"==typeof t&&t,f=!r&&s(t=d.selector||t);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===e.nodeType&&m&&i.relative[l[1].type]){if(!(e=(i.find.ID(u.matches[0].replace(K,tt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(a=X.needsContext.test(t)?0:l.length;a--&&(u=l[a],!i.relative[c=u.type]);)if((h=i.find[c])&&(r=h(u.matches[0].replace(K,tt),Q.test(l[0].type)&&mt(e.parentNode)||e))){if(l.splice(a,1),!(t=r.length&&vt(l)))return I.apply(n,r),n;break}}return(d||o(t,f))(r,e,!m,n,!e||Q.test(t)&&mt(e.parentNode)||e),n},n.sortStable=x.split("").sort(C).join("")===x,n.detectDuplicates=!!h,d(),n.sortDetached=lt((function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))})),lt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&lt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),lt((function(t){return null==t.getAttribute("disabled")}))||ut(D,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),at}(t);x.find=T,x.expr=T.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=T.uniqueSort,x.text=T.getText,x.isXMLDoc=T.isXML,x.contains=T.contains,x.escapeSelector=T.escape;var M=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&x(t).is(n))break;i.push(t)}return i},S=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},E=x.expr.match.needsContext;function C(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function L(t,e,n){return m(e)?x.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?x.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?x.grep(t,(function(t){return l.call(e,t)>-1!==n})):x.filter(e,t,n)}x.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?x.find.matchesSelector(i,t)?[i]:[]:x.find.matches(t,x.grep(e,(function(t){return 1===t.nodeType})))},x.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(x(t).filter((function(){for(e=0;e<i;e++)if(x.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)x.find(t,r[e],n);return i>1?x.uniqueSort(n):n},filter:function(t){return this.pushStack(L(this,t||[],!1))},not:function(t){return this.pushStack(L(this,t||[],!0))},is:function(t){return!!L(this,"string"==typeof t&&E.test(t)?x(t):t||[],!1).length}});var P,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,n){var r,a;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:R.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof x?e[0]:e,x.merge(this,x.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:i,!0)),A.test(r[1])&&x.isPlainObject(e))for(r in e)m(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(a=i.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==n.ready?n.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,P=x(i);var I=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function z(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(x.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,r=this.length,a=[],s="string"!=typeof t&&x(t);if(!E.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?x.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?l.call(x(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return M(t,"parentNode")},parentsUntil:function(t,e,n){return M(t,"parentNode",n)},next:function(t){return z(t,"nextSibling")},prev:function(t){return z(t,"previousSibling")},nextAll:function(t){return M(t,"nextSibling")},prevAll:function(t){return M(t,"previousSibling")},nextUntil:function(t,e,n){return M(t,"nextSibling",n)},prevUntil:function(t,e,n){return M(t,"previousSibling",n)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){return C(t,"iframe")?t.contentDocument:(C(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},(function(t,e){x.fn[t]=function(n,i){var r=x.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=x.filter(i,r)),this.length>1&&(O[t]||x.uniqueSort(r),I.test(t)&&r.reverse()),this.pushStack(r)}}));var D=/[^\x20\t\r\n\f]+/g;function N(t){return t}function k(t){throw t}function B(t,e,n,i){var r;try{t&&m(r=t.promise)?r.call(t).done(e).fail(n):t&&m(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}x.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return x.each(t.match(D)||[],(function(t,n){e[n]=!0})),e}(t):x.extend({},t);var e,n,i,r,a=[],s=[],o=-1,l=function(){for(r=r||t.once,i=e=!0;s.length;o=-1)for(n=s.shift();++o<a.length;)!1===a[o].apply(n[0],n[1])&&t.stopOnFalse&&(o=a.length,n=!1);t.memory||(n=!1),e=!1,r&&(a=n?[]:"")},u={add:function(){return a&&(n&&!e&&(o=a.length-1,s.push(n)),function e(n){x.each(n,(function(n,i){m(i)?t.unique&&u.has(i)||a.push(i):i&&i.length&&"string"!==_(i)&&e(i)}))}(arguments),n&&!e&&l()),this},remove:function(){return x.each(arguments,(function(t,e){for(var n;(n=x.inArray(e,a,n))>-1;)a.splice(n,1),n<=o&&o--})),this},has:function(t){return t?x.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=s=[],n||e||(a=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},x.extend({Deferred:function(e){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return x.Deferred((function(e){x.each(n,(function(n,i){var r=m(t[i[4]])&&t[i[4]];a[i[1]]((function(){var t=r&&r.apply(this,arguments);t&&m(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(e,i,r){var a=0;function s(e,n,i,r){return function(){var o=this,l=arguments,u=function(){var t,u;if(!(e<a)){if((t=i.apply(o,l))===n.promise())throw new TypeError("Thenable self-resolution");u=t&&("object"==typeof t||"function"==typeof t)&&t.then,m(u)?r?u.call(t,s(a,n,N,r),s(a,n,k,r)):(a++,u.call(t,s(a,n,N,r),s(a,n,k,r),s(a,n,N,n.notifyWith))):(i!==N&&(o=void 0,l=[t]),(r||n.resolveWith)(o,l))}},c=r?u:function(){try{u()}catch(t){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(t,c.stackTrace),e+1>=a&&(i!==k&&(o=void 0,l=[t]),n.rejectWith(o,l))}};e?c():(x.Deferred.getStackHook&&(c.stackTrace=x.Deferred.getStackHook()),t.setTimeout(c))}}return x.Deferred((function(t){n[0][3].add(s(0,t,m(r)?r:N,t.notifyWith)),n[1][3].add(s(0,t,m(e)?e:N)),n[2][3].add(s(0,t,m(i)?i:k))})).promise()},promise:function(t){return null!=t?x.extend(t,r):r}},a={};return x.each(n,(function(t,e){var s=e[2],o=e[5];r[e[1]]=s.add,o&&s.add((function(){i=o}),n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),s.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=s.fireWith})),r.promise(a),e&&e.call(a,a),a},when:function(t){var e=arguments.length,n=e,i=Array(n),r=a.call(arguments),s=x.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?a.call(arguments):n,--e||s.resolveWith(i,r)}};if(e<=1&&(B(t,s.done(o(n)).resolve,s.reject,!e),"pending"===s.state()||m(r[n]&&r[n].then)))return s.then();for(;n--;)B(r[n],o(n),s.reject);return s.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&F.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},x.readyException=function(e){t.setTimeout((function(){throw e}))};var U=x.Deferred();function H(){i.removeEventListener("DOMContentLoaded",H),t.removeEventListener("load",H),x.ready()}x.fn.ready=function(t){return U.then(t).catch((function(t){x.readyException(t)})),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==t&&--x.readyWait>0||U.resolveWith(i,[x]))}}),x.ready.then=U.then,"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll?t.setTimeout(x.ready):(i.addEventListener("DOMContentLoaded",H),t.addEventListener("load",H));var G=function(t,e,n,i,r,a,s){var o=0,l=t.length,u=null==n;if("object"===_(n))for(o in r=!0,n)G(t,e,o,n[o],!0,a,s);else if(void 0!==i&&(r=!0,m(i)||(s=!0),u&&(s?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(x(t),n)})),e))for(;o<l;o++)e(t[o],n,s?i:i.call(t[o],o,e(t[o],n)));return r?t:u?e.call(t):l?e(t[0],n):a},j=/^-ms-/,V=/-([a-z])/g;function W(t,e){return e.toUpperCase()}function q(t){return t.replace(j,"ms-").replace(V,W)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Y(){this.expando=x.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[q(e)]=n;else for(i in e)r[q(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][q(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(q):(e=q(e))in i?[e]:e.match(D)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||x.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var $=new Y,Z=new Y,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function K(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Q,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:J.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}x.extend({hasData:function(t){return Z.hasData(t)||$.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return $.access(t,e,n)},_removeData:function(t,e){$.remove(t,e)}}),x.fn.extend({data:function(t,e){var n,i,r,a=this[0],s=a&&a.attributes;if(void 0===t){if(this.length&&(r=Z.get(a),1===a.nodeType&&!$.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=q(i.slice(5)),K(a,i,r[i]));$.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){Z.set(this,t)})):G(this,(function(e){var n;if(a&&void 0===e){if(void 0!==(n=Z.get(a,t)))return n;if(void 0!==(n=K(a,t)))return n}else this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),x.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=$.get(t,e),n&&(!i||Array.isArray(n)?i=$.access(t,e,x.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=x.queue(t,e),i=n.length,r=n.shift(),a=x._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete a.stop,r.call(t,(function(){x.dequeue(t,e)}),a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return $.get(t,n)||$.access(t,n,{empty:x.Callbacks("once memory").add((function(){$.remove(t,[e+"queue",n])}))})}}),x.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?x.queue(this[0],t):void 0===e?this:this.each((function(){var n=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&x.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){x.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=x.Deferred(),a=this,s=this.length,o=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=$.get(a[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&x.contains(t.ownerDocument,t)&&"none"===x.css(t,"display")},rt=function(t,e,n,i){var r,a,s={};for(a in e)s[a]=t.style[a],t.style[a]=e[a];for(a in r=n.apply(t,i||[]),e)t.style[a]=s[a];return r};function at(t,e,n,i){var r,a,s=20,o=i?function(){return i.cur()}:function(){return x.css(t,e,"")},l=o(),u=n&&n[3]||(x.cssNumber[e]?"":"px"),c=(x.cssNumber[e]||"px"!==u&&+l)&&et.exec(x.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;s--;)x.style(t,e,c+u),(1-a)*(1-(a=o()/l||.5))<=0&&(s=0),c/=a;c*=2,x.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var st={};function ot(t){var e,n=t.ownerDocument,i=t.nodeName,r=st[i];return r||(e=n.body.appendChild(n.createElement(i)),r=x.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),st[i]=r,r)}function lt(t,e){for(var n,i,r=[],a=0,s=t.length;a<s;a++)(i=t[a]).style&&(n=i.style.display,e?("none"===n&&(r[a]=$.get(i,"display")||null,r[a]||(i.style.display="")),""===i.style.display&&it(i)&&(r[a]=ot(i))):"none"!==n&&(r[a]="none",$.set(i,"display",n)));for(a=0;a<s;a++)null!=r[a]&&(t[a].style.display=r[a]);return t}x.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){it(this)?x(this).show():x(this).hide()}))}});var ut=/^(?:checkbox|radio)$/i,ct=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ht=/^$|^module$|\/(?:java|ecma)script/i,dt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ft(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&C(t,e)?x.merge([t],n):n}function pt(t,e){for(var n=0,i=t.length;n<i;n++)$.set(t[n],"globalEval",!e||$.get(e[n],"globalEval"))}dt.optgroup=dt.option,dt.tbody=dt.tfoot=dt.colgroup=dt.caption=dt.thead,dt.th=dt.td;var mt=/<|&#?\w+;/;function gt(t,e,n,i,r){for(var a,s,o,l,u,c,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((a=t[f])||0===a)if("object"===_(a))x.merge(d,a.nodeType?[a]:a);else if(mt.test(a)){for(s=s||h.appendChild(e.createElement("div")),o=(ct.exec(a)||["",""])[1].toLowerCase(),l=dt[o]||dt._default,s.innerHTML=l[1]+x.htmlPrefilter(a)+l[2],c=l[0];c--;)s=s.lastChild;x.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(e.createTextNode(a));for(h.textContent="",f=0;a=d[f++];)if(i&&x.inArray(a,i)>-1)r&&r.push(a);else if(u=x.contains(a.ownerDocument,a),s=ft(h.appendChild(a),"script"),u&&pt(s),n)for(c=0;a=s[c++];)ht.test(a.type||"")&&n.push(a);return h}!function(){var t=i.createDocumentFragment().appendChild(i.createElement("div")),e=i.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),p.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var vt=i.documentElement,yt=/^key/,_t=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xt=/^([^.]*)(?:\.(.+)|)/;function bt(){return!0}function wt(){return!1}function Tt(){try{return i.activeElement}catch(t){}}function Mt(t,e,n,i,r,a){var s,o;if("object"==typeof e){for(o in"string"!=typeof n&&(i=i||n,n=void 0),e)Mt(t,o,n,i,e[o],a);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=wt;else if(!r)return t;return 1===a&&(s=r,(r=function(t){return x().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=x.guid++)),t.each((function(){x.event.add(this,e,r,i,n)}))}x.event={global:{},add:function(t,e,n,i,r){var a,s,o,l,u,c,h,d,f,p,m,g=$.get(t);if(g)for(n.handler&&(n=(a=n).handler,r=a.selector),r&&x.find.matchesSelector(vt,r),n.guid||(n.guid=x.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(D)||[""]).length;u--;)f=m=(o=xt.exec(e[u])||[])[1],p=(o[2]||"").split(".").sort(),f&&(h=x.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=x.event.special[f]||{},c=x.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:p.join(".")},a),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,s)||t.addEventListener&&t.addEventListener(f,s)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),x.event.global[f]=!0)},remove:function(t,e,n,i,r){var a,s,o,l,u,c,h,d,f,p,m,g=$.hasData(t)&&$.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(D)||[""]).length;u--;)if(f=m=(o=xt.exec(e[u])||[])[1],p=(o[2]||"").split(".").sort(),f){for(h=x.event.special[f]||{},d=l[f=(i?h.delegateType:h.bindType)||f]||[],o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=d.length;a--;)c=d[a],!r&&m!==c.origType||n&&n.guid!==c.guid||o&&!o.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||x.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)x.event.remove(t,f+e[u],n,i,!0);x.isEmptyObject(l)&&$.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,a,s,o=x.event.fix(t),l=new Array(arguments.length),u=($.get(this,"events")||{})[o.type]||[],c=x.event.special[o.type]||{};for(l[0]=o,e=1;e<arguments.length;e++)l[e]=arguments[e];if(o.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,o)){for(s=x.event.handlers.call(this,o,u),e=0;(r=s[e++])&&!o.isPropagationStopped();)for(o.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(a.namespace)||(o.handleObj=a,o.data=a.data,void 0!==(i=((x.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,l))&&!1===(o.result=i)&&(o.preventDefault(),o.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,o),o.result}},handlers:function(t,e){var n,i,r,a,s,o=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(a=[],s={},n=0;n<l;n++)void 0===s[r=(i=e[n]).selector+" "]&&(s[r]=i.needsContext?x(r,this).index(u)>-1:x.find(r,this,null,[u]).length),s[r]&&a.push(i);a.length&&o.push({elem:u,handlers:a})}return u=this,l<e.length&&o.push({elem:u,handlers:e.slice(l)}),o},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Tt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Tt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&C(this,"input"))return this.click(),!1},_default:function(t){return C(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?bt:wt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:wt,isPropagationStopped:wt,isImmediatePropagationStopped:wt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=bt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=bt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=bt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&yt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&_t.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},x.event.addProp),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,a=t.handleObj;return r&&(r===i||x.contains(i,r))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}})),x.fn.extend({on:function(t,e,n,i){return Mt(this,t,e,n,i)},one:function(t,e,n,i){return Mt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,x(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=wt),this.each((function(){x.event.remove(this,t,n,e)}))}});var St=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Et=/<script|<style|<link/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,At=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Lt(t,e){return C(t,"table")&&C(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function Pt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Rt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function It(t,e){var n,i,r,a,s,o,l,u;if(1===e.nodeType){if($.hasData(t)&&(a=$.access(t),s=$.set(e,a),u=a.events))for(r in delete s.handle,s.events={},u)for(n=0,i=u[r].length;n<i;n++)x.event.add(e,r,u[r][n]);Z.hasData(t)&&(o=Z.access(t),l=x.extend({},o),Z.set(e,l))}}function Ot(t,e){var n=e.nodeName.toLowerCase();"input"===n&&ut.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function zt(t,e,n,i){e=s.apply([],e);var r,a,o,l,u,c,h=0,d=t.length,f=d-1,g=e[0],v=m(g);if(v||d>1&&"string"==typeof g&&!p.checkClone&&Ct.test(g))return t.each((function(r){var a=t.eq(r);v&&(e[0]=g.call(this,r,a.html())),zt(a,e,n,i)}));if(d&&(a=(r=gt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=a),a||i)){for(l=(o=x.map(ft(r,"script"),Pt)).length;h<d;h++)u=r,h!==f&&(u=x.clone(u,!0,!0),l&&x.merge(o,ft(u,"script"))),n.call(t[h],u,h);if(l)for(c=o[o.length-1].ownerDocument,x.map(o,Rt),h=0;h<l;h++)u=o[h],ht.test(u.type||"")&&!$.access(u,"globalEval")&&x.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?x._evalUrl&&x._evalUrl(u.src):y(u.textContent.replace(At,""),c,u))}return t}function Dt(t,e,n){for(var i,r=e?x.filter(e,t):t,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||x.cleanData(ft(i)),i.parentNode&&(n&&x.contains(i.ownerDocument,i)&&pt(ft(i,"script")),i.parentNode.removeChild(i));return t}x.extend({htmlPrefilter:function(t){return t.replace(St,"<$1></$2>")},clone:function(t,e,n){var i,r,a,s,o=t.cloneNode(!0),l=x.contains(t.ownerDocument,t);if(!(p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(s=ft(o),i=0,r=(a=ft(t)).length;i<r;i++)Ot(a[i],s[i]);if(e)if(n)for(a=a||ft(t),s=s||ft(o),i=0,r=a.length;i<r;i++)It(a[i],s[i]);else It(t,o);return(s=ft(o,"script")).length>0&&pt(s,!l&&ft(t,"script")),o},cleanData:function(t){for(var e,n,i,r=x.event.special,a=0;void 0!==(n=t[a]);a++)if(X(n)){if(e=n[$.expando]){if(e.events)for(i in e.events)r[i]?x.event.remove(n,i):x.removeEvent(n,i,e.handle);n[$.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),x.fn.extend({detach:function(t){return Dt(this,t,!0)},remove:function(t){return Dt(this,t)},text:function(t){return G(this,(function(t){return void 0===t?x.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return zt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Lt(this,t).appendChild(t)}))},prepend:function(){return zt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Lt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return zt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return zt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(ft(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return x.clone(this,t,e)}))},html:function(t){return G(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Et.test(t)&&!dt[(ct.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(x.cleanData(ft(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return zt(this,arguments,(function(e){var n=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(ft(this)),n&&n.replaceChild(e,this))}),t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){x.fn[t]=function(t){for(var n,i=[],r=x(t),a=r.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),x(r[s])[e](n),o.apply(i,n.get());return this.pushStack(i)}}));var Nt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),kt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Bt=new RegExp(nt.join("|"),"i");function Ft(t,e,n){var i,r,a,s,o=t.style;return(n=n||kt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||x.contains(t.ownerDocument,t)||(s=x.style(t,e)),!p.pixelBoxStyles()&&Nt.test(s)&&Bt.test(e)&&(i=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=r,o.maxWidth=a)),void 0!==s?s+"":s}function Ut(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",vt.appendChild(u).appendChild(c);var e=t.getComputedStyle(c);r="1%"!==e.top,l=12===n(e.marginLeft),c.style.right="60%",o=36===n(e.right),a=36===n(e.width),c.style.position="absolute",s=36===c.offsetWidth||"absolute",vt.removeChild(u),c=null}}function n(t){return Math.round(parseFloat(t))}var r,a,s,o,l,u=i.createElement("div"),c=i.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===c.style.backgroundClip,x.extend(p,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),s}}))}();var Ht=/^(none|table(?!-c[ea]).+)/,Gt=/^--/,jt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:"0",fontWeight:"400"},Wt=["Webkit","Moz","ms"],qt=i.createElement("div").style;function Xt(t){var e=x.cssProps[t];return e||(e=x.cssProps[t]=function(t){if(t in qt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Wt.length;n--;)if((t=Wt[n]+e)in qt)return t}(t)||t),e}function Yt(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function $t(t,e,n,i,r,a){var s="width"===e?1:0,o=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=x.css(t,n+nt[s],!0,r)),i?("content"===n&&(l-=x.css(t,"padding"+nt[s],!0,r)),"margin"!==n&&(l-=x.css(t,"border"+nt[s]+"Width",!0,r))):(l+=x.css(t,"padding"+nt[s],!0,r),"padding"!==n?l+=x.css(t,"border"+nt[s]+"Width",!0,r):o+=x.css(t,"border"+nt[s]+"Width",!0,r));return!i&&a>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-l-o-.5))),l}function Zt(t,e,n){var i=kt(t),r=Ft(t,e,i),a="border-box"===x.css(t,"boxSizing",!1,i),s=a;if(Nt.test(r)){if(!n)return r;r="auto"}return s=s&&(p.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===x.css(t,"display",!1,i))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(r=parseFloat(r)||0)+$t(t,e,n||(a?"border":"content"),s,i,r)+"px"}function Jt(t,e,n,i,r){return new Jt.prototype.init(t,e,n,i,r)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ft(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,a,s,o=q(e),l=Gt.test(e),u=t.style;if(l||(e=Xt(o)),s=x.cssHooks[e]||x.cssHooks[o],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:u[e];"string"==(a=typeof n)&&(r=et.exec(n))&&r[1]&&(n=at(t,e,r),a="number"),null!=n&&n==n&&("number"===a&&(n+=r&&r[3]||(x.cssNumber[o]?"":"px")),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,i){var r,a,s,o=q(e);return Gt.test(e)||(e=Xt(o)),(s=x.cssHooks[e]||x.cssHooks[o])&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=Ft(t,e,i)),"normal"===r&&e in Vt&&(r=Vt[e]),""===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),x.each(["height","width"],(function(t,e){x.cssHooks[e]={get:function(t,n,i){if(n)return!Ht.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Zt(t,e,i):rt(t,jt,(function(){return Zt(t,e,i)}))},set:function(t,n,i){var r,a=kt(t),s="border-box"===x.css(t,"boxSizing",!1,a),o=i&&$t(t,e,i,s,a);return s&&p.scrollboxSize()===a.position&&(o-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-$t(t,e,"border",!1,a)-.5)),o&&(r=et.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=x.css(t,e)),Yt(0,n,o)}}})),x.cssHooks.marginLeft=Ut(p.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Ft(t,"marginLeft"))||t.getBoundingClientRect().left-rt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),x.each({margin:"",padding:"",border:"Width"},(function(t,e){x.cssHooks[t+e]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+nt[i]+e]=a[i]||a[i-2]||a[0];return r}},"margin"!==t&&(x.cssHooks[t+e].set=Yt)})),x.fn.extend({css:function(t,e){return G(this,(function(t,e,n){var i,r,a={},s=0;if(Array.isArray(e)){for(i=kt(t),r=e.length;s<r;s++)a[e[s]]=x.css(t,e[s],!1,i);return a}return void 0!==n?x.style(t,e,n):x.css(t,e)}),t,e,arguments.length>1)}}),x.Tween=Jt,Jt.prototype={constructor:Jt,init:function(t,e,n,i,r,a){this.elem=t,this.prop=n,this.easing=r||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(x.cssNumber[n]?"":"px")},cur:function(){var t=Jt.propHooks[this.prop];return t&&t.get?t.get(this):Jt.propHooks._default.get(this)},run:function(t){var e,n=Jt.propHooks[this.prop];return this.options.duration?this.pos=e=x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Jt.propHooks._default.set(this),this}},Jt.prototype.init.prototype=Jt.prototype,Jt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[x.cssProps[t.prop]]&&!x.cssHooks[t.prop]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}},Jt.propHooks.scrollTop=Jt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=Jt.prototype.init,x.fx.step={};var Qt,Kt,te=/^(?:toggle|show|hide)$/,ee=/queueHooks$/;function ne(){Kt&&(!1===i.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ne):t.setTimeout(ne,x.fx.interval),x.fx.tick())}function ie(){return t.setTimeout((function(){Qt=void 0})),Qt=Date.now()}function re(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=nt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function ae(t,e,n){for(var i,r=(se.tweeners[e]||[]).concat(se.tweeners["*"]),a=0,s=r.length;a<s;a++)if(i=r[a].call(n,e,t))return i}function se(t,e,n){var i,r,a=0,s=se.prefilters.length,o=x.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var e=Qt||ie(),n=Math.max(0,u.startTime+u.duration-e),i=1-(n/u.duration||0),a=0,s=u.tweens.length;a<s;a++)u.tweens[a].run(i);return o.notifyWith(t,[u,i,n]),i<1&&s?n:(s||o.notifyWith(t,[u,1,0]),o.resolveWith(t,[u]),!1)},u=o.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:e,originalOptions:n,startTime:Qt||ie(),duration:n.duration,tweens:[],createTween:function(e,n){var i=x.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return e?(o.notifyWith(t,[u,1,0]),o.resolveWith(t,[u,e])):o.rejectWith(t,[u,e]),this}}),c=u.props;for(function(t,e){var n,i,r,a,s;for(n in t)if(r=e[i=q(n)],a=t[n],Array.isArray(a)&&(r=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),(s=x.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete t[i],a)n in t||(t[n]=a[n],e[n]=r);else e[i]=r}(c,u.opts.specialEasing);a<s;a++)if(i=se.prefilters[a].call(u,t,c,u.opts))return m(i.stop)&&(x._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return x.map(c,ae,u),m(u.opts.start)&&u.opts.start.call(t,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),x.fx.timer(x.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u}x.Animation=x.extend(se,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return at(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(D);for(var n,i=0,r=t.length;i<r;i++)n=t[i],se.tweeners[n]=se.tweeners[n]||[],se.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,a,s,o,l,u,c,h="width"in e||"height"in e,d=this,f={},p=t.style,m=t.nodeType&&it(t),g=$.get(t,"fxshow");for(i in n.queue||(null==(s=x._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,x.queue(t,"fx").length||s.empty.fire()}))}))),e)if(r=e[i],te.test(r)){if(delete e[i],a=a||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||x.style(t,i)}if((l=!x.isEmptyObject(e))||!x.isEmptyObject(f))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=$.get(t,"display")),"none"===(c=x.css(t,"display"))&&(u?c=u:(lt([t],!0),u=t.style.display||u,c=x.css(t,"display"),lt([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===x.css(t,"float")&&(l||(d.done((function(){p.display=u})),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=$.access(t,"fxshow",{display:u}),a&&(g.hidden=!m),m&&lt([t],!0),d.done((function(){for(i in m||lt([t]),$.remove(t,"fxshow"),f)x.style(t,i,f[i])}))),l=ae(m?g[i]:0,i,d),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?se.prefilters.unshift(t):se.prefilters.push(t)}}),x.speed=function(t,e,n){var i=t&&"object"==typeof t?x.extend({},t):{complete:n||!n&&e||m(t)&&t,duration:t,easing:n&&e||e&&!m(e)&&e};return x.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in x.fx.speeds?i.duration=x.fx.speeds[i.duration]:i.duration=x.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){m(i.old)&&i.old.call(this),i.queue&&x.dequeue(this,i.queue)},i},x.fn.extend({fadeTo:function(t,e,n,i){return this.filter(it).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=x.isEmptyObject(t),a=x.speed(e,n,i),s=function(){var e=se(this,x.extend({},t),a);(r||$.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",a=x.timers,s=$.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&ee.test(r)&&i(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=t&&a[r].queue!==t||(a[r].anim.stop(n),e=!1,a.splice(r,1));!e&&n||x.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=$.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],a=x.timers,s=i?i.length:0;for(n.finish=!0,x.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),x.each(["toggle","show","hide"],(function(t,e){var n=x.fn[e];x.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(re(e,!0),t,i,r)}})),x.each({slideDown:re("show"),slideUp:re("hide"),slideToggle:re("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){x.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),x.timers=[],x.fx.tick=function(){var t,e=0,n=x.timers;for(Qt=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||x.fx.stop(),Qt=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Kt||(Kt=!0,ne())},x.fx.stop=function(){Kt=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,n){return e=x.fx&&x.fx.speeds[e]||e,n=n||"fx",this.queue(n,(function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}}))},function(){var t=i.createElement("input"),e=i.createElement("select").appendChild(i.createElement("option"));t.type="checkbox",p.checkOn=""!==t.value,p.optSelected=e.selected,(t=i.createElement("input")).value="t",t.type="radio",p.radioValue="t"===t.value}();var oe,le=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return G(this,x.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){x.removeAttr(this,t)}))}}),x.extend({attr:function(t,e,n){var i,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?x.prop(t,e,n):(1===a&&x.isXMLDoc(t)||(r=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?oe:void 0)),void 0!==n?null===n?void x.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=x.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&C(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(D);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),oe={set:function(t,e,n){return!1===e?x.removeAttr(t,n):t.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=le[e]||x.find.attr;le[e]=function(t,e,i){var r,a,s=e.toLowerCase();return i||(a=le[s],le[s]=r,r=null!=n(t,e,i)?s:null,le[s]=a),r}}));var ue=/^(?:input|select|textarea|button)$/i,ce=/^(?:a|area)$/i;function he(t){return(t.match(D)||[]).join(" ")}function de(t){return t.getAttribute&&t.getAttribute("class")||""}function fe(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(D)||[]}x.fn.extend({prop:function(t,e){return G(this,x.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[x.propFix[t]||t]}))}}),x.extend({prop:function(t,e,n){var i,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&x.isXMLDoc(t)||(e=x.propFix[e]||e,r=x.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):ue.test(t.nodeName)||ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(x.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){x.propFix[this.toLowerCase()]=this})),x.fn.extend({addClass:function(t){var e,n,i,r,a,s,o,l=0;if(m(t))return this.each((function(e){x(this).addClass(t.call(this,e,de(this)))}));if((e=fe(t)).length)for(;n=this[l++];)if(r=de(n),i=1===n.nodeType&&" "+he(r)+" "){for(s=0;a=e[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(o=he(i))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,i,r,a,s,o,l=0;if(m(t))return this.each((function(e){x(this).removeClass(t.call(this,e,de(this)))}));if(!arguments.length)return this.attr("class","");if((e=fe(t)).length)for(;n=this[l++];)if(r=de(n),i=1===n.nodeType&&" "+he(r)+" "){for(s=0;a=e[s++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");r!==(o=he(i))&&n.setAttribute("class",o)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):m(t)?this.each((function(n){x(this).toggleClass(t.call(this,n,de(this),e),e)})):this.each((function(){var e,r,a,s;if(i)for(r=0,a=x(this),s=fe(t);e=s[r++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==n||((e=de(this))&&$.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":$.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+he(de(n))+" ").indexOf(e)>-1)return!0;return!1}});var pe=/\r/g;x.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=m(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,x(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=x.map(r,(function(t){return null==t?"":t+""}))),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=x.valHooks[r.type]||x.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(pe,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:he(x.text(t))}},select:{get:function(t){var e,n,i,r=t.options,a=t.selectedIndex,s="select-one"===t.type,o=s?null:[],l=s?a+1:r.length;for(i=a<0?l:s?a:0;i<l;i++)if(((n=r[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(e=x(n).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,a=x.makeArray(e),s=r.length;s--;)((i=r[s]).selected=x.inArray(x.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(t.selectedIndex=-1),a}}}}),x.each(["radio","checkbox"],(function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=x.inArray(x(t).val(),e)>-1}},p.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),p.focusin="onfocusin"in t;var me=/^(?:focusinfocus|focusoutblur)$/,ge=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(e,n,r,a){var s,o,l,u,c,d,f,p,v=[r||i],y=h.call(e,"type")?e.type:e,_=h.call(e,"namespace")?e.namespace.split("."):[];if(o=p=l=r=r||i,3!==r.nodeType&&8!==r.nodeType&&!me.test(y+x.event.triggered)&&(y.indexOf(".")>-1&&(y=(_=y.split(".")).shift(),_.sort()),c=y.indexOf(":")<0&&"on"+y,(e=e[x.expando]?e:new x.Event(y,"object"==typeof e&&e)).isTrigger=a?2:3,e.namespace=_.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:x.makeArray(n,[e]),f=x.event.special[y]||{},a||!f.trigger||!1!==f.trigger.apply(r,n))){if(!a&&!f.noBubble&&!g(r)){for(u=f.delegateType||y,me.test(u+y)||(o=o.parentNode);o;o=o.parentNode)v.push(o),l=o;l===(r.ownerDocument||i)&&v.push(l.defaultView||l.parentWindow||t)}for(s=0;(o=v[s++])&&!e.isPropagationStopped();)p=o,e.type=s>1?u:f.bindType||y,(d=($.get(o,"events")||{})[e.type]&&$.get(o,"handle"))&&d.apply(o,n),(d=c&&o[c])&&d.apply&&X(o)&&(e.result=d.apply(o,n),!1===e.result&&e.preventDefault());return e.type=y,a||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(v.pop(),n)||!X(r)||c&&m(r[y])&&!g(r)&&((l=r[c])&&(r[c]=null),x.event.triggered=y,e.isPropagationStopped()&&p.addEventListener(y,ge),r[y](),e.isPropagationStopped()&&p.removeEventListener(y,ge),x.event.triggered=void 0,l&&(r[c]=l)),e.result}},simulate:function(t,e,n){var i=x.extend(new x.Event,n,{type:t,isSimulated:!0});x.event.trigger(i,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each((function(){x.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return x.event.trigger(t,e,n,!0)}}),p.focusin||x.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=$.access(i,e);r||i.addEventListener(t,n,!0),$.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=$.access(i,e)-1;r?$.access(i,e,r):(i.removeEventListener(t,n,!0),$.remove(i,e))}}}));var ve=t.location,ye=Date.now(),_e=/\?/;x.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+e),n};var xe=/\[\]$/,be=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;function Me(t,e,n,i){var r;if(Array.isArray(e))x.each(e,(function(e,r){n||xe.test(t)?i(t,r):Me(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)}));else if(n||"object"!==_(e))i(t,e);else for(r in e)Me(t+"["+r+"]",e[r],n,i)}x.param=function(t,e){var n,i=[],r=function(t,e){var n=m(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,(function(){r(this.name,this.value)}));else for(n in t)Me(n,t[n],e,r);return i.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&Te.test(this.nodeName)&&!we.test(t)&&(this.checked||!ut.test(t))})).map((function(t,e){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,(function(t){return{name:e.name,value:t.replace(be,"\r\n")}})):{name:e.name,value:n.replace(be,"\r\n")}})).get()}});var Se=/%20/g,Ee=/#.*$/,Ce=/([?&])_=[^&]*/,Ae=/^(.*?):[ \t]*([^\r\n]*)$/gm,Le=/^(?:GET|HEAD)$/,Pe=/^\/\//,Re={},Ie={},Oe="*/".concat("*"),ze=i.createElement("a");function De(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,a=e.toLowerCase().match(D)||[];if(m(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Ne(t,e,n,i){var r={},a=t===Ie;function s(o){var l;return r[o]=!0,x.each(t[o]||[],(function(t,o){var u=o(e,n,i);return"string"!=typeof u||a||r[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),s(u),!1)})),l}return s(e.dataTypes[0])||!r["*"]&&s("*")}function ke(t,e){var n,i,r=x.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&x.extend(!0,t,i),t}ze.href=ve.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ve.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ve.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ke(ke(t,x.ajaxSettings),e):ke(x.ajaxSettings,t)},ajaxPrefilter:De(Re),ajaxTransport:De(Ie),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,a,s,o,l,u,c,h,d,f,p=x.ajaxSetup({},n),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?x(m):x.event,v=x.Deferred(),y=x.Callbacks("once memory"),_=p.statusCode||{},b={},w={},T="canceled",M={readyState:0,getResponseHeader:function(t){var e;if(c){if(!o)for(o={};e=Ae.exec(s);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)M.always(t[M.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||T;return r&&r.abort(e),S(0,e),this}};if(v.promise(M),p.url=((e||p.url||ve.href)+"").replace(Pe,ve.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(D)||[""],null==p.crossDomain){u=i.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=ze.protocol+"//"+ze.host!=u.protocol+"//"+u.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Ne(Re,p,n,M),c)return M;for(d in(h=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Le.test(p.type),a=p.url.replace(Ee,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Se,"+")):(f=p.url.slice(a.length),p.data&&(p.processData||"string"==typeof p.data)&&(a+=(_e.test(a)?"&":"?")+p.data,delete p.data),!1===p.cache&&(a=a.replace(Ce,"$1"),f=(_e.test(a)?"&":"?")+"_="+ye+++f),p.url=a+f),p.ifModified&&(x.lastModified[a]&&M.setRequestHeader("If-Modified-Since",x.lastModified[a]),x.etag[a]&&M.setRequestHeader("If-None-Match",x.etag[a])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&M.setRequestHeader("Content-Type",p.contentType),M.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Oe+"; q=0.01":""):p.accepts["*"]),p.headers)M.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(m,M,p)||c))return M.abort();if(T="abort",y.add(p.complete),M.done(p.success),M.fail(p.error),r=Ne(Ie,p,n,M)){if(M.readyState=1,h&&g.trigger("ajaxSend",[M,p]),c)return M;p.async&&p.timeout>0&&(l=t.setTimeout((function(){M.abort("timeout")}),p.timeout));try{c=!1,r.send(b,S)}catch(t){if(c)throw t;S(-1,t)}}else S(-1,"No Transport");function S(e,n,i,o){var u,d,f,b,w,T=n;c||(c=!0,l&&t.clearTimeout(l),r=void 0,s=o||"",M.readyState=e>0?4:0,u=e>=200&&e<300||304===e,i&&(b=function(t,e,n){for(var i,r,a,s,o=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),n[a]}(p,M,i)),b=function(t,e,n,i){var r,a,s,o,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(a=c.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=u[l+" "+a]||u["* "+a]))for(r in u)if((o=r.split(" "))[1]===a&&(s=u[l+" "+o[0]]||u["* "+o[0]])){!0===s?s=u[r]:!0!==u[r]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}(p,b,M,u),u?(p.ifModified&&((w=M.getResponseHeader("Last-Modified"))&&(x.lastModified[a]=w),(w=M.getResponseHeader("etag"))&&(x.etag[a]=w)),204===e||"HEAD"===p.type?T="nocontent":304===e?T="notmodified":(T=b.state,d=b.data,u=!(f=b.error))):(f=T,!e&&T||(T="error",e<0&&(e=0))),M.status=e,M.statusText=(n||T)+"",u?v.resolveWith(m,[d,T,M]):v.rejectWith(m,[M,T,f]),M.statusCode(_),_=void 0,h&&g.trigger(u?"ajaxSuccess":"ajaxError",[M,p,u?d:f]),y.fireWith(m,[M,T]),h&&(g.trigger("ajaxComplete",[M,p]),--x.active||x.event.trigger("ajaxStop")))}return M},getJSON:function(t,e,n){return x.get(t,e,n,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],(function(t,e){x[e]=function(t,n,i,r){return m(n)&&(r=r||i,i=n,n=void 0),x.ajax(x.extend({url:t,type:e,dataType:r,data:n,success:i},x.isPlainObject(t)&&t))}})),x._evalUrl=function(t){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){x(this).wrapInner(t.call(this,e))})):this.each((function(){var e=x(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(n){x(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){x(this).replaceWith(this.childNodes)})),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Be={0:200,1223:204},Fe=x.ajaxSettings.xhr();p.cors=!!Fe&&"withCredentials"in Fe,p.ajax=Fe=!!Fe,x.ajaxTransport((function(e){var n,i;if(p.cors||Fe&&!e.crossDomain)return{send:function(r,a){var s,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];for(s in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(s,r[s]);n=function(t){return function(){n&&(n=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?a(0,"error"):a(o.status,o.statusText):a(Be[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),i=o.onerror=o.ontimeout=n("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&t.setTimeout((function(){n&&i()}))},n=n("abort");try{o.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}})),x.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),x.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain)return{send:function(r,a){e=x("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&a("error"===t.type?404:200,t.type)}),i.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Ue=[],He=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ue.pop()||x.expando+"_"+ye++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",(function(e,n,i){var r,a,s,o=!1!==e.jsonp&&(He.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&He.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(He,"$1"+r):!1!==e.jsonp&&(e.url+=(_e.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||x.error(r+" was not called"),s[0]},e.dataTypes[0]="json",a=t[r],t[r]=function(){s=arguments},i.always((function(){void 0===a?x(t).removeProp(r):t[r]=a,e[r]&&(e.jsonpCallback=n.jsonpCallback,Ue.push(r)),s&&m(a)&&a(s[0]),s=a=void 0})),"script"})),p.createHTMLDocument=function(){var t=i.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),x.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(p.createHTMLDocument?((r=(e=i.implementation.createHTMLDocument("")).createElement("base")).href=i.location.href,e.head.appendChild(r)):e=i),s=!n&&[],(a=A.exec(t))?[e.createElement(a[1])]:(a=gt([t],e,s),s&&s.length&&x(s).remove(),x.merge([],a.childNodes)));var r,a,s},x.fn.load=function(t,e,n){var i,r,a,s=this,o=t.indexOf(" ");return o>-1&&(i=he(t.slice(o)),t=t.slice(0,o)),m(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&x.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){a=arguments,s.html(i?x("<div>").append(x.parseHTML(t)).find(i):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,a||[t.responseText,e,t])}))}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){x.fn[e]=function(t){return this.on(e,t)}})),x.expr.pseudos.animated=function(t){return x.grep(x.timers,(function(e){return t===e.elem})).length},x.offset={setOffset:function(t,e,n){var i,r,a,s,o,l,u=x.css(t,"position"),c=x(t),h={};"static"===u&&(t.style.position="relative"),o=c.offset(),a=x.css(t,"top"),l=x.css(t,"left"),("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1?(s=(i=c.position()).top,r=i.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),m(e)&&(e=e.call(t,n,x.extend({},o))),null!=e.top&&(h.top=e.top-o.top+s),null!=e.left&&(h.left=e.left-o.left+r),"using"in e?e.using.call(t,h):c.css(h)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){x.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===x.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),r.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-x.css(i,"marginTop",!0),left:e.left-r.left-x.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||vt}))}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;x.fn[t]=function(i){return G(this,(function(t,i,r){var a;if(g(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===r)return a?a[e]:t[i];a?a.scrollTo(n?a.pageXOffset:r,n?r:a.pageYOffset):t[i]=r}),t,i,arguments.length)}})),x.each(["top","left"],(function(t,e){x.cssHooks[e]=Ut(p.pixelPosition,(function(t,n){if(n)return n=Ft(t,e),Nt.test(n)?x(t).position()[e]+"px":n}))})),x.each({Height:"height",Width:"width"},(function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){x.fn[i]=function(r,a){var s=arguments.length&&(n||"boolean"!=typeof r),o=n||(!0===r||!0===a?"margin":"border");return G(this,(function(e,n,r){var a;return g(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===r?x.css(e,n,o):x.style(e,n,r,o)}),e,s?r:void 0,s)}}))})),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){x.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),x.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),x.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),m(t))return i=a.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(a.call(arguments)))}).guid=t.guid=t.guid||x.guid++,r},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=C,x.isFunction=m,x.isWindow=g,x.camelCase=q,x.type=_,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return x}));var Ge=t.jQuery,je=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=je),e&&t.jQuery===x&&(t.jQuery=Ge),x},e||(t.jQuery=t.$=x),x})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return"string"==typeof t}function r(t){return"function"==typeof t}function a(t){return"number"==typeof t}function s(t){return void 0===t}function o(t){return"object"==typeof t}function l(t){return!1!==t}function u(){return"undefined"!=typeof window}function c(t){return r(t)||i(t)}function h(t){return(mt=oe(t,Qt))&&sn}function d(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function f(t,e){return!e&&console.warn(t)}function p(t,e){return t&&(Qt[t]=e)&&mt&&(mt[t]=e)||Qt}function m(){return 0}function g(t){var e,n,i=t[0];if(o(i)||r(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=ae.length;n--&&!ae[n].targetTest(i););e=ae[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Le(t[n],e)))||t.splice(n,1);return t}function v(t){return t._gsap||g(de(t))[0]._gsap}function y(t,e){var n=t[e];return r(n)?t[e]():s(n)&&t.getAttribute(e)||n}function _(t,e){return(t=t.split(",")).forEach(e)||t}function x(t){return Math.round(1e5*t)/1e5||0}function b(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n}function w(t,e,n){var i,r=a(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s];if(r&&(o.duration=t[1]),o.parent=n,e){for(i=o;n&&!("immediateRender"in i);)i=n.vars.defaults||{},n=l(n.vars.inherit)&&n.parent;o.immediateRender=l(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return o}function T(){var t,e,n=te.length,i=te.slice(0);for(ee={},t=te.length=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function M(t,e,n,i){te.length&&T(),t.render(e,n,i),te.length&&T()}function S(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Jt).length<2?e:t}function E(t){return t}function C(t,e){for(var n in e)n in t||(t[n]=e[n]);return t}function A(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])}function L(t,e){for(var n in e)t[n]=o(e[n])?L(t[n]||(t[n]={}),e[n]):e[n];return t}function P(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i}function R(t){var e=t.parent||ht,n=t.keyframes?A:C;if(l(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent;return t}function I(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,a=e._next;r?r._next=a:t[n]===e&&(t[n]=a),a?a._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null}function O(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function z(t){for(var e=t;e;)e._dirty=1,e=e.parent;return t}function D(t){return t._repeat?le(t._tTime,t=t.duration()+t._rDelay)*t:0}function N(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function k(t){return t._end=x(t._start+(t._tDur/Math.abs(t._ts||t._rts||kt)||0))}function B(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=N(t.rawTime(),e),(!e._dur||ce(0,e.totalDuration(),n)-e._tTime>kt)&&e.render(n,!0)),z(t)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)0<=n.rawTime()&&n.totalTime(n._tTime),n=n._dp;t._zTime=-kt}}function F(t,e,n,i){return e.parent&&O(e),e._start=x(n+e._delay),e._end=x(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var a,s=t[i];if(r)for(a=e[r];s&&s[r]>a;)s=s._prev;s?(e._next=s._next,s._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=s,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,i||B(t,e),t}function U(t,e,n,i){return Ne(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&vt!==_e.frame?(te.push(t),t._lazy=[e,i],1):void 0:1}function H(t,e,n){var i=t._repeat,r=x(e)||0;return t._dur=r,t._tDur=i?i<0?1e12:x(r*(i+1)+t._rDelay*i):r,t._time>r&&(t._time=r,t._tTime=Math.min(t._tTime,t._tDur)),n||z(t.parent),t.parent&&k(t),t}function G(t){return t instanceof Ie?z(t):H(t,t._dur)}function j(t,e){var n,r,a=t.labels,s=t._recent||ue,o=t.duration()>=Nt?s.endTime(!1):t._dur;return i(e)&&(isNaN(e)||e in a)?"<"===(n=e.charAt(0))||">"===n?("<"===n?s._start:s.endTime(0<=s._repeat))+(parseFloat(e.substr(1))||0):(n=e.indexOf("="))<0?(e in a||(a[e]=o),a[e]):(r=+(e.charAt(n-1)+e.substr(n+1)),1<n?j(t,e.substr(0,n-1))+r:o+r):null==e?o:+e}function V(t,e){return t||0===t?e(t):e}function W(t){return(t+"").substr((parseFloat(t)+"").length)}function q(t,e){return t&&o(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&o(t[0]))&&!t.nodeType&&t!==dt}function X(t){return t.sort((function(){return.5-Math.random()}))}function Y(t){if(r(t))return t;var e=o(t)?t:{each:t},n=Se(e.ease),a=e.from||0,s=parseFloat(e.base)||0,l={},u=0<a&&a<1,c=isNaN(a)||u,h=e.axis,d=a,f=a;return i(a)?d=f={center:.5,edges:.5,end:1}[a]||0:!u&&c&&(d=a[0],f=a[1]),function(t,i,r){var o,u,p,m,g,v,y,_,b,w=(r||e).length,T=l[w];if(!T){if(!(b="auto"===e.grid?0:(e.grid||[1,Nt])[1])){for(y=-Nt;y<(y=r[b++].getBoundingClientRect().left)&&b<w;);b--}for(T=l[w]=[],o=c?Math.min(b,w)*d-.5:a%b,u=c?w*f/b-.5:a/b|0,_=Nt,v=y=0;v<w;v++)p=v%b-o,m=u-(v/b|0),T[v]=g=h?Math.abs("y"===h?m:p):Ht(p*p+m*m),y<g&&(y=g),g<_&&(_=g);"random"===a&&X(T),T.max=y-_,T.min=_,T.v=w=(parseFloat(e.amount)||parseFloat(e.each)*(w<b?w-1:h?"y"===h?w/b:b:Math.max(b,w/b))||0)*("edges"===a?-1:1),T.b=w<0?s-w:s,T.u=W(e.amount||e.each)||0,n=n&&w<0?Me(n):n}return w=(T[t]-T.min)/T.max||0,x(T.b+(n?n(w):w)*T.v)+T.u}}function $(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){return~~(Math.round(parseFloat(n)/t)*t*e)/e+(a(n)?0:W(n))}}function Z(t,e){var n,i,s=Vt(t);return!s&&o(t)&&(n=s=t.radius||Nt,t.values?(t=de(t.values),(i=!a(t[0]))&&(n*=n)):t=$(t.increment)),V(e,s?r(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,s,o=parseFloat(i?e.x:e),l=parseFloat(i?e.y:0),u=Nt,c=0,h=t.length;h--;)(r=i?(r=t[h].x-o)*r+(s=t[h].y-l)*s:Math.abs(t[h]-o))<u&&(u=r,c=h);return c=!n||u<=n?t[c]:e,i||c===e||a(e)?c:c+W(e)}:$(t))}function J(t,e,n,i){return V(Vt(t)?!e:!0===n?!!(n=0):!i,(function(){return Vt(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&~~(Math.round((t+Math.random()*(e-t))/n)*n*i)/i}))}function Q(t,e,n){return V(n,(function(n){return t[~~e(n)]}))}function K(t){for(var e,n,i,r,a=0,s="";~(e=t.indexOf("random(",a));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?Jt:Wt),s+=t.substr(a,e-a)+J(r?n:+n[0],+n[1],+n[2]||1e-5),a=i+1;return s+t.substr(a,t.length-a)}function tt(t,e,n){var i,r,a,s=t.labels,o=Nt;for(i in s)(r=s[i]-e)<0==!!n&&r&&o>(r=Math.abs(r))&&(a=i,o=r);return a}function et(t){return O(t),t.progress()<1&&pe(t,"onInterrupt"),t}function nt(t,e,n){return(6*(t=t<0?t+1:1<t?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*me+.5|0}function it(t,e,n){var i,r,s,o,l,u,c,h,d,f,p=t?a(t)?[t>>16,t>>8&me,t&me]:0:ge.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ge[t])p=ge[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(i=t.charAt(1))+i+(r=t.charAt(2))+r+(s=t.charAt(3))+s),p=[(t=parseInt(t.substr(1),16))>>16,t>>8&me,t&me];else if("hsl"===t.substr(0,3))if(p=f=t.match(Wt),e){if(~t.indexOf("="))return p=t.match(qt),n&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,l=p[1]/100,i=2*(u=p[2]/100)-(r=u<=.5?u*(l+1):u+l-u*l),3<p.length&&(p[3]*=1),p[0]=nt(o+1/3,i,r),p[1]=nt(o,i,r),p[2]=nt(o-1/3,i,r);else p=t.match(Wt)||ge.transparent;p=p.map(Number)}return e&&!f&&(i=p[0]/me,r=p[1]/me,s=p[2]/me,u=((c=Math.max(i,r,s))+(h=Math.min(i,r,s)))/2,c===h?o=l=0:(d=c-h,l=.5<u?d/(2-c-h):d/(c+h),o=c===i?(r-s)/d+(r<s?6:0):c===r?(s-i)/d+2:(i-r)/d+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*l+.5),p[2]=~~(100*u+.5)),n&&p.length<4&&(p[3]=1),p}function rt(t){var e=[],n=[],i=-1;return t.split(ve).forEach((function(t){var r=t.match(Xt)||[];e.push.apply(e,r),n.push(i+=r.length+1)})),e.c=n,e}function at(t,e,n){var i,r,a,s,o="",l=(t+o).match(ve),u=e?"hsla(":"rgba(",c=0;if(!l)return t;if(l=l.map((function(t){return(t=it(t,e,1))&&u+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(a=rt(t),(i=n.c).join(o)!==a.c.join(o)))for(s=(r=t.replace(ve,"1").split(Xt)).length-1;c<s;c++)o+=r[c]+(~i.indexOf(c)?l.shift()||u+"0,0,0,0)":(a.length?a:l.length?l:n).shift());if(!r)for(s=(r=t.split(ve)).length-1;c<s;c++)o+=r[c]+l[c];return o+r[s]}function st(t){var e,n=t.join(" ");if(ve.lastIndex=0,ve.test(n))return e=ye.test(n),t[1]=at(t[1],e),t[0]=at(t[0],e,rt(t[1])),!0}function ot(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,a={easeIn:e,easeOut:n,easeInOut:i};return _(t,(function(t){for(var e in be[t]=Qt[t]=a,be[r=t.toLowerCase()]=n,a)be[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=be[t+"."+e]=a[e]})),a}function lt(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}}function ut(t,e,n){function i(t){return 1===t?1:r*Math.pow(2,-10*t)*jt((t-s)*a)+1}var r=1<=e?e:1,a=(n||(t?.3:.45))/(e<1?e:1),s=a/Bt*(Math.asin(1/r)||0),o="out"===t?i:"in"===t?function(t){return 1-i(1-t)}:lt(i);return a=Bt/a,o.config=function(e,n){return ut(t,e,n)},o}function ct(t,e){function n(t){return t?--t*t*((e+1)*t+e)+1:0}void 0===e&&(e=1.70158);var i="out"===t?n:"in"===t?function(t){return 1-n(1-t)}:lt(n);return i.config=function(e){return ct(t,e)},i}var ht,dt,ft,pt,mt,gt,vt,yt,_t,xt,bt,wt,Tt,Mt,St,Et,Ct,At,Lt,Pt,Rt,It,Ot,zt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Dt={duration:.5,overwrite:!1,delay:0},Nt=1e8,kt=1/Nt,Bt=2*Math.PI,Ft=Bt/4,Ut=0,Ht=Math.sqrt,Gt=Math.cos,jt=Math.sin,Vt=Array.isArray,Wt=/(?:-?\.?\d|\.)+/gi,qt=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,Xt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Yt=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,$t=/\(([^()]+)\)/i,Zt=/[+-]=-?[\.\d]+/,Jt=/[#\-+.]*\b[a-z\d-=+%.]+/gi,Qt={},Kt={},te=[],ee={},ne={},ie={},re=30,ae=[],se="",oe=function(t,e){for(var n in e)t[n]=e[n];return t},le=function(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},ue={_start:0,endTime:m},ce=function(t,e,n){return n<t?t:e<n?e:n},he=[].slice,de=function(t,e){return!i(t)||e||!ft&&xe()?Vt(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){return i(t)&&!e||q(t,1)?n.push.apply(n,de(t)):n.push(t)}))||n}(t,e):q(t)?he.call(t,0):t?[t]:[]:he.call(pt.querySelectorAll(t),0)},fe=function(t,e,n,i,r){var a=e-t,s=i-n;return V(r,(function(e){return n+(e-t)/a*s}))},pe=function(t,e,n){var i,r,a=t.vars,s=a[e];if(s)return i=a[e+"Params"],r=a.callbackScope||t,n&&te.length&&T(),i?s.apply(r,i):s.call(r)},me=255,ge={aqua:[0,me,me],lime:[0,me,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,me],navy:[0,0,128],white:[me,me,me],olive:[128,128,0],yellow:[me,me,0],orange:[me,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[me,0,0],pink:[me,192,203],cyan:[0,me,me],transparent:[me,me,me,0]},ve=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in ge)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),ye=/hsl[a]?\(/,_e=(Mt=Date.now,St=500,Et=33,Ct=Mt(),At=Ct,Pt=Lt=1/240,Tt={time:0,frame:0,tick:function(){Ee(!0)},wake:function(){gt&&(!ft&&u()&&(dt=ft=window,pt=dt.document||{},Qt.gsap=sn,(dt.gsapVersions||(dt.gsapVersions=[])).push(sn.version),h(mt||dt.GreenSockGlobals||!dt.gsap&&dt||{}),wt=dt.requestAnimationFrame),xt&&Tt.sleep(),bt=wt||function(t){return setTimeout(t,1e3*(Pt-Tt.time)+1|0)},_t=1,Ee(2))},sleep:function(){(wt?dt.cancelAnimationFrame:clearTimeout)(xt),_t=0,bt=m},lagSmoothing:function(t,e){St=t||1e8,Et=Math.min(e,St,0)},fps:function(t){Lt=1/(t||240),Pt=Tt.time+Lt},add:function(t){Rt.indexOf(t)<0&&Rt.push(t),xe()},remove:function(t){var e;~(e=Rt.indexOf(t))&&Rt.splice(e,1)},_listeners:Rt=[]}),xe=function(){return!_t&&_e.wake()},be={},we=/^[\d.\-M][\d.\-,\s]/,Te=/["']/g,Me=function(t){return function(e){return 1-t(1-e)}},Se=function(t,e){return t&&(r(t)?t:be[t]||function(t){var e=(t+"").split("("),n=be[e[0]];return n&&1<e.length&&n.config?n.config.apply(null,~t.indexOf("{")?[function(t){for(var e,n,i,r={},a=t.substr(1,t.length-3).split(":"),s=a[0],o=1,l=a.length;o<l;o++)n=a[o],e=o!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[s]=isNaN(i)?i.replace(Te,"").trim():+i,s=n.substr(e+1).trim();return r}(e[1])]:$t.exec(t)[1].split(",").map(S)):be._CE&&we.test(t)?be._CE("",t):n}(t))||e};function Ee(t){var e,n,i=Mt()-At,r=!0===t;St<i&&(Ct+=i-Et),At+=i,Tt.time=(At-Ct)/1e3,(0<(e=Tt.time-Pt)||r)&&(Tt.frame++,Pt+=e+(Lt<=e?.004:Lt-e),n=1),r||(xt=bt(Ee)),n&&Rt.forEach((function(e){return e(Tt.time,i,Tt.frame,t)}))}function Ce(t){return t<Ot?It*t*t:t<.7272727272727273?It*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?It*(t-=2.25/2.75)*t+.9375:It*Math.pow(t-2.625/2.75,2)+.984375}_("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;ot(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),be.Linear.easeNone=be.none=be.Linear.easeIn,ot("Elastic",ut("in"),ut("out"),ut()),It=7.5625,Ot=1/2.75,ot("Bounce",(function(t){return 1-Ce(1-t)}),Ce),ot("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),ot("Circ",(function(t){return-(Ht(1-t*t)-1)})),ot("Sine",(function(t){return 1-Gt(t*Ft)})),ot("Back",ct("in"),ct("out"),ct()),be.SteppedEase=be.steps=Qt.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0;return function(t){return((i*ce(0,.99999999,t)|0)+r)*n}}},Dt.ease=be["quad.out"],_("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return se+=t+","+t+"Params,"}));var Ae,Le=function(t,e){this.id=Ut++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:y,this.set=e?e.getSetter:qe},Pe=((Ae=Re.prototype).delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},Ae.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},Ae.totalDuration=function(t){return arguments.length?(this._dirty=0,H(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},Ae.totalTime=function(t,e){if(xe(),!arguments.length)return this._tTime;var n=this.parent||this._dp;if(n&&n.smoothChildTiming&&this._ts){for(this._start=x(n._time-(0<this._ts?t/this._ts:((this._dirty?this.totalDuration():this._tDur)-t)/-this._ts)),k(this),n._dirty||z(n);n.parent;)n.parent._time!==n._start+(0<=n._ts?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&F(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===kt)&&(this._ts||(this._pTime=t),M(this,t,e)),this},Ae.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+D(this))%this._dur||(t?this._dur:0),e):this._time},Ae.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},Ae.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+D(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},Ae.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?le(this._tTime,n)+1:1},Ae.timeScale=function(t){if(!arguments.length)return this._rts===-kt?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?N(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-kt?0:this._rts,function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this.totalTime(ce(0,this._tDur,e),!0))},Ae.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(xe(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=kt)&&Math.abs(this._zTime)!==kt))),this):this._ps},Ae.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return!e||!e._sort&&this.parent||F(e,this,t-this._delay),this}return this._start},Ae.endTime=function(t){return this._start+(l(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},Ae.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?N(e.rawTime(t),this):this._tTime:this._tTime},Ae.repeat=function(t){return arguments.length?(this._repeat=t,G(this)):this._repeat},Ae.repeatDelay=function(t){return arguments.length?(this._rDelay=t,G(this)):this._rDelay},Ae.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},Ae.seek=function(t,e){return this.totalTime(j(this,t),l(e))},Ae.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,l(e))},Ae.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},Ae.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},Ae.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},Ae.resume=function(){return this.paused(!1)},Ae.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-kt:0)),this):this._rts<0},Ae.invalidate=function(){return this._initted=0,this._zTime=-kt,this},Ae.isActive=function(t){var e,n=this.parent||this._dp,i=this._start;return!(n&&!(this._ts&&(this._initted||!t)&&n.isActive(t)&&(e=n.rawTime(!0))>=i&&e<this.endTime(!0)-kt))},Ae.eventCallback=function(t,e,n){var i=this.vars;return 1<arguments.length?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},Ae.then=function(t){var e=this;return new Promise((function(n){function i(){var t=e.then;e.then=null,r(a)&&(a=a(e))&&(a.then||a===e)&&(e.then=t),n(a),e.then=t}var a=r(t)?t:E;e._initted&&1===e.totalProgress()&&0<=e._ts||!e._tTime&&e._ts<0?i():e._prom=i}))},Ae.kill=function(){et(this)},Re);function Re(t,e){var n=t.parent||ht;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,H(this,+t.duration,1),this.data=t.data,_t||_e.wake(),n&&F(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}C(Pe.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-kt,_prom:0,_ps:!1,_rts:1});var Ie=function(t){function s(e,i){var r;return void 0===e&&(e={}),(r=t.call(this,e,i)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=l(e.sortChildren),r.parent&&B(r.parent,n(r)),r}e(s,t);var o=s.prototype;return o.to=function(t,e,n,i){return new Ue(t,w(arguments,0,this),j(this,a(e)?i:n)),this},o.from=function(t,e,n,i){return new Ue(t,w(arguments,1,this),j(this,a(e)?i:n)),this},o.fromTo=function(t,e,n,i,r){return new Ue(t,w(arguments,2,this),j(this,a(e)?r:i)),this},o.set=function(t,e,n){return e.duration=0,e.parent=this,R(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Ue(t,e,j(this,n),1),this},o.call=function(t,e,n){return F(this,Ue.delayedCall(0,t,e),j(this,n))},o.staggerTo=function(t,e,n,i,r,a,s){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=a,n.onCompleteParams=s,n.parent=this,new Ue(t,n,j(this,r)),this},o.staggerFrom=function(t,e,n,i,r,a,s){return n.runBackwards=1,R(n).immediateRender=l(n.immediateRender),this.staggerTo(t,e,n,i,r,a,s)},o.staggerFromTo=function(t,e,n,i,r,a,s,o){return i.startAt=n,R(i).immediateRender=l(i.immediateRender),this.staggerTo(t,e,i,r,a,s,o)},o.render=function(t,e,n){var i,r,a,s,o,l,u,c,h,d,f,p,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=this!==ht&&g-kt<t&&0<=t?g:t<kt?0:t,_=this._zTime<0!=t<0&&(this._initted||!v);if(y!==this._tTime||n||_){if(m!==this._time&&v&&(y+=this._time-m,t+=this._time-m),i=y,h=this._start,l=!(c=this._ts),_&&(v||(m=this._zTime),!t&&e||(this._zTime=t)),this._repeat&&(f=this._yoyo,(v<(i=x(y%(o=v+this._rDelay)))||g===y)&&(i=v),(s=~~(y/o))&&s===y/o&&(i=v,s--),f&&1&s&&(i=v-i,p=1),s!==(d=le(this._tTime,o))&&!this._lock)){var b=f&&1&d,w=b===(f&&1&s);if(s<d&&(b=!b),m=b?0:v,this._lock=1,this.render(m,e,!v)._lock=0,!e&&this.parent&&pe(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),m!==this._time||l!=!this._ts)return this;if(w&&(this._lock=2,m=b?v+1e-4:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!l)return this}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(t,e,n){var i;if(e<n)for(i=t._first;i&&i._start<=n;){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,x(m),x(i)))&&(y-=i-(i=u._start)),this._tTime=y,this._time=i,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),m||!i||e||pe(this,"onStart"),m<=i&&0<=t)for(r=this._first;r;){if(a=r._next,(r._act||i>=r._start)&&r._ts&&u!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(0<r._ts?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){u=0,a&&(y+=this._zTime=-kt);break}}r=a}else{r=this._last;for(var T=t<0?t:i;r;){if(a=r._prev,(r._act||T<=r._end)&&r._ts&&u!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(0<r._ts?(T-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(T-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){u=0,a&&(y+=this._zTime=T?-kt:kt);break}}r=a}}if(u&&!e&&(this.pause(),u.render(m<=i?0:-kt)._zTime=m<=i?1:-1,this._ts))return this._start=h,k(this),this.render(t,e,n);this._onUpdate&&!e&&pe(this,"onUpdate",!0),(y===g&&g>=this.totalDuration()||!y&&this._ts<0)&&(h!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||(!t&&v||!(t&&0<this._ts||!y&&this._ts<0)||O(this,1),e||t<0&&!m||(pe(this,y===g?"onComplete":"onReverseComplete",!0),this._prom&&this._prom())))}return this},o.add=function(t,e){var n=this;if(a(e)||(e=j(this,e)),!(t instanceof Pe)){if(Vt(t))return t.forEach((function(t){return n.add(t,e)})),z(this);if(i(t))return this.addLabel(t,e);if(!r(t))return this;t=Ue.delayedCall(0,t)}return this!==t?F(this,t,e):this},o.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-Nt);for(var r=[],a=this._first;a;)a._start>=i&&(a instanceof Ue?e&&r.push(a):(n&&r.push(a),t&&r.push.apply(r,a.getChildren(!0,e,n)))),a=a._next;return r},o.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},o.remove=function(t){return i(t)?this.removeLabel(t):r(t)?this.killTweensOf(t):(I(this,t),t===this._recent&&(this._recent=this._last),z(this))},o.totalTime=function(e,n){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=x(_e.time-(0<this._ts?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},o.addLabel=function(t,e){return this.labels[t]=j(this,e),this},o.removeLabel=function(t){return delete this.labels[t],this},o.addPause=function(t,e,n){var i=Ue.delayedCall(0,e||m,n);return i.data="isPause",this._hasPause=1,F(this,i,j(this,t))},o.removePause=function(t){var e=this._first;for(t=j(this,t);e;)e._start===t&&"isPause"===e.data&&O(e),e=e._next},o.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)ze!==i[r]&&i[r].kill(t,e);return this},o.getTweensOf=function(t,e){for(var n,i=[],r=de(t),a=this._first;a;)a instanceof Ue?!b(a._targets,r)||e&&!a.isActive("started"===e)||i.push(a):(n=a.getTweensOf(r,e)).length&&i.push.apply(i,n),a=a._next;return i},o.tweenTo=function(t,e){e=e||{};var n=this,i=j(n,t),r=e.startAt,a=e.onStart,s=e.onStartParams,o=Ue.to(n,C(e,{ease:"none",lazy:!1,time:i,duration:e.duration||Math.abs((i-(r&&"time"in r?r.time:n._time))/n.timeScale())||kt,onStart:function(){n.pause();var t=e.duration||Math.abs((i-n._time)/n.timeScale());o._dur!==t&&H(o,t).render(o._time,!0,!0),a&&a.apply(o,s||[])}}));return o},o.tweenFromTo=function(t,e,n){return this.tweenTo(e,C({startAt:{time:j(this,t)}},n))},o.recent=function(){return this._recent},o.nextLabel=function(t){return void 0===t&&(t=this._time),tt(this,j(this,t))},o.previousLabel=function(t){return void 0===t&&(t=this._time),tt(this,j(this,t),1)},o.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+kt)},o.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,a=this.labels;r;)r._start>=n&&(r._start+=t),r=r._next;if(e)for(i in a)a[i]>=n&&(a[i]+=t);return z(this)},o.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},o.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._time=this._tTime=0,t&&(this.labels={}),z(this)},o.totalDuration=function(t){var e,n,i,r,a=0,s=this,o=s._last,l=Nt;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(r=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),l<(i=o._start)&&s._sort&&o._ts&&!s._lock?(s._lock=1,F(s,o,i-o._delay,1)._lock=0):l=i,i<0&&o._ts&&(a-=i,(!r&&!s._dp||r&&r.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-1e20),l=0),a<(n=k(o))&&o._ts&&(a=n),o=e;H(s,s===ht&&s._time>a?s._time:Math.min(Nt,a),1),s._dirty=0}return s._tDur},s.updateRoot=function(t){if(ht._ts&&(M(ht,N(t,ht)),vt=_e.frame),_e.frame>=re){re+=zt.autoSleep||120;var e=ht._first;if((!e||!e._ts)&&zt.autoSleep&&_e._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||_e.sleep()}}},s}(Pe);function Oe(t,e,n,a,s,l){var u,c,h,d;if(ne[t]&&!1!==(u=new ne[t]).init(s,u.rawVars?e[t]:function(t,e,n,a,s){if(r(t)&&(t=ke(t,s,e,n,a)),!o(t)||t.style&&t.nodeType||Vt(t))return i(t)?ke(t,s,e,n,a):t;var l,u={};for(l in t)u[l]=ke(t[l],s,e,n,a);return u}(e[t],a,s,l,n),n,a,l)&&(n._pt=c=new tn(n._pt,s,t,0,1,u.render,u,0,u.priority),n!==yt))for(h=n._ptLookup[n._targets.indexOf(s)],d=u._props.length;d--;)h[u._props[d]]=c;return u}C(Ie.prototype,{_lock:0,_hasPause:0,_forcing:0});var ze,De=function(t,e,n,a,s,o,l,u,c){r(a)&&(a=a(s||0,t,o));var h,f=t[e],p="get"!==n?n:r(f)?c?t[e.indexOf("set")||!r(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():f,m=r(f)?c?We:Ve:je;if(i(a)&&(~a.indexOf("random(")&&(a=K(a)),"="===a.charAt(1)&&(a=parseFloat(p)+parseFloat(a.substr(2))*("-"===a.charAt(0)?-1:1)+(W(p)||0))),p!==a)return isNaN(p+a)?(f||e in t||d(e,a),function(t,e,n,i,r,a,s){var o,l,u,c,h,d,f,p,m=new tn(this._pt,t,e,0,1,$e,null,r),g=0,v=0;for(m.b=n,m.e=i,n+="",(f=~(i+="").indexOf("random("))&&(i=K(i)),a&&(a(p=[n,i],t,e),n=p[0],i=p[1]),l=n.match(Yt)||[];o=Yt.exec(i);)c=o[0],h=i.substring(g,o.index),u?u=(u+1)%5:"rgba("===h.substr(-5)&&(u=1),c!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:d,c:"="===c.charAt(1)?parseFloat(c.substr(2))*("-"===c.charAt(0)?-1:1):parseFloat(c)-d,m:u&&u<4?Math.round:0},g=Yt.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=s,(Zt.test(i)||f)&&(m.e=0),this._pt=m}.call(this,t,e,p,a,m,u||zt.stringFilter,c)):(h=new tn(this._pt,t,e,+p||0,a-(p||0),"boolean"==typeof f?Ye:Xe,0,m),c&&(h.fp=c),l&&h.modifier(l,this,t),this._pt=h)},Ne=function t(e,n){var i,r,a,s,o,u,c,h,d,f,p,m,y=e.vars,_=y.ease,x=y.startAt,b=y.immediateRender,w=y.lazy,M=y.onUpdate,S=y.onUpdateParams,E=y.callbackScope,A=y.runBackwards,L=y.yoyoEase,R=y.keyframes,I=y.autoRevert,z=e._dur,D=e._startAt,N=e._targets,k=e.parent,B=k&&"nested"===k.data?k.parent._targets:N,F="auto"===e._overwrite,U=e.timeline;if(!U||R&&_||(_="none"),e._ease=Se(_,Dt.ease),e._yEase=L?Me(Se(!0===L?_:L,Dt.ease)):0,L&&e._yoyo&&!e._repeat&&(L=e._yEase,e._yEase=e._ease,e._ease=L),!U){if(D&&D.render(-1,!0).kill(),x){if(O(e._startAt=Ue.set(N,C({data:"isStart",overwrite:!1,parent:k,immediateRender:!0,lazy:l(w),startAt:null,delay:0,onUpdate:M,onUpdateParams:S,callbackScope:E,stagger:0},x))),b)if(0<n)I||(e._startAt=0);else if(z)return}else if(A&&z)if(D)I||(e._startAt=0);else if(n&&(b=!1),O(e._startAt=Ue.set(N,oe(P(y,Kt),{overwrite:!1,data:"isFromStart",lazy:b&&l(w),immediateRender:b,stagger:0,parent:k}))),b){if(!n)return}else t(e._startAt,kt);for(i=P(y,Kt),m=(h=N[e._pt=0]?v(N[0]).harness:0)&&y[h.prop],w=z&&l(w)||w&&!z,r=0;r<N.length;r++){if(c=(o=N[r])._gsap||g(N)[r]._gsap,e._ptLookup[r]=f={},ee[c.id]&&T(),p=B===N?r:B.indexOf(o),h&&!1!==(d=new h).init(o,m||i,e,p,B)&&(e._pt=s=new tn(e._pt,o,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(t){f[t]=s})),d.priority&&(u=1)),!h||m)for(a in i)ne[a]&&(d=Oe(a,i,e,p,o,B))?d.priority&&(u=1):f[a]=s=De.call(e,o,a,"get",i[a],p,B,0,y.stringFilter);e._op&&e._op[r]&&e.kill(o,e._op[r]),F&&e._pt&&(ze=e,ht.killTweensOf(o,f,"started"),ze=0),e._pt&&w&&(ee[c.id]=1)}u&&Ke(e),e._onInit&&e._onInit(e)}e._from=!U&&!!y.runBackwards,e._onUpdate=M,e._initted=1},ke=function(t,e,n,a,s){return r(t)?t.call(e,n,a,s):i(t)&&~t.indexOf("random(")?K(t):t},Be=se+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Fe=(Be+",id,stagger,delay,duration,paused").split(","),Ue=function(t){function r(e,i,r,s){var u;"number"==typeof i&&(r.duration=i,i=r,r=null);var h,d,p,v,y,_,x,b,w=(u=t.call(this,s?i:R(i),r)||this).vars,T=w.duration,M=w.delay,S=w.immediateRender,E=w.stagger,A=w.overwrite,L=w.keyframes,P=w.defaults,I=u.parent,O=(Vt(e)?a(e[0]):"length"in i)?[e]:de(e);if(u._targets=O.length?g(O):f("GSAP target "+e+" not found. https://greensock.com",!zt.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=A,L||E||c(T)||c(M)){if(i=u.vars,(h=u.timeline=new Ie({data:"nested",defaults:P||{}})).kill(),h.parent=n(u),L)C(h.vars.defaults,{ease:"none"}),L.forEach((function(t){return h.to(O,t,">")}));else{if(v=O.length,x=E?Y(E):m,o(E))for(y in E)~Be.indexOf(y)&&((b=b||{})[y]=E[y]);for(d=0;d<v;d++){for(y in p={},i)Fe.indexOf(y)<0&&(p[y]=i[y]);p.stagger=0,b&&oe(p,b),i.yoyoEase&&!i.repeat&&(p.yoyoEase=i.yoyoEase),_=O[d],p.duration=+ke(T,n(u),d,_,O),p.delay=(+ke(M,n(u),d,_,O)||0)-u._delay,!E&&1===v&&p.delay&&(u._delay=M=p.delay,u._start+=M,p.delay=0),h.to(_,p,x(d,_,O))}T=M=0}T||u.duration(T=h.duration())}else u.timeline=0;return!0===A&&(ze=n(u),ht.killTweensOf(O),ze=0),I&&B(I,n(u)),(S||!T&&!L&&u._start===I._time&&l(S)&&function t(e){return!e||e._ts&&t(e.parent)}(n(u))&&"nested"!==I.data)&&(u._tTime=-kt,u.render(Math.max(0,-M))),u}e(r,t);var s=r.prototype;return s.render=function(t,e,n){var i,r,a,s,o,l,u,c,h,d=this._time,f=this._tDur,p=this._dur,m=f-kt<t&&0<=t?f:t<kt?0:t;if(p){if(m!==this._tTime||!t||n||this._startAt&&this._zTime<0!=t<0){if(i=m,c=this.timeline,this._repeat){if((p<(i=x(m%(s=p+this._rDelay)))||f===m)&&(i=p),(a=~~(m/s))&&a===m/s&&(i=p,a--),(l=this._yoyo&&1&a)&&(h=this._yEase,i=p-i),o=le(this._tTime,s),i===d&&!n&&this._initted)return this;a!==o&&(!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(s*a,!0).invalidate()._lock=0))}if(!this._initted){if(U(this,i,n,e))return this._tTime=0,this;if(p!==this._dur)return this.render(t,e,n)}for(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(h||this._ease)(i/p),this._from&&(this.ratio=u=1-u),d||!i||e||pe(this,"onStart"),r=this._pt;r;)r.r(u,r.d),r=r._next;c&&c.render(t<0?t:!i&&l?-kt:c._dur*u,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),pe(this,"onUpdate")),this._repeat&&a!==o&&this.vars.onRepeat&&!e&&this.parent&&pe(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,n),!t&&p||!(t&&0<this._ts||!m&&this._ts<0)||O(this,1),e||t<0&&!d||m<f&&0<this.timeScale()||(pe(this,m===f?"onComplete":"onReverseComplete",!0),this._prom&&this._prom()))}}else!function(t,e,n,i){var r,a=t._zTime<0?0:1,s=e<0?0:1,o=t._rDelay,l=0;if(o&&t._repeat&&(l=ce(0,t._tDur,e),le(l,o)!==le(t._tTime,o)&&(a=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),(t._initted||!U(t,e,i,n))&&(s!==a||i||t._zTime===kt||!e&&t._zTime)){for(t._zTime=e||(n?kt:0),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=l,n||pe(t,"onStart"),r=t._pt;r;)r.r(s,r.d),r=r._next;!s&&t._startAt&&!t._onUpdate&&t._start&&t._startAt.render(e,!0,i),t._onUpdate&&(n||pe(t,"onUpdate")),l&&t._repeat&&!n&&t.parent&&pe(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(t.ratio&&O(t,1),n||(pe(t,t.ratio?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}}(this,t,e,n);return this},s.targets=function(){return this._targets},s.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},s.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return et(this);if(this.timeline)return this.timeline.killTweensOf(t,e,ze&&!0!==ze.vars.overwrite),this;var n,r,a,s,o,l,u,c=this._targets,h=t?de(t):c,d=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(c,h))return et(this);for(n=this._op=this._op||[],"all"!==e&&(i(e)&&(o={},_(e,(function(t){return o[t]=1})),e=o),e=function(t,e){var n,i,r,a,s=t[0]?v(t[0]).harness:0,o=s&&s.aliases;if(!o)return e;for(i in n=oe({},e),o)if(i in n)for(r=(a=o[i].split(",")).length;r--;)n[a[r]]=n[i];return n}(c,e)),u=c.length;u--;)if(~h.indexOf(c[u]))for(o in r=d[u],"all"===e?(n[u]=e,s=r,a={}):(a=n[u]=n[u]||{},s=e),s)(l=r&&r[o])&&("kill"in l.d&&!0!==l.d.kill(o)||I(this,l,"_pt"),delete r[o]),"all"!==a&&(a[o]=1);return this._initted&&!this._pt&&f&&et(this),this},r.to=function(t,e,n){return new r(t,e,n)},r.from=function(t,e){return new r(t,w(arguments,1))},r.delayedCall=function(t,e,n,i){return new r(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},r.fromTo=function(t,e,n){return new r(t,w(arguments,2))},r.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new r(t,e)},r.killTweensOf=function(t,e,n){return ht.killTweensOf(t,e,n)},r}(Pe);function He(t,e,n){return t.setAttribute(e,n)}function Ge(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)}C(Ue.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_("staggerTo,staggerFrom,staggerFromTo",(function(t){Ue[t]=function(){var e=new Ie,n=he.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var je=function(t,e,n){return t[e]=n},Ve=function(t,e,n){return t[e](n)},We=function(t,e,n,i){return t[e](i.fp,n)},qe=function(t,e){return r(t[e])?Ve:s(t[e])&&t.setAttribute?He:je},Xe=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},Ye=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},$e=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},Ze=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Je=function(t,e,n,i){for(var r,a=this._pt;a;)r=a._next,a.p===i&&a.modifier(t,e,n),a=r},Qe=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?I(this,i,"_pt"):i.dep||(e=1),i=n;return!e},Ke=function(t){for(var e,n,i,r,a=t._pt;a;){for(e=a._next,n=i;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:r)?a._prev._next=a:i=a,(a._next=n)?n._prev=a:r=a,a=e}t._pt=i},tn=(en.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Ge,this.m=t,this.mt=n,this.tween=e},en);function en(t,e,n,i,r,a,s,o,l){this.t=e,this.s=i,this.c=r,this.p=n,this.r=a||Xe,this.d=s||this,this.set=o||je,this.pr=l||0,(this._next=t)&&(t._prev=this)}_(se+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert",(function(t){return Kt[t]=1})),Qt.TweenMax=Qt.TweenLite=Ue,Qt.TimelineLite=Qt.TimelineMax=Ie,ht=new Ie({sortChildren:!1,defaults:Dt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),zt.stringFilter=st;var nn={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return function(t){var e=(t=!t.name&&t.default||t).name,n=r(t),i=e&&!n&&t.init?function(){this._props=[]}:t,a={init:m,render:Ze,add:De,kill:Qe,modifier:Je,rawVars:0},s={targetTest:0,get:0,getSetter:qe,aliases:{},register:0};if(xe(),t!==i){if(ne[e])return;C(i,C(P(t,a),s)),oe(i.prototype,oe(a,P(t,s))),ne[i.prop=e]=i,t.targetTest&&(ae.push(i),Kt[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}p(e,i),t.register&&t.register(sn,i,tn)}(t)}))},timeline:function(t){return new Ie(t)},getTweensOf:function(t,e){return ht.getTweensOf(t,e)},getProperty:function(t,e,n,r){i(t)&&(t=de(t)[0]);var a=v(t||{}).get,s=n?E:S;return"native"===n&&(n=""),t?e?s((ne[e]&&ne[e].get||a)(t,e,n,r)):function(e,n,i){return s((ne[e]&&ne[e].get||a)(t,e,n,i))}:t},quickSetter:function(t,e,n){if(1<(t=de(t)).length){var i=t.map((function(t){return sn.quickSetter(t,e,n)})),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var a=ne[e],s=v(t),o=a?function(e){var i=new a;yt._pt=0,i.init(t,n?e+n:e,yt,0,[t]),i.render(1,i),yt._pt&&Ze(1,yt)}:s.set(t,e);return a?o:function(i){return o(t,e,n?i+n:i,s,1)}},isTweening:function(t){return 0<ht.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=Se(t.ease,Dt.ease)),L(Dt,t||{})},config:function(t){return L(zt,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,a=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!ne[t]&&!Qt[t]&&f(e+" effect requires "+t+" plugin.")})),ie[e]=function(t,e,i){return n(de(t),C(e||{},r),i)},a&&(Ie.prototype[e]=function(t,n,i){return this.add(ie[e](t,o(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){be[t]=Se(e)},parseEase:function(t,e){return arguments.length?Se(t,e):be},getById:function(t){return ht.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new Ie(t);for(r.smoothChildTiming=l(t.smoothChildTiming),ht.remove(r),r._dp=0,r._time=r._tTime=ht._time,n=ht._first;n;)i=n._next,!e&&!n._dur&&n instanceof Ue&&n.vars.onComplete===n._targets[0]||F(r,n,n._start-n._delay),n=i;return F(ht,r,0),r},utils:{wrap:function t(e,n,i){var r=n-e;return Vt(e)?Q(e,t(0,e.length),n):V(i,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,n,i){var r=n-e,a=2*r;return Vt(e)?Q(e,t(0,e.length-1),n):V(i,(function(t){return e+(r<(t=(a+(t-e)%a)%a)?a-t:t)}))},distribute:Y,random:J,snap:Z,normalize:function(t,e,n){return fe(t,e,0,1,n)},getUnit:W,clamp:function(t,e,n){return V(n,(function(n){return ce(t,e,n)}))},splitColor:it,toArray:de,mapRange:fe,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||W(n))}},interpolate:function t(e,n,r,a){var s=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!s){var o,l,u,c,h,d=i(e),f={};if(!0===r&&(a=1)&&(r=null),d)e={p:e},n={p:n};else if(Vt(e)&&!Vt(n)){for(u=[],c=e.length,h=c-2,l=1;l<c;l++)u.push(t(e[l-1],e[l]));c--,s=function(t){t*=c;var e=Math.min(h,~~t);return u[e](t-e)},r=n}else a||(e=oe(Vt(e)?[]:{},e));if(!u){for(o in n)De.call(f,e,o,"get",n[o]);s=function(t){return Ze(t,f)||(d?e.p:e)}}}return V(r,s)},shuffle:X},install:h,effects:ie,ticker:_e,updateRoot:Ie.updateRoot,plugins:ne,globalTimeline:ht,core:{PropTween:tn,globals:p,Tween:Ue,Timeline:Ie,Animation:Pe,getCache:v,_removeLinkedListItem:I}};function rn(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n}function an(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,a;if(i(n)&&(r={},_(n,(function(t){return r[t]=1})),n=r),e){for(a in r={},n)r[a]=e(n[a]);n=r}!function(t,e){var n,i,r,a=t._targets;for(n in e)for(i=a.length;i--;)(r=(r=t._ptLookup[i][n])&&r.d)&&(r._pt&&(r=rn(r,n)),r&&r.modifier&&r.modifier(e[n],t,a[i],n))}(t,n)}}}}_("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return nn[t]=Ue[t]})),_e.add(Ie.updateRoot),yt=nn.to({},{duration:0});var sn=nn.registerPlugin({name:"attr",init:function(t,e,n,i,r){for(var a in e)this.add(t,"setAttribute",(t.getAttribute(a)||0)+"",e[a],i,r,0,0,a),this._props.push(a)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},an("roundProps",$),an("modifiers"),an("snap",Z))||nn;function on(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function ln(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function un(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function cn(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)}function hn(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function dn(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function fn(t,e,n){return t.style[e]=n}function pn(t,e,n){return t.style.setProperty(e,n)}function mn(t,e,n){return t._gsap[e]=n}function gn(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n}function vn(t,e,n,i,r){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)}function yn(t,e,n,i,r){var a=t._gsap;a[e]=n,a.renderTransform(r,a)}function _n(t,e){var n=Hn.createElementNS?Hn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Hn.createElement(t);return n.style?n:Hn.createElement(t)}function xn(t,e,n){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(gi,"-$1").toLowerCase())||i.getPropertyValue(e)||!n&&xn(t,Ti(e)||e,1)||""}function bn(){"undefined"==typeof window||(Un=window,Hn=Un.document,Gn=Hn.documentElement,Vn=_n("div")||{style:{}},Wn=_n("div"),xi=Ti(xi),bi=Ti(bi),Vn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Xn=!!Ti("perspective"),jn=1)}function wn(t){var e,n=_n("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(Gn.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=wn}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Gn.removeChild(n),this.style.cssText=a,e}function Tn(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])}function Mn(t){var e;try{e=t.getBBox()}catch(n){e=wn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===wn||(e=wn.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Tn(t,["x","cx","x1"])||0,y:+Tn(t,["y","cy","y1"])||0,width:0,height:0}}function Sn(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Mn(t))}function En(t,e){if(e){var n=t.style;e in di&&(e=xi),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(gi,"-$1").toLowerCase())):n.removeAttribute(e)}}function Cn(t,e,n,i,r,a){var s=new tn(t._pt,e,n,0,1,a?dn:hn);return(t._pt=s).b=i,s.e=r,t._props.push(n),s}function An(t,e,n,i){var r,a,s,o,l=parseFloat(n)||0,u=(n+"").trim().substr((l+"").length)||"px",c=Vn.style,h=vi.test(e),d="svg"===t.tagName.toLowerCase(),f=(d?"client":"offset")+(h?"Width":"Height"),p="px"===i,m="%"===i;return i===u||!l||Mi[i]||Mi[u]?l:("px"===u||p||(l=An(t,e,n,"px")),o=t.getCTM&&Sn(t),m&&(di[e]||~e.indexOf("adius"))?x(l/(o?t.getBBox()[h?"width":"height"]:t[f])*100):(c[h?"width":"height"]=100+(p?u:i),a=~e.indexOf("adius")||"em"===i&&t.appendChild&&!d?t:t.parentNode,o&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==Hn&&a.appendChild||(a=Hn.body),(s=a._gsap)&&m&&s.width&&h&&s.time===_e.time?x(l/s.width*100):(!m&&"%"!==u||(c.position=xn(t,"position")),a===t&&(c.position="static"),a.appendChild(Vn),r=Vn[f],a.removeChild(Vn),c.position="absolute",h&&m&&((s=v(a)).time=_e.time,s.width=a[f]),x(p?r*l/100:r&&l?100/r*l:0))))}function Ln(t,e,n,i){var r;return jn||bn(),e in _i&&"transform"!==e&&~(e=_i[e]).indexOf(",")&&(e=e.split(",")[0]),di[e]&&"transform"!==e?(r=Li(t,i),r="transformOrigin"!==e?r[e]:Pi(xn(t,bi))+" "+r.zOrigin+"px"):(r=t.style[e])&&"auto"!==r&&!i&&!~(r+"").indexOf("calc(")||(r=Ei[e]&&Ei[e](t,e,n)||xn(t,e)||y(t,e)||("opacity"===e?1:0)),n&&!~(r+"").indexOf(" ")?An(t,e,r,n)+n:r}function Pn(t,e,n,i){if(!n||"none"===n){var r=Ti(e,t,1),a=r&&xn(t,r,1);a&&a!==n&&(e=r,n=a)}var s,o,l,u,c,h,d,f,p,m,g,v,y=new tn(this._pt,t.style,e,0,1,$e),_=0,x=0;if(y.b=n,y.e=i,n+="","auto"==(i+="")&&(t.style[e]=i,i=xn(t,e)||i,t.style[e]=n),st(s=[n,i]),i=s[1],l=(n=s[0]).match(Xt)||[],(i.match(Xt)||[]).length){for(;o=Xt.exec(i);)d=o[0],p=i.substring(_,o.index),c?c=(c+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(c=1),d!==(h=l[x++]||"")&&(u=parseFloat(h)||0,g=h.substr((u+"").length),(v="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),f=parseFloat(d),m=d.substr((f+"").length),_=Xt.lastIndex-m.length,m||(m=m||zt.units[e]||g,_===i.length&&(i+=m,y.e+=m)),g!==m&&(u=An(t,e,h,m)||0),y._pt={_next:y._pt,p:p||1===x?p:",",s:u,c:v?v*f:f-u,m:c&&c<4?Math.round:0});y.c=_<i.length?i.substring(_,i.length):""}else y.r="display"===e&&"none"===i?dn:hn;return Zt.test(i)&&(y.e=0),this._pt=y}function Rn(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(t=n,n=i,i=t),e[0]=Si[n]||n,e[1]=Si[i]||i,e.join(" ")}function In(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,a=e.t,s=a.style,o=e.u,l=a._gsap;if("all"===o||!0===o)s.cssText="",i=1;else for(r=(o=o.split(",")).length;-1<--r;)n=o[r],di[n]&&(i=1,n="transformOrigin"===n?bi:xi),En(a,n);i&&(En(a,xi),l&&(l.svg&&a.removeAttribute("transform"),Li(a,1),l.uncache=1))}}function On(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function zn(t){var e=xn(t,xi);return On(e)?Ci:e.substr(7).match(qt).map(x)}function Dn(t,e){var n,i,r,a,s=t._gsap||v(t),o=t.style,l=zn(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?Ci:l:(l!==Ci||t.offsetParent||t===Gn||s.svg||(r=o.display,o.display="block",(n=t.parentNode)&&t.offsetParent||(a=1,i=t.nextSibling,Gn.appendChild(t)),l=zn(t),r?o.display=r:En(t,"display"),a&&(i?n.insertBefore(t,i):n?n.appendChild(t):Gn.removeChild(t))),e&&6<l.length?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)}function Nn(t,e,n,i,r,a){var s,o,l,u=t._gsap,c=r||Dn(t,!0),h=u.xOrigin||0,d=u.yOrigin||0,f=u.xOffset||0,p=u.yOffset||0,m=c[0],g=c[1],v=c[2],y=c[3],_=c[4],x=c[5],b=e.split(" "),w=parseFloat(b[0])||0,T=parseFloat(b[1])||0;n?c!==Ci&&(o=m*y-g*v)&&(l=w*(-g/o)+T*(m/o)-(m*x-g*_)/o,w=w*(y/o)+T*(-v/o)+(v*x-y*_)/o,T=l):(w=(s=Mn(t)).x+(~b[0].indexOf("%")?w/100*s.width:w),T=s.y+(~(b[1]||b[0]).indexOf("%")?T/100*s.height:T)),i||!1!==i&&u.smooth?(_=w-h,x=T-d,u.xOffset=f+(_*m+x*v)-_,u.yOffset=p+(_*g+x*y)-x):u.xOffset=u.yOffset=0,u.xOrigin=w,u.yOrigin=T,u.smooth=!!i,u.origin=e,u.originIsAbsolute=!!n,t.style[bi]="0px 0px",a&&(Cn(a,u,"xOrigin",h,w),Cn(a,u,"yOrigin",d,T),Cn(a,u,"xOffset",f,u.xOffset),Cn(a,u,"yOffset",p,u.yOffset)),t.setAttribute("data-svg-origin",w+" "+T)}function kn(t,e,n){var i=W(e);return x(parseFloat(e)+parseFloat(An(t,"x",n+"px",i)))+i}function Bn(t,e,n,r,a,s){var o,l,u=360,c=i(a),h=parseFloat(a)*(c&&~a.indexOf("rad")?fi:1),d=s?h*s:h-r,f=r+d+"deg";return c&&("short"===(o=a.split("_")[1])&&(d%=u)!=d%180&&(d+=d<0?u:-u),"cw"===o&&d<0?d=(d+36e9)%u-~~(d/u)*u:"ccw"===o&&0<d&&(d=(d-36e9)%u-~~(d/u)*u)),t._pt=l=new tn(t._pt,e,n,r,d,ln),l.e=f,l.u="deg",t._props.push(n),l}function Fn(t,e,n){var i,r,a,s,o,l,u,c=Wn.style,h=n._gsap;for(r in c.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",c[xi]=e,Hn.body.appendChild(Wn),i=Li(Wn,1),di)(a=h[r])!==(s=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(o=W(a)!==(u=W(s))?An(n,r,a,u):parseFloat(a),l=parseFloat(s),t._pt=new tn(t._pt,h,r,o,l-o,on),t._pt.u=u||0,t._props.push(r));Hn.body.removeChild(Wn)}Ue.version=Ie.version=sn.version="3.2.6",gt=1,u()&&xe();var Un,Hn,Gn,jn,Vn,Wn,qn,Xn,Yn=be.Power0,$n=be.Power1,Zn=be.Power2,Jn=be.Power3,Qn=be.Power4,Kn=be.Linear,ti=be.Quad,ei=be.Cubic,ni=be.Quart,ii=be.Quint,ri=be.Strong,ai=be.Elastic,si=be.Back,oi=be.SteppedEase,li=be.Bounce,ui=be.Sine,ci=be.Expo,hi=be.Circ,di={},fi=180/Math.PI,pi=Math.PI/180,mi=Math.atan2,gi=/([A-Z])/g,vi=/(?:left|right|width|margin|padding|x)/i,yi=/[\s,\(]\S/,_i={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},xi="transform",bi=xi+"Origin",wi="O,Moz,ms,Ms,Webkit".split(","),Ti=function(t,e,n){var i=(e||Vn).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(wi[r]+t in i););return r<0?null:(3===r?"ms":0<=r?wi[r]:"")+t},Mi={deg:1,rad:1,turn:1},Si={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Ei={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var a=t._pt=new tn(t._pt,e,n,0,0,In);return a.u=i,a.pr=-10,a.tween=r,t._props.push(n),1}}},Ci=[1,0,0,1,0,0],Ai={},Li=function(t,e){var n=t._gsap||new Le(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,a,s,o,l,u,c,h,d,f,p,m,g,v,y,_,b,w,T,M,S,E,C,A,L,P,R,I,O,z,D,N=t.style,k=n.scaleX<0,B="deg",F=xn(t,bi)||"0";return i=r=a=l=u=c=h=d=f=0,s=o=1,n.svg=!(!t.getCTM||!Sn(t)),g=Dn(t,n.svg),n.svg&&(C=!n.uncache&&t.getAttribute("data-svg-origin"),Nn(t,C||F,!!C||n.originIsAbsolute,!1!==n.smooth,g)),p=n.xOrigin||0,m=n.yOrigin||0,g!==Ci&&(b=g[0],w=g[1],T=g[2],M=g[3],i=S=g[4],r=E=g[5],6===g.length?(s=Math.sqrt(b*b+w*w),o=Math.sqrt(M*M+T*T),l=b||w?mi(w,b)*fi:0,(h=T||M?mi(T,M)*fi+l:0)&&(o*=Math.cos(h*pi)),n.svg&&(i-=p-(p*b+m*T),r-=m-(p*w+m*M))):(D=g[6],O=g[7],P=g[8],R=g[9],I=g[10],z=g[11],i=g[12],r=g[13],a=g[14],u=(v=mi(D,I))*fi,v&&(C=S*(y=Math.cos(-v))+P*(_=Math.sin(-v)),A=E*y+R*_,L=D*y+I*_,P=S*-_+P*y,R=E*-_+R*y,I=D*-_+I*y,z=O*-_+z*y,S=C,E=A,D=L),c=(v=mi(-T,I))*fi,v&&(y=Math.cos(-v),z=M*(_=Math.sin(-v))+z*y,b=C=b*y-P*_,w=A=w*y-R*_,T=L=T*y-I*_),l=(v=mi(w,b))*fi,v&&(C=b*(y=Math.cos(v))+w*(_=Math.sin(v)),A=S*y+E*_,w=w*y-b*_,E=E*y-S*_,b=C,S=A),u&&359.9<Math.abs(u)+Math.abs(l)&&(u=l=0,c=180-c),s=x(Math.sqrt(b*b+w*w+T*T)),o=x(Math.sqrt(E*E+D*D)),v=mi(S,E),h=2e-4<Math.abs(v)?v*fi:0,f=z?1/(z<0?-z:z):0),n.svg&&(g=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!On(xn(t,xi)),g&&t.setAttribute("transform",g))),90<Math.abs(h)&&Math.abs(h)<270&&(k?(s*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,h+=h<=0?180:-180)),n.x=((n.xPercent=i&&Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)?0:i)+"px",n.y=((n.yPercent=r&&Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)?0:r)+"px",n.z=a+"px",n.scaleX=x(s),n.scaleY=x(o),n.rotation=x(l)+B,n.rotationX=x(u)+B,n.rotationY=x(c)+B,n.skewX=h+B,n.skewY=d+B,n.transformPerspective=f+"px",(n.zOrigin=parseFloat(F.split(" ")[2])||0)&&(N[bi]=Pi(F)),n.xOffset=n.yOffset=0,n.force3D=zt.force3D,n.renderTransform=n.svg?Ni:Xn?Di:Ri,n.uncache=0,n},Pi=function(t){return(t=t.split(" "))[0]+" "+t[1]},Ri=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Di(t,e)},Ii="0deg",Oi="0px",zi=") ",Di=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,a=n.x,s=n.y,o=n.z,l=n.rotation,u=n.rotationY,c=n.rotationX,h=n.skewX,d=n.skewY,f=n.scaleX,p=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,_="",x="auto"===g&&t&&1!==t||!0===g;if(y&&(c!==Ii||u!==Ii)){var b,w=parseFloat(u)*pi,T=Math.sin(w),M=Math.cos(w);w=parseFloat(c)*pi,a=kn(v,a,T*(b=Math.cos(w))*-y),s=kn(v,s,-Math.sin(w)*-y),o=kn(v,o,M*b*-y+y)}m!==Oi&&(_+="perspective("+m+zi),(i||r)&&(_+="translate("+i+"%, "+r+"%) "),!x&&a===Oi&&s===Oi&&o===Oi||(_+=o!==Oi||x?"translate3d("+a+", "+s+", "+o+") ":"translate("+a+", "+s+zi),l!==Ii&&(_+="rotate("+l+zi),u!==Ii&&(_+="rotateY("+u+zi),c!==Ii&&(_+="rotateX("+c+zi),h===Ii&&d===Ii||(_+="skew("+h+", "+d+zi),1===f&&1===p||(_+="scale("+f+", "+p+zi),v.style[xi]=_||"translate(0, 0)"},Ni=function(t,e){var n,i,r,a,s,o=e||this,l=o.xPercent,u=o.yPercent,c=o.x,h=o.y,d=o.rotation,f=o.skewX,p=o.skewY,m=o.scaleX,g=o.scaleY,v=o.target,y=o.xOrigin,_=o.yOrigin,b=o.xOffset,w=o.yOffset,T=o.forceCSS,M=parseFloat(c),S=parseFloat(h);d=parseFloat(d),f=parseFloat(f),(p=parseFloat(p))&&(f+=p=parseFloat(p),d+=p),d||f?(d*=pi,f*=pi,n=Math.cos(d)*m,i=Math.sin(d)*m,r=Math.sin(d-f)*-g,a=Math.cos(d-f)*g,f&&(p*=pi,s=Math.tan(f-p),r*=s=Math.sqrt(1+s*s),a*=s,p&&(s=Math.tan(p),n*=s=Math.sqrt(1+s*s),i*=s)),n=x(n),i=x(i),r=x(r),a=x(a)):(n=m,a=g,i=r=0),(M&&!~(c+"").indexOf("px")||S&&!~(h+"").indexOf("px"))&&(M=An(v,"x",c,"px"),S=An(v,"y",h,"px")),(y||_||b||w)&&(M=x(M+y-(y*n+_*r)+b),S=x(S+_-(y*i+_*a)+w)),(l||u)&&(M=x(M+l/100*(s=v.getBBox()).width),S=x(S+u/100*s.height)),s="matrix("+n+","+i+","+r+","+a+","+M+","+S+")",v.setAttribute("transform",s),T&&(v.style[xi]=s)};_("padding,margin,Width,Radius",(function(t,e){var n="Right",i="Bottom",r="Left",a=(e<3?["Top",n,i,r]:["Top"+r,"Top"+n,i+n,i+r]).map((function(n){return e<2?t+n:"border"+n+t}));Ei[1<e?"border"+t:t]=function(t,e,n,i,r){var s,o;if(arguments.length<4)return s=a.map((function(e){return Ln(t,e,n)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(i+"").split(" "),o={},a.forEach((function(t,e){return o[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,o,r)}}));var ki,Bi,Fi={name:"css",register:bn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var a,s,o,l,u,c,h,f,p,m,g,v,y,_,x,b=this._props,w=t.style;for(h in jn||bn(),e)if("autoRound"!==h&&(s=e[h],!ne[h]||!Oe(h,e,n,i,t,r)))if(u=typeof s,c=Ei[h],"function"===u&&(u=typeof(s=s.call(n,i,t,r))),"string"===u&&~s.indexOf("random(")&&(s=K(s)),c)c(this,t,h,s,n)&&(x=1);else if("--"===h.substr(0,2))this.add(w,"setProperty",getComputedStyle(t).getPropertyValue(h)+"",s+"",i,r,0,0,h);else{if(a=Ln(t,h),l=parseFloat(a),(m="string"===u&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0)&&(s=s.substr(2)),o=parseFloat(s),h in _i&&("autoAlpha"===h&&(1===l&&"hidden"===Ln(t,"visibility")&&o&&(l=0),Cn(this,w,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==h&&"transform"!==h&&~(h=_i[h]).indexOf(",")&&(h=h.split(",")[0])),g=h in di)if(v||((y=t._gsap).renderTransform||Li(t),_=!1!==e.smoothOrigin&&y.smooth,(v=this._pt=new tn(this._pt,w,xi,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===h)this._pt=new tn(this._pt,y,"scaleY",y.scaleY,m?m*o:o-y.scaleY),b.push("scaleY",h),h+="X";else{if("transformOrigin"===h){s=Rn(s),y.svg?Nn(t,s,0,_,0,this):((p=parseFloat(s.split(" ")[2])||0)!==y.zOrigin&&Cn(this,y,"zOrigin",y.zOrigin,p),Cn(this,w,h,Pi(a),Pi(s)));continue}if("svgOrigin"===h){Nn(t,s,1,_,0,this);continue}if(h in Ai){Bn(this,y,h,l,s,m);continue}if("smoothOrigin"===h){Cn(this,y,"smooth",y.smooth,s);continue}if("force3D"===h){y[h]=s;continue}if("transform"===h){Fn(this,s,t);continue}}else h in w||(h=Ti(h)||h);if(g||(o||0===o)&&(l||0===l)&&!yi.test(s)&&h in w)(f=(a+"").substr((l+"").length))!==(p=(s+"").substr(((o=o||0)+"").length)||(h in zt.units?zt.units[h]:f))&&(l=An(t,h,a,p)),this._pt=new tn(this._pt,g?y:w,h,l,m?m*o:o-l,"px"!==p||!1===e.autoRound||g?on:cn),this._pt.u=p||0,f!==p&&(this._pt.b=a,this._pt.r=un);else if(h in w)Pn.call(this,t,h,a,s);else{if(!(h in t)){d(h,s);continue}this.add(t,h,t[h],s,i,r)}b.push(h)}x&&Ke(this)},get:Ln,aliases:_i,getSetter:function(t,e,n){var i=_i[e];return i&&i.indexOf(",")<0&&(e=i),e in di&&e!==bi&&(t._gsap.x||Ln(t,"x"))?n&&qn===n?"scale"===e?gn:mn:(qn=n||{})&&("scale"===e?vn:yn):t.style&&!s(t.style[e])?fn:~e.indexOf("-")?pn:qe(t,e)},core:{_removeProperty:En,_getMatrix:Dn}};sn.utils.checkPrefix=Ti,Bi=_("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(ki="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){di[t]=1})),_(ki,(function(t){zt.units[t]="deg",Ai[t]=1})),_i[Bi[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+ki,_("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");_i[e[1]]=Bi[e[0]]})),_("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){zt.units[t]="px"})),sn.registerPlugin(Fi);var Ui=sn.registerPlugin(Fi)||sn,Hi=Ui.core.Tween;t.Back=si,t.Bounce=li,t.CSSPlugin=Fi,t.Circ=hi,t.Cubic=ei,t.Elastic=ai,t.Expo=ci,t.Linear=Kn,t.Power0=Yn,t.Power1=$n,t.Power2=Zn,t.Power3=Jn,t.Power4=Qn,t.Quad=ti,t.Quart=ni,t.Quint=ii,t.Sine=ui,t.SteppedEase=oi,t.Strong=ri,t.TimelineLite=Ie,t.TimelineMax=Ie,t.TweenLite=Ue,t.TweenMax=Hi,t.default=Ui,t.gsap=Ui,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";function e(){return"undefined"!=typeof window}function n(){return r||e()&&(r=window.gsap)&&r.registerPlugin&&r}function i(){return a||(l(),o||console.warn("Please gsap.registerPlugin(CSSPlugin, CSSRulePlugin)")),a}var r,a,s,o,l=function(t){r=t||n(),e()&&(s=document),r&&(o=r.plugins.css)&&(a=1)},u={version:"3.2.6",name:"cssRule",init:function(t,e,n,r,a){if(!i()||void 0===t.cssText)return!1;var l=t._gsProxy=t._gsProxy||s.createElement("div");this.ss=t,this.style=l.style,l.style.cssText=t.cssText,o.prototype.init.call(this,l,e,n,r,a)},render:function(t,e){for(var n,i=e._pt,r=e.style,a=e.ss;i;)i.r(t,i.d),i=i._next;for(n=r.length;-1<--n;)a[r[n]]=r[r[n]]},getRule:function(t){i();var e,n,r,a,o=s.all?"rules":"cssRules",l=s.styleSheets,u=l.length,c=":"===t.charAt(0);for(t=(c?"":",")+t.split("::").join(":").toLowerCase()+",",c&&(a=[]);u--;){try{if(!(n=l[u][o]))continue;e=n.length}catch(t){console.warn(t);continue}for(;-1<--e;)if((r=n[e]).selectorText&&-1!==(","+r.selectorText.split("::").join(":").toLowerCase()+",").indexOf(t)){if(!c)return r.style;a.push(r.style)}}return a},register:l};n()&&r.registerPlugin(u),t.CSSRulePlugin=u,t.default=u,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.THREE=t.THREE||{})}(this,(function(t){function e(){}function n(t,e){this.x=t||0,this.y=e||0}function i(t,e,r,a,s,o,l,u,c,h){Object.defineProperty(this,"id",{value:ur++}),this.uuid=lr.generateUUID(),this.name="",this.image=void 0!==t?t:i.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:i.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:1001,this.wrapT=void 0!==a?a:1001,this.magFilter=void 0!==s?s:1006,this.minFilter=void 0!==o?o:1008,this.anisotropy=void 0!==c?c:1,this.format=void 0!==l?l:1023,this.type=void 0!==u?u:1009,this.offset=new n(0,0),this.repeat=new n(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==h?h:3e3,this.version=0,this.onUpdate=null}function r(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function a(t,e,n){this.uuid=lr.generateUUID(),this.width=t,this.height=e,this.scissor=new r(0,0,t,e),this.scissorTest=!1,this.viewport=new r(0,0,t,e),void 0===(n=n||{}).minFilter&&(n.minFilter=1006),this.texture=new i(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function s(t,e,n){a.call(this,t,e,n),this.activeMipMapLevel=this.activeCubeFace=0}function o(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function l(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function u(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function c(t,e,n,r,a,s,o,l,u,c){t=void 0!==t?t:[],i.call(this,t,void 0!==e?e:301,n,r,a,s,o,l,u,c),this.flipY=!1}function h(t,e,n){var i=t[0];if(0>=i||0<i)return t;var r=e*n,a=dr[r];if(void 0===a&&(a=new Float32Array(r),dr[r]=a),0!==e)for(i.toArray(a,0),i=1,r=0;i!==e;++i)r+=n,t[i].toArray(a,r);return a}function d(t,e){var n=fr[e];void 0===n&&(n=new Int32Array(e),fr[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocTextureUnit();return n}function f(t,e){t.uniform1f(this.addr,e)}function p(t,e){t.uniform1i(this.addr,e)}function m(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function g(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function v(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function y(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function _(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function x(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function b(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTexture2D(e||cr,i)}function w(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTextureCube(e||hr,i)}function T(t,e){t.uniform2iv(this.addr,e)}function M(t,e){t.uniform3iv(this.addr,e)}function S(t,e){t.uniform4iv(this.addr,e)}function E(t,e){t.uniform1fv(this.addr,e)}function C(t,e){t.uniform1iv(this.addr,e)}function A(t,e){t.uniform2fv(this.addr,h(e,this.size,2))}function L(t,e){t.uniform3fv(this.addr,h(e,this.size,3))}function P(t,e){t.uniform4fv(this.addr,h(e,this.size,4))}function R(t,e){t.uniformMatrix2fv(this.addr,!1,h(e,this.size,4))}function I(t,e){t.uniformMatrix3fv(this.addr,!1,h(e,this.size,9))}function O(t,e){t.uniformMatrix4fv(this.addr,!1,h(e,this.size,16))}function z(t,e,n){var i=e.length,r=d(n,i);for(t.uniform1iv(this.addr,r),t=0;t!==i;++t)n.setTexture2D(e[t]||cr,r[t])}function D(t,e,n){var i=e.length,r=d(n,i);for(t.uniform1iv(this.addr,r),t=0;t!==i;++t)n.setTextureCube(e[t]||hr,r[t])}function N(t,e,n){this.id=t,this.addr=n,this.setValue=function(t){switch(t){case 5126:return f;case 35664:return m;case 35665:return g;case 35666:return v;case 35674:return y;case 35675:return _;case 35676:return x;case 35678:return b;case 35680:return w;case 5124:case 35670:return p;case 35667:case 35671:return T;case 35668:case 35672:return M;case 35669:case 35673:return S}}(e.type)}function k(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return E;case 35664:return A;case 35665:return L;case 35666:return P;case 35674:return R;case 35675:return I;case 35676:return O;case 35678:return z;case 35680:return D;case 5124:case 35670:return C;case 35667:case 35671:return T;case 35668:case 35672:return M;case 35669:case 35673:return S}}(e.type)}function B(t){this.id=t,this.seq=[],this.map={}}function F(t,e,n){this.seq=[],this.map={},this.renderer=n,n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(var i=0;i<n;++i){var r=t.getActiveUniform(e,i),a=t.getUniformLocation(e,r.name),s=this,o=r.name,l=o.length;for(pr.lastIndex=0;;){var u=pr.exec(o),c=pr.lastIndex,h=u[1],d=u[3];if("]"===u[2]&&(h|=0),void 0===d||"["===d&&c+2===l){o=s,r=void 0===d?new N(h,r,a):new k(h,r,a),o.seq.push(r),o.map[r.id]=r;break}void 0===(d=s.map[h])&&(d=new B(h),h=s,s=d,h.seq.push(s),h.map[s.id]=s),s=d}}}function U(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function H(t,e,n,r,a,s,o,l,u,c,h,d){i.call(this,null,s,o,l,u,c,r,a,h,d),this.image={data:t,width:e,height:n},this.magFilter=void 0!==u?u:1003,this.minFilter=void 0!==c?c:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function G(t,e){this.min=void 0!==t?t:new n(1/0,1/0),this.max=void 0!==e?e:new n(-1/0,-1/0)}function j(t,e){var i,r,a,s,o,u,c,h,d,f,p,m,g,v,y,_=t.context,x=t.state;this.render=function(b,w,T){if(0!==e.length){b=new l;var M=T.w/T.z,S=.5*T.z,E=.5*T.w,C=new n((R=16/T.w)*M,R),A=new l(1,1,0),L=new n(1,1),P=new G;if(P.min.set(T.x,T.y),P.max.set(T.x+(T.z-16),T.y+(T.w-16)),void 0===g){var R=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),I=new Uint16Array([0,1,2,0,2,3]);p=_.createBuffer(),m=_.createBuffer(),_.bindBuffer(_.ARRAY_BUFFER,p),_.bufferData(_.ARRAY_BUFFER,R,_.STATIC_DRAW),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,m),_.bufferData(_.ELEMENT_ARRAY_BUFFER,I,_.STATIC_DRAW),v=_.createTexture(),y=_.createTexture(),x.bindTexture(_.TEXTURE_2D,v),_.texImage2D(_.TEXTURE_2D,0,_.RGB,16,16,0,_.RGB,_.UNSIGNED_BYTE,null),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),x.bindTexture(_.TEXTURE_2D,y),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,16,16,0,_.RGBA,_.UNSIGNED_BYTE,null),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST);R={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},I=_.createProgram();var O=_.createShader(_.FRAGMENT_SHADER),z=_.createShader(_.VERTEX_SHADER),D="precision "+t.getPrecision()+" float;\n";_.shaderSource(O,D+R.fragmentShader),_.shaderSource(z,D+R.vertexShader),_.compileShader(O),_.compileShader(z),_.attachShader(I,O),_.attachShader(I,z),_.linkProgram(I),g=I,d=_.getAttribLocation(g,"position"),f=_.getAttribLocation(g,"uv"),i=_.getUniformLocation(g,"renderType"),r=_.getUniformLocation(g,"map"),a=_.getUniformLocation(g,"occlusionMap"),s=_.getUniformLocation(g,"opacity"),o=_.getUniformLocation(g,"color"),u=_.getUniformLocation(g,"scale"),c=_.getUniformLocation(g,"rotation"),h=_.getUniformLocation(g,"screenPosition")}for(_.useProgram(g),x.initAttributes(),x.enableAttribute(d),x.enableAttribute(f),x.disableUnusedAttributes(),_.uniform1i(a,0),_.uniform1i(r,1),_.bindBuffer(_.ARRAY_BUFFER,p),_.vertexAttribPointer(d,2,_.FLOAT,!1,16,0),_.vertexAttribPointer(f,2,_.FLOAT,!1,16,8),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,m),x.disable(_.CULL_FACE),x.setDepthWrite(!1),I=0,O=e.length;I<O;I++)if(R=16/T.w,C.set(R*M,R),z=e[I],b.set(z.matrixWorld.elements[12],z.matrixWorld.elements[13],z.matrixWorld.elements[14]),b.applyMatrix4(w.matrixWorldInverse),b.applyMatrix4(w.projectionMatrix),A.copy(b),L.x=T.x+A.x*S+S-8,L.y=T.y+A.y*E+E-8,!0===P.containsPoint(L)){x.activeTexture(_.TEXTURE0),x.bindTexture(_.TEXTURE_2D,null),x.activeTexture(_.TEXTURE1),x.bindTexture(_.TEXTURE_2D,v),_.copyTexImage2D(_.TEXTURE_2D,0,_.RGB,L.x,L.y,16,16,0),_.uniform1i(i,0),_.uniform2f(u,C.x,C.y),_.uniform3f(h,A.x,A.y,A.z),x.disable(_.BLEND),x.enable(_.DEPTH_TEST),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0),x.activeTexture(_.TEXTURE0),x.bindTexture(_.TEXTURE_2D,y),_.copyTexImage2D(_.TEXTURE_2D,0,_.RGBA,L.x,L.y,16,16,0),_.uniform1i(i,1),x.disable(_.DEPTH_TEST),x.activeTexture(_.TEXTURE1),x.bindTexture(_.TEXTURE_2D,v),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0),z.positionScreen.copy(A),z.customUpdateCallback?z.customUpdateCallback(z):z.updateLensFlares(),_.uniform1i(i,2),x.enable(_.BLEND);D=0;for(var N=z.lensFlares.length;D<N;D++){var k=z.lensFlares[D];.001<k.opacity&&.001<k.scale&&(A.x=k.x,A.y=k.y,A.z=k.z,R=k.size*k.scale/T.w,C.x=R*M,C.y=R,_.uniform3f(h,A.x,A.y,A.z),_.uniform2f(u,C.x,C.y),_.uniform1f(c,k.rotation),_.uniform1f(s,k.opacity),_.uniform3f(o,k.color.r,k.color.g,k.color.b),x.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst),t.setTexture2D(k.texture,1),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0))}}x.enable(_.CULL_FACE),x.enable(_.DEPTH_TEST),x.setDepthWrite(!0),t.resetGLState()}}}function V(t,e){var n,r,a,s,u,c,h,d,f,p,m,g,v,y,_,x,b;function w(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var T,M,S,E,C=t.context,A=t.state,L=new l,P=new o,R=new l;this.render=function(o,l){if(0!==e.length){if(void 0===S){var I=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),O=new Uint16Array([0,1,2,0,2,3]);T=C.createBuffer(),M=C.createBuffer(),C.bindBuffer(C.ARRAY_BUFFER,T),C.bufferData(C.ARRAY_BUFFER,I,C.STATIC_DRAW),C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,M),C.bufferData(C.ELEMENT_ARRAY_BUFFER,O,C.STATIC_DRAW);I=C.createProgram(),O=C.createShader(C.VERTEX_SHADER);var z=C.createShader(C.FRAGMENT_SHADER);C.shaderSource(O,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),C.shaderSource(z,["precision "+t.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),C.compileShader(O),C.compileShader(z),C.attachShader(I,O),C.attachShader(I,z),C.linkProgram(I),S=I,x=C.getAttribLocation(S,"position"),b=C.getAttribLocation(S,"uv"),n=C.getUniformLocation(S,"uvOffset"),r=C.getUniformLocation(S,"uvScale"),a=C.getUniformLocation(S,"rotation"),s=C.getUniformLocation(S,"scale"),u=C.getUniformLocation(S,"color"),c=C.getUniformLocation(S,"map"),h=C.getUniformLocation(S,"opacity"),d=C.getUniformLocation(S,"modelViewMatrix"),f=C.getUniformLocation(S,"projectionMatrix"),p=C.getUniformLocation(S,"fogType"),m=C.getUniformLocation(S,"fogDensity"),g=C.getUniformLocation(S,"fogNear"),v=C.getUniformLocation(S,"fogFar"),y=C.getUniformLocation(S,"fogColor"),_=C.getUniformLocation(S,"alphaTest"),(I=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=8,I.height=8,(O=I.getContext("2d")).fillStyle="white",O.fillRect(0,0,8,8),(E=new i(I)).needsUpdate=!0}C.useProgram(S),A.initAttributes(),A.enableAttribute(x),A.enableAttribute(b),A.disableUnusedAttributes(),A.disable(C.CULL_FACE),A.enable(C.BLEND),C.bindBuffer(C.ARRAY_BUFFER,T),C.vertexAttribPointer(x,2,C.FLOAT,!1,16,0),C.vertexAttribPointer(b,2,C.FLOAT,!1,16,8),C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,M),C.uniformMatrix4fv(f,!1,l.projectionMatrix.elements),A.activeTexture(C.TEXTURE0),C.uniform1i(c,0),O=I=0,(z=o.fog)?(C.uniform3f(y,z.color.r,z.color.g,z.color.b),z.isFog?(C.uniform1f(g,z.near),C.uniform1f(v,z.far),C.uniform1i(p,1),O=I=1):z.isFogExp2&&(C.uniform1f(m,z.density),C.uniform1i(p,2),O=I=2)):(C.uniform1i(p,0),O=I=0);z=0;for(var D=e.length;z<D;z++){(k=e[z]).modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,k.matrixWorld),k.z=-k.modelViewMatrix.elements[14]}e.sort(w);var N=[];for(z=0,D=e.length;z<D;z++){var k,B=(k=e[z]).material;!1!==B.visible&&(C.uniform1f(_,B.alphaTest),C.uniformMatrix4fv(d,!1,k.modelViewMatrix.elements),k.matrixWorld.decompose(L,P,R),N[0]=R.x,N[1]=R.y,k=0,o.fog&&B.fog&&(k=O),I!==k&&(C.uniform1i(p,k),I=k),null!==B.map?(C.uniform2f(n,B.map.offset.x,B.map.offset.y),C.uniform2f(r,B.map.repeat.x,B.map.repeat.y)):(C.uniform2f(n,0,0),C.uniform2f(r,1,1)),C.uniform1f(h,B.opacity),C.uniform3f(u,B.color.r,B.color.g,B.color.b),C.uniform1f(a,B.rotation),C.uniform2fv(s,N),A.setBlending(B.blending,B.blendEquation,B.blendSrc,B.blendDst),A.setDepthTest(B.depthTest),A.setDepthWrite(B.depthWrite),B.map?t.setTexture2D(B.map,0):t.setTexture2D(E,0),C.drawElements(C.TRIANGLES,6,C.UNSIGNED_SHORT,0))}A.enable(C.CULL_FACE),t.resetGLState()}}}function W(){Object.defineProperty(this,"id",{value:xr++}),this.uuid=lr.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.shading=2,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.premultipliedAlpha=!1,this.overdraw=0,this._needsUpdate=this.visible=!0}function q(t){W.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function X(t){W.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(t)}function Y(t,e){this.min=void 0!==t?t:new l(1/0,1/0,1/0),this.max=void 0!==e?e:new l(-1/0,-1/0,-1/0)}function $(t,e){this.center=void 0!==t?t:new l,this.radius=void 0!==e?e:0}function Z(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function J(t,e){this.normal=void 0!==t?t:new l(1,0,0),this.constant=void 0!==e?e:0}function Q(t,e,n,i,r,a){this.planes=[void 0!==t?t:new J,void 0!==e?e:new J,void 0!==n?n:new J,void 0!==i?i:new J,void 0!==r?r:new J,void 0!==a?a:new J]}function K(t,e,i,s){function o(e,n,i,r){var a,s=e.geometry;a=b;var o=e.customDepthMaterial;return i&&(a=w,o=e.customDistanceMaterial),o?a=o:(o=!1,n.morphTargets&&(s&&s.isBufferGeometry?o=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(o=s.morphTargets&&0<s.morphTargets.length)),s=0,o&&(s|=1),(e=e.isSkinnedMesh&&n.skinning)&&(s|=2),a=a[s]),t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length&&(s=a.uuid,o=n.uuid,void 0===(e=T[s])&&(e={},T[s]=e),void 0===(s=e[o])&&(s=a.clone(),e[o]=s),a=s),a.visible=n.visible,a.wireframe=n.wireframe,o=n.side,I.renderSingleSided&&2==o&&(o=0),I.renderReverseSided&&(0===o?o=1:1===o&&(o=0)),a.side=o,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,i&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(r),a}function c(t,e,n){if(!1!==t.visible){0!=(t.layers.mask&e.layers.mask)&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!1===t.frustumCulled||!0===f.intersectsObject(t))&&!0===t.material.visible&&(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),x.push(t));for(var i=0,r=(t=t.children).length;i<r;i++)c(t[i],e,n)}}var h=t.context,d=t.state,f=new Q,p=new u,m=e.shadows,g=new n,v=new n(s.maxTextureSize,s.maxTextureSize),y=new l,_=new l,x=[],b=Array(4),w=Array(4),T={},M=[new l(1,0,0),new l(-1,0,0),new l(0,0,1),new l(0,0,-1),new l(0,1,0),new l(0,-1,0)],S=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,-1)],E=[new r,new r,new r,new r,new r,new r];(e=new X).depthPacking=3201,e.clipping=!0,s=_r.distanceRGBA;for(var C=mr.clone(s.uniforms),A=0;4!==A;++A){var L=0!=(1&A),P=0!=(2&A),R=e.clone();R.morphTargets=L,R.skinning=P,b[A]=R,L=new q({defines:{USE_SHADOWMAP:""},uniforms:C,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,morphTargets:L,skinning:P,clipping:!0}),w[A]=L}var I=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.renderSingleSided=this.renderReverseSided=!0,this.render=function(e,n){if(!1!==I.enabled&&(!1!==I.autoUpdate||!1!==I.needsUpdate)&&0!==m.length){d.buffers.color.setClear(1,1,1,1),d.disable(h.BLEND),d.setDepthTest(!0),d.setScissorTest(!1);for(var r,s,l=0,u=m.length;l<u;l++){var b=m[l],w=b.shadow;if(void 0===w)console.warn("THREE.WebGLShadowMap:",b,"has no shadow.");else{var T=w.camera;if(g.copy(w.mapSize),g.min(v),b&&b.isPointLight){r=6,s=!0;var C=g.x,A=g.y;E[0].set(2*C,A,C,A),E[1].set(0,A,C,A),E[2].set(3*C,A,C,A),E[3].set(C,A,C,A),E[4].set(3*C,0,C,A),E[5].set(C,0,C,A),g.x*=4,g.y*=2}else r=1,s=!1;for(null===w.map&&(w.map=new a(g.x,g.y,{minFilter:1003,magFilter:1003,format:1023}),T.updateProjectionMatrix()),w.isSpotLightShadow&&w.update(b),w&&w.isRectAreaLightShadow&&w.update(b),C=w.map,w=w.matrix,_.setFromMatrixPosition(b.matrixWorld),T.position.copy(_),t.setRenderTarget(C),t.clear(),C=0;C<r;C++){s?(y.copy(T.position),y.add(M[C]),T.up.copy(S[C]),T.lookAt(y),d.viewport(E[C])):(y.setFromMatrixPosition(b.target.matrixWorld),T.lookAt(y)),T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(T.projectionMatrix),w.multiply(T.matrixWorldInverse),p.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),f.setFromMatrix(p),x.length=0,c(e,n,T);A=0;for(var L=x.length;A<L;A++){var P=x[A],R=i.update(P);if((z=P.material)&&z.isMultiMaterial)for(var O=R.groups,z=z.materials,D=0,N=O.length;D<N;D++){var k=O[D],B=z[k.materialIndex];!0===B.visible&&(B=o(P,B,s,_),t.renderBufferDirect(T,null,R,B,P,k))}else B=o(P,z,s,_),t.renderBufferDirect(T,null,R,B,P,null)}}}}r=t.getClearColor(),s=t.getClearAlpha(),t.setClearColor(r,s),I.needsUpdate=!1}}}function tt(t,e){this.origin=void 0!==t?t:new l,this.direction=void 0!==e?e:new l}function et(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||et.DefaultOrder}function nt(){this.mask=1}function it(){Object.defineProperty(this,"id",{value:br++}),this.uuid=lr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=it.DefaultUp.clone();var t=new l,e=new et,n=new o,i=new l(1,1,1);e.onChange((function(){n.setFromEuler(e,!1)})),n.onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new u},normalMatrix:{value:new Z}}),this.matrix=new u,this.matrixWorld=new u,this.matrixAutoUpdate=it.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new nt,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function rt(t,e){this.start=void 0!==t?t:new l,this.end=void 0!==e?e:new l}function at(t,e,n){this.a=void 0!==t?t:new l,this.b=void 0!==e?e:new l,this.c=void 0!==n?n:new l}function st(t,e,n,i,r,a){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new l,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new U,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function ot(t){W.call(this),this.type="MeshBasicMaterial",this.color=new U(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(t)}function lt(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=lr.generateUUID(),this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function ut(t,e){lt.call(this,new Int8Array(t),e)}function ct(t,e){lt.call(this,new Uint8Array(t),e)}function ht(t,e){lt.call(this,new Uint8ClampedArray(t),e)}function dt(t,e){lt.call(this,new Int16Array(t),e)}function ft(t,e){lt.call(this,new Uint16Array(t),e)}function pt(t,e){lt.call(this,new Int32Array(t),e)}function mt(t,e){lt.call(this,new Uint32Array(t),e)}function gt(t,e){lt.call(this,new Float32Array(t),e)}function vt(t,e){lt.call(this,new Float64Array(t),e)}function yt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function _t(t){for(var e=t.length,n=-1/0;e--;)t[e]>n&&(n=t[e]);return n}function xt(){Object.defineProperty(this,"id",{value:wr++}),this.uuid=lr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function bt(){Object.defineProperty(this,"id",{value:wr++}),this.uuid=lr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0}}function wt(t,e){it.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new bt,this.material=void 0!==e?e:new ot({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Tt(t,e,n,i,r,a){xt.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new Mt(t,e,n,i,r,a)),this.mergeVertices()}function Mt(t,e,n,i,r,a){function s(t,e,n,i,r,a,s,m,g,v,y){var _=a/g,x=s/v,b=a/2,w=s/2,T=m/2;s=g+1;var M,S,E=v+1,C=a=0,A=new l;for(S=0;S<E;S++){var L=S*x-w;for(M=0;M<s;M++)A[t]=(M*_-b)*i,A[e]=L*r,A[n]=T,c.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=0<m?1:-1,h.push(A.x,A.y,A.z),d.push(M/g),d.push(1-S/v),a+=1}for(S=0;S<v;S++)for(M=0;M<g;M++)t=f+M+s*(S+1),e=f+(M+1)+s*(S+1),n=f+(M+1)+s*S,u.push(f+M+s*S,t,n),u.push(t,e,n),C+=6;o.addGroup(p,C,y),p+=C,f+=a}bt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var o=this;i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var u=[],c=[],h=[],d=[],f=0,p=0;s("z","y","x",-1,-1,n,e,t,a,r,0),s("z","y","x",1,-1,n,e,-t,a,r,1),s("x","z","y",1,1,t,n,e,i,a,2),s("x","z","y",1,-1,t,n,-e,i,a,3),s("x","y","z",1,-1,t,e,n,i,r,4),s("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(u),this.addAttribute("position",new gt(c,3)),this.addAttribute("normal",new gt(h,3)),this.addAttribute("uv",new gt(d,2))}function St(t,e,n,i){xt.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Et(t,e,n,i))}function Et(t,e,n,i){bt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r=t/2,a=e/2,s=(n=Math.floor(n)||1)+1,o=(i=Math.floor(i)||1)+1,l=t/n,u=e/i,c=[],h=[],d=[],f=[];for(t=0;t<o;t++){var p=t*u-a;for(e=0;e<s;e++)h.push(e*l-r,-p,0),d.push(0,0,1),f.push(e/n),f.push(1-t/i)}for(t=0;t<i;t++)for(e=0;e<n;e++)r=e+s*(t+1),a=e+1+s*(t+1),o=e+1+s*t,c.push(e+s*t,r,o),c.push(r,a,o);this.setIndex(c),this.addAttribute("position",new gt(h,3)),this.addAttribute("normal",new gt(d,3)),this.addAttribute("uv",new gt(f,2))}function Ct(){it.call(this),this.type="Camera",this.matrixWorldInverse=new u,this.projectionMatrix=new u}function At(t,e,n,i){Ct.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Lt(t,e,n,i,r,a){Ct.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Pt(t,e,n){var i,r,a;return{setMode:function(t){i=t},setIndex:function(n){n.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(r=t.UNSIGNED_INT,a=4):n.array instanceof Uint16Array?(r=t.UNSIGNED_SHORT,a=2):(r=t.UNSIGNED_BYTE,a=1)},render:function(e,s){t.drawElements(i,s,r,e*a),n.calls++,n.vertices+=s,i===t.TRIANGLES&&(n.faces+=s/3)},renderInstances:function(s,o,l){var u=e.get("ANGLE_instanced_arrays");null===u?console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(u.drawElementsInstancedANGLE(i,l,r,o*a,s.maxInstancedCount),n.calls++,n.vertices+=l*s.maxInstancedCount,i===t.TRIANGLES&&(n.faces+=s.maxInstancedCount*l/3))}}}function Rt(t,e,n){var i;return{setMode:function(t){i=t},render:function(e,r){t.drawArrays(i,e,r),n.calls++,n.vertices+=r,i===t.TRIANGLES&&(n.faces+=r/3)},renderInstances:function(r){var a=e.get("ANGLE_instanced_arrays");if(null===a)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var s=(s=r.attributes.position).isInterleavedBufferAttribute?s.data.count:s.count;a.drawArraysInstancedANGLE(i,0,s,r.maxInstancedCount),n.calls++,n.vertices+=s*r.maxInstancedCount,i===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*s/3)}}}}function It(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var i;switch(e.type){case"DirectionalLight":i={direction:new l,color:new U,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":i={position:new l,direction:new l,color:new U,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":i={position:new l,color:new U,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"HemisphereLight":i={direction:new l,skyColor:new U,groundColor:new U};break;case"RectAreaLight":i={color:new U,position:new l,halfWidth:new l,halfHeight:new l}}return t[e.id]=i}}}function Ot(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),!1===t.getShaderParameter(i,t.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),function(t){t=t.split("\n");for(var e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(n)),i}function zt(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+t)}}function Dt(t,e){var n=zt(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Nt(t,e){var n=zt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function kt(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Bt(t){return""!==t}function Ft(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Ut(t){return t.replace(/#include +<([\w\d.]+)>/g,(function(t,e){var n=gr[e];if(void 0===n)throw Error("Can not resolve #include <"+e+">");return Ut(n)}))}function Ht(t){return t.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(t,e,n,i){for(t="",e=parseInt(e);e<parseInt(n);e++)t+=i.replace(/\[ i \]/g,"[ "+e+" ]");return t}))}function Gt(t,e,n,i){var r=t.context,a=n.extensions,s=n.defines,o=n.__webglShader.vertexShader,l=n.__webglShader.fragmentShader,u="SHADOWMAP_TYPE_BASIC";1===i.shadowMapType?u="SHADOWMAP_TYPE_PCF":2===i.shadowMapType&&(u="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(i.envMap){switch(n.envMap.mapping){case 301:case 302:c="ENVMAP_TYPE_CUBE";break;case 306:case 307:c="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:c="ENVMAP_TYPE_EQUIREC";break;case 305:c="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:h="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:d="ENVMAP_BLENDING_MULTIPLY";break;case 1:d="ENVMAP_BLENDING_MIX";break;case 2:d="ENVMAP_BLENDING_ADD"}}var f,p,m=0<t.gammaFactor?t.gammaFactor:1,g=(a=function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bt).join("\n")}(a,i,t.extensions),function(t){var e,n=[];for(e in t){var i=t[e];!1!==i&&n.push("#define "+e+" "+i)}return n.join("\n")}(s)),v=r.createProgram();return n.isRawShaderMaterial?(s=[g,"\n"].filter(Bt).join("\n"),u=[a,g,"\n"].filter(Bt).join("\n")):(s=["precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,g,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bt).join("\n"),u=[a,"precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,g,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"","#define GAMMA_FACTOR "+m,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+h:"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(i.numClippingPlanes-i.numClipIntersection),i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",i.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==i.toneMapping?"#define TONE_MAPPING":"",0!==i.toneMapping?gr.tonemapping_pars_fragment:"",0!==i.toneMapping?kt("toneMapping",i.toneMapping):"",i.outputEncoding||i.mapEncoding||i.envMapEncoding||i.emissiveMapEncoding?gr.encodings_pars_fragment:"",i.mapEncoding?Dt("mapTexelToLinear",i.mapEncoding):"",i.envMapEncoding?Dt("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMapEncoding?Dt("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.outputEncoding?Nt("linearToOutputTexel",i.outputEncoding):"",i.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Bt).join("\n")),o=Ft(o=Ut(o),i),l=Ft(l=Ut(l),i),n.isShaderMaterial||(o=Ht(o),l=Ht(l)),l=u+l,o=Ot(r,r.VERTEX_SHADER,s+o),l=Ot(r,r.FRAGMENT_SHADER,l),r.attachShader(v,o),r.attachShader(v,l),void 0!==n.index0AttributeName?r.bindAttribLocation(v,0,n.index0AttributeName):!0===i.morphTargets&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),i=r.getProgramInfoLog(v),c=r.getShaderInfoLog(o),h=r.getShaderInfoLog(l),m=d=!0,!1===r.getProgramParameter(v,r.LINK_STATUS)?(d=!1,console.error("THREE.WebGLProgram: shader error: ",r.getError(),"gl.VALIDATE_STATUS",r.getProgramParameter(v,r.VALIDATE_STATUS),"gl.getProgramInfoLog",i,c,h)):""!==i?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",i):""!==c&&""!==h||(m=!1),m&&(this.diagnostics={runnable:d,material:n,programLog:i,vertexShader:{log:c,prefix:s},fragmentShader:{log:h,prefix:u}}),r.deleteShader(o),r.deleteShader(l),this.getUniforms=function(){return void 0===f&&(f=new F(r,v,t)),f},this.getAttributes=function(){if(void 0===p){for(var t={},e=r.getProgramParameter(v,r.ACTIVE_ATTRIBUTES),n=0;n<e;n++){var i=r.getActiveAttrib(v,n).name;t[i]=r.getAttribLocation(v,i)}p=t}return p},this.destroy=function(){r.deleteProgram(v),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Tr++,this.code=e,this.usedTimes=1,this.program=v,this.vertexShader=o,this.fragmentShader=l,this}function jt(t,e){function n(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=3e3,3e3===n&&e&&(n=3007),n}var i=[],r={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},a="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking".split(" ");this.getParameters=function(i,a,s,o,l,u){var c,h=r[i.type];e.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture?c=1024:(c=Math.floor((e.maxVertexUniforms-20)/4),void 0!==u&&u&&u.isSkinnedMesh&&((c=Math.min(u.skeleton.bones.length,c))<u.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+u.skeleton.bones.length+", this GPU supports just "+c+" (try OpenGL instead of ANGLE)")));var d=t.getPrecision();null!==i.precision&&((d=e.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead."));var f=t.getCurrentRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:e.vertexTextures,outputEncoding:n(f?f.texture:null,t.gammaOutput),map:!!i.map,mapEncoding:n(i.map,t.gammaInput),envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,envMapEncoding:n(i.envMap,t.gammaInput),envMapCubeUV:!!i.envMap&&(306===i.envMap.mapping||307===i.envMap.mapping),lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:n(i.emissiveMap,t.gammaInput),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,combine:i.combine,vertexColors:i.vertexColors,fog:!!s,useFog:i.fog,fogExp:s&&s.isFogExp2,flatShading:1===i.shading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:i.skinning,maxBones:c,useVertexTexture:e.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numClippingPlanes:o,numClipIntersection:l,shadowMapEnabled:t.shadowMap.enabled&&u.receiveShadow&&0<a.shadows.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking}},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);for(i=0;i<a.length;i++)n.push(e[a[i]]);return n.join()},this.acquireProgram=function(e,n,r){for(var a,s=0,o=i.length;s<o;s++){var l=i[s];if(l.code===r){++(a=l).usedTimes;break}}return void 0===a&&(a=new Gt(t,r,e,n),i.push(a)),a},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function Vt(t,e,n){function i(t){var s=t.target;null!==(t=a[s.id]).index&&r(t.index);var o,l=t.attributes;for(o in l)r(l[o]);s.removeEventListener("dispose",i),delete a[s.id],(o=e.get(s)).wireframe&&r(o.wireframe),e.delete(s),(s=e.get(t)).wireframe&&r(s.wireframe),e.delete(t),n.memory.geometries--}function r(n){var i;void 0!==(i=n.isInterleavedBufferAttribute?e.get(n.data).__webglBuffer:e.get(n).__webglBuffer)&&(t.deleteBuffer(i),n.isInterleavedBufferAttribute?e.delete(n.data):e.delete(n))}var a={};return{get:function(t){var e,r=t.geometry;return void 0!==a[r.id]?a[r.id]:(r.addEventListener("dispose",i),r.isBufferGeometry?e=r:r.isGeometry&&(void 0===r._bufferGeometry&&(r._bufferGeometry=(new bt).setFromObject(t)),e=r._bufferGeometry),a[r.id]=e,n.memory.geometries++,e)}}}function Wt(t,e,n){function i(n,i){var r=n.isInterleavedBufferAttribute?n.data:n,a=e.get(r);if(void 0===a.__webglBuffer){a.__webglBuffer=t.createBuffer(),t.bindBuffer(i,a.__webglBuffer),t.bufferData(i,r.array,r.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW);var s=t.FLOAT,o=r.array;o instanceof Float32Array?s=t.FLOAT:o instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):o instanceof Uint16Array?s=t.UNSIGNED_SHORT:o instanceof Int16Array?s=t.SHORT:o instanceof Uint32Array?s=t.UNSIGNED_INT:o instanceof Int32Array?s=t.INT:o instanceof Int8Array?s=t.BYTE:o instanceof Uint8Array&&(s=t.UNSIGNED_BYTE),a.bytesPerElement=o.BYTES_PER_ELEMENT,a.type=s,a.version=r.version,r.onUploadCallback()}else a.version!==r.version&&(t.bindBuffer(i,a.__webglBuffer),!1===r.dynamic?t.bufferData(i,r.array,t.STATIC_DRAW):-1===r.updateRange.count?t.bufferSubData(i,0,r.array):0===r.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,r.updateRange.offset*r.array.BYTES_PER_ELEMENT,r.array.subarray(r.updateRange.offset,r.updateRange.offset+r.updateRange.count)),r.updateRange.count=0),a.version=r.version)}var r=new Vt(t,e,n);return{getAttributeBuffer:function(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer},getAttributeProperties:function(t){return t.isInterleavedBufferAttribute?e.get(t.data):e.get(t)},getWireframeAttribute:function(n){var r=e.get(n);if(void 0!==r.wireframe)return r.wireframe;var a=[],s=n.index;if(n=n.attributes,null!==s){n=0;for(var o=(s=s.array).length;n<o;n+=3){var l=s[n+0],u=s[n+1],c=s[n+2];a.push(l,u,u,c,c,l)}}else for(s=n.position.array,n=0,o=s.length/3-1;n<o;n+=3)l=n+0,u=n+1,c=n+2,a.push(l,u,u,c,c,l);return i(a=new(65535<_t(a)?mt:ft)(a,1),t.ELEMENT_ARRAY_BUFFER),r.wireframe=a},update:function(e){var n=r.get(e);e.geometry.isGeometry&&n.updateFromObject(e),e=n.index;var a=n.attributes;for(var s in null!==e&&i(e,t.ELEMENT_ARRAY_BUFFER),a)i(a[s],t.ARRAY_BUFFER);for(s in e=n.morphAttributes)for(var o=0,l=(a=e[s]).length;o<l;o++)i(a[o],t.ARRAY_BUFFER);return n}}}function qt(t,e,n,i,r,a,s){function o(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(t.width*n),i.height=Math.floor(t.height*n),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i}return t}function l(t){return lr.isPowerOfTwo(t.width)&&lr.isPowerOfTwo(t.height)}function u(e){return 1003===e||1004===e||1005===e?t.NEAREST:t.LINEAR}function c(e){(e=e.target).removeEventListener("dispose",c);t:{var n=i.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)break t;t.deleteTexture(n.__webglTexture)}i.delete(e)}g.textures--}function h(e){(e=e.target).removeEventListener("dispose",h);var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(r=0;6>r;r++)t.deleteFramebuffer(n.__webglFramebuffer[r]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[r]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.delete(e.texture),i.delete(e)}g.textures--}function d(e,s){var u=i.get(e);if(0<e.version&&u.__version!==e.version)if(void 0===(d=e.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==d.complete){void 0===u.__webglInit&&(u.__webglInit=!0,e.addEventListener("dispose",c),u.__webglTexture=t.createTexture(),g.textures++),n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_2D,u.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,e.unpackAlignment);var h=o(e.image,r.maxTextureSize);if((1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)&&!1===l(h))if((d=h)instanceof HTMLImageElement||d instanceof HTMLCanvasElement){(p=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=lr.nearestPowerOfTwo(d.width),p.height=lr.nearestPowerOfTwo(d.height),p.getContext("2d").drawImage(d,0,0,p.width,p.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+d.width+"x"+d.height+"). Resized to "+p.width+"x"+p.height,d),h=p}else h=d;var d=l(h),p=a(e.format),m=a(e.type);f(t.TEXTURE_2D,e,d);var y=e.mipmaps;if(e.isDepthTexture){if(y=t.DEPTH_COMPONENT,1015===e.type){if(!v)throw Error("Float Depth Texture only supported in WebGL2.0");y=t.DEPTH_COMPONENT32F}else v&&(y=t.DEPTH_COMPONENT16);1026===e.format&&y===t.DEPTH_COMPONENT&&1012!==e.type&&1014!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),e.type=1012,m=a(e.type)),1027===e.format&&(y=t.DEPTH_STENCIL,1020!==e.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),e.type=1020,m=a(e.type))),n.texImage2D(t.TEXTURE_2D,0,y,h.width,h.height,0,p,m,null)}else if(e.isDataTexture)if(0<y.length&&d){for(var _=0,x=y.length;_<x;_++)h=y[_],n.texImage2D(t.TEXTURE_2D,_,p,h.width,h.height,0,p,m,h.data);e.generateMipmaps=!1}else n.texImage2D(t.TEXTURE_2D,0,p,h.width,h.height,0,p,m,h.data);else if(e.isCompressedTexture)for(_=0,x=y.length;_<x;_++)h=y[_],1023!==e.format&&1022!==e.format?-1<n.getCompressedTextureFormats().indexOf(p)?n.compressedTexImage2D(t.TEXTURE_2D,_,p,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,_,p,h.width,h.height,0,p,m,h.data);else if(0<y.length&&d){for(_=0,x=y.length;_<x;_++)h=y[_],n.texImage2D(t.TEXTURE_2D,_,p,p,m,h);e.generateMipmaps=!1}else n.texImage2D(t.TEXTURE_2D,0,p,p,m,h);return e.generateMipmaps&&d&&t.generateMipmap(t.TEXTURE_2D),u.__version=e.version,void(e.onUpdate&&e.onUpdate(e))}console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_2D,u.__webglTexture)}function f(n,s,o){o?(t.texParameteri(n,t.TEXTURE_WRAP_S,a(s.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,a(s.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,a(s.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,a(s.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),1001===s.wrapS&&1001===s.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),t.texParameteri(n,t.TEXTURE_MAG_FILTER,u(s.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,u(s.minFilter)),1003!==s.minFilter&&1006!==s.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),!(o=e.get("EXT_texture_filter_anisotropic"))||1015===s.type&&null===e.get("OES_texture_float_linear")||1016===s.type&&null===e.get("OES_texture_half_float_linear")||!(1<s.anisotropy||i.get(s).__currentAnisotropy)||(t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}function p(e,r,s,o){var l=a(r.texture.format),u=a(r.texture.type);n.texImage2D(o,0,l,r.width,r.height,0,l,u,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,s,o,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function m(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}var g=s.memory,v="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=d,this.setTextureCube=function(e,s){var u=i.get(e);if(6===e.image.length)if(0<e.version&&u.__version!==e.version){u.__image__webglTextureCube||(e.addEventListener("dispose",c),u.__image__webglTextureCube=t.createTexture(),g.textures++),n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var h=e&&e.isCompressedTexture,d=e.image[0]&&e.image[0].isDataTexture,p=[],m=0;6>m;m++)p[m]=h||d?d?e.image[m].image:e.image[m]:o(e.image[m],r.maxCubemapSize);var v=l(p[0]),y=a(e.format),_=a(e.type);for(f(t.TEXTURE_CUBE_MAP,e,v),m=0;6>m;m++)if(h)for(var x,b=p[m].mipmaps,w=0,T=b.length;w<T;w++)x=b[w],1023!==e.format&&1022!==e.format?-1<n.getCompressedTextureFormats().indexOf(y)?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,w,y,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,w,y,x.width,x.height,0,y,_,x.data);else d?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,p[m].width,p[m].height,0,y,_,p[m].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,y,_,p[m]);e.generateMipmaps&&v&&t.generateMipmap(t.TEXTURE_CUBE_MAP),u.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,r){n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_CUBE_MAP,i.get(e).__webglTexture)},this.setupRenderTarget=function(e){var r=i.get(e),a=i.get(e.texture);e.addEventListener("dispose",h),a.__webglTexture=t.createTexture(),g.textures++;var s=!0===e.isWebGLRenderTargetCube,o=l(e);if(s){r.__webglFramebuffer=[];for(var u=0;6>u;u++)r.__webglFramebuffer[u]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(s){for(n.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture),f(t.TEXTURE_CUBE_MAP,e.texture,o),u=0;6>u;u++)p(r.__webglFramebuffer[u],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+u);e.texture.generateMipmaps&&o&&t.generateMipmap(t.TEXTURE_CUBE_MAP),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,a.__webglTexture),f(t.TEXTURE_2D,e.texture,o),p(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&o&&t.generateMipmap(t.TEXTURE_2D),n.bindTexture(t.TEXTURE_2D,null);if(e.depthBuffer){if(r=i.get(e),a=!0===e.isWebGLRenderTargetCube,e.depthTexture){if(a)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(i.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),d(e.depthTexture,0),r=i.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(1027!==e.depthTexture.format)throw Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}else if(a)for(r.__webglDepthbuffer=[],a=0;6>a;a++)t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=t.createRenderbuffer(),m(r.__webglDepthbuffer[a],e);else t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),m(r.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}},this.updateRenderTargetMipmap=function(e){var r=e.texture;r.generateMipmaps&&l(e)&&1003!==r.minFilter&&1006!==r.minFilter&&(e=e&&e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,r=i.get(r).__webglTexture,n.bindTexture(e,r),t.generateMipmap(e),n.bindTexture(e,null))}}function Xt(){var t={};return{get:function(e){e=e.uuid;var n=t[e];return void 0===n&&(n={},t[e]=n),n},delete:function(e){delete t[e.uuid]},clear:function(){t={}}}}function Yt(t,e,n){function i(e,n,i){var r=new Uint8Array(4),a=t.createTexture();for(t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST),e=0;e<i;e++)t.texImage2D(n+e,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return a}function a(e){!0!==_[e]&&(t.enable(e),_[e]=!0)}function s(e){!1!==_[e]&&(t.disable(e),_[e]=!1)}function o(e,i,r,o,l,u,c,h){0!==e?a(t.BLEND):s(t.BLEND),e===b&&h===A||(2===e?h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):3===e?h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):4===e?h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):h?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),b=e,A=h),5===e?(l=l||i,u=u||r,c=c||o,i===w&&l===S||(t.blendEquationSeparate(n(i),n(l)),w=i,S=l),r===T&&o===M&&u===E&&c===C||(t.blendFuncSeparate(n(r),n(o),n(u),n(c)),T=r,M=o,E=u,C=c)):C=E=S=M=T=w=null}function l(t){f.setFunc(t)}function u(e){L!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),L=e)}function c(e){0!==e?(a(t.CULL_FACE),e!==P&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):s(t.CULL_FACE),P=e}function h(e){void 0===e&&(e=t.TEXTURE0+D-1),k!==e&&(t.activeTexture(e),k=e)}var d=new function(){var e=!1,n=new r,i=null,a=new r;return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,r,s,o){!0===o&&(e*=s,i*=s,r*=s),n.set(e,i,r,s),!1===a.equals(n)&&(t.clearColor(e,i,r,s),a.copy(n))},reset:function(){e=!1,i=null,a.set(0,0,0,1)}}},f=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(e){e?a(t.DEPTH_TEST):s(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,r=i=n=null}}},p=new function(){var e=!1,n=null,i=null,r=null,o=null,l=null,u=null,c=null,h=null;return{setTest:function(e){e?a(t.STENCIL_TEST):s(t.STENCIL_TEST)},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a)},setOp:function(e,n,i){l===e&&u===n&&c===i||(t.stencilOp(e,n,i),l=e,u=n,c=i)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,h=c=u=l=o=r=i=n=null}}},m=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=new Uint8Array(m),v=new Uint8Array(m),y=new Uint8Array(m),_={},x=null,b=null,w=null,T=null,M=null,S=null,E=null,C=null,A=!1,L=null,P=null,R=null,I=null,O=null,z=null,D=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),N=(m=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),1<=parseFloat(m)),k=null,B={},F=new r,U=new r,H={};return H[t.TEXTURE_2D]=i(t.TEXTURE_2D,t.TEXTURE_2D,1),H[t.TEXTURE_CUBE_MAP]=i(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:d,depth:f,stencil:p},init:function(){d.setClear(0,0,0,1),f.setClear(1),p.setClear(0),a(t.DEPTH_TEST),l(3),u(!1),c(1),a(t.CULL_FACE),a(t.BLEND),o(1)},initAttributes:function(){for(var t=0,e=g.length;t<e;t++)g[t]=0},enableAttribute:function(n){g[n]=1,0===v[n]&&(t.enableVertexAttribArray(n),v[n]=1),0!==y[n]&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),y[n]=0)},enableAttributeAndDivisor:function(e,n,i){g[e]=1,0===v[e]&&(t.enableVertexAttribArray(e),v[e]=1),y[e]!==n&&(i.vertexAttribDivisorANGLE(e,n),y[e]=n)},disableUnusedAttributes:function(){for(var e=0,n=v.length;e!==n;++e)v[e]!==g[e]&&(t.disableVertexAttribArray(e),v[e]=0)},enable:a,disable:s,getCompressedTextureFormats:function(){if(null===x&&(x=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)x.push(n[i]);return x},setBlending:o,setColorWrite:function(t){d.setMask(t)},setDepthTest:function(t){f.setTest(t)},setDepthWrite:function(t){f.setMask(t)},setDepthFunc:l,setStencilTest:function(t){p.setTest(t)},setStencilWrite:function(t){p.setMask(t)},setStencilFunc:function(t,e,n){p.setFunc(t,e,n)},setStencilOp:function(t,e,n){p.setOp(t,e,n)},setFlipSided:u,setCullFace:c,setLineWidth:function(e){e!==R&&(N&&t.lineWidth(e),R=e)},setPolygonOffset:function(e,n,i){e?(a(t.POLYGON_OFFSET_FILL),(I!==n||O!==i)&&(t.polygonOffset(n,i),I=n,O=i)):s(t.POLYGON_OFFSET_FILL)},getScissorTest:function(){return z},setScissorTest:function(e){(z=e)?a(t.SCISSOR_TEST):s(t.SCISSOR_TEST)},activeTexture:h,bindTexture:function(e,n){null===k&&h();var i=B[k];void 0===i&&(i={type:void 0,texture:void 0},B[k]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||H[e]),i.type=e,i.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error(t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error(t)}},scissor:function(e){!1===F.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),F.copy(e))},viewport:function(e){!1===U.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),U.copy(e))},reset:function(){for(var e=0;e<v.length;e++)1===v[e]&&(t.disableVertexAttribArray(e),v[e]=0);_={},k=x=null,B={},P=L=b=null,d.reset(),f.reset(),p.reset()}}}function $t(t,e,n){function i(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}var r,a=void 0!==n.precision?n.precision:"highp";(s=i(a))!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s),n=!0===n.logarithmicDepthBuffer&&!!e.get("EXT_frag_depth");var s=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),o=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=t.getParameter(t.MAX_TEXTURE_SIZE),u=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),c=t.getParameter(t.MAX_VERTEX_ATTRIBS),h=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),d=t.getParameter(t.MAX_VARYING_VECTORS),f=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),p=0<o,m=!!e.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:n,maxTextures:s,maxVertexTextures:o,maxTextureSize:l,maxCubemapSize:u,maxAttributes:c,maxVertexUniforms:h,maxVaryings:d,maxFragmentUniforms:f,vertexTextures:p,floatFragmentTextures:m,floatVertexTextures:p&&m}}function Zt(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=t.getExtension("WEBGL_compressed_texture_etc1");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i}}}function Jt(){function t(){u.value!==i&&(u.value=i,u.needsUpdate=0<r),n.numPlanes=r,n.numIntersection=0}function e(t,e,i,r){var a=null!==t?t.length:0,s=null;if(0!==a){if(s=u.value,!0!==r||null===s)for(r=i+4*a,e=e.matrixWorldInverse,l.getNormalMatrix(e),(null===s||s.length<r)&&(s=new Float32Array(r)),r=0;r!==a;++r,i+=4)o.copy(t[r]).applyMatrix4(e,l),o.normal.toArray(s,i),s[i+3]=o.constant;u.value=s,u.needsUpdate=!0}return n.numPlanes=a,s}var n=this,i=null,r=0,a=!1,s=!1,o=new J,l=new Z,u={value:null,needsUpdate:!1};this.uniform=u,this.numIntersection=this.numPlanes=0,this.init=function(t,n,s){var o=0!==t.length||n||0!==r||a;return a=n,i=e(t,s,0),r=t.length,o},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,o,l,c,h,d){if(!a||null===n||0===n.length||s&&!l)s?e(null):t();else{var f=4*(l=s?0:r),p=h.clippingState||null;for(u.value=p,p=e(n,c,f,d),n=0;n!==f;++n)p[n]=i[n];h.clippingState=p,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=l}}}function Qt(t){function e(){zt.init(),zt.scissor(J.copy(ut).multiplyScalar(lt)),zt.viewport(et.copy(ht).multiplyScalar(lt)),zt.buffers.color.setClear(it.r,it.g,it.b,rt,C)}function n(){Z=H=null,Y="",X=-1,zt.reset()}function i(t){t.preventDefault(),n(),e(),Dt.clear()}function a(t){(t=t.target).removeEventListener("dispose",a),s(t),Dt.delete(t)}function s(t){var e=Dt.get(t).program;t.program=void 0,void 0!==e&&Bt.releaseProgram(e)}function o(t,e){return Math.abs(e[0])-Math.abs(t[0])}function c(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function h(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function d(t,e,n,i,r){var a;n.transparent?(i=I,a=++O):(i=P,a=++R),void 0!==(a=i[a])?(a.id=t.id,a.object=t,a.geometry=e,a.material=n,a.z=yt.z,a.group=r):(a={id:t.id,object:t,geometry:e,material:n,z:yt.z,group:r},i.push(a))}function f(t){if(!dt.intersectsSphere(t))return!1;var e=ft.numPlanes;if(0===e)return!0;var n=B.clippingPlanes,i=t.center;t=-t.radius;var r=0;do{if(n[r].distanceToPoint(i)<t)return!1}while(++r!==e);return!0}function p(t,e){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask))if(t.isLight)L.push(t);else if(t.isSprite){var n;(n=!1===t.frustumCulled)||(gt.center.set(0,0,0),gt.radius=.7071067811865476,gt.applyMatrix4(t.matrixWorld),n=!0===f(gt)),n&&D.push(t)}else if(t.isLensFlare)N.push(t);else if(t.isImmediateRenderObject)!0===B.sortObjects&&(yt.setFromMatrixPosition(t.matrixWorld),yt.applyMatrix4(vt)),d(t,null,t.material,yt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),(n=!1===t.frustumCulled)||(null===(n=t.geometry).boundingSphere&&n.computeBoundingSphere(),gt.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),n=!0===f(gt)),n)){if(!0===(a=t.material).visible)if(!0===B.sortObjects&&(yt.setFromMatrixPosition(t.matrixWorld),yt.applyMatrix4(vt)),n=kt.update(t),a.isMultiMaterial)for(var i=n.groups,r=a.materials,a=0,s=i.length;a<s;a++){var o=i[a],l=r[o.materialIndex];!0===l.visible&&d(t,n,l,yt.z,o)}else d(t,n,a,yt.z,null)}for(a=0,s=(n=t.children).length;a<s;a++)p(n[a],e)}}function m(t,e,n,i){for(var r=0,a=t.length;r<a;r++){var s=(u=t[r]).object,o=u.geometry,l=void 0===i?u.material:i,u=u.group;if(s.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(B,e,n,o,l,u),s.isImmediateRenderObject){g(l);var c=v(n,e.fog,l,s);Y="",s.render((function(t){B.renderBufferImmediate(t,c,l)}))}else B.renderBufferDirect(n,e.fog,o,l,s,u);s.onAfterRender(B,e,n,o,l,u)}}function g(t){2===t.side?zt.disable(k.CULL_FACE):zt.enable(k.CULL_FACE),zt.setFlipSided(1===t.side),!0===t.transparent?zt.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):zt.setBlending(0),zt.setDepthFunc(t.depthFunc),zt.setDepthTest(t.depthTest),zt.setDepthWrite(t.depthWrite),zt.setColorWrite(t.colorWrite),zt.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function v(t,e,n,i){nt=0;var r=Dt.get(n);if(pt&&(mt||t!==Z)&&ft.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,t===Z&&n.id===X),!1===n.needsUpdate&&(void 0===r.program||n.fog&&r.fog!==e||n.lights&&r.lightsHash!==Tt.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===ft.numPlanes&&r.numIntersection===ft.numIntersection||(n.needsUpdate=!0)),n.needsUpdate){t:{var o=Dt.get(n),l=Bt.getParameters(n,Tt,e,ft.numPlanes,ft.numIntersection,i),u=Bt.getProgramCode(n,l),c=o.program,h=!0;if(void 0===c)n.addEventListener("dispose",a);else if(c.code!==u)s(n);else{if(void 0!==l.shaderID)break t;h=!1}if(h&&(l.shaderID?(c=_r[l.shaderID],o.__webglShader={name:n.type,uniforms:mr.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}):o.__webglShader={name:n.type,uniforms:n.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader},n.__webglShader=o.__webglShader,c=Bt.acquireProgram(n,l,u),o.program=c,n.program=c),l=c.getAttributes(),n.morphTargets)for(u=n.numSupportedMorphTargets=0;u<B.maxMorphTargets;u++)0<=l["morphTarget"+u]&&n.numSupportedMorphTargets++;if(n.morphNormals)for(u=n.numSupportedMorphNormals=0;u<B.maxMorphNormals;u++)0<=l["morphNormal"+u]&&n.numSupportedMorphNormals++;l=o.__webglShader.uniforms,(n.isShaderMaterial||n.isRawShaderMaterial)&&!0!==n.clipping||(o.numClippingPlanes=ft.numPlanes,o.numIntersection=ft.numIntersection,l.clippingPlanes=ft.uniform),o.fog=e,o.lightsHash=Tt.hash,n.lights&&(l.ambientLightColor.value=Tt.ambient,l.directionalLights.value=Tt.directional,l.spotLights.value=Tt.spot,l.rectAreaLights.value=Tt.rectArea,l.pointLights.value=Tt.point,l.hemisphereLights.value=Tt.hemi,l.directionalShadowMap.value=Tt.directionalShadowMap,l.directionalShadowMatrix.value=Tt.directionalShadowMatrix,l.spotShadowMap.value=Tt.spotShadowMap,l.spotShadowMatrix.value=Tt.spotShadowMatrix,l.pointShadowMap.value=Tt.pointShadowMap,l.pointShadowMatrix.value=Tt.pointShadowMatrix),u=o.program.getUniforms(),l=F.seqWithValue(u.seq,l),o.uniformsList=l}n.needsUpdate=!1}var d=!1;h=c=!1,l=(o=r.program).getUniforms(),u=r.__webglShader.uniforms;if(o.id!==H&&(k.useProgram(o.program),H=o.id,h=c=d=!0),n.id!==X&&(X=n.id,c=!0),(d||t!==Z)&&(l.set(k,t,"projectionMatrix"),Ot.logarithmicDepthBuffer&&l.setValue(k,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==Z&&(Z=t,h=c=!0),(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap)&&(void 0!==(d=l.map.cameraPosition)&&d.setValue(k,yt.setFromMatrixPosition(t.matrixWorld))),(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&l.setValue(k,"viewMatrix",t.matrixWorldInverse),l.set(k,B,"toneMappingExposure"),l.set(k,B,"toneMappingWhitePoint")),n.skinning&&(l.setOptional(k,i,"bindMatrix"),l.setOptional(k,i,"bindMatrixInverse"),t=i.skeleton)&&(Ot.floatVertexTextures&&t.useVertexTexture?(l.set(k,t,"boneTexture"),l.set(k,t,"boneTextureWidth"),l.set(k,t,"boneTextureHeight")):l.setOptional(k,t,"boneMatrices")),c){var f;if(n.lights&&(t=h,u.ambientLightColor.needsUpdate=t,u.directionalLights.needsUpdate=t,u.pointLights.needsUpdate=t,u.spotLights.needsUpdate=t,u.rectAreaLights.needsUpdate=t,u.hemisphereLights.needsUpdate=t),e&&n.fog&&(u.fogColor.value=e.color,e.isFog?(u.fogNear.value=e.near,u.fogFar.value=e.far):e.isFogExp2&&(u.fogDensity.value=e.density)),n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshNormalMaterial||n.isMeshDepthMaterial)u.opacity.value=n.opacity,u.diffuse.value=n.color,n.emissive&&u.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),u.map.value=n.map,u.specularMap.value=n.specularMap,u.alphaMap.value=n.alphaMap,n.lightMap&&(u.lightMap.value=n.lightMap,u.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(u.aoMap.value=n.aoMap,u.aoMapIntensity.value=n.aoMapIntensity),n.map?f=n.map:n.specularMap?f=n.specularMap:n.displacementMap?f=n.displacementMap:n.normalMap?f=n.normalMap:n.bumpMap?f=n.bumpMap:n.roughnessMap?f=n.roughnessMap:n.metalnessMap?f=n.metalnessMap:n.alphaMap?f=n.alphaMap:n.emissiveMap&&(f=n.emissiveMap),void 0!==f&&(f.isWebGLRenderTarget&&(f=f.texture),e=f.offset,f=f.repeat,u.offsetRepeat.value.set(e.x,e.y,f.x,f.y)),u.envMap.value=n.envMap,u.flipEnvMap.value=n.envMap&&n.envMap.isCubeTexture?-1:1,u.reflectivity.value=n.reflectivity,u.refractionRatio.value=n.refractionRatio;n.isLineBasicMaterial?(u.diffuse.value=n.color,u.opacity.value=n.opacity):n.isLineDashedMaterial?(u.diffuse.value=n.color,u.opacity.value=n.opacity,u.dashSize.value=n.dashSize,u.totalSize.value=n.dashSize+n.gapSize,u.scale.value=n.scale):n.isPointsMaterial?(u.diffuse.value=n.color,u.opacity.value=n.opacity,u.size.value=n.size*lt,u.scale.value=.5*st,u.map.value=n.map,null!==n.map&&(f=n.map.offset,n=n.map.repeat,u.offsetRepeat.value.set(f.x,f.y,n.x,n.y))):n.isMeshLambertMaterial?n.emissiveMap&&(u.emissiveMap.value=n.emissiveMap):n.isMeshToonMaterial?(y(u,n),n.gradientMap&&(u.gradientMap.value=n.gradientMap)):n.isMeshPhongMaterial?y(u,n):n.isMeshPhysicalMaterial?(u.clearCoat.value=n.clearCoat,u.clearCoatRoughness.value=n.clearCoatRoughness,_(u,n)):n.isMeshStandardMaterial?_(u,n):n.isMeshDepthMaterial?n.displacementMap&&(u.displacementMap.value=n.displacementMap,u.displacementScale.value=n.displacementScale,u.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&(n.bumpMap&&(u.bumpMap.value=n.bumpMap,u.bumpScale.value=n.bumpScale),n.normalMap&&(u.normalMap.value=n.normalMap,u.normalScale.value.copy(n.normalScale)),n.displacementMap&&(u.displacementMap.value=n.displacementMap,u.displacementScale.value=n.displacementScale,u.displacementBias.value=n.displacementBias)),void 0!==u.ltcMat&&(u.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==u.ltcMag&&(u.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),F.upload(k,r.uniformsList,u,B)}return l.set(k,i,"modelViewMatrix"),l.set(k,i,"normalMatrix"),l.setValue(k,"modelMatrix",i.matrixWorld),o}function y(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function _(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function x(t){var e;if(1e3===t)return k.REPEAT;if(1001===t)return k.CLAMP_TO_EDGE;if(1002===t)return k.MIRRORED_REPEAT;if(1003===t)return k.NEAREST;if(1004===t)return k.NEAREST_MIPMAP_NEAREST;if(1005===t)return k.NEAREST_MIPMAP_LINEAR;if(1006===t)return k.LINEAR;if(1007===t)return k.LINEAR_MIPMAP_NEAREST;if(1008===t)return k.LINEAR_MIPMAP_LINEAR;if(1009===t)return k.UNSIGNED_BYTE;if(1017===t)return k.UNSIGNED_SHORT_4_4_4_4;if(1018===t)return k.UNSIGNED_SHORT_5_5_5_1;if(1019===t)return k.UNSIGNED_SHORT_5_6_5;if(1010===t)return k.BYTE;if(1011===t)return k.SHORT;if(1012===t)return k.UNSIGNED_SHORT;if(1013===t)return k.INT;if(1014===t)return k.UNSIGNED_INT;if(1015===t)return k.FLOAT;if(1016===t&&null!==(e=Ct.get("OES_texture_half_float")))return e.HALF_FLOAT_OES;if(1021===t)return k.ALPHA;if(1022===t)return k.RGB;if(1023===t)return k.RGBA;if(1024===t)return k.LUMINANCE;if(1025===t)return k.LUMINANCE_ALPHA;if(1026===t)return k.DEPTH_COMPONENT;if(1027===t)return k.DEPTH_STENCIL;if(100===t)return k.FUNC_ADD;if(101===t)return k.FUNC_SUBTRACT;if(102===t)return k.FUNC_REVERSE_SUBTRACT;if(200===t)return k.ZERO;if(201===t)return k.ONE;if(202===t)return k.SRC_COLOR;if(203===t)return k.ONE_MINUS_SRC_COLOR;if(204===t)return k.SRC_ALPHA;if(205===t)return k.ONE_MINUS_SRC_ALPHA;if(206===t)return k.DST_ALPHA;if(207===t)return k.ONE_MINUS_DST_ALPHA;if(208===t)return k.DST_COLOR;if(209===t)return k.ONE_MINUS_DST_COLOR;if(210===t)return k.SRC_ALPHA_SATURATE;if((2001===t||2002===t||2003===t||2004===t)&&null!==(e=Ct.get("WEBGL_compressed_texture_s3tc"))){if(2001===t)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(2002===t)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(2003===t)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(2004===t)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((2100===t||2101===t||2102===t||2103===t)&&null!==(e=Ct.get("WEBGL_compressed_texture_pvrtc"))){if(2100===t)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(2101===t)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(2102===t)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(2103===t)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(2151===t&&null!==(e=Ct.get("WEBGL_compressed_texture_etc1")))return e.COMPRESSED_RGB_ETC1_WEBGL;if((103===t||104===t)&&null!==(e=Ct.get("EXT_blend_minmax"))){if(103===t)return e.MIN_EXT;if(104===t)return e.MAX_EXT}return 1020===t&&null!==(e=Ct.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:0}var b=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),w=void 0!==t.context?t.context:null,T=void 0!==t.alpha&&t.alpha,M=void 0===t.depth||t.depth,S=void 0===t.stencil||t.stencil,E=void 0!==t.antialias&&t.antialias,C=void 0===t.premultipliedAlpha||t.premultipliedAlpha,A=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,L=[],P=[],R=-1,I=[],O=-1,z=new Float32Array(8),D=[],N=[];this.domElement=b,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var k,B=this,H=null,G=null,W=null,X=-1,Y="",Z=null,J=new r,tt=null,et=new r,nt=0,it=new U(0),rt=0,at=b.width,st=b.height,lt=1,ut=new r(0,0,at,st),ct=!1,ht=new r(0,0,at,st),dt=new Q,ft=new Jt,pt=!1,mt=!1,gt=new $,vt=new u,yt=new l,_t=new u,xt=new u,Tt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},St={calls:0,vertices:0,faces:0,points:0};this.info={render:St,memory:{geometries:0,textures:0},programs:null};try{if(T={alpha:T,depth:M,stencil:S,antialias:E,premultipliedAlpha:C,preserveDrawingBuffer:A},null===(k=w||b.getContext("webgl",T)||b.getContext("experimental-webgl",T))){if(null!==b.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context."}void 0===k.getShaderPrecisionFormat&&(k.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),b.addEventListener("webglcontextlost",i,!1)}catch(t){console.error("THREE.WebGLRenderer: "+t)}var Ct=new Zt(k);Ct.get("WEBGL_depth_texture"),Ct.get("OES_texture_float"),Ct.get("OES_texture_float_linear"),Ct.get("OES_texture_half_float"),Ct.get("OES_texture_half_float_linear"),Ct.get("OES_standard_derivatives"),Ct.get("ANGLE_instanced_arrays"),Ct.get("OES_element_index_uint")&&(bt.MaxIndex=4294967296);var Ot=new $t(k,Ct,t),zt=new Yt(k,Ct,x),Dt=new Xt,Nt=new qt(k,Ct,zt,Dt,Ot,x,this.info),kt=new Wt(k,Dt,this.info),Bt=new jt(this,Ot),Ft=new It;this.info.programs=Bt.programs;var Ut,Ht,Gt,Vt,Qt=new Rt(k,Ct,St),Kt=new Pt(k,Ct,St);e(),this.context=k,this.capabilities=Ot,this.extensions=Ct,this.properties=Dt,this.state=zt;var te=new K(this,Tt,kt,Ot);this.shadowMap=te;var ee=new V(this,D),ne=new j(this,N);this.getContext=function(){return k},this.getContextAttributes=function(){return k.getContextAttributes()},this.forceContextLoss=function(){Ct.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Ot.getMaxAnisotropy()},this.getPrecision=function(){return Ot.precision},this.getPixelRatio=function(){return lt},this.setPixelRatio=function(t){void 0!==t&&(lt=t,this.setSize(ht.z,ht.w,!1))},this.getSize=function(){return{width:at,height:st}},this.setSize=function(t,e,n){at=t,st=e,b.width=t*lt,b.height=e*lt,!1!==n&&(b.style.width=t+"px",b.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,n,i){zt.viewport(ht.set(t,e,n,i))},this.setScissor=function(t,e,n,i){zt.scissor(ut.set(t,e,n,i))},this.setScissorTest=function(t){zt.setScissorTest(ct=t)},this.getClearColor=function(){return it},this.setClearColor=function(t,e){it.set(t),rt=void 0!==e?e:1,zt.buffers.color.setClear(it.r,it.g,it.b,rt,C)},this.getClearAlpha=function(){return rt},this.setClearAlpha=function(t){rt=t,zt.buffers.color.setClear(it.r,it.g,it.b,rt,C)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=k.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=k.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=k.STENCIL_BUFFER_BIT),k.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},this.resetGLState=n,this.dispose=function(){I=[],O=-1,P=[],R=-1,b.removeEventListener("webglcontextlost",i,!1)},this.renderBufferImmediate=function(t,e,n){zt.initAttributes();var i=Dt.get(t);if(t.hasPositions&&!i.position&&(i.position=k.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=k.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=k.createBuffer()),t.hasColors&&!i.color&&(i.color=k.createBuffer()),e=e.getAttributes(),t.hasPositions&&(k.bindBuffer(k.ARRAY_BUFFER,i.position),k.bufferData(k.ARRAY_BUFFER,t.positionArray,k.DYNAMIC_DRAW),zt.enableAttribute(e.position),k.vertexAttribPointer(e.position,3,k.FLOAT,!1,0,0)),t.hasNormals){if(k.bindBuffer(k.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&1===n.shading)for(var r=0,a=3*t.count;r<a;r+=9){var s=t.normalArray,o=(s[r+0]+s[r+3]+s[r+6])/3,l=(s[r+1]+s[r+4]+s[r+7])/3,u=(s[r+2]+s[r+5]+s[r+8])/3;s[r+0]=o,s[r+1]=l,s[r+2]=u,s[r+3]=o,s[r+4]=l,s[r+5]=u,s[r+6]=o,s[r+7]=l,s[r+8]=u}k.bufferData(k.ARRAY_BUFFER,t.normalArray,k.DYNAMIC_DRAW),zt.enableAttribute(e.normal),k.vertexAttribPointer(e.normal,3,k.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(k.bindBuffer(k.ARRAY_BUFFER,i.uv),k.bufferData(k.ARRAY_BUFFER,t.uvArray,k.DYNAMIC_DRAW),zt.enableAttribute(e.uv),k.vertexAttribPointer(e.uv,2,k.FLOAT,!1,0,0)),t.hasColors&&0!==n.vertexColors&&(k.bindBuffer(k.ARRAY_BUFFER,i.color),k.bufferData(k.ARRAY_BUFFER,t.colorArray,k.DYNAMIC_DRAW),zt.enableAttribute(e.color),k.vertexAttribPointer(e.color,3,k.FLOAT,!1,0,0)),zt.disableUnusedAttributes(),k.drawArrays(k.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,a){g(i);var s=v(t,e,i,r),l=!1;if((t=n.id+"_"+s.id+"_"+i.wireframe)!==Y&&(Y=t,l=!0),void 0!==(e=r.morphTargetInfluences)){var u=[];t=0;for(var c=e.length;t<c;t++)l=e[t],u.push([l,t]);u.sort(o),8<u.length&&(u.length=8);var h=n.morphAttributes;for(t=0,c=u.length;t<c;t++)l=u[t],z[t]=l[0],0!==l[0]?(e=l[1],!0===i.morphTargets&&h.position&&n.addAttribute("morphTarget"+t,h.position[e]),!0===i.morphNormals&&h.normal&&n.addAttribute("morphNormal"+t,h.normal[e])):(!0===i.morphTargets&&n.removeAttribute("morphTarget"+t),!0===i.morphNormals&&n.removeAttribute("morphNormal"+t));for(t=u.length,e=z.length;t<e;t++)z[t]=0;s.getUniforms().setValue(k,"morphTargetInfluences",z),l=!0}if(e=n.index,c=n.attributes.position,u=1,!0===i.wireframe&&(e=kt.getWireframeAttribute(n),u=2),null!==e?(t=Kt).setIndex(e):t=Qt,l){var d;l=void 0;if(n&&n.isInstancedBufferGeometry&&null===(d=Ct.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===l&&(l=0),zt.initAttributes();h=n.attributes,s=s.getAttributes();var f,p=i.defaultAttributeValues;for(f in s){var m=s[f];if(0<=m)if(void 0!==(S=h[f])){var y=S.normalized,_=S.itemSize,x=(w=kt.getAttributeProperties(S)).__webglBuffer,b=w.type,w=w.bytesPerElement;if(S.isInterleavedBufferAttribute){var T=S.data,M=T.stride,S=S.offset;T&&T.isInstancedInterleavedBuffer?(zt.enableAttributeAndDivisor(m,T.meshPerAttribute,d),void 0===n.maxInstancedCount&&(n.maxInstancedCount=T.meshPerAttribute*T.count)):zt.enableAttribute(m),k.bindBuffer(k.ARRAY_BUFFER,x),k.vertexAttribPointer(m,_,b,y,M*w,(l*M+S)*w)}else S.isInstancedBufferAttribute?(zt.enableAttributeAndDivisor(m,S.meshPerAttribute,d),void 0===n.maxInstancedCount&&(n.maxInstancedCount=S.meshPerAttribute*S.count)):zt.enableAttribute(m),k.bindBuffer(k.ARRAY_BUFFER,x),k.vertexAttribPointer(m,_,b,y,0,l*_*w)}else if(void 0!==p&&void 0!==(y=p[f]))switch(y.length){case 2:k.vertexAttrib2fv(m,y);break;case 3:k.vertexAttrib3fv(m,y);break;case 4:k.vertexAttrib4fv(m,y);break;default:k.vertexAttrib1fv(m,y)}}zt.disableUnusedAttributes()}null!==e&&k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,kt.getAttributeBuffer(e))}if(d=0,null!==e?d=e.count:void 0!==c&&(d=c.count),e=n.drawRange.start*u,c=null!==a?a.start*u:0,f=Math.max(e,c),0!==(a=Math.max(0,Math.min(d,e+n.drawRange.count*u,c+(null!==a?a.count*u:1/0))-1-f+1))){if(r.isMesh)if(!0===i.wireframe)zt.setLineWidth(i.wireframeLinewidth*(null===G?lt:1)),t.setMode(k.LINES);else switch(r.drawMode){case 0:t.setMode(k.TRIANGLES);break;case 1:t.setMode(k.TRIANGLE_STRIP);break;case 2:t.setMode(k.TRIANGLE_FAN)}else r.isLine?(void 0===(i=i.linewidth)&&(i=1),zt.setLineWidth(i*(null===G?lt:1)),r.isLineSegments?t.setMode(k.LINES):t.setMode(k.LINE_STRIP)):r.isPoints&&t.setMode(k.POINTS);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&t.renderInstances(n,f,a):t.render(f,a)}},this.render=function(t,e,n,i){if(void 0!==e&&!0!==e.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{Y="",X=-1,Z=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),vt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),dt.setFromMatrix(vt),L.length=0,O=R=-1,D.length=0,N.length=0,mt=this.localClippingEnabled,pt=ft.init(this.clippingPlanes,mt,e),p(t,e),P.length=R+1,I.length=O+1,!0===B.sortObjects&&(P.sort(c),I.sort(h)),pt&&ft.beginShadows();for(var r=0,a=0,s=(v=L).length;a<s;a++){var o=v[a];o.castShadow&&(Tt.shadows[r++]=o)}Tt.shadows.length=r,te.render(t,e);var l,d,f,g,v=L,y=o=0,_=0,x=e.matrixWorldInverse,b=0,w=0,T=0,M=0,S=0;for(r=0,a=v.length;r<a;r++)if(l=(s=v[r]).color,d=s.intensity,f=s.distance,g=s.shadow&&s.shadow.map?s.shadow.map.texture:null,s.isAmbientLight)o+=l.r*d,y+=l.g*d,_+=l.b*d;else if(s.isDirectionalLight){var E=Ft.get(s);E.color.copy(s.color).multiplyScalar(s.intensity),E.direction.setFromMatrixPosition(s.matrixWorld),yt.setFromMatrixPosition(s.target.matrixWorld),E.direction.sub(yt),E.direction.transformDirection(x),(E.shadow=s.castShadow)&&(E.shadowBias=s.shadow.bias,E.shadowRadius=s.shadow.radius,E.shadowMapSize=s.shadow.mapSize),Tt.directionalShadowMap[b]=g,Tt.directionalShadowMatrix[b]=s.shadow.matrix,Tt.directional[b++]=E}else s.isSpotLight?((E=Ft.get(s)).position.setFromMatrixPosition(s.matrixWorld),E.position.applyMatrix4(x),E.color.copy(l).multiplyScalar(d),E.distance=f,E.direction.setFromMatrixPosition(s.matrixWorld),yt.setFromMatrixPosition(s.target.matrixWorld),E.direction.sub(yt),E.direction.transformDirection(x),E.coneCos=Math.cos(s.angle),E.penumbraCos=Math.cos(s.angle*(1-s.penumbra)),E.decay=0===s.distance?0:s.decay,(E.shadow=s.castShadow)&&(E.shadowBias=s.shadow.bias,E.shadowRadius=s.shadow.radius,E.shadowMapSize=s.shadow.mapSize),Tt.spotShadowMap[T]=g,Tt.spotShadowMatrix[T]=s.shadow.matrix,Tt.spot[T++]=E):s.isRectAreaLight?((E=Ft.get(s)).color.copy(l).multiplyScalar(d/(s.width*s.height)),E.position.setFromMatrixPosition(s.matrixWorld),E.position.applyMatrix4(x),xt.identity(),_t.copy(s.matrixWorld),_t.premultiply(x),xt.extractRotation(_t),E.halfWidth.set(.5*s.width,0,0),E.halfHeight.set(0,.5*s.height,0),E.halfWidth.applyMatrix4(xt),E.halfHeight.applyMatrix4(xt),Tt.rectArea[M++]=E):s.isPointLight?((E=Ft.get(s)).position.setFromMatrixPosition(s.matrixWorld),E.position.applyMatrix4(x),E.color.copy(s.color).multiplyScalar(s.intensity),E.distance=s.distance,E.decay=0===s.distance?0:s.decay,(E.shadow=s.castShadow)&&(E.shadowBias=s.shadow.bias,E.shadowRadius=s.shadow.radius,E.shadowMapSize=s.shadow.mapSize),Tt.pointShadowMap[w]=g,void 0===Tt.pointShadowMatrix[w]&&(Tt.pointShadowMatrix[w]=new u),yt.setFromMatrixPosition(s.matrixWorld).negate(),Tt.pointShadowMatrix[w].identity().setPosition(yt),Tt.point[w++]=E):s.isHemisphereLight&&((E=Ft.get(s)).direction.setFromMatrixPosition(s.matrixWorld),E.direction.transformDirection(x),E.direction.normalize(),E.skyColor.copy(s.color).multiplyScalar(d),E.groundColor.copy(s.groundColor).multiplyScalar(d),Tt.hemi[S++]=E);Tt.ambient[0]=o,Tt.ambient[1]=y,Tt.ambient[2]=_,Tt.directional.length=b,Tt.spot.length=T,Tt.rectArea.length=M,Tt.point.length=w,Tt.hemi.length=S,Tt.hash=b+","+w+","+T+","+M+","+S+","+Tt.shadows.length,pt&&ft.endShadows(),St.calls=0,St.vertices=0,St.faces=0,St.points=0,void 0===n&&(n=null),this.setRenderTarget(n),null===(v=t.background)?zt.buffers.color.setClear(it.r,it.g,it.b,rt,C):v&&v.isColor&&(zt.buffers.color.setClear(v.r,v.g,v.b,1,C),i=!0),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),v&&v.isCubeTexture?(void 0===Gt&&(Gt=new At,Vt=new wt(new Mt(5,5,5),new q({uniforms:_r.cube.uniforms,vertexShader:_r.cube.vertexShader,fragmentShader:_r.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))),Gt.projectionMatrix.copy(e.projectionMatrix),Gt.matrixWorld.extractRotation(e.matrixWorld),Gt.matrixWorldInverse.getInverse(Gt.matrixWorld),Vt.material.uniforms.tCube.value=v,Vt.modelViewMatrix.multiplyMatrices(Gt.matrixWorldInverse,Vt.matrixWorld),kt.update(Vt),B.renderBufferDirect(Gt,null,Vt.geometry,Vt.material,Vt,null)):v&&v.isTexture&&(void 0===Ut&&(Ut=new Lt(-1,1,1,-1,0,1),Ht=new wt(new Et(2,2),new ot({depthTest:!1,depthWrite:!1,fog:!1}))),Ht.material.map=v,kt.update(Ht),B.renderBufferDirect(Ut,null,Ht.geometry,Ht.material,Ht,null)),t.overrideMaterial?(i=t.overrideMaterial,m(P,t,e,i),m(I,t,e,i)):(zt.setBlending(0),m(P,t,e),m(I,t,e)),ee.render(t,e),ne.render(t,e,et),n&&Nt.updateRenderTargetMipmap(n),zt.setDepthTest(!0),zt.setDepthWrite(!0),zt.setColorWrite(!0)}},this.setFaceCulling=function(t,e){zt.setCullFace(t),zt.setFlipSided(0===e)},this.allocTextureUnit=function(){var t=nt;return t>=Ot.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Ot.maxTextures),nt+=1,t},this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),Nt.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Nt.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?Nt.setTextureCube(e,n):Nt.setTextureCubeDynamic(e,n)}}(),this.getCurrentRenderTarget=function(){return G},this.setRenderTarget=function(t){(G=t)&&void 0===Dt.get(t).__webglFramebuffer&&Nt.setupRenderTarget(t);var e,n=t&&t.isWebGLRenderTargetCube;t?(e=Dt.get(t),e=n?e.__webglFramebuffer[t.activeCubeFace]:e.__webglFramebuffer,J.copy(t.scissor),tt=t.scissorTest,et.copy(t.viewport)):(e=null,J.copy(ut).multiplyScalar(lt),tt=ct,et.copy(ht).multiplyScalar(lt)),W!==e&&(k.bindFramebuffer(k.FRAMEBUFFER,e),W=e),zt.scissor(J),zt.setScissorTest(tt),zt.viewport(et),n&&(n=Dt.get(t.texture),k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,n.__webglTexture,t.activeMipMapLevel))},this.readRenderTargetPixels=function(t,e,n,i,r,a){if(!1===(t&&t.isWebGLRenderTarget))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var s=Dt.get(t).__webglFramebuffer;if(s){var o=!1;s!==W&&(k.bindFramebuffer(k.FRAMEBUFFER,s),o=!0);try{var l=t.texture,u=l.format,c=l.type;1023!==u&&x(u)!==k.getParameter(k.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===c||x(c)===k.getParameter(k.IMPLEMENTATION_COLOR_READ_TYPE)||1015===c&&(Ct.get("OES_texture_float")||Ct.get("WEBGL_color_buffer_float"))||1016===c&&Ct.get("EXT_color_buffer_half_float")?k.checkFramebufferStatus(k.FRAMEBUFFER)===k.FRAMEBUFFER_COMPLETE?0<=e&&e<=t.width-i&&0<=n&&n<=t.height-r&&k.readPixels(e,n,i,r,x(u),x(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&k.bindFramebuffer(k.FRAMEBUFFER,W)}}}}}function Kt(t,e){this.name="",this.color=new U(t),this.density=void 0!==e?e:25e-5}function te(t,e,n){this.name="",this.color=new U(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function ee(){it.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function ne(t,e,n,i,r){it.call(this),this.lensFlares=[],this.positionScreen=new l,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,n,i,r)}function ie(t){W.call(this),this.type="SpriteMaterial",this.color=new U(16777215),this.map=null,this.rotation=0,this.lights=this.fog=!1,this.setValues(t)}function re(t){it.call(this),this.type="Sprite",this.material=void 0!==t?t:new ie}function ae(){it.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function se(t,e,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new u,t=t||[],this.bones=t.slice(0),this.useVertexTexture?(t=Math.sqrt(4*this.bones.length),t=lr.nextPowerOfTwo(Math.ceil(t)),this.boneTextureHeight=this.boneTextureWidth=t=Math.max(t,4),this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new H(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,1023,1015)):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new u)}function oe(){it.call(this),this.type="Bone"}function le(t,e,n){if(wt.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new u,this.bindMatrixInverse=new u,t=[],this.geometry&&void 0!==this.geometry.bones){for(var i,r=0,a=this.geometry.bones.length;r<a;++r)i=this.geometry.bones[r],e=new oe,t.push(e),e.name=i.name,e.position.fromArray(i.pos),e.quaternion.fromArray(i.rotq),void 0!==i.scl&&e.scale.fromArray(i.scl);for(r=0,a=this.geometry.bones.length;r<a;++r)-1!==(i=this.geometry.bones[r]).parent&&null!==i.parent&&void 0!==t[i.parent]?t[i.parent].add(t[r]):this.add(t[r])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new se(t,void 0,n),this.matrixWorld)}function ue(t){W.call(this),this.type="LineBasicMaterial",this.color=new U(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(t)}function ce(t,e,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new he(t,e);it.call(this),this.type="Line",this.geometry=void 0!==t?t:new bt,this.material=void 0!==e?e:new ue({color:16777215*Math.random()})}function he(t,e){ce.call(this,t,e),this.type="LineSegments"}function de(t){W.call(this),this.type="PointsMaterial",this.color=new U(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function fe(t,e){it.call(this),this.type="Points",this.geometry=void 0!==t?t:new bt,this.material=void 0!==e?e:new de({color:16777215*Math.random()})}function pe(){it.call(this),this.type="Group"}function me(t,e,n,r,a,s,o,l,u){i.call(this,t,e,n,r,a,s,o,l,u),this.generateMipmaps=!1;var c=this;!function e(){requestAnimationFrame(e),t.readyState>=t.HAVE_CURRENT_DATA&&(c.needsUpdate=!0)}()}function ge(t,e,n,r,a,s,o,l,u,c,h,d){i.call(this,null,s,o,l,u,c,r,a,h,d),this.image={width:e,height:n},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function ve(t,e,n,r,a,s,o,l,u){i.call(this,t,e,n,r,a,s,o,l,u),this.needsUpdate=!0}function ye(t,e,n,r,a,s,o,l,u,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1012),void 0===n&&1027===c&&(n=1020),i.call(this,null,r,a,s,o,l,c,n,u),this.image={width:t,height:e},this.magFilter=void 0!==o?o:1003,this.minFilter=void 0!==l?l:1003,this.generateMipmaps=this.flipY=!1}function _e(t){function e(t,e){return t-e}bt.call(this),this.type="WireframeGeometry";var n,i,r,a,s,o=[],u=[0,0],c={},h=["a","b","c"];if(t&&t.isGeometry){var d=t.faces;for(n=0,r=d.length;n<r;n++){var f=d[n];for(i=0;3>i;i++)u[0]=f[h[i]],u[1]=f[h[(i+1)%3]],u.sort(e),void 0===c[s=u.toString()]&&(c[s]={index1:u[0],index2:u[1]})}for(s in c)n=c[s],h=t.vertices[n.index1],o.push(h.x,h.y,h.z),h=t.vertices[n.index2],o.push(h.x,h.y,h.z)}else if(t&&t.isBufferGeometry){var p;h=new l;if(null!==t.index){for(d=t.attributes.position,f=t.index,0===(p=t.groups).length&&t.addGroup(0,f.count),t=0,a=p.length;t<a;++t)for(i=(n=p[t]).start,r=n.count,n=i,r=i+r;n<r;n+=3)for(i=0;3>i;i++)u[0]=f.getX(n+i),u[1]=f.getX(n+(i+1)%3),u.sort(e),void 0===c[s=u.toString()]&&(c[s]={index1:u[0],index2:u[1]});for(s in c)n=c[s],h.fromBufferAttribute(d,n.index1),o.push(h.x,h.y,h.z),h.fromBufferAttribute(d,n.index2),o.push(h.x,h.y,h.z)}else for(n=0,r=(d=t.attributes.position).count/3;n<r;n++)for(i=0;3>i;i++)c=3*n+i,h.fromBufferAttribute(d,c),o.push(h.x,h.y,h.z),c=3*n+(i+1)%3,h.fromBufferAttribute(d,c),o.push(h.x,h.y,h.z)}this.addAttribute("position",new gt(o,3))}function xe(t,e,n){xt.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new be(t,e,n)),this.mergeVertices()}function be(t,e,n){bt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,a=[],s=[],o=[],l=e+1;for(i=0;i<=n;i++){var u=i/n;for(r=0;r<=e;r++){var c=r/e,h=t(c,u);s.push(h.x,h.y,h.z),o.push(c,u)}}for(i=0;i<n;i++)for(r=0;r<e;r++)t=i*l+r+1,u=(i+1)*l+r+1,c=(i+1)*l+r,a.push(i*l+r,t,c),a.push(t,u,c);this.setIndex(a),this.addAttribute("position",new gt(s,3)),this.addAttribute("uv",new gt(o,2)),this.computeVertexNormals()}function we(t,e,n,i){xt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Te(t,e,n,i)),this.mergeVertices()}function Te(t,e,i,r){function a(t){u.push(t.x,t.y,t.z)}function s(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function o(t,e,n,i){0>i&&1===t.x&&(c[e]=t.x-1),0===n.x&&0===n.z&&(c[e]=i/2/Math.PI+.5)}bt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r},i=i||1;var u=[],c=[];!function(t){for(var n=new l,i=new l,r=new l,o=0;o<e.length;o+=3){s(e[o+0],n),s(e[o+1],i),s(e[o+2],r);var u,c,h=n,d=i,f=r,p=Math.pow(2,t),m=[];for(u=0;u<=p;u++){m[u]=[];var g=h.clone().lerp(f,u/p),v=d.clone().lerp(f,u/p),y=p-u;for(c=0;c<=y;c++)m[u][c]=0===c&&u===p?g:g.clone().lerp(v,c/y)}for(u=0;u<p;u++)for(c=0;c<2*(p-u)-1;c++)h=Math.floor(c/2),0==c%2?(a(m[u][h+1]),a(m[u+1][h]),a(m[u][h])):(a(m[u][h+1]),a(m[u+1][h+1]),a(m[u+1][h]))}}(r||0),function(t){for(var e=new l,n=0;n<u.length;n+=3)e.x=u[n+0],e.y=u[n+1],e.z=u[n+2],e.normalize().multiplyScalar(t),u[n+0]=e.x,u[n+1]=e.y,u[n+2]=e.z}(i),function(){for(var t=new l,e=0;e<u.length;e+=3)t.x=u[e+0],t.y=u[e+1],t.z=u[e+2],c.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new l,e=new l;for(var i=new l,r=new l,a=new n,s=new n,h=new n,d=0,f=0;d<u.length;d+=9,f+=6){t.set(u[d+0],u[d+1],u[d+2]),e.set(u[d+3],u[d+4],u[d+5]),i.set(u[d+6],u[d+7],u[d+8]),a.set(c[f+0],c[f+1]),s.set(c[f+2],c[f+3]),h.set(c[f+4],c[f+5]),r.copy(t).add(e).add(i).divideScalar(3);var p=Math.atan2(r.z,-r.x);o(a,f+0,t,p),o(s,f+2,e,p),o(h,f+4,i,p)}for(t=0;t<c.length;t+=6)e=c[t+0],i=c[t+2],r=c[t+4],a=Math.min(e,i,r),.9<Math.max(e,i,r)&&.1>a&&(.2>e&&(c[t+0]+=1),.2>i&&(c[t+2]+=1),.2>r&&(c[t+4]+=1))}(),this.addAttribute("position",new gt(u,3)),this.addAttribute("normal",new gt(u.slice(),3)),this.addAttribute("uv",new gt(c,2)),this.normalizeNormals()}function Me(t,e){xt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Se(t,e)),this.mergeVertices()}function Se(t,e){Te.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ee(t,e){xt.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ce(t,e)),this.mergeVertices()}function Ce(t,e){Te.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ae(t,e){xt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Le(t,e)),this.mergeVertices()}function Le(t,e){var n=(1+Math.sqrt(5))/2;Te.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Pe(t,e){xt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Re(t,e)),this.mergeVertices()}function Re(t,e){var n=(1+Math.sqrt(5))/2,i=1/n;Te.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ie(t,e,n,i,r,a){xt.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new Oe(t,e,n,i,r),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function Oe(t,e,i,r,a){function s(n){var a=t.getPointAt(n/e),s=o.normals[n];for(n=o.binormals[n],c=0;c<=r;c++){var l=c/r*Math.PI*2,u=Math.sin(l);l=-Math.cos(l);d.x=l*s.x+u*n.x,d.y=l*s.y+u*n.y,d.z=l*s.z+u*n.z,d.normalize(),m.push(d.x,d.y,d.z),h.x=a.x+i*d.x,h.y=a.y+i*d.y,h.z=a.z+i*d.z,p.push(h.x,h.y,h.z)}}bt.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:a},e=e||64,i=i||1,r=r||8,a=a||!1;var o=t.computeFrenetFrames(e,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var u,c,h=new l,d=new l,f=new n,p=[],m=[],g=[],v=[];for(u=0;u<e;u++)s(u);for(s(!1===a?e:0),u=0;u<=e;u++)for(c=0;c<=r;c++)f.x=u/e,f.y=c/r,g.push(f.x,f.y);!function(){for(c=1;c<=e;c++)for(u=1;u<=r;u++){var t=(r+1)*c+(u-1),n=(r+1)*c+u,i=(r+1)*(c-1)+u;v.push((r+1)*(c-1)+(u-1),t,i),v.push(t,n,i)}}(),this.setIndex(v),this.addAttribute("position",new gt(p,3)),this.addAttribute("normal",new gt(m,3)),this.addAttribute("uv",new gt(g,2))}function ze(t,e,n,i,r,a,s){xt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new De(t,e,n,i,r,a)),this.mergeVertices()}function De(t,e,i,r,a,s){function o(t,e,n,i,r){var a=Math.sin(t);e=n/e*t,n=Math.cos(e),r.x=i*(2+n)*.5*Math.cos(t),r.y=i*(2+n)*a*.5,r.z=i*Math.sin(e)*.5}bt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:r,p:a,q:s},t=t||100,e=e||40,i=Math.floor(i)||64,r=Math.floor(r)||8,a=a||2,s=s||3;var u,c,h=[],d=[],f=[],p=[],m=new l,g=new l;new n;var v=new l,y=new l,_=new l,x=new l,b=new l;for(u=0;u<=i;++u)for(o(c=u/i*a*Math.PI*2,a,s,t,v),o(c+.01,a,s,t,y),x.subVectors(y,v),b.addVectors(y,v),_.crossVectors(x,b),b.crossVectors(_,x),_.normalize(),b.normalize(),c=0;c<=r;++c){var w=c/r*Math.PI*2,T=-e*Math.cos(w);w=e*Math.sin(w);m.x=v.x+(T*b.x+w*_.x),m.y=v.y+(T*b.y+w*_.y),m.z=v.z+(T*b.z+w*_.z),d.push(m.x,m.y,m.z),g.subVectors(m,v).normalize(),f.push(g.x,g.y,g.z),p.push(u/i),p.push(c/r)}for(c=1;c<=i;c++)for(u=1;u<=r;u++)t=(r+1)*c+(u-1),e=(r+1)*c+u,a=(r+1)*(c-1)+u,h.push((r+1)*(c-1)+(u-1),t,a),h.push(t,e,a);this.setIndex(h),this.addAttribute("position",new gt(d,3)),this.addAttribute("normal",new gt(f,3)),this.addAttribute("uv",new gt(p,2))}function Ne(t,e,n,i,r){xt.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new ke(t,e,n,i,r))}function ke(t,e,n,i,r){bt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||100,e=e||40,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,s,o=[],u=[],c=[],h=[],d=new l,f=new l,p=new l;for(a=0;a<=n;a++)for(s=0;s<=i;s++){var m=s/i*r,g=a/n*Math.PI*2;f.x=(t+e*Math.cos(g))*Math.cos(m),f.y=(t+e*Math.cos(g))*Math.sin(m),f.z=e*Math.sin(g),u.push(f.x,f.y,f.z),d.x=t*Math.cos(m),d.y=t*Math.sin(m),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),h.push(s/i),h.push(a/n)}for(a=1;a<=n;a++)for(s=1;s<=i;s++)t=(i+1)*(a-1)+s-1,e=(i+1)*(a-1)+s,r=(i+1)*a+s,o.push((i+1)*a+s-1,t,r),o.push(t,e,r);this.setIndex(o),this.addAttribute("position",new gt(u,3)),this.addAttribute("normal",new gt(c,3)),this.addAttribute("uv",new gt(h,2))}function Be(t,e){void 0!==t&&(xt.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeFaceNormals())}function Fe(t,e){var n=(e=e||{}).font;if(!1===(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new xt;n=n.generateShapes(t,e.size,e.curveSegments),e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Be.call(this,n,e),this.type="TextGeometry"}function Ue(t,e,n,i,r,a,s){xt.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new He(t,e,n,i,r,a,s))}function He(t,e,n,i,r,a,s){bt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var o,u,c=(a=void 0!==a?a:0)+(s=void 0!==s?s:Math.PI),h=0,d=[],f=new l,p=new l,m=[],g=[],v=[],y=[];for(u=0;u<=n;u++){var _=[],x=u/n;for(o=0;o<=e;o++){var b=o/e;f.x=-t*Math.cos(i+b*r)*Math.sin(a+x*s),f.y=t*Math.cos(a+x*s),f.z=t*Math.sin(i+b*r)*Math.sin(a+x*s),g.push(f.x,f.y,f.z),p.set(f.x,f.y,f.z).normalize(),v.push(p.x,p.y,p.z),y.push(b,1-x),_.push(h++)}d.push(_)}for(u=0;u<n;u++)for(o=0;o<e;o++)t=d[u][o+1],i=d[u][o],r=d[u+1][o],s=d[u+1][o+1],(0!==u||0<a)&&m.push(t,i,s),(u!==n-1||c<Math.PI)&&m.push(i,r,s);this.setIndex(m),this.addAttribute("position",new gt(g,3)),this.addAttribute("normal",new gt(v,3)),this.addAttribute("uv",new gt(y,2))}function Ge(t,e,n,i,r,a){xt.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new je(t,e,n,i,r,a))}function je(t,e,i,r,a,s){bt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},t=t||20,e=e||50,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var o,u,c=[],h=[],d=[],f=[],p=t,m=(e-t)/(r=void 0!==r?Math.max(1,r):1),g=new l,v=new n;for(o=0;o<=r;o++){for(u=0;u<=i;u++)t=a+u/i*s,g.x=p*Math.cos(t),g.y=p*Math.sin(t),h.push(g.x,g.y,g.z),d.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,f.push(v.x,v.y);p+=m}for(o=0;o<r;o++)for(e=o*(i+1),u=0;u<i;u++)a=(t=u+e)+i+1,s=t+i+2,p=t+1,c.push(t,a,p),c.push(a,s,p);this.setIndex(c),this.addAttribute("position",new gt(h,3)),this.addAttribute("normal",new gt(d,3)),this.addAttribute("uv",new gt(f,2))}function Ve(t,e,n,i){xt.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new We(t,e,n,i)),this.mergeVertices()}function We(t,e,i,r){bt.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e)||12,i=i||0,r=r||2*Math.PI,r=lr.clamp(r,0,2*Math.PI);var a,s,o=[],u=[],c=[],h=1/e,d=new l,f=new n;for(a=0;a<=e;a++){s=i+a*h*r;var p=Math.sin(s),m=Math.cos(s);for(s=0;s<=t.length-1;s++)d.x=t[s].x*p,d.y=t[s].y,d.z=t[s].x*m,u.push(d.x,d.y,d.z),f.x=a/e,f.y=s/(t.length-1),c.push(f.x,f.y)}for(a=0;a<e;a++)for(s=0;s<t.length-1;s++)h=(i=s+a*t.length)+t.length,d=i+t.length+1,f=i+1,o.push(i,h,f),o.push(h,d,f);if(this.setIndex(o),this.addAttribute("position",new gt(u,3)),this.addAttribute("uv",new gt(c,2)),this.computeVertexNormals(),r===2*Math.PI)for(r=this.attributes.normal.array,o=new l,u=new l,c=new l,i=e*t.length*3,s=a=0;a<t.length;a++,s+=3)o.x=r[s+0],o.y=r[s+1],o.z=r[s+2],u.x=r[i+s+0],u.y=r[i+s+1],u.z=r[i+s+2],c.addVectors(o,u).normalize(),r[s+0]=r[i+s+0]=c.x,r[s+1]=r[i+s+1]=c.y,r[s+2]=r[i+s+2]=c.z}function qe(t,e){xt.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Xe(t,e)),this.mergeVertices()}function Xe(t,e){function n(t){var n,o,u=r.length/3,c=(t=t.extractPoints(e)).shape,h=t.holes;if(!1===Mr.isClockWise(c))for(c=c.reverse(),t=0,n=h.length;t<n;t++)o=h[t],!0===Mr.isClockWise(o)&&(h[t]=o.reverse());var d=Mr.triangulateShape(c,h);for(t=0,n=h.length;t<n;t++)o=h[t],c=c.concat(o);for(t=0,n=c.length;t<n;t++)o=c[t],r.push(o.x,o.y,0),a.push(0,0,1),s.push(o.x,o.y);for(t=0,n=d.length;t<n;t++)c=d[t],i.push(c[0]+u,c[1]+u,c[2]+u),l+=3}bt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],a=[],s=[],o=0,l=0;if(!1===Array.isArray(t))n(t);else for(var u=0;u<t.length;u++)n(t[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(i),this.addAttribute("position",new gt(r,3)),this.addAttribute("normal",new gt(a,3)),this.addAttribute("uv",new gt(s,2))}function Ye(t,e){function n(t,e){return t-e}bt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var i,r,a=[],s=Math.cos(lr.DEG2RAD*(void 0!==e?e:1)),o=[0,0],l={},u=["a","b","c"];t.isBufferGeometry?(r=new xt).fromBufferGeometry(t):r=t.clone(),r.mergeVertices(),r.computeFaceNormals();for(var c=r.vertices,h=0,d=(r=r.faces).length;h<d;h++)for(var f=r[h],p=0;3>p;p++)o[0]=f[u[p]],o[1]=f[u[(p+1)%3]],o.sort(n),void 0===l[i=o.toString()]?l[i]={index1:o[0],index2:o[1],face1:h,face2:void 0}:l[i].face2=h;for(i in l)(void 0===(o=l[i]).face2||r[o.face1].normal.dot(r[o.face2].normal)<=s)&&(u=c[o.index1],a.push(u.x,u.y,u.z),u=c[o.index2],a.push(u.x,u.y,u.z));this.addAttribute("position",new gt(a,3))}function $e(t,e,n,i,r,a,s,o){xt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Ze(t,e,n,i,r,a,s,o)),this.mergeVertices()}function Ze(t,e,i,r,a,s,o,u){function c(i){var a,s,c,v=new n,x=new l,b=0,w=!0===i?t:e,T=!0===i?1:-1;for(s=g,a=1;a<=r;a++)f.push(0,y*T,0),p.push(0,T,0),m.push(.5,.5),g++;for(c=g,a=0;a<=r;a++){var M=a/r*u+o,S=Math.cos(M);M=Math.sin(M);x.x=w*M,x.y=y*T,x.z=w*S,f.push(x.x,x.y,x.z),p.push(0,T,0),v.x=.5*S+.5,v.y=.5*M*T+.5,m.push(v.x,v.y),g++}for(a=0;a<r;a++)v=s+a,x=c+a,!0===i?d.push(x,x+1,v):d.push(x+1,x,v),b+=3;h.addGroup(_,b,!0===i?1:2),_+=b}bt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:u};var h=this;t=void 0!==t?t:20,e=void 0!==e?e:20,i=void 0!==i?i:100,r=Math.floor(r)||8,a=Math.floor(a)||1,s=void 0!==s&&s,o=void 0!==o?o:0,u=void 0!==u?u:2*Math.PI;var d=[],f=[],p=[],m=[],g=0,v=[],y=i/2,_=0;!function(){var n,s,c=new l,x=new l,b=0,w=(e-t)/i;for(s=0;s<=a;s++){var T=[],M=s/a,S=M*(e-t)+t;for(n=0;n<=r;n++){var E=n/r,C=E*u+o,A=Math.sin(C);C=Math.cos(C);x.x=S*A,x.y=-M*i+y,x.z=S*C,f.push(x.x,x.y,x.z),c.set(A,w,C).normalize(),p.push(c.x,c.y,c.z),m.push(E,1-M),T.push(g++)}v.push(T)}for(n=0;n<r;n++)for(s=0;s<a;s++)c=v[s+1][n],x=v[s+1][n+1],w=v[s][n+1],d.push(v[s][n],c,w),d.push(c,x,w),b+=6;h.addGroup(_,b,0),_+=b}(),!1===s&&(0<t&&c(!0),0<e&&c(!1)),this.setIndex(d),this.addAttribute("position",new gt(f,3)),this.addAttribute("normal",new gt(p,3)),this.addAttribute("uv",new gt(m,2))}function Je(t,e,n,i,r,a,s){$e.call(this,0,t,e,n,i,r,a,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:s}}function Qe(t,e,n,i,r,a,s){Ze.call(this,0,t,e,n,i,r,a,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:s}}function Ke(t,e,n,i){xt.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new tn(t,e,n,i))}function tn(t,e,i,r){bt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var a,s,o=[],u=[],c=[],h=[],d=new l,f=new n;for(u.push(0,0,0),c.push(0,0,1),h.push(.5,.5),s=0,a=3;s<=e;s++,a+=3){var p=i+s/e*r;d.x=t*Math.cos(p),d.y=t*Math.sin(p),u.push(d.x,d.y,d.z),c.push(0,0,1),f.x=(u[a]/t+1)/2,f.y=(u[a+1]/t+1)/2,h.push(f.x,f.y)}for(a=1;a<=e;a++)o.push(a,a+1,0);this.setIndex(o),this.addAttribute("position",new gt(u,3)),this.addAttribute("normal",new gt(c,3)),this.addAttribute("uv",new gt(h,2))}function en(){q.call(this,{uniforms:mr.merge([yr.lights,{opacity:{value:1}}]),vertexShader:gr.shadow_vert,fragmentShader:gr.shadow_frag}),this.transparent=this.lights=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})}function nn(t){q.call(this,t),this.type="RawShaderMaterial"}function rn(t){this.uuid=lr.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(t)?t:[],this.visible=!0}function an(t){W.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new U(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function sn(t){an.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(t)}function on(t){W.call(this),this.type="MeshPhongMaterial",this.color=new U(16777215),this.specular=new U(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function ln(t){on.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function un(t){W.call(this,t),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(t)}function cn(t){W.call(this),this.type="MeshLambertMaterial",this.color=new U(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function hn(t){W.call(this),this.type="LineDashedMaterial",this.color=new U(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}function dn(t,e,n){var i=this,r=!1,a=0,s=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===r&&void 0!==i.onStart&&i.onStart(t,a,s),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,s),a===s&&(r=!1,void 0!==i.onLoad)&&i.onLoad()},this.itemError=function(t){void 0!==i.onError&&i.onError(t)}}function fn(t){this.manager=void 0!==t?t:Ar}function pn(t){this.manager=void 0!==t?t:Ar,this._parser=null}function mn(t){this.manager=void 0!==t?t:Ar,this._parser=null}function gn(t){this.manager=void 0!==t?t:Ar}function vn(t){this.manager=void 0!==t?t:Ar}function yn(t){this.manager=void 0!==t?t:Ar}function _n(t,e){it.call(this),this.type="Light",this.color=new U(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function xn(t,e,n){_n.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(it.DefaultUp),this.updateMatrix(),this.groundColor=new U(e)}function bn(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new u}function wn(){bn.call(this,new At(50,1,.5,500))}function Tn(t,e,n,i,r,a){_n.call(this,t,e),this.type="SpotLight",this.position.copy(it.DefaultUp),this.updateMatrix(),this.target=new it,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new wn}function Mn(t,e,n,i){_n.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new bn(new At(90,1,.5,500))}function Sn(){bn.call(this,new Lt(-5,5,5,-5,.5,500))}function En(t,e){_n.call(this,t,e),this.type="DirectionalLight",this.position.copy(it.DefaultUp),this.updateMatrix(),this.target=new it,this.shadow=new Sn}function Cn(t,e){_n.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function An(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Ln(t,e,n,i){An.call(this,t,e,n,i),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Pn(t,e,n,i){An.call(this,t,e,n,i)}function Rn(t,e,n,i){An.call(this,t,e,n,i)}function In(t,e,n,i){if(void 0===t)throw Error("track name is undefined");if(void 0===e||0===e.length)throw Error("no keyframes in track named "+t);this.name=t,this.times=Pr.convertArray(e,this.TimeBufferType),this.values=Pr.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function On(t,e,n,i){In.call(this,t,e,n,i)}function zn(t,e,n,i){An.call(this,t,e,n,i)}function Dn(t,e,n,i){In.call(this,t,e,n,i)}function Nn(t,e,n,i){In.call(this,t,e,n,i)}function kn(t,e,n,i){In.call(this,t,e,n,i)}function Bn(t,e,n){In.call(this,t,e,n)}function Fn(t,e,n,i){In.call(this,t,e,n,i)}function Un(t,e,n,i){In.apply(this,arguments)}function Hn(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=lr.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function Gn(t){this.manager=void 0!==t?t:Ar,this.textures={}}function jn(t){this.manager=void 0!==t?t:Ar}function Vn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Wn(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:Ar,this.withCredentials=!1}function qn(t){this.manager=void 0!==t?t:Ar,this.texturePath=""}function Xn(t,e,n,i,r){var a=t*t;return(2*n-2*i+(e=.5*(i-e))+(r=.5*(r-n)))*t*a+(-3*n+3*i-2*e-r)*a+e*t+n}function Yn(t,e,n,i){var r=1-t;return r*r*e+2*(1-t)*t*n+t*t*i}function $n(t,e,n,i,r){var a=1-t,s=1-t;return a*a*a*e+3*s*s*t*n+3*(1-t)*t*t*i+t*t*t*r}function Zn(){}function Jn(t,e){this.v1=t,this.v2=e}function Qn(){this.curves=[],this.autoClose=!1}function Kn(t,e,n,i,r,a,s,o){this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o||0}function ti(t){this.points=void 0===t?[]:t}function ei(t,e,n,i){this.v0=t,this.v1=e,this.v2=n,this.v3=i}function ni(t,e,n){this.v0=t,this.v1=e,this.v2=n}function ii(t){Qn.call(this),this.currentPoint=new n,t&&this.fromPoints(t)}function ri(){ii.apply(this,arguments),this.holes=[]}function ai(){this.subPaths=[],this.currentPath=null}function si(t){this.data=t}function oi(t){this.manager=void 0!==t?t:Ar}function li(t){this.manager=void 0!==t?t:Ar}function ui(t,e,n,i){_n.call(this,t,e),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function ci(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new At,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new At,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function hi(t,e,n){it.call(this),this.type="CubeCamera";var i=new At(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new l(1,0,0)),this.add(i);var r=new At(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new l(-1,0,0)),this.add(r);var a=new At(90,1,t,e);a.up.set(0,0,1),a.lookAt(new l(0,1,0)),this.add(a);var o=new At(90,1,t,e);o.up.set(0,0,-1),o.lookAt(new l(0,-1,0)),this.add(o);var u=new At(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new l(0,0,1)),this.add(u);var c=new At(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new l(0,0,-1)),this.add(c),this.renderTarget=new s(n,n,{format:1022,magFilter:1006,minFilter:1006}),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,s=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,i,n),n.activeCubeFace=1,t.render(e,r,n),n.activeCubeFace=2,t.render(e,a,n),n.activeCubeFace=3,t.render(e,o,n),n.activeCubeFace=4,t.render(e,u,n),n.texture.generateMipmaps=s,n.activeCubeFace=5,t.render(e,c,n),t.setRenderTarget(null)}}function di(){it.call(this),this.type="AudioListener",this.context=Dr.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function fi(t){it.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function pi(t){fi.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function mi(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function gi(t,e,n){switch(this.binding=t,this.valueSize=n,t=Float64Array,e){case"quaternion":e=this._slerp;break;case"string":case"bool":t=Array,e=this._select;break;default:e=this._lerp}this.buffer=new t(4*n),this._mixBufferRegion=e,this.referenceCount=this.useCount=this.cumulativeWeight=0}function vi(t,e,n){this.path=e,this.parsedPath=n||vi.parseTrackName(e),this.node=vi.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function yi(t){this.uuid=lr.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function _i(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null,e=(t=e.tracks).length,n=Array(e);for(var i={endingStart:2400,endingEnd:2400},r=0;r!==e;++r){var a=t[r].createInterpolant(null);n[r]=a,a.settings=i}this._interpolantSettings=i,this._interpolants=n,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function xi(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function bi(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t}function wi(){bt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ti(t,e,n,i){this.uuid=lr.generateUUID(),this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function Mi(t,e){this.uuid=lr.generateUUID(),this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Si(t,e,n){Mi.call(this,t,e),this.meshPerAttribute=n||1}function Ei(t,e,n){lt.call(this,t,e),this.meshPerAttribute=n||1}function Ci(t,e,n,i){this.ray=new tt(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ai(t,e){return t.distance-e.distance}function Li(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i)){i=0;for(var r=(t=t.children).length;i<r;i++)Li(t[i],e,n,!0)}}function Pi(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Ri(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Ii(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function Oi(t,e){wt.call(this,t,e),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length;this.createAnimation("__default",0,n-1,n/1),this.setAnimationWeight("__default",1)}function zi(t){it.call(this),this.material=t,this.render=function(t){}}function Di(t,e,n,i){this.object=t,this.size=void 0!==e?e:1,t=void 0!==n?n:16711680,i=void 0!==i?i:1,e=0,(n=this.object.geometry)&&n.isGeometry?e=3*n.faces.length:n&&n.isBufferGeometry&&(e=n.attributes.normal.count),n=new bt,e=new gt(6*e,3),n.addAttribute("position",e),he.call(this,n,new ue({color:t,linewidth:i})),this.matrixAutoUpdate=!1,this.update()}function Ni(t){it.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,t=new bt;for(var e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,i=1;32>n;n++,i++){var r=n/32*Math.PI*2,a=i/32*Math.PI*2;e.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}t.addAttribute("position",new gt(e,3)),e=new ue({fog:!1}),this.cone=new he(t,e),this.add(this.cone),this.update()}function ki(t){this.bones=this.getBoneList(t);for(var e=new bt,n=[],i=[],r=new U(0,0,1),a=new U(0,1,0),s=0;s<this.bones.length;s++){var o=this.bones[s];o.parent&&o.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(r.r,r.g,r.b),i.push(a.r,a.g,a.b))}e.addAttribute("position",new gt(n,3)),e.addAttribute("color",new gt(i,3)),n=new ue({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),he.call(this,e,n),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Bi(t,e){this.light=t,this.light.updateMatrixWorld();var n=new He(e,4,2),i=new ot({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),wt.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Fi(t){it.call(this),this.light=t,this.light.updateMatrixWorld();var e=new ot({color:t.color,fog:!1});t=new ot({color:t.color,fog:!1,wireframe:!0});var n=new bt;n.addAttribute("position",new lt(new Float32Array(18),3)),this.add(new wt(n,e)),this.add(new wt(n,t)),this.update()}function Ui(t,e){it.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;var n=new Ce(e);n.rotateY(.5*Math.PI);var i=new ot({vertexColors:2,wireframe:!0}),r=n.getAttribute("position");r=new Float32Array(3*r.count);n.addAttribute("color",new lt(r,3)),this.add(new wt(n,i)),this.update()}function Hi(t,e,n,i){t=t||10,e=e||10,n=new U(void 0!==n?n:4473924),i=new U(void 0!==i?i:8947848);var r=e/2,a=t/e,s=t/2;t=[];for(var o=[],l=0,u=0,c=-s;l<=e;l++,c+=a){t.push(-s,0,c,s,0,c),t.push(c,0,-s,c,0,s);var h=l===r?n:i;h.toArray(o,u),u+=3,h.toArray(o,u),u+=3,h.toArray(o,u),u+=3,h.toArray(o,u),u+=3}(e=new bt).addAttribute("position",new gt(t,3)),e.addAttribute("color",new gt(o,3)),n=new ue({vertexColors:2}),he.call(this,e,n)}function Gi(t,e,n,i,r,a){t=t||10,e=e||16,n=n||8,i=i||64,r=new U(void 0!==r?r:4473924),a=new U(void 0!==a?a:8947848);var s,o,l,u,c,h=[],d=[];for(l=0;l<=e;l++)o=l/e*2*Math.PI,s=Math.sin(o)*t,o=Math.cos(o)*t,h.push(0,0,0),h.push(s,0,o),c=1&l?r:a,d.push(c.r,c.g,c.b),d.push(c.r,c.g,c.b);for(l=0;l<=n;l++)for(c=1&l?r:a,u=t-t/n*l,e=0;e<i;e++)o=e/i*2*Math.PI,s=Math.sin(o)*u,o=Math.cos(o)*u,h.push(s,0,o),d.push(c.r,c.g,c.b),o=(e+1)/i*2*Math.PI,s=Math.sin(o)*u,o=Math.cos(o)*u,h.push(s,0,o),d.push(c.r,c.g,c.b);(t=new bt).addAttribute("position",new gt(h,3)),t.addAttribute("color",new gt(d,3)),h=new ue({vertexColors:2}),he.call(this,t,h)}function ji(t,e,n,i){this.object=t,this.size=void 0!==e?e:1,t=void 0!==n?n:16776960,i=void 0!==i?i:1,e=0,(n=this.object.geometry)&&n.isGeometry?e=n.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),n=new bt,e=new gt(6*e,3),n.addAttribute("position",e),he.call(this,n,new ue({color:t,linewidth:i})),this.matrixAutoUpdate=!1,this.update()}function Vi(t,e){it.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var n=new bt;n.addAttribute("position",new gt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new ue({fog:!1});this.add(new ce(n,i)),(n=new bt).addAttribute("position",new gt([0,0,0,0,0,1],3)),this.add(new ce(n,i)),this.update()}function Wi(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){a.push(0,0,0),s.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(a.length/3-1)}var i=new bt,r=new ue({color:16777215,vertexColors:1}),a=[],s=[],o={},l=new U(16755200),u=new U(16711680),c=new U(43775),h=new U(16777215),d=new U(3355443);e("n1","n2",l),e("n2","n4",l),e("n4","n3",l),e("n3","n1",l),e("f1","f2",l),e("f2","f4",l),e("f4","f3",l),e("f3","f1",l),e("n1","f1",l),e("n2","f2",l),e("n3","f3",l),e("n4","f4",l),e("p","n1",u),e("p","n2",u),e("p","n3",u),e("p","n4",u),e("u1","u2",c),e("u2","u3",c),e("u3","u1",c),e("c","t",h),e("p","c",d),e("cn1","cn2",d),e("cn3","cn4",d),e("cf1","cf2",d),e("cf3","cf4",d),i.addAttribute("position",new gt(a,3)),i.addAttribute("color",new gt(s,3)),he.call(this,i,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function qi(t,e){void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new bt;r.setIndex(new lt(n,1)),r.addAttribute("position",new lt(i,3)),he.call(this,r,new ue({color:e})),void 0!==t&&this.update(t)}function Xi(t,e,n,i,r,a){it.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===Or&&((Or=new bt).addAttribute("position",new gt([0,0,0,0,1,0],3)),(zr=new Ze(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new ce(Or,new ue({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new wt(zr,new ot({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}function Yi(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new bt).addAttribute("position",new gt(e,3)),t.addAttribute("color",new gt([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new ue({vertexColors:2}),he.call(this,t,e)}function $i(){var t=0,e=0,n=0,i=0;return{initCatmullRom:function(r,a,s,o,l){t=a,e=r=l*(s-r),n=-3*a+3*s-2*r-(o=l*(o-a)),i=2*a-2*s+r+o},initNonuniformCatmullRom:function(r,a,s,o,l,u,c){t=a,e=r=((a-r)/l-(s-r)/(l+u)+(s-a)/u)*u,n=-3*a+3*s-2*r-(o=((s-a)/u-(o-a)/(u+c)+(o-s)/c)*u),i=2*a-2*s+r+o},calc:function(r){var a=r*r;return t+e*r+n*a+i*a*r}}}function Zi(t){this.points=t||[],this.closed=!1}function Ji(t,e,n,i){this.v0=t,this.v1=e,this.v2=n,this.v3=i}function Qi(t,e,n){this.v0=t,this.v1=e,this.v2=n}function Ki(t,e){this.v1=t,this.v2=e}function tr(t,e,n,i,r,a){Kn.call(this,t,e,n,n,i,r,a)}function er(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Zi.call(this,t),this.type="catmullrom",this.closed=!0}function nr(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Zi.call(this,t),this.type="catmullrom"}function ir(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Zi.call(this,t),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),e.prototype={addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;var n,i=[],r=e.length;for(n=0;n<r;n++)i[n]=e[n];for(n=0;n<r;n++)i[n].call(this,t)}}}};var rr,ar,sr,or,lr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(ar="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),sr=Array(36),or=0,function(){for(var t=0;36>t;t++)8===t||13===t||18===t||23===t?sr[t]="-":14===t?sr[t]="4":(2>=or&&(or=33554432+16777216*Math.random()|0),rr=15&or,or>>=4,sr[t]=ar[19===t?3&rr|8:rr]);return sr.join("")}),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*lr.DEG2RAD},radToDeg:function(t){return t*lr.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};n.prototype={constructor:n,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):this.y=this.x=0,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(i,r){return void 0===t&&(t=new n,e=new n),t.set(i,i),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}};var ur=0;i.DEFAULT_IMAGE=void 0,i.DEFAULT_MAPPING=300,i.prototype={constructor:i,isTexture:!0,set needsUpdate(t){!0===t&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=lr.generateUUID()),void 0===t.images[n.uuid]){var i,r=t.images,a=n.uuid,s=n.uuid;void 0!==n.toDataURL?i=n:((i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=n.width,i.height=n.height,i.getContext("2d").drawImage(n,0,0,n.width,n.height)),i=2048<i.width||2048<i.height?i.toDataURL("image/jpeg",.6):i.toDataURL("image/png"),r[a]={uuid:s,url:i}}e.image=n.uuid}return t.textures[this.uuid]=e},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.multiply(this.repeat),t.add(this.offset),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(i.prototype,e.prototype),r.prototype={constructor:r,isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):this.w=this.z=this.y=this.x=0,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i+t[12]*r,this.y=t[1]*e+t[5]*n+t[9]*i+t[13]*r,this.z=t[2]*e+t[6]*n+t[10]*i+t[14]*r,this.w=t[3]*e+t[7]*n+t[11]*i+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r=(t=t.elements)[0];i=t[4];var a=t[8],s=t[1],o=t[5],l=t[9];n=t[2],e=t[6];var u=t[10];return.01>Math.abs(i-s)&&.01>Math.abs(a-n)&&.01>Math.abs(l-e)?.1>Math.abs(i+s)&&.1>Math.abs(a+n)&&.1>Math.abs(l+e)&&.1>Math.abs(r+o+u-3)?(this.set(1,0,0,0),this):(t=Math.PI,u=(u+1)/2,i=(i+s)/4,a=(a+n)/4,l=(l+e)/4,(r=(r+1)/2)>(o=(o+1)/2)&&r>u?.01>r?(e=0,i=n=.707106781):(n=i/(e=Math.sqrt(r)),i=a/e):o>u?.01>o?(e=.707106781,n=0,i=.707106781):(e=i/(n=Math.sqrt(o)),i=l/n):.01>u?(n=e=.707106781,i=0):(e=a/(i=Math.sqrt(u)),n=l/i),this.set(e,n,i,t),this):(t=Math.sqrt((e-l)*(e-l)+(a-n)*(a-n)+(s-i)*(s-i)),.001>Math.abs(t)&&(t=1),this.x=(e-l)/t,this.y=(a-n)/t,this.z=(s-i)/t,this.w=Math.acos((r+o+u-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new r,e=new r),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},a.prototype={constructor:a,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(a.prototype,e.prototype),s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.isWebGLRenderTargetCube=!0,o.prototype={constructor:o,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1===(t&&t.isEuler))throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),i=Math.cos(t._y/2),r=Math.cos(t._z/2),a=Math.sin(t._x/2),s=Math.sin(t._y/2),o=Math.sin(t._z/2),l=t.order;return"XYZ"===l?(this._x=a*i*r+n*s*o,this._y=n*s*r-a*i*o,this._z=n*i*o+a*s*r,this._w=n*i*r-a*s*o):"YXZ"===l?(this._x=a*i*r+n*s*o,this._y=n*s*r-a*i*o,this._z=n*i*o-a*s*r,this._w=n*i*r+a*s*o):"ZXY"===l?(this._x=a*i*r-n*s*o,this._y=n*s*r+a*i*o,this._z=n*i*o+a*s*r,this._w=n*i*r-a*s*o):"ZYX"===l?(this._x=a*i*r-n*s*o,this._y=n*s*r+a*i*o,this._z=n*i*o-a*s*r,this._w=n*i*r+a*s*o):"YZX"===l?(this._x=a*i*r+n*s*o,this._y=n*s*r+a*i*o,this._z=n*i*o-a*s*r,this._w=n*i*r-a*s*o):"XZY"===l&&(this._x=a*i*r-n*s*o,this._y=n*s*r-a*i*o,this._z=n*i*o+a*s*r,this._w=n*i*r+a*s*o),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=(n=t.elements)[0];t=n[4];var n,i=n[8],r=n[1],a=n[5],s=n[9],o=n[2],l=n[6],u=e+a+(n=n[10]);return 0<u?(e=.5/Math.sqrt(u+1),this._w=.25/e,this._x=(l-s)*e,this._y=(i-o)*e,this._z=(r-t)*e):e>a&&e>n?(e=2*Math.sqrt(1+e-a-n),this._w=(l-s)/e,this._x=.25*e,this._y=(t+r)/e,this._z=(i+o)/e):a>n?(e=2*Math.sqrt(1+a-e-n),this._w=(i-o)/e,this._x=(t+r)/e,this._y=.25*e,this._z=(s+l)/e):(e=2*Math.sqrt(1+n-e-a),this._w=(r-t)/e,this._x=(i+o)/e,this._y=(s+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(n,i){return void 0===t&&(t=new l),1e-6>(e=n.dot(i)+1)?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,s=e._x,o=e._y,l=e._z,u=e._w;return this._x=n*u+a*s+i*l-r*o,this._y=i*u+a*o+r*s-n*l,this._z=r*u+a*l+n*o-i*s,this._w=a*u-n*s-i*o-r*l,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w;if(0>(l=a*t._w+n*t._x+i*t._y+r*t._z)?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),1<=l)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-l*l);if(.001>Math.abs(s))return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var o=Math.atan2(s,l),l=Math.sin((1-e)*o)/s;s=Math.sin(e*o)/s;return this._w=a*l+this._w*s,this._x=n*l+this._x*s,this._y=i*l+this._y*s,this._z=r*l+this._z*s,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(o,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,a,s){var o=n[i+0],l=n[i+1],u=n[i+2];n=n[i+3],i=r[a+0];var c=r[a+1],h=r[a+2];if(n!==(r=r[a+3])||o!==i||l!==c||u!==h){a=1-s;var d=o*i+l*c+u*h+n*r,f=0<=d?1:-1,p=1-d*d;p>Number.EPSILON&&(p=Math.sqrt(p),d=Math.atan2(p,d*f),a=Math.sin(a*d)/p,s=Math.sin(s*d)/p),o=o*a+i*(f*=s),l=l*a+c*f,u=u*a+h*f,n=n*a+r*f,a===1-s&&(o*=s=1/Math.sqrt(o*o+l*l+u*u+n*n),l*=s,u*=s,n*=s)}t[e]=o,t[e+1]=l,t[e+2]=u,t[e+3]=n}}),l.prototype={constructor:l,isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):this.z=this.y=this.x=0,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new o),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new o),this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[3]*n+t[6]*i,this.y=t[1]*e+t[4]*n+t[7]*i,this.z=t[2]*e+t[5]*n+t[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i+t[12],this.y=t[1]*e+t[5]*n+t[9]*i+t[13],this.z=t[2]*e+t[6]*n+t[10]*i+t[14],this.divideScalar(t[3]*e+t[7]*n+t[11]*i+t[15])},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,s=t.z,o=(t=t.w)*e+a*i-s*n,l=t*n+s*e-r*i,u=t*i+r*n-a*e;e=-r*e-a*n-s*i;return this.x=o*t+e*-r+l*-s-u*-a,this.y=l*t+e*-a+u*-r-o*-s,this.z=u*t+e*-s+o*-a-l*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new u),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new u),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,i=this.z;return t=t.elements,this.x=t[0]*e+t[4]*n+t[8]*i,this.y=t[1]*e+t[5]*n+t[9]*i,this.z=t[2]*e+t[6]*n+t[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new l,e=new l),t.set(n,n,n),e.set(i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,i=this.y,r=this.z;return this.x=i*t.z-r*t.y,this.y=r*t.x-n*t.z,this.z=n*t.y-i*t.x,this},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x,s=e.y,o=e.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new l),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new l),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq()),Math.acos(lr.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n+(t=this.z-t.z)*t},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=n,this.z=t,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=t;t=e,e=n}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},u.prototype={constructor:u,isMatrix4:!0,set:function(t,e,n,i,r,a,s,o,l,u,c,h,d,f,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new l);var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length();return e=1/t.setFromMatrixColumn(e,2).length(),n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[8]=i[8]*e,n[9]=i[9]*e,n[10]=i[10]*e,this}}(),makeRotationFromEuler:function(t){!1===(t&&t.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),s=(n=Math.sin(n),Math.cos(i)),o=(i=Math.sin(i),Math.cos(r));r=Math.sin(r);if("XYZ"===t.order){t=a*o;var l=a*r,u=n*o,c=n*r;e[0]=s*o,e[4]=-s*r,e[8]=i,e[1]=l+u*i,e[5]=t-c*i,e[9]=-n*s,e[2]=c-t*i,e[6]=u+l*i,e[10]=a*s}else"YXZ"===t.order?(t=s*o,l=s*r,u=i*o,c=i*r,e[0]=t+c*n,e[4]=u*n-l,e[8]=a*i,e[1]=a*r,e[5]=a*o,e[9]=-n,e[2]=l*n-u,e[6]=c+t*n,e[10]=a*s):"ZXY"===t.order?(t=s*o,l=s*r,u=i*o,c=i*r,e[0]=t-c*n,e[4]=-a*r,e[8]=u+l*n,e[1]=l+u*n,e[5]=a*o,e[9]=c-t*n,e[2]=-a*i,e[6]=n,e[10]=a*s):"ZYX"===t.order?(t=a*o,l=a*r,u=n*o,c=n*r,e[0]=s*o,e[4]=u*i-l,e[8]=t*i+c,e[1]=s*r,e[5]=c*i+t,e[9]=l*i-u,e[2]=-i,e[6]=n*s,e[10]=a*s):"YZX"===t.order?(t=a*s,l=a*i,u=n*s,c=n*i,e[0]=s*o,e[4]=c-t*r,e[8]=u*r+l,e[1]=r,e[5]=a*o,e[9]=-n*o,e[2]=-i*o,e[6]=l*r+u,e[10]=t-c*r):"XZY"===t.order&&(t=a*s,l=a*i,u=n*s,c=n*i,e[0]=s*o,e[4]=-r,e[8]=i*o,e[1]=t*r+c,e[5]=a*o,e[9]=l*r-u,e[2]=u*r-l,e[6]=n*o,e[10]=c*r+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z,a=t.w,s=r+r;t=n*(u=n+n);var o=n*(c=i+i),l=(n=n*s,i*c),u=(i=i*s,r=r*s,a*u),c=a*c;a*=s;return e[0]=1-(l+r),e[4]=o-a,e[8]=n+c,e[1]=o+a,e[5]=1-(t+r),e[9]=i-u,e[2]=n-c,e[6]=i+u,e[10]=1-(t+l),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,n;return function(i,r,a){void 0===t&&(t=new l,e=new l,n=new l);var s=this.elements;return n.subVectors(i,r).normalize(),0===n.lengthSq()&&(n.z=1),t.crossVectors(a,n).normalize(),0===t.lengthSq()&&(n.z+=1e-4,t.crossVectors(a,n).normalize()),e.crossVectors(n,t),s[0]=t.x,s[4]=e.x,s[8]=n.x,s[1]=t.y,s[5]=e.y,s[9]=n.y,s[2]=t.z,s[6]=e.z,s[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],x=(n=n[15],i[0]),b=i[4],w=i[8],T=i[12],M=i[1],S=i[5],E=i[9],C=i[13],A=i[2],L=i[6],P=i[10],R=i[14],I=i[3],O=i[7],z=i[11];i=i[15];return r[0]=a*x+s*M+o*A+l*I,r[4]=a*b+s*S+o*L+l*O,r[8]=a*w+s*E+o*P+l*z,r[12]=a*T+s*C+o*R+l*i,r[1]=u*x+c*M+h*A+d*I,r[5]=u*b+c*S+h*L+d*O,r[9]=u*w+c*E+h*P+d*z,r[13]=u*T+c*C+h*R+d*i,r[2]=f*x+p*M+m*A+g*I,r[6]=f*b+p*S+m*L+g*O,r[10]=f*w+p*E+m*P+g*z,r[14]=f*T+p*C+m*R+g*i,r[3]=v*x+y*M+_*A+n*I,r[7]=v*b+y*S+_*L+n*O,r[11]=v*w+y*E+_*P+n*z,r[15]=v*T+y*C+_*R+n*i,this},multiplyToArray:function(t,e,n){var i=this.elements;return this.multiplyMatrices(t,e),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new l);for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],s=t[5],o=t[9],l=t[13],u=t[2],c=t[6],h=t[10],d=t[14];return t[3]*(+r*o*c-i*l*c-r*s*h+n*l*h+i*s*d-n*o*d)+t[7]*(+e*o*d-e*l*h+r*a*h-i*a*d+i*l*u-r*o*u)+t[11]*(+e*l*c-e*s*d-r*a*c+n*a*d+r*s*u-n*l*u)+t[15]*(-i*s*u-e*o*c+e*s*h+i*a*c-n*a*h+n*o*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n,i=this.elements,r=(n=t.elements)[0],a=n[1],s=n[2],o=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],f=n[9],p=n[10],m=n[11],g=n[12],v=n[13],y=n[14],_=f*y*h-v*p*h+v*c*m-u*y*m-f*c*(n=n[15])+u*p*n,x=g*p*h-d*y*h-g*c*m+l*y*m+d*c*n-l*p*n,b=d*v*h-g*f*h+g*u*m-l*v*m-d*u*n+l*f*n,w=g*f*c-d*v*c-g*u*p+l*v*p+d*u*y-l*f*y,T=r*_+a*x+s*b+o*w;if(0===T){if(!0===e)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity()}return T=1/T,i[0]=_*T,i[1]=(v*p*o-f*y*o-v*s*m+a*y*m+f*s*n-a*p*n)*T,i[2]=(u*y*o-v*c*o+v*s*h-a*y*h-u*s*n+a*c*n)*T,i[3]=(f*c*o-u*p*o-f*s*h+a*p*h+u*s*m-a*c*m)*T,i[4]=x*T,i[5]=(d*y*o-g*p*o+g*s*m-r*y*m-d*s*n+r*p*n)*T,i[6]=(g*c*o-l*y*o-g*s*h+r*y*h+l*s*n-r*c*n)*T,i[7]=(l*p*o-d*c*o+d*s*h-r*p*h-l*s*m+r*c*m)*T,i[8]=b*T,i[9]=(g*f*o-d*v*o-g*a*m+r*v*m+d*a*n-r*f*n)*T,i[10]=(l*v*o-g*u*o+g*a*h-r*v*h-l*a*n+r*u*n)*T,i[11]=(d*u*o-l*f*o-d*a*h+r*f*h+l*a*m-r*u*m)*T,i[12]=w*T,i[13]=(d*v*s-g*f*s+g*a*p-r*v*p-d*a*y+r*f*y)*T,i[14]=(g*u*s-l*v*s-g*a*c+r*v*c+l*a*y-r*u*y)*T,i[15]=(l*f*s-d*u*s+d*a*c-r*f*c-l*a*p+r*u*p)*T,this},scale:function(t){var e=this.elements,n=t.x,i=t.y;return t=t.z,e[0]*=n,e[4]*=i,e[8]*=t,e[1]*=n,e[5]*=i,e[9]*=t,e[2]*=n,e[6]*=i,e[10]*=t,e[3]*=n,e[7]*=i,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,s=t.y,o=t.z,l=r*a,u=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,u*s+n,u*o-i*a,0,l*o-i*s,u*o+i*a,r*o*o+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t,e;return function(n,i,r){void 0===t&&(t=new l,e=new u);var a=this.elements,s=t.set(a[0],a[1],a[2]).length(),o=t.set(a[4],a[5],a[6]).length(),c=t.set(a[8],a[9],a[10]).length();0>this.determinant()&&(s=-s),n.x=a[12],n.y=a[13],n.z=a[14],e.elements.set(this.elements),n=1/s;a=1/o;var h=1/c;return e.elements[0]*=n,e.elements[1]*=n,e.elements[2]*=n,e.elements[4]*=a,e.elements[5]*=a,e.elements[6]*=a,e.elements[8]*=h,e.elements[9]*=h,e.elements[10]*=h,i.setFromRotationMatrix(e),r.x=s,r.y=o,r.z=c,this}}(),makePerspective:function(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements;return s[0]=2*r/(e-t),s[4]=0,s[8]=(e+t)/(e-t),s[12]=0,s[1]=0,s[5]=2*r/(n-i),s[9]=(n+i)/(n-i),s[13]=0,s[2]=0,s[6]=0,s[10]=-(a+r)/(a-r),s[14]=-2*a*r/(a-r),s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,n,i,r,a){var s=this.elements,o=1/(e-t),l=1/(n-i),u=1/(a-r);return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-(e+t)*o,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-(n+i)*l,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-(a+r)*u,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var n=0;16>n;n++)if(e[n]!==t[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;16>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},c.prototype=Object.create(i.prototype),c.prototype.constructor=c,c.prototype.isCubeTexture=!0,Object.defineProperty(c.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var cr=new i,hr=new c,dr=[],fr=[];B.prototype.setValue=function(t,e){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var a=n[i];a.setValue(t,e[a.id])}};var pr=/([\w\d_]+)(\])?(\[|\.)?/g;F.prototype.setValue=function(t,e,n){void 0!==(e=this.map[e])&&e.setValue(t,n,this.renderer)},F.prototype.set=function(t,e,n){var i=this.map[n];void 0!==i&&i.setValue(t,e[n],this.renderer)},F.prototype.setOptional=function(t,e,n){void 0!==(e=e[n])&&this.setValue(t,n,e)},F.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var s=e[r],o=n[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,i)}},F.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var mr={merge:function(t){for(var e={},n=0;n<t.length;n++){var i,r=this.clone(t[n]);for(i in r)e[i]=r[i]}return e},clone:function(t){var e,n={};for(e in t)for(var i in n[e]={},t[e]){var r=t[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?n[e][i]=r.clone():Array.isArray(r)?n[e][i]=r.slice():n[e][i]=r}return n}},gr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};U.prototype={constructor:U,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:.5>n?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){return e=lr.euclideanModulo(e,1),n=lr.clamp(n,0,1),i=lr.clamp(i,0,1),0===n?this.r=this.g=this.b=i:(i=2*i-(n=.5>=i?i*(1+n):i+n-i*n),this.r=t(i,n,e+1/3),this.g=t(i,n,e),this.b=t(i,n,e-1/3)),this}}(),setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i=n[2];switch(n[1]){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){i=parseFloat(n[1])/360;var r=parseInt(n[2],10)/100,a=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(i,r,a)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){if(3===(i=(n=n[1]).length))return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,this;if(6===i)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,this}return t&&0<t.length&&(void 0!==(n=vr[t])?this.setHex(n):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=0<e?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){t=t||{h:0,s:0,l:0};var e,n=this.r,i=this.g,r=this.b,a=Math.max(n,i,r),s=((l=Math.min(n,i,r))+a)/2;if(l===a)l=e=0;else{var o=a-l,l=.5>=s?o/(a+l):o/(2-a-l);switch(a){case n:e=(i-r)/o+(i<r?6:0);break;case i:e=(r-n)/o+2;break;case r:e=(n-i)/o+4}e/=6}return t.h=e,t.s=l,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var i=this.getHSL();return i.h+=t,i.s+=e,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}};var vr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H.prototype=Object.create(i.prototype),H.prototype.constructor=H,H.prototype.isDataTexture=!0;var yr={common:{diffuse:{value:new U(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new U(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new U(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)}}},_r={basic:{uniforms:mr.merge([yr.common,yr.aomap,yr.lightmap,yr.fog]),vertexShader:gr.meshbasic_vert,fragmentShader:gr.meshbasic_frag},lambert:{uniforms:mr.merge([yr.common,yr.aomap,yr.lightmap,yr.emissivemap,yr.fog,yr.lights,{emissive:{value:new U(0)}}]),vertexShader:gr.meshlambert_vert,fragmentShader:gr.meshlambert_frag},phong:{uniforms:mr.merge([yr.common,yr.aomap,yr.lightmap,yr.emissivemap,yr.bumpmap,yr.normalmap,yr.displacementmap,yr.gradientmap,yr.fog,yr.lights,{emissive:{value:new U(0)},specular:{value:new U(1118481)},shininess:{value:30}}]),vertexShader:gr.meshphong_vert,fragmentShader:gr.meshphong_frag},standard:{uniforms:mr.merge([yr.common,yr.aomap,yr.lightmap,yr.emissivemap,yr.bumpmap,yr.normalmap,yr.displacementmap,yr.roughnessmap,yr.metalnessmap,yr.fog,yr.lights,{emissive:{value:new U(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gr.meshphysical_vert,fragmentShader:gr.meshphysical_frag},points:{uniforms:mr.merge([yr.points,yr.fog]),vertexShader:gr.points_vert,fragmentShader:gr.points_frag},dashed:{uniforms:mr.merge([yr.common,yr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gr.linedashed_vert,fragmentShader:gr.linedashed_frag},depth:{uniforms:mr.merge([yr.common,yr.displacementmap]),vertexShader:gr.depth_vert,fragmentShader:gr.depth_frag},normal:{uniforms:mr.merge([yr.common,yr.bumpmap,yr.normalmap,yr.displacementmap,{opacity:{value:1}}]),vertexShader:gr.normal_vert,fragmentShader:gr.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:gr.cube_vert,fragmentShader:gr.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:gr.equirect_vert,fragmentShader:gr.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new l}},vertexShader:gr.distanceRGBA_vert,fragmentShader:gr.distanceRGBA_frag}};_r.physical={uniforms:mr.merge([_r.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:gr.meshphysical_vert,fragmentShader:gr.meshphysical_frag},G.prototype={constructor:G,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new n;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return t=t||new n,this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t=t||new n,this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return(e||new n).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return(e||new n).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new n;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}};var xr=0;W.prototype={constructor:W,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0===n)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else{var i=this[e];void 0===i?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]="overdraw"===e?Number(n):n}}},toJSON:function(t){function e(t){var e,n=[];for(e in t){var i=t[e];delete i.metadata,n.push(i)}return n}var n=void 0===t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};return i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),2!==this.shading&&(i.shading=this.shading),0!==this.side&&(i.side=this.side),0!==this.vertexColors&&(i.vertexColors=this.vertexColors),1>this.opacity&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),i.skinning=this.skinning,i.morphTargets=this.morphTargets,n&&(n=e(t.textures),t=e(t.images),0<n.length&&(i.textures=n),0<t.length&&(i.images=t)),i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=null;if(null!==(t=t.clippingPlanes))for(var n=t.length,i=(e=Array(n),0);i!==n;++i)e[i]=t[i].clone();return this.clippingPlanes=e,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(W.prototype,e.prototype),q.prototype=Object.create(W.prototype),q.prototype.constructor=q,q.prototype.isShaderMaterial=!0,q.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=mr.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},q.prototype.toJSON=function(t){return(t=W.prototype.toJSON.call(this,t)).uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},X.prototype=Object.create(W.prototype),X.prototype.constructor=X,X.prototype.isMeshDepthMaterial=!0,X.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Y.prototype={constructor:Y,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=t.length;o<l;o+=3){var u=t[o],c=t[o+1],h=t[o+2];u<e&&(e=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>s&&(s=h)}return this.min.set(e,n,i),this.max.set(r,a,s),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=t.count;o<l;o++){var u=t.getX(o),c=t.getY(o),h=t.getZ(o);u<e&&(e=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>s&&(s=h)}return this.min.set(e,n,i),this.max.set(r,a,s),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new l;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return t=t||new l,this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t=t||new l,this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t=new l;return function(e){var n=this;return e.updateMatrixWorld(!0),e.traverse((function(e){var i,r;if(void 0!==(i=e.geometry))if(i.isGeometry){var a=i.vertices;for(i=0,r=a.length;i<r;i++)t.copy(a[i]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t)}else if(i.isBufferGeometry&&void 0!==(a=i.attributes.position))for(i=0,r=a.count;i<r;i++)t.fromBufferAttribute(a,i).applyMatrix4(e.matrixWorld),n.expandByPoint(t)})),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new l).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new l),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return 0<t.normal.x?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){return(e||new l).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new l;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new l;return function(e){return e=e||new $,this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new l,new l,new l,new l,new l,new l,new l,new l];return function(e){return this.isEmpty()||(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t)),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},$.prototype={constructor:$,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t;return function(e,n){void 0===t&&(t=new Y);var i=this.center;void 0!==n?i.copy(n):t.setFromPoints(e).getCenter(i);for(var r=0,a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),i=e||new l;return i.copy(t),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(t){return(t=t||new Y).set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},Z.prototype={constructor:Z,isMatrix3:!0,set:function(t,e,n,i,r,a,s,o,l){var u=this.elements;return u[0]=t,u[1]=i,u[2]=s,u[3]=e,u[4]=r,u[5]=o,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){return t=t.elements,this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new l);for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t,e=(t=this.elements)[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7];return e*a*(t=t[8])-e*s*l-n*r*t+n*s*o+i*r*l-i*a*o},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],a=n[1],s=n[2],o=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=(n=n[8])*l-u*h,f=u*c-n*o,p=h*o-l*c,m=r*d+a*f+s*p;if(0===m){if(!0===e)throw Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity()}return m=1/m,i[0]=d*m,i[1]=(s*h-n*a)*m,i[2]=(u*a-s*l)*m,i[3]=f*m,i[4]=(n*r-s*c)*m,i[5]=(s*o-u*r)*m,i[6]=p*m,i[7]=(a*c-h*r)*m,i[8]=(l*r-a*o)*m,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;9>n;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},J.prototype={constructor:J,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new l,e=new l;return function(n,i,r){return i=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize(),this.setFromNormalAndCoplanarPoint(i,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t);return(e||new l).copy(this.normal).multiplyScalar(n)},intersectLine:function(){var t=new l;return function(e,n){var i=n||new l,r=e.delta(t),a=this.normal.dot(r);return 0!==a?0>(a=-(e.start.dot(this.normal)+this.constant)/a)||1<a?void 0:i.copy(r).multiplyScalar(a).add(e.start):0===this.distanceToPoint(e.start)?i.copy(e.start):void 0}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new l).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new l,e=new Z;return function(n,i){var r=this.coplanarPoint(t).applyMatrix4(n),a=i||e.getNormalMatrix(n);a=this.normal.applyMatrix3(a).normalize();return this.constant=-r.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},Q.prototype={constructor:Q,set:function(t,e,n,i,r,a){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;6>n;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes;t=(g=t.elements)[0];var n=g[1],i=g[2],r=g[3],a=g[4],s=g[5],o=g[6],l=g[7],u=g[8],c=g[9],h=g[10],d=g[11],f=g[12],p=g[13],m=g[14],g=g[15];return e[0].setComponents(r-t,l-a,d-u,g-f).normalize(),e[1].setComponents(r+t,l+a,d+u,g+f).normalize(),e[2].setComponents(r+n,l+s,d+c,g+p).normalize(),e[3].setComponents(r-n,l-s,d-c,g-p).normalize(),e[4].setComponents(r-i,l-o,d-h,g-m).normalize(),e[5].setComponents(r+i,l+o,d+h,g+m).normalize(),this},intersectsObject:function(){var t=new $;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new $;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes,n=t.center;t=-t.radius;for(var i=0;6>i;i++)if(e[i].distanceToPoint(n)<t)return!1;return!0},intersectsBox:function(){var t=new l,e=new l;return function(n){for(var i=this.planes,r=0;6>r;r++){var a=i[r];t.x=0<a.normal.x?n.min.x:n.max.x,e.x=0<a.normal.x?n.max.x:n.min.x,t.y=0<a.normal.y?n.min.y:n.max.y,e.y=0<a.normal.y?n.max.y:n.min.y,t.z=0<a.normal.z?n.min.z:n.max.z,e.z=0<a.normal.z?n.max.z:n.min.z;var s=a.distanceToPoint(t);a=a.distanceToPoint(e);if(0>s&&0>a)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;6>n;n++)if(0>e[n].distanceToPoint(t))return!1;return!0}},tt.prototype={constructor:tt,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new l).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new l;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var n=e||new l;n.subVectors(t,this.origin);var i=n.dot(this.direction);return 0>i?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new l;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new l,e=new l,n=new l;return function(i,r,a,s){t.copy(i).add(r).multiplyScalar(.5),e.copy(r).sub(i).normalize(),n.copy(this.origin).sub(t);var o,l=.5*i.distanceTo(r),u=-this.direction.dot(e),c=n.dot(this.direction),h=-n.dot(e),d=n.lengthSq(),f=Math.abs(1-u*u);return 0<f?(r=u*c-h,o=l*f,0<=(i=u*h-c)?r>=-o?r<=o?u=(i*=l=1/f)*(i+u*(r*=l)+2*c)+r*(u*i+r+2*h)+d:(r=l,u=-(i=Math.max(0,-(u*r+c)))*i+r*(r+2*h)+d):(r=-l,u=-(i=Math.max(0,-(u*r+c)))*i+r*(r+2*h)+d):r<=-o?u=-(i=Math.max(0,-(-u*l+c)))*i+(r=0<i?-l:Math.min(Math.max(-l,-h),l))*(r+2*h)+d:r<=o?(i=0,u=(r=Math.min(Math.max(-l,-h),l))*(r+2*h)+d):u=-(i=Math.max(0,-(u*l+c)))*i+(r=0<i?l:Math.min(Math.max(-l,-h),l))*(r+2*h)+d):(r=0<u?-l:l,u=-(i=Math.max(0,-(u*r+c)))*i+r*(r+2*h)+d),a&&a.copy(this.direction).multiplyScalar(i).add(this.origin),s&&s.copy(e).multiplyScalar(r).add(t),u}}(),intersectSphere:function(){var t=new l;return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,a=e.radius*e.radius;return r>a?null:(r=i-(a=Math.sqrt(a-r)),i+=a,0>r&&0>i?null:0>r?this.at(i,n):this.at(r,n))}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e},intersectBox:function(t,e){var n,i,r,a,s;i=1/this.direction.x,a=1/this.direction.y,s=1/this.direction.z;var o=this.origin;return 0<=i?(n=(t.min.x-o.x)*i,i*=t.max.x-o.x):(n=(t.max.x-o.x)*i,i*=t.min.x-o.x),0<=a?(r=(t.min.y-o.y)*a,a*=t.max.y-o.y):(r=(t.max.y-o.y)*a,a*=t.min.y-o.y),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),0<=s?(r=(t.min.z-o.z)*s,s*=t.max.z-o.z):(r=(t.max.z-o.z)*s,s*=t.min.z-o.z),n>s||r>i?null:((r>n||n!=n)&&(n=r),(s<i||i!=i)&&(i=s),0>i?null:this.at(0<=n?n:i,e)))},intersectsBox:function(){var t=new l;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new l,e=new l,n=new l,i=new l;return function(r,a,s,o,l){if(e.subVectors(a,r),n.subVectors(s,r),i.crossVectors(e,n),0<(a=this.direction.dot(i))){if(o)return null;o=1}else{if(!(0>a))return null;o=-1,a=-a}return t.subVectors(this.origin,r),0>(r=o*this.direction.dot(n.crossVectors(t,n)))||0>(s=o*this.direction.dot(e.cross(t)))||r+s>a||0>(r=-o*t.dot(i))?null:this.at(r/a,l)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},et.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),et.DefaultOrder="XYZ",et.prototype={constructor:et,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=lr.clamp;t=(h=t.elements)[0];var r=h[4],a=h[8],s=h[1],o=h[5],l=h[9],u=h[2],c=h[6],h=h[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-r,t)):(this._x=Math.atan2(c,o),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,o)):(this._y=Math.atan2(-u,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(c,-1,1)),.99999>Math.abs(c)?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-r,o)):(this._y=0,this._z=Math.atan2(s,t))):"ZYX"===e?(this._y=Math.asin(-i(u,-1,1)),.99999>Math.abs(u)?(this._x=Math.atan2(c,h),this._z=Math.atan2(s,t)):(this._x=0,this._z=Math.atan2(-r,o))):"YZX"===e?(this._z=Math.asin(i(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-l,o),this._y=Math.atan2(-u,t)):(this._x=0,this._y=Math.atan2(a,h))):"XZY"===e?(this._z=Math.asin(-i(r,-1,1)),.99999>Math.abs(r)?(this._x=Math.atan2(c,o),this._y=Math.atan2(a,t)):(this._x=Math.atan2(-l,h),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new o;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new l(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},nt.prototype={constructor:nt,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!=(this.mask&t.mask)}};var br=0;it.DefaultUp=new l(0,1,0),it.DefaultMatrixAutoUpdate=!0,it.prototype={constructor:it,isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new o;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new l(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new l(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new l(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new l;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new l(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new l(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new l(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new u;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new u;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);-1!==(e=this.children.indexOf(t))&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(e,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return t=t||new l,this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new l,e=new l;return function(n){return n=n||new o,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new o;return function(e){return e=e||new et,this.getWorldQuaternion(t),e.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new l,e=new o;return function(n){return n=n||new l,this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new o;return function(e){return e=e||new l,this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==t||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e,n=[];for(e in t){var i=t[e];delete i.metadata,n.push(i)}return n}var n={};(a=void 0===t||""===t)&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),i.material=this.material.uuid),0<this.children.length){i.children=[];for(var r=0;r<this.children.length;r++)i.children.push(this.children[r].toJSON(t).object)}if(a){var a=e(t.geometries),s=(r=e(t.materials),e(t.textures));t=e(t.images),0<a.length&&(n.geometries=a),0<r.length&&(n.materials=r),0<s.length&&(n.textures=s),0<t.length&&(n.images=t)}return n.object=i,n},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}},Object.assign(it.prototype,e.prototype),rt.prototype={constructor:rt,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return(t||new l).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new l).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var n=e||new l;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new l,e=new l;return function(n,i){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var r=e.dot(e);r=e.dot(t)/r;return i&&(r=lr.clamp(r,0,1)),r}}(),closestPointToPoint:function(t,e,n){return t=this.closestPointToPointParameter(t,e),n=n||new l,this.delta(n).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},at.normal=function(){var t=new l;return function(e,n,i,r){return(r=r||new l).subVectors(i,n),t.subVectors(e,n),r.cross(t),0<(e=r.lengthSq())?r.multiplyScalar(1/Math.sqrt(e)):r.set(0,0,0)}}(),at.barycoordFromPoint=function(){var t=new l,e=new l,n=new l;return function(i,r,a,s,o){t.subVectors(s,r),e.subVectors(a,r),n.subVectors(i,r),i=t.dot(t),r=t.dot(e),a=t.dot(n);var u=e.dot(e);s=e.dot(n);var c=i*u-r*r;return o=o||new l,0===c?o.set(-2,-1,-1):(u=(u*a-r*s)*(c=1/c),i=(i*s-r*a)*c,o.set(1-u-i,i,u))}}(),at.containsPoint=function(){var t=new l;return function(e,n,i,r){return 0<=(e=at.barycoordFromPoint(e,n,i,r,t)).x&&0<=e.y&&1>=e.x+e.y}}(),at.prototype={constructor:at,set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new l,e=new l;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new l).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return at.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new J).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return at.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return at.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,n,i;return function(r,a){void 0===t&&(t=new J,e=[new rt,new rt,new rt],n=new l,i=new l);var s=a||new l,o=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,n),!0===this.containsPoint(n))s.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var u=0;u<e.length;u++){e[u].closestPointToPoint(n,!0,i);var c=n.distanceToSquared(i);c<o&&(o=c,s.copy(i))}}return s}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},st.prototype={constructor:st,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},ot.prototype=Object.create(W.prototype),ot.prototype.constructor=ot,ot.prototype.isMeshBasicMaterial=!0,ot.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},lt.prototype={constructor:lt,isBufferAttribute:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new U),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyIndicesArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];e[n++]=a.a,e[n++]=a.b,e[n++]=a.c}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,a=t.length;r<a;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new n),e[i++]=s.x,e[i++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new l),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,a=t.length;i<a;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new r),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z,e[n++]=s.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},ut.prototype=Object.create(lt.prototype),ut.prototype.constructor=ut,ct.prototype=Object.create(lt.prototype),ct.prototype.constructor=ct,ht.prototype=Object.create(lt.prototype),ht.prototype.constructor=ht,dt.prototype=Object.create(lt.prototype),dt.prototype.constructor=dt,ft.prototype=Object.create(lt.prototype),ft.prototype.constructor=ft,pt.prototype=Object.create(lt.prototype),pt.prototype.constructor=pt,mt.prototype=Object.create(lt.prototype),mt.prototype.constructor=mt,gt.prototype=Object.create(lt.prototype),gt.prototype.constructor=gt,vt.prototype=Object.create(lt.prototype),vt.prototype.constructor=vt,Object.assign(yt.prototype,{computeGroups:function(t){var e,n=[],i=void 0;t=t.faces;for(var r=0;r<t.length;r++){var a=t[r];a.materialIndex!==i&&(i=a.materialIndex,void 0!==e&&(e.count=3*r-e.start,n.push(e)),e={start:3*r,materialIndex:i})}void 0!==e&&(e.count=3*r-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,i=t.faces,r=t.vertices,a=t.faceVertexUvs,s=a[0]&&0<a[0].length,o=a[1]&&0<a[1].length,l=t.morphTargets,u=l.length;if(0<u){e=[];for(var c=0;c<u;c++)e[c]=[];this.morphTargets.position=e}var h,d=t.morphNormals,f=d.length;if(0<f){for(h=[],c=0;c<f;c++)h[c]=[];this.morphTargets.normal=h}var p=t.skinIndices,m=t.skinWeights,g=p.length===r.length,v=m.length===r.length;for(c=0;c<i.length;c++){var y=i[c];this.vertices.push(r[y.a],r[y.b],r[y.c]);var _=y.vertexNormals;for(3===_.length?this.normals.push(_[0],_[1],_[2]):(_=y.normal,this.normals.push(_,_,_)),3===(_=y.vertexColors).length?this.colors.push(_[0],_[1],_[2]):(_=y.color,this.colors.push(_,_,_)),!0===s&&(void 0!==(_=a[0][c])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new n,new n,new n))),!0===o&&(void 0!==(_=a[1][c])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new n,new n,new n))),_=0;_<u;_++){var x=l[_].vertices;e[_].push(x[y.a],x[y.b],x[y.c])}for(_=0;_<f;_++)x=d[_].vertexNormals[c],h[_].push(x.a,x.b,x.c);g&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var wr=0;xt.prototype={constructor:xt,isGeometry:!0,applyMatrix:function(t){for(var e=(new Z).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(n=0,i=this.faces.length;n<i;n++){(t=this.faces[n]).normal.applyMatrix3(e).normalize();for(var r=0,a=t.vertexNormals.length;r<a;r++)t.vertexNormals[r].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new it),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,n,r){r=new st(t,e,n,void 0!==o?[d[t].clone(),d[e].clone(),d[n].clone()]:[],void 0!==u?[i.colors[t].clone(),i.colors[e].clone(),i.colors[n].clone()]:[],r),i.faces.push(r),void 0!==c&&i.faceVertexUvs[0].push([f[t].clone(),f[e].clone(),f[n].clone()]),void 0!==h&&i.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[n].clone()])}var i=this,r=null!==t.index?t.index.array:void 0,a=t.attributes,s=a.position.array,o=void 0!==a.normal?a.normal.array:void 0,u=void 0!==a.color?a.color.array:void 0,c=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var d=[],f=[],p=[],m=a=0;a<s.length;a+=3,m+=2)i.vertices.push(new l(s[a],s[a+1],s[a+2])),void 0!==o&&d.push(new l(o[a],o[a+1],o[a+2])),void 0!==u&&i.colors.push(new U(u[a],u[a+1],u[a+2])),void 0!==c&&f.push(new n(c[m],c[m+1])),void 0!==h&&p.push(new n(h[m],h[m+1]));if(void 0!==r)if(0<(s=t.groups).length)for(a=0;a<s.length;a++)for(var g=s[a],v=(m=v=g.start,v+g.count);m<v;m+=3)e(r[m],r[m+1],r[m+2],g.materialIndex);else for(a=0;a<r.length;a+=3)e(r[a],r[a+1],r[a+2]);else for(a=0;a<s.length/3;a+=3)e(a,a+1,a+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=0===(e=this.boundingSphere.radius)?1:1/e,n=new u;return n.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new l,e=new l,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],s=this.vertices[r.b];t.subVectors(this.vertices[r.c],s),e.subVectors(a,s),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i;for(void 0===t&&(t=!0),i=Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)i[e]=new l;if(t){var r,a,s,o=new l,u=new l;for(t=0,e=this.faces.length;t<e;t++)n=this.faces[t],r=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c],o.subVectors(s,a),u.subVectors(r,a),o.cross(u),i[n.a].add(o),i[n.b].add(o),i[n.c].add(o)}else for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++)i[(n=this.faces[t]).a].add(n.normal),i[n.b].add(n.normal),i[n.c].add(n.normal);for(e=0,n=this.vertices.length;e<n;e++)i[e].normalize();for(t=0,e=this.faces.length;t<e;t++)3===(r=(n=this.faces[t]).vertexNormals).length?(r[0].copy(i[n.a]),r[1].copy(i[n.b]),r[2].copy(i[n.c])):(r[0]=i[n.a].clone(),r[1]=i[n.b].clone(),r[2]=i[n.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i=(n=this.faces[t]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var a=new xt;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[],r=this.morphNormals[t].faceNormals;var s,o,u=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)s=new l,o={a:new l,b:new l,c:new l},r.push(s),u.push(o)}for(u=this.morphNormals[t],a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],s=u.faceNormals[n],o=u.vertexNormals[n],s.copy(r.normal),o.a.copy(r.vertexNormals[0]),o.b.copy(r.vertexNormals[1]),o.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,i=e.length;n<i;n++)0<n&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Y),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new $),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!1===(t&&t.isGeometry))console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);else{var i,r=this.vertices.length,a=this.vertices,s=t.vertices,o=this.faces,l=t.faces,u=this.faceVertexUvs[0],c=t.faceVertexUvs[0],h=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new Z).getNormalMatrix(e)),t=0;for(var f=s.length;t<f;t++){var p=s[t].clone();void 0!==e&&p.applyMatrix4(e),a.push(p)}for(t=0,f=d.length;t<f;t++)h.push(d[t].clone());for(t=0,f=l.length;t<f;t++){var m=(s=l[t]).vertexNormals;d=s.vertexColors;for((h=new st(s.a+r,s.b+r,s.c+r)).normal.copy(s.normal),void 0!==i&&h.normal.applyMatrix3(i).normalize(),e=0,a=m.length;e<a;e++)p=m[e].clone(),void 0!==i&&p.applyMatrix3(i).normalize(),h.vertexNormals.push(p);for(h.color.copy(s.color),e=0,a=d.length;e<a;e++)p=d[e],h.vertexColors.push(p.clone());h.materialIndex=s.materialIndex+n,o.push(h)}for(t=0,f=c.length;t<f;t++)if(i=[],void 0!==(n=c[t])){for(e=0,a=n.length;e<a;e++)i.push(n[e].clone());u.push(i)}}},mergeMesh:function(t){!1===(t&&t.isMesh)?console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,i={},r=[],a=[],s=Math.pow(10,4);for(e=0,n=this.vertices.length;e<n;e++)t=this.vertices[e],void 0===i[t=Math.round(t.x*s)+"_"+Math.round(t.y*s)+"_"+Math.round(t.z*s)]?(i[t]=e,r.push(this.vertices[e]),a[e]=r.length-1):a[e]=a[i[t]];for(i=[],e=0,n=this.faces.length;e<n;e++)for((s=this.faces[e]).a=a[s.a],s.b=a[s.b],s.c=a[s.c],s=[s.a,s.b,s.c],t=0;3>t;t++)if(s[t]===s[(t+1)%3]){i.push(e);break}for(e=i.length-1;0<=e;e--)for(s=i[e],this.faces.splice(s,1),a=0,n=this.faceVertexUvs.length;a<n;a++)this.faceVertexUvs[a].splice(s,1);return e=this.vertices.length-r.length,this.vertices=r,e},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var i,r,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];for(a&&a.length===e&&(i=[]),s&&s.length===e&&(r=[]),n=0;n<e;n++){var o=t[n]._id;i&&i.push(a[o]),r&&r.push(s[o])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]||(u[e]=l.length/3,l.push(t.x,t.y,t.z)),u[e]}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==h[e]||(h[e]=c.length,c.push(t.getHex())),h[e]}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]||(f[e]=d.length/2,d.push(t.x,t.y)),f[e]}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a,s=this.parameters;for(a in s)void 0!==s[a]&&(r[a]=s[a]);return r}for(s=[],a=0;a<this.vertices.length;a++){var o=this.vertices[a];s.push(o.x,o.y,o.z)}o=[];var l=[],u={},c=[],h={},d=[],f={};for(a=0;a<this.faces.length;a++){var p=this.faces[a],m=void 0!==this.faceVertexUvs[0][a],g=0<p.normal.length(),v=0<p.vertexNormals.length,y=1!==p.color.r||1!==p.color.g||1!==p.color.b,_=0<p.vertexColors.length,x=t(x=0,0,0);x=t(x,1,!0),x=t(x,2,!1),x=t(x,3,m),x=t(x,4,g),x=t(x,5,v),x=t(x,6,y),x=t(x,7,_);o.push(x),o.push(p.a,p.b,p.c),o.push(p.materialIndex),m&&(m=this.faceVertexUvs[0][a],o.push(i(m[0]),i(m[1]),i(m[2]))),g&&o.push(e(p.normal)),v&&(g=p.vertexNormals,o.push(e(g[0]),e(g[1]),e(g[2]))),y&&o.push(n(p.color)),_&&(p=p.vertexColors,o.push(n(p[0]),n(p[1]),n(p[2])))}return r.data={},r.data.vertices=s,r.data.normals=l,0<c.length&&(r.data.colors=c),0<d.length&&(r.data.uvs=[d]),r.data.faces=o,r},clone:function(){return(new xt).copy(this)},copy:function(t){var e,n,i,r,a,s;for(this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name,e=0,n=(i=t.vertices).length;e<n;e++)this.vertices.push(i[e].clone());for(e=0,n=(i=t.colors).length;e<n;e++)this.colors.push(i[e].clone());for(e=0,n=(i=t.faces).length;e<n;e++)this.faces.push(i[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var o=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=o.length;i<r;i++){var l=o[i],u=[];for(a=0,s=l.length;a<s;a++)u.push(l[a].clone());this.faceVertexUvs[e].push(u)}}for(e=0,n=(a=t.morphTargets).length;e<n;e++){if((s={}).name=a[e].name,void 0!==a[e].vertices)for(s.vertices=[],i=0,r=a[e].vertices.length;i<r;i++)s.vertices.push(a[e].vertices[i].clone());if(void 0!==a[e].normals)for(s.normals=[],i=0,r=a[e].normals.length;i<r;i++)s.normals.push(a[e].normals[i].clone());this.morphTargets.push(s)}for(e=0,n=(a=t.morphNormals).length;e<n;e++){if(s={},void 0!==a[e].vertexNormals)for(s.vertexNormals=[],i=0,r=a[e].vertexNormals.length;i<r;i++)o=a[e].vertexNormals[i],(l={}).a=o.a.clone(),l.b=o.b.clone(),l.c=o.c.clone(),s.vertexNormals.push(l);if(void 0!==a[e].faceNormals)for(s.faceNormals=[],i=0,r=a[e].faceNormals.length;i<r;i++)s.faceNormals.push(a[e].faceNormals[i].clone());this.morphNormals.push(s)}for(e=0,n=(i=t.skinWeights).length;e<n;e++)this.skinWeights.push(i[e].clone());for(e=0,n=(i=t.skinIndices).length;e<n;e++)this.skinIndices.push(i[e].clone());for(e=0,n=(i=t.lineDistances).length;e<n;e++)this.lineDistances.push(i[e]);return null!==(e=t.boundingBox)&&(this.boundingBox=e.clone()),null!==(e=t.boundingSphere)&&(this.boundingSphere=e.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(xt.prototype,e.prototype),bt.prototype={constructor:bt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<_t(t)?mt:ft)(t,1):this.index=t},addAttribute:function(t,e,n){if(!1===(e&&e.isBufferAttribute)&&!1===(e&&e.isInterleavedBufferAttribute))console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new lt(e,n));else{if("index"!==t)return this.attributes[t]=e,this;console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e)}},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;return void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0),void 0!==(e=this.attributes.normal)&&((new Z).getNormalMatrix(t).applyToBufferAttribute(e),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new u),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,i){return void 0===t&&(t=new u),t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new it),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new gt(3*e.vertices.length,3);var n=new gt(3*e.colors.length,3);this.addAttribute("position",t.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new gt(e.lineDistances.length,1),this.addAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}return!0===e.verticesNeedUpdate&&(void 0!==(n=this.attributes.position)&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(n=this.attributes.normal)&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(n=this.attributes.color)&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(n=this.attributes.uv)&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(n=this.attributes.lineDistance)&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new yt).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var n in this.addAttribute("position",new lt(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.addAttribute("normal",new lt(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.addAttribute("color",new lt(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.addAttribute("uv",new lt(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.addAttribute("uv2",new lt(e,2).copyVector2sArray(t.uvs2))),0<t.indices.length&&(e=new(65535<_t(t.indices)?Uint32Array:Uint16Array)(3*t.indices.length),this.setIndex(new lt(e,1).copyIndicesArray(t.indices))),this.groups=t.groups,t.morphTargets){e=[];for(var i=t.morphTargets[n],r=0,a=i.length;r<a;r++){var s=i[r],o=new gt(3*s.length,3);e.push(o.copyVector3sArray(s))}this.morphAttributes[n]=e}return 0<t.skinIndices.length&&(n=new gt(4*t.skinIndices.length,4),this.addAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(n=new gt(4*t.skinWeights.length,4),this.addAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Y);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new Y,e=new l;return function(){null===this.boundingSphere&&(this.boundingSphere=new $);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(i);for(var r=0,a=0,s=n.count;a<s;a++)e.x=n.getX(a),e.y=n.getY(a),e.z=n.getZ(a),r=Math.max(r,i.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new lt(new Float32Array(i.length),3));else for(var r=0,a=(c=e.normal.array).length;r<a;r++)c[r]=0;var s,o,u,c=e.normal.array,h=new l,d=new l,f=new l,p=new l,m=new l;if(t){t=t.array,0===n.length&&this.addGroup(0,t.length);for(var g=0,v=n.length;g<v;++g)for(a=(r=n[g]).start,s=r.count,r=a,a+=s;r<a;r+=3)s=3*t[r+0],o=3*t[r+1],u=3*t[r+2],h.fromArray(i,s),d.fromArray(i,o),f.fromArray(i,u),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[o]+=p.x,c[o+1]+=p.y,c[o+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}else for(r=0,a=i.length;r<a;r+=9)h.fromArray(i,r),d.fromArray(i,r+3),f.fromArray(i,r+6),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),c[r]=p.x,c[r+1]=p.y,c[r+2]=p.z,c[r+3]=p.x,c[r+4]=p.y,c[r+5]=p.z,c[r+6]=p.x,c[r+7]=p.y,c[r+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!1!==(t&&t.isBufferGeometry)){void 0===e&&(e=0);var n,i=this.attributes;for(n in i)if(void 0!==t.attributes[n])for(var r=i[n].array,a=(o=t.attributes[n]).array,s=0,o=o.itemSize*e;s<a.length;s++,o++)r[o]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t,e,n,i=this.attributes.normal.array,r=0,a=i.length;r<a;r+=3)t=i[r],e=i[r+1],n=i[r+2],t=1/Math.sqrt(t*t+e*e+n*n),i[r]*=t,i[r+1]*=t,i[r+2]*=t},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,e=new bt,n=this.index.array,i=this.attributes;for(t in i){for(var r,a=(s=i[t]).array,s=s.itemSize,o=new a.constructor(n.length*s),l=0,u=0,c=n.length;u<c;u++){r=n[u]*s;for(var h=0;h<s;h++)o[l++]=a[r++]}e.addAttribute(t,new lt(o,s))}return e},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e,n=this.parameters;for(e in n)void 0!==n[e]&&(t[e]=n[e]);return t}t.data={attributes:{}};var i=this.index;for(e in null!==i&&(n=Array.prototype.slice.call(i.array),t.data.index={type:i.array.constructor.name,array:n}),i=this.attributes){var r=i[e];n=Array.prototype.slice.call(r.array);t.data.attributes[e]={itemSize:r.itemSize,type:r.array.constructor.name,array:n,normalized:r.normalized}}return 0<(e=this.groups).length&&(t.data.groups=JSON.parse(JSON.stringify(e))),null!==(e=this.boundingSphere)&&(t.data.boundingSphere={center:e.center.toArray(),radius:e.radius}),t},clone:function(){return(new bt).copy(this)},copy:function(t){var e,n,i;for(e in this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name,null!==(n=t.index)&&this.setIndex(n.clone()),n=t.attributes)this.addAttribute(e,n[e].clone());var r=t.morphAttributes;for(e in r){var a=[],s=r[e];for(n=0,i=s.length;n<i;n++)a.push(s[n].clone());this.morphAttributes[e]=a}for(n=0,i=(e=t.groups).length;n<i;n++)r=e[n],this.addGroup(r.start,r.count,r.materialIndex);return null!==(e=t.boundingBox)&&(this.boundingBox=e.clone()),null!==(e=t.boundingSphere)&&(this.boundingSphere=e.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},bt.MaxIndex=65535,Object.assign(bt.prototype,e.prototype),wt.prototype=Object.assign(Object.create(it.prototype),{constructor:wt,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return it.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry.morphTargets;if(void 0!==t&&0<t.length){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,n=t.length;e<n;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e}},raycast:function(){function t(t,e,n,i,r,a,s){return at.barycoordFromPoint(t,e,n,i,y),r.multiplyScalar(y.x),a.multiplyScalar(y.y),s.multiplyScalar(y.z),r.add(a).add(s),r.clone()}function e(t,e,n,i,r,a,s){var o=t.material;return null===(1===o.side?n.intersectTriangle(a,r,i,!0,s):n.intersectTriangle(i,r,a,2!==o.side,s))?null:(x.copy(s),x.applyMatrix4(t.matrixWorld),(n=e.ray.origin.distanceTo(x))<e.near||n>e.far?null:{distance:n,point:x.clone(),object:t})}function i(n,i,r,a,s,l,u,d){return o.fromBufferAttribute(a,l),c.fromBufferAttribute(a,u),h.fromBufferAttribute(a,d),(n=e(n,i,r,o,c,h,_))&&(s&&(m.fromBufferAttribute(s,l),g.fromBufferAttribute(s,u),v.fromBufferAttribute(s,d),n.uv=t(_,o,c,h,m,g,v)),n.face=new st(l,u,d,at.normal(o,c,h)),n.faceIndex=l),n}var r=new u,a=new tt,s=new $,o=new l,c=new l,h=new l,d=new l,f=new l,p=new l,m=new n,g=new n,v=new n,y=new l,_=new l,x=new l;return function(n,l){var u,y=this.geometry,x=this.material,b=this.matrixWorld;if(void 0!==x&&(null===y.boundingSphere&&y.computeBoundingSphere(),s.copy(y.boundingSphere),s.applyMatrix4(b),!1!==n.ray.intersectsSphere(s)&&(r.getInverse(b),a.copy(n.ray).applyMatrix4(r),null===y.boundingBox||!1!==a.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){x=y.index;var w,T,M,S,E=y.attributes.position;b=y.attributes.uv;if(null!==x)for(M=0,S=x.count;M<S;M+=3)y=x.getX(M),w=x.getX(M+1),T=x.getX(M+2),(u=i(this,n,a,E,b,y,w,T))&&(u.faceIndex=Math.floor(M/3),l.push(u));else for(M=0,S=E.count;M<S;M+=3)(u=i(this,n,a,E,b,y=M,w=M+1,T=M+2))&&(u.index=y,l.push(u))}else if(y.isGeometry){var C,A;M=!0===(b=x&&x.isMultiMaterial)?x.materials:null,S=y.vertices,w=y.faces,0<(T=y.faceVertexUvs[0]).length&&(E=T);for(var L=0,P=w.length;L<P;L++){var R=w[L];if(void 0!==(u=!0===b?M[R.materialIndex]:x)){if(T=S[R.a],C=S[R.b],A=S[R.c],!0===u.morphTargets){u=y.morphTargets;var I=this.morphTargetInfluences;o.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var O=0,z=u.length;O<z;O++){var D=I[O];if(0!==D){var N=u[O].vertices;o.addScaledVector(d.subVectors(N[R.a],T),D),c.addScaledVector(f.subVectors(N[R.b],C),D),h.addScaledVector(p.subVectors(N[R.c],A),D)}}o.add(T),c.add(C),h.add(A),T=o,C=c,A=h}(u=e(this,n,a,T,C,A,_))&&(E&&(I=E[L],m.copy(I[0]),g.copy(I[1]),v.copy(I[2]),u.uv=t(_,T,C,A,m,g,v)),u.face=R,u.faceIndex=L,l.push(u))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Tt.prototype=Object.create(xt.prototype),Tt.prototype.constructor=Tt,Mt.prototype=Object.create(bt.prototype),Mt.prototype.constructor=Mt,St.prototype=Object.create(xt.prototype),St.prototype.constructor=St,Et.prototype=Object.create(bt.prototype),Et.prototype.constructor=Et,Ct.prototype=Object.create(it.prototype),Ct.prototype.constructor=Ct,Ct.prototype.isCamera=!0,Ct.prototype.getWorldDirection=function(){var t=new o;return function(e){return e=e||new l,this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),Ct.prototype.lookAt=function(){var t=new u;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),Ct.prototype.clone=function(){return(new this.constructor).copy(this)},Ct.prototype.copy=function(t){return it.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},At.prototype=Object.assign(Object.create(Ct.prototype),{constructor:At,isPerspectiveCamera:!0,copy:function(t){return Ct.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*lr.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*lr.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*lr.RAD2DEG*Math.atan(Math.tan(.5*lr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=2*(s=t*Math.tan(.5*lr.DEG2RAD*this.fov)/this.zoom),n=-.5*(o=this.aspect*e),i=this.view;if(null!==i){var r=i.fullWidth,a=i.fullHeight,s=(n=n+i.offsetX*o/r,s-i.offsetY*e/a),o=i.width/r*o;e=i.height/a*e}0!==(i=this.filmOffset)&&(n+=t*i/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+o,s,s-e,t,this.far)},toJSON:function(t){return(t=it.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Lt.prototype=Object.assign(Object.create(Ct.prototype),{constructor:Lt,isOrthographicCamera:!0,copy:function(t){return Ct.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(i=(this.right+this.left)/2)-t,i=i+t;t=(a=(this.top+this.bottom)/2)+e,e=a-e;if(null!==this.view){i=this.zoom/(this.view.width/this.view.fullWidth),e=this.zoom/(this.view.height/this.view.fullHeight);var r=(this.right-this.left)/this.view.width,a=(this.top-this.bottom)/this.view.height;i=(n=n+this.view.offsetX/i*r)+this.view.width/i*r,e=(t=t-this.view.offsetY/e*a)-this.view.height/e*a}this.projectionMatrix.makeOrthographic(n,i,t,e,this.near,this.far)},toJSON:function(t){return(t=it.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var Tr=0;Kt.prototype.isFogExp2=!0,Kt.prototype.clone=function(){return new Kt(this.color.getHex(),this.density)},Kt.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},te.prototype.isFog=!0,te.prototype.clone=function(){return new te(this.color.getHex(),this.near,this.far)},te.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ee.prototype=Object.create(it.prototype),ee.prototype.constructor=ee,ee.prototype.copy=function(t,e){return it.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},ee.prototype.toJSON=function(t){var e=it.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},ne.prototype=Object.assign(Object.create(it.prototype),{constructor:ne,isLensFlare:!0,copy:function(t){it.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,n=t.lensFlares.length;e<n;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,n,i,r,a){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===r&&(r=new U(16777215)),void 0===i&&(i=1),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:r,blending:i})},updateLensFlares:function(){var t,e,n=this.lensFlares.length,i=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(t=0;t<n;t++)(e=this.lensFlares[t]).x=this.positionScreen.x+i*e.distance,e.y=this.positionScreen.y+r*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),ie.prototype=Object.create(W.prototype),ie.prototype.constructor=ie,ie.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},re.prototype=Object.assign(Object.create(it.prototype),{constructor:re,isSprite:!0,raycast:function(){var t=new l;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.distanceSqToPoint(t);i>this.scale.x*this.scale.y/4||n.push({distance:Math.sqrt(i),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),ae.prototype=Object.assign(Object.create(it.prototype),{constructor:ae,copy:function(t){it.prototype.copy.call(this,t,!1);for(var e=0,n=(t=t.levels).length;e<n;e++){var i=t[e];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);n.splice(i,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new l;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(t);this.getObjectForDistance(i).raycast(e,n)}}(),update:function(){var t=new l,e=new l;return function(n){var i=this.levels;if(1<i.length){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld),n=t.distanceTo(e),i[0].object.visible=!0;for(var r=1,a=i.length;r<a&&n>=i[r].distance;r++)i[r-1].object.visible=!1,i[r].object.visible=!0;for(;r<a;r++)i[r].object.visible=!1}}}(),toJSON:function(t){(t=it.prototype.toJSON.call(this,t)).object.levels=[];for(var e=this.levels,n=0,i=e.length;n<i;n++){var r=e[n];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}),Object.assign(se.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new u;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t,e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new u;return function(){for(var e=0,n=this.bones.length;e<n;e++)t.multiplyMatrices(this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new se(this.bones,this.boneInverses,this.useVertexTexture)}}),oe.prototype=Object.assign(Object.create(it.prototype),{constructor:oe,isBone:!0}),le.prototype=Object.assign(Object.create(wt.prototype),{constructor:le,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=1/(n=this.geometry.skinWeights[t]).lengthManhattan();1/0!==e?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new r,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)n.x=i.getX(t),n.y=i.getY(t),n.z=i.getZ(t),n.w=i.getW(t),1/0!==(e=1/n.lengthManhattan())?n.multiplyScalar(e):n.set(1,0,0,0),i.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(t){wt.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),ue.prototype=Object.create(W.prototype),ue.prototype.constructor=ue,ue.prototype.isLineBasicMaterial=!0,ue.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},ce.prototype=Object.assign(Object.create(it.prototype),{constructor:ce,isLine:!0,raycast:function(){var t=new u,e=new tt,n=new $;return function(i,r){var a=(a=i.linePrecision)*a,s=this.geometry,o=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(o),!1!==i.ray.intersectsSphere(n)){t.getInverse(o),e.copy(i.ray).applyMatrix4(t);var u=new l,c=new l,h=(o=new l,new l),d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var f=s.index,p=s.attributes.position.array;if(null!==f){s=0;for(var m=(f=f.array).length-1;s<m;s+=d){var g=f[s+1];u.fromArray(p,3*f[s]),c.fromArray(p,3*g),(g=e.distanceSqToSegment(u,c,h,o))>a||(h.applyMatrix4(this.matrixWorld),(g=i.ray.origin.distanceTo(h))<i.near||g>i.far||r.push({distance:g,point:o.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}else for(s=0,m=p.length/3-1;s<m;s+=d)u.fromArray(p,3*s),c.fromArray(p,3*s+3),(g=e.distanceSqToSegment(u,c,h,o))>a||(h.applyMatrix4(this.matrixWorld),(g=i.ray.origin.distanceTo(h))<i.near||g>i.far||r.push({distance:g,point:o.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}else if(s.isGeometry)for(c=(u=s.vertices).length,s=0;s<c-1;s+=d)(g=e.distanceSqToSegment(u[s],u[s+1],h,o))>a||(h.applyMatrix4(this.matrixWorld),(g=i.ray.origin.distanceTo(h))<i.near||g>i.far||r.push({distance:g,point:o.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),he.prototype=Object.assign(Object.create(ce.prototype),{constructor:he,isLineSegments:!0}),de.prototype=Object.create(W.prototype),de.prototype.constructor=de,de.prototype.isPointsMaterial=!0,de.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},fe.prototype=Object.assign(Object.create(it.prototype),{constructor:fe,isPoints:!0,raycast:function(){var t=new u,e=new tt,n=new $;return function(i,r){function a(t,n){var a=e.distanceSqToPoint(t);if(a<h){var o=e.closestPointToPoint(t);o.applyMatrix4(u);var l=i.ray.origin.distanceTo(o);l<i.near||l>i.far||r.push({distance:l,distanceToRay:Math.sqrt(a),point:o.clone(),index:n,face:null,object:s})}}var s=this,o=this.geometry,u=this.matrixWorld,c=i.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(u),!1!==i.ray.intersectsSphere(n)){t.getInverse(u),e.copy(i.ray).applyMatrix4(t);var h=(c=c/((this.scale.x+this.scale.y+this.scale.z)/3))*c;c=new l;if(o.isBufferGeometry){var d=o.index;o=o.attributes.position.array;if(null!==d)for(var f=d.array,p=(d=0,f.length);d<p;d++){var m=f[d];c.fromArray(o,3*m),a(c,m)}else for(d=0,f=o.length/3;d<f;d++)c.fromArray(o,3*d),a(c,d)}else for(d=0,f=(c=o.vertices).length;d<f;d++)a(c[d],d)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),pe.prototype=Object.assign(Object.create(it.prototype),{constructor:pe}),me.prototype=Object.create(i.prototype),me.prototype.constructor=me,ge.prototype=Object.create(i.prototype),ge.prototype.constructor=ge,ge.prototype.isCompressedTexture=!0,ve.prototype=Object.create(i.prototype),ve.prototype.constructor=ve,ye.prototype=Object.create(i.prototype),ye.prototype.constructor=ye,ye.prototype.isDepthTexture=!0,_e.prototype=Object.create(bt.prototype),_e.prototype.constructor=_e,xe.prototype=Object.create(xt.prototype),xe.prototype.constructor=xe,be.prototype=Object.create(bt.prototype),be.prototype.constructor=be,we.prototype=Object.create(xt.prototype),we.prototype.constructor=we,Te.prototype=Object.create(bt.prototype),Te.prototype.constructor=Te,Me.prototype=Object.create(xt.prototype),Me.prototype.constructor=Me,Se.prototype=Object.create(Te.prototype),Se.prototype.constructor=Se,Ee.prototype=Object.create(xt.prototype),Ee.prototype.constructor=Ee,Ce.prototype=Object.create(Te.prototype),Ce.prototype.constructor=Ce,Ae.prototype=Object.create(xt.prototype),Ae.prototype.constructor=Ae,Le.prototype=Object.create(Te.prototype),Le.prototype.constructor=Le,Pe.prototype=Object.create(xt.prototype),Pe.prototype.constructor=Pe,Re.prototype=Object.create(Te.prototype),Re.prototype.constructor=Re,Ie.prototype=Object.create(xt.prototype),Ie.prototype.constructor=Ie,Oe.prototype=Object.create(bt.prototype),Oe.prototype.constructor=Oe,ze.prototype=Object.create(xt.prototype),ze.prototype.constructor=ze,De.prototype=Object.create(bt.prototype),De.prototype.constructor=De,Ne.prototype=Object.create(xt.prototype),Ne.prototype.constructor=Ne,ke.prototype=Object.create(bt.prototype),ke.prototype.constructor=ke;var Mr={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},triangulate:function(t,e){var n=t.length;if(3>n)return null;var i,r,a,s=[],o=[],l=[];if(0<Mr.area(t))for(r=0;r<n;r++)o[r]=r;else for(r=0;r<n;r++)o[r]=n-1-r;var u=2*n;for(r=n-1;2<n;){if(0>=u--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}var c;n<=(i=r)&&(i=0),n<=(r=i+1)&&(r=0),n<=(a=r+1)&&(a=0);t:{var h,d,f,p,m,g,v,y;if(h=t[o[i]].x,d=t[o[i]].y,f=t[o[r]].x,p=t[o[r]].y,m=t[o[a]].x,0>=(f-h)*((g=t[o[a]].y)-d)-(p-d)*(m-h))c=!1;else{var _,x,b,w,T,M,S,E,C,A;for(_=m-f,x=g-p,b=h-m,w=d-g,T=f-h,M=p-d,c=0;c<n;c++)if(v=t[o[c]].x,y=t[o[c]].y,!(v===h&&y===d||v===f&&y===p||v===m&&y===g)&&(C=v-f,A=y-p,S=T*(E=y-d)-M*(S=v-h),E=b*(y-=g)-w*(v-=m),(C=_*A-x*C)>=-Number.EPSILON&&E>=-Number.EPSILON&&S>=-Number.EPSILON)){c=!1;break t}c=!0}}if(c){for(s.push([t[o[i]],t[o[r]],t[o[a]]]),l.push([o[i],o[r],o[a]]),i=r,a=r+1;a<n;i++,a++)o[i]=o[a];u=2*--n}}return e?l:s},triangulateShape:function(t,e){function n(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function i(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function r(t,e,n,r,a){var s=e.x-t.x,o=e.y-t.y,l=r.x-n.x,u=r.y-n.y,c=t.x-n.x,h=t.y-n.y,d=o*l-s*u,f=o*c-s*h;if(Math.abs(d)>Number.EPSILON){if(0<d){if(0>f||f>d)return[];if(0>(l=u*c-l*h)||l>d)return[]}else{if(0<f||f<d)return[];if(0<(l=u*c-l*h)||l<d)return[]}return 0===l?!a||0!==f&&f!==d?[t]:[]:l===d?!a||0!==f&&f!==d?[e]:[]:0===f?[n]:f===d?[r]:(a=l/d,[{x:t.x+a*s,y:t.y+a*o}])}return 0!==f||u*c!=l*h?[]:(l=0===l&&0===u,(o=0===s&&0===o)&&l?t.x!==n.x||t.y!==n.y?[]:[t]:o?i(n,r,t)?[t]:[]:l?i(t,e,n)?[n]:[]:(0!==s?(t.x<e.x?(s=t,l=t.x,o=e,t=e.x):(s=e,l=e.x,o=t,t=t.x),n.x<r.x?(e=n,d=n.x,u=r,n=r.x):(e=r,d=r.x,u=n,n=n.x)):(t.y<e.y?(s=t,l=t.y,o=e,t=e.y):(s=e,l=e.y,o=t,t=t.y),n.y<r.y?(e=n,d=n.y,u=r,n=r.y):(e=r,d=r.y,u=n,n=n.y)),l<=d?t<d?[]:t===d?a?[]:[e]:t<=n?[e,o]:[e,u]:l>n?[]:l===n?a?[]:[s]:t<=n?[s,o]:[s,u]))}function a(t,e,n,i){var r=e.x-t.x,a=e.y-t.y;e=n.x-t.x,n=n.y-t.y;var s=i.x-t.x;return i=i.y-t.y,t=r*n-a*e,r=r*i-a*s,Math.abs(t)>Number.EPSILON?(e=s*n-i*e,0<t?0<=r&&0<=e:0<=r||0<=e):0<r}n(t),e.forEach(n);var s,o,l,u,c,h={};for(l=t.concat(),s=0,o=e.length;s<o;s++)Array.prototype.push.apply(l,e[s]);for(s=0,o=l.length;s<o;s++)void 0!==h[c=l[s].x+":"+l[s].y]&&console.warn("THREE.ShapeUtils: Duplicate point",c,s),h[c]=s;s=function(t,e){function n(t,e){var n=g.length-1,i=t-1;0>i&&(i=n);var r=t+1;return r>n&&(r=0),!!(n=a(g[t],g[i],g[r],o[e]))&&(n=o.length-1,0>(i=e-1)&&(i=n),(r=e+1)>n&&(r=0),!!(n=a(o[e],o[i],o[r],g[t])))}function i(t,e){var n,i;for(n=0;n<g.length;n++)if(i=n+1,i%=g.length,0<(i=r(t,e,g[n],g[i],!0)).length)return!0;return!1}function s(t,n){var i,a,s,o;for(i=0;i<v.length;i++)for(a=e[v[i]],s=0;s<a.length;s++)if(o=s+1,o%=a.length,0<(o=r(t,n,a[s],a[o],!0)).length)return!0;return!1}var o,l,u,c,h,d,f,p,m,g=t.concat(),v=[],y=[],_=0;for(l=e.length;_<l;_++)v.push(_);f=0;for(var x=2*v.length;0<v.length;){if(0>--x){console.log("Infinite Loop! Holes left:"+v.length+", Probably Hole outside Shape!");break}for(u=f;u<g.length;u++){for(c=g[u],l=-1,_=0;_<v.length;_++)if(h=v[_],void 0===y[d=c.x+":"+c.y+":"+h]){for(o=e[h],p=0;p<o.length;p++)if(h=o[p],n(u,p)&&!i(c,h)&&!s(c,h)){l=p,v.splice(_,1),f=g.slice(0,u+1),h=g.slice(u),p=o.slice(l),m=o.slice(0,l+1),g=f.concat(p).concat(m).concat(h),f=u;break}if(0<=l)break;y[d]=!0}if(0<=l)break}}return g}(t,e);var d=Mr.triangulate(s,!1);for(s=0,o=d.length;s<o;s++)for(u=d[s],l=0;3>l;l++)void 0!==(c=h[c=u[l].x+":"+u[l].y])&&(u[l]=c);return d.concat()},isClockWise:function(t){return 0>Mr.area(t)}};Be.prototype=Object.create(xt.prototype),Be.prototype.constructor=Be,Be.prototype.addShapeList=function(t,e){for(var n=t.length,i=0;i<n;i++)this.addShape(t[i],e)},Be.prototype.addShape=function(t,e){function i(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function r(t,e,i){var r,a,s;a=t.x-e.x,s=t.y-e.y,r=i.x-t.x;var o=i.y-t.y,l=a*a+s*s;if(Math.abs(a*o-s*r)>Number.EPSILON){var u=Math.sqrt(l),c=Math.sqrt(r*r+o*o);l=e.x-s/u;if(e=e.y+a/u,2>=(s=(r=l+a*(o=((i.x-o/c-l)*o-(i.y+r/c-e)*r)/(a*o-s*r))-t.x)*r+(a=e+s*o-t.y)*a))return new n(r,a);s=Math.sqrt(s/2)}else t=!1,a>Number.EPSILON?r>Number.EPSILON&&(t=!0):a<-Number.EPSILON?r<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(o)&&(t=!0),t?(r=-s,s=Math.sqrt(l)):(r=a,a=s,s=Math.sqrt(l/2));return new n(r/s,a/s)}function a(t,e){var n,i;for(U=t.length;0<=--U;){n=U,0>(i=U-1)&&(i=t.length-1);var r,a=x+2*v;for(r=0;r<a;r++){var s=(s=e+n+(o=B*r))+A,o=(o=e+i+o)+A,l=(l=e+i+(u=B*(r+1)))+A,u=(u=e+n+u)+A;C.faces.push(new st(s,o,u,null,null,1)),C.faces.push(new st(o,l,u,null,null,1)),s=T.generateSideWallUV(C,s,o,l,u),C.faceVertexUvs[0].push([s[0],s[1],s[3]]),C.faceVertexUvs[0].push([s[1],s[2],s[3]])}}}function s(t,e,n){C.vertices.push(new l(t,e,n))}function o(t,e,n){t+=A,e+=A,n+=A,C.faces.push(new st(t,e,n,null,null,0)),t=T.generateTopUV(C,t,e,n),C.faceVertexUvs[0].push(t)}var u,c,h,d,f,p=void 0!==e.amount?e.amount:100,m=void 0!==e.bevelThickness?e.bevelThickness:6,g=void 0!==e.bevelSize?e.bevelSize:m-2,v=void 0!==e.bevelSegments?e.bevelSegments:3,y=void 0===e.bevelEnabled||e.bevelEnabled,_=void 0!==e.curveSegments?e.curveSegments:12,x=void 0!==e.steps?e.steps:1,b=e.extrudePath,w=!1,T=void 0!==e.UVGenerator?e.UVGenerator:Be.WorldUVGenerator;b&&(u=b.getSpacedPoints(x),w=!0,y=!1,c=void 0!==e.frames?e.frames:b.computeFrenetFrames(x,!1),h=new l,d=new l,f=new l),y||(g=m=v=0);var M,S,E,C=this,A=this.vertices.length,L=(_=(b=t.extractPoints(_)).shape,b.holes);if(b=!Mr.isClockWise(_)){for(_=_.reverse(),S=0,E=L.length;S<E;S++)M=L[S],Mr.isClockWise(M)&&(L[S]=M.reverse());b=!1}var P=Mr.triangulateShape(_,L),R=_;for(S=0,E=L.length;S<E;S++)M=L[S],_=_.concat(M);var I,O,z,D,N,k,B=_.length,F=P.length,U=(b=[],0);for(I=(z=R.length)-1,O=U+1;U<z;U++,I++,O++)I===z&&(I=0),O===z&&(O=0),b[U]=r(R[U],R[I],R[O]);var H,G=[],j=b.concat();for(S=0,E=L.length;S<E;S++){for(M=L[S],H=[],U=0,I=(z=M.length)-1,O=U+1;U<z;U++,I++,O++)I===z&&(I=0),O===z&&(O=0),H[U]=r(M[U],M[I],M[O]);G.push(H),j=j.concat(H)}for(I=0;I<v;I++){for(z=I/v,D=m*Math.cos(z*Math.PI/2),O=g*Math.sin(z*Math.PI/2),U=0,z=R.length;U<z;U++)s((N=i(R[U],b[U],O)).x,N.y,-D);for(S=0,E=L.length;S<E;S++)for(M=L[S],H=G[S],U=0,z=M.length;U<z;U++)s((N=i(M[U],H[U],O)).x,N.y,-D)}for(O=g,U=0;U<B;U++)N=y?i(_[U],j[U],O):_[U],w?(d.copy(c.normals[0]).multiplyScalar(N.x),h.copy(c.binormals[0]).multiplyScalar(N.y),f.copy(u[0]).add(d).add(h),s(f.x,f.y,f.z)):s(N.x,N.y,0);for(z=1;z<=x;z++)for(U=0;U<B;U++)N=y?i(_[U],j[U],O):_[U],w?(d.copy(c.normals[z]).multiplyScalar(N.x),h.copy(c.binormals[z]).multiplyScalar(N.y),f.copy(u[z]).add(d).add(h),s(f.x,f.y,f.z)):s(N.x,N.y,p/x*z);for(I=v-1;0<=I;I--){for(z=I/v,D=m*Math.cos(z*Math.PI/2),O=g*Math.sin(z*Math.PI/2),U=0,z=R.length;U<z;U++)s((N=i(R[U],b[U],O)).x,N.y,p+D);for(S=0,E=L.length;S<E;S++)for(M=L[S],H=G[S],U=0,z=M.length;U<z;U++)N=i(M[U],H[U],O),w?s(N.x,N.y+u[x-1].y,u[x-1].x+D):s(N.x,N.y,p+D)}!function(){if(y){var t=0*B;for(U=0;U<F;U++)o((k=P[U])[2]+t,k[1]+t,k[0]+t);for(t=B*(x+2*v),U=0;U<F;U++)o((k=P[U])[0]+t,k[1]+t,k[2]+t)}else{for(U=0;U<F;U++)o((k=P[U])[2],k[1],k[0]);for(U=0;U<F;U++)o((k=P[U])[0]+B*x,k[1]+B*x,k[2]+B*x)}}(),function(){var t=0;for(a(R,t),t+=R.length,S=0,E=L.length;S<E;S++)a(M=L[S],t),t+=M.length}()},Be.WorldUVGenerator={generateTopUV:function(t,e,i,r){return e=(t=t.vertices)[e],i=t[i],r=t[r],[new n(e.x,e.y),new n(i.x,i.y),new n(r.x,r.y)]},generateSideWallUV:function(t,e,i,r,a){return e=(t=t.vertices)[e],i=t[i],r=t[r],a=t[a],.01>Math.abs(e.y-i.y)?[new n(e.x,1-e.z),new n(i.x,1-i.z),new n(r.x,1-r.z),new n(a.x,1-a.z)]:[new n(e.y,1-e.z),new n(i.y,1-i.z),new n(r.y,1-r.z),new n(a.y,1-a.z)]}},Fe.prototype=Object.create(Be.prototype),Fe.prototype.constructor=Fe,Ue.prototype=Object.create(xt.prototype),Ue.prototype.constructor=Ue,He.prototype=Object.create(bt.prototype),He.prototype.constructor=He,Ge.prototype=Object.create(xt.prototype),Ge.prototype.constructor=Ge,je.prototype=Object.create(bt.prototype),je.prototype.constructor=je,Ve.prototype=Object.create(xt.prototype),Ve.prototype.constructor=Ve,We.prototype=Object.create(bt.prototype),We.prototype.constructor=We,qe.prototype=Object.create(xt.prototype),qe.prototype.constructor=qe,Xe.prototype=Object.create(bt.prototype),Xe.prototype.constructor=Xe,Ye.prototype=Object.create(bt.prototype),Ye.prototype.constructor=Ye,$e.prototype=Object.create(xt.prototype),$e.prototype.constructor=$e,Ze.prototype=Object.create(bt.prototype),Ze.prototype.constructor=Ze,Je.prototype=Object.create($e.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(Ze.prototype),Qe.prototype.constructor=Qe,Ke.prototype=Object.create(xt.prototype),Ke.prototype.constructor=Ke,tn.prototype=Object.create(bt.prototype),tn.prototype.constructor=tn;var Sr=Object.freeze({WireframeGeometry:_e,ParametricGeometry:xe,ParametricBufferGeometry:be,TetrahedronGeometry:Me,TetrahedronBufferGeometry:Se,OctahedronGeometry:Ee,OctahedronBufferGeometry:Ce,IcosahedronGeometry:Ae,IcosahedronBufferGeometry:Le,DodecahedronGeometry:Pe,DodecahedronBufferGeometry:Re,PolyhedronGeometry:we,PolyhedronBufferGeometry:Te,TubeGeometry:Ie,TubeBufferGeometry:Oe,TorusKnotGeometry:ze,TorusKnotBufferGeometry:De,TorusGeometry:Ne,TorusBufferGeometry:ke,TextGeometry:Fe,SphereGeometry:Ue,SphereBufferGeometry:He,RingGeometry:Ge,RingBufferGeometry:je,PlaneGeometry:St,PlaneBufferGeometry:Et,LatheGeometry:Ve,LatheBufferGeometry:We,ShapeGeometry:qe,ShapeBufferGeometry:Xe,ExtrudeGeometry:Be,EdgesGeometry:Ye,ConeGeometry:Je,ConeBufferGeometry:Qe,CylinderGeometry:$e,CylinderBufferGeometry:Ze,CircleGeometry:Ke,CircleBufferGeometry:tn,BoxGeometry:Tt,BoxBufferGeometry:Mt});en.prototype=Object.create(q.prototype),en.prototype.constructor=en,en.prototype.isShadowMaterial=!0,nn.prototype=Object.create(q.prototype),nn.prototype.constructor=nn,nn.prototype.isRawShaderMaterial=!0,rn.prototype={constructor:rn,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,i=0,r=n.length;i<r;i++){var a=n[i].toJSON(t);delete a.metadata,e.materials.push(a)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},an.prototype=Object.create(W.prototype),an.prototype.constructor=an,an.prototype.isMeshStandardMaterial=!0,an.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},sn.prototype=Object.create(an.prototype),sn.prototype.constructor=sn,sn.prototype.isMeshPhysicalMaterial=!0,sn.prototype.copy=function(t){return an.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},on.prototype=Object.create(W.prototype),on.prototype.constructor=on,on.prototype.isMeshPhongMaterial=!0,on.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ln.prototype=Object.create(on.prototype),ln.prototype.constructor=ln,ln.prototype.isMeshToonMaterial=!0,ln.prototype.copy=function(t){return on.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},un.prototype=Object.create(W.prototype),un.prototype.constructor=un,un.prototype.isMeshNormalMaterial=!0,un.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},cn.prototype=Object.create(W.prototype),cn.prototype.constructor=cn,cn.prototype.isMeshLambertMaterial=!0,cn.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},hn.prototype=Object.create(W.prototype),hn.prototype.constructor=hn,hn.prototype.isLineDashedMaterial=!0,hn.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Er=Object.freeze({ShadowMaterial:en,SpriteMaterial:ie,RawShaderMaterial:nn,ShaderMaterial:q,PointsMaterial:de,MultiMaterial:rn,MeshPhysicalMaterial:sn,MeshStandardMaterial:an,MeshPhongMaterial:on,MeshToonMaterial:ln,MeshNormalMaterial:un,MeshLambertMaterial:cn,MeshDepthMaterial:X,MeshBasicMaterial:ot,LineDashedMaterial:hn,LineBasicMaterial:ue,Material:W}),Cr={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Ar=new dn;Object.assign(fn.prototype,{load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,a=Cr.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;if(l=t.match(/^data:(.*?)(;base64)?,(.*)$/)){var s=l[1],o=!!l[2],l=l[3];l=window.decodeURIComponent(l);o&&(l=window.atob(l));try{var u,c=(this.responseType||"").toLowerCase();switch(c){case"arraybuffer":case"blob":u=new ArrayBuffer(l.length);var h=new Uint8Array(u);for(o=0;o<l.length;o++)h[o]=l.charCodeAt(o);"blob"===c&&(u=new Blob([u],{type:s}));break;case"document":u=(new DOMParser).parseFromString(l,s);break;case"json":u=JSON.parse(l);break;default:u=l}window.setTimeout((function(){e&&e(u),r.manager.itemEnd(t)}),0)}catch(e){window.setTimeout((function(){i&&i(e),r.manager.itemError(t)}),0)}}else{var d=new XMLHttpRequest;d.open("GET",t,!0),d.addEventListener("load",(function(n){var a=n.target.response;Cr.add(t,a),200===this.status?(e&&e(a),r.manager.itemEnd(t)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),e&&e(a),r.manager.itemEnd(t)):(i&&i(n),r.manager.itemError(t))}),!1),void 0!==n&&d.addEventListener("progress",(function(t){n(t)}),!1),d.addEventListener("error",(function(e){i&&i(e),r.manager.itemError(t)}),!1),void 0!==this.responseType&&(d.responseType=this.responseType),void 0!==this.withCredentials&&(d.withCredentials=this.withCredentials),d.overrideMimeType&&d.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),d.send(null)}return r.manager.itemStart(t),d},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Object.assign(pn.prototype,{load:function(t,e,n,i){function r(r){l.load(t[r],(function(t){t=a._parser(t,!0),s[r]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(u+=1)&&(1===t.mipmapCount&&(o.minFilter=1006),o.format=t.format,o.needsUpdate=!0,e&&e(o))}),n,i)}var a=this,s=[],o=new ge;o.image=s;var l=new fn(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(t))for(var u=0,c=0,h=t.length;c<h;++c)r(c);else l.load(t,(function(t){if((t=a._parser(t,!0)).isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,i=0;i<n;i++){s[i]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)s[i].mipmaps.push(t.mipmaps[i*t.mipmapCount+r]),s[i].format=t.format,s[i].width=t.width,s[i].height=t.height}else o.image.width=t.width,o.image.height=t.height,o.mipmaps=t.mipmaps;1===t.mipmapCount&&(o.minFilter=1006),o.format=t.format,o.needsUpdate=!0,e&&e(o)}),n,i);return o},setPath:function(t){return this.path=t,this}}),Object.assign(mn.prototype,{load:function(t,e,n,i){var r=this,a=new H,s=new fn(this.manager);return s.setResponseType("arraybuffer"),s.load(t,(function(t){(t=r._parser(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:1001,a.wrapT=void 0!==t.wrapT?t.wrapT:1001,a.magFilter=void 0!==t.magFilter?t.magFilter:1006,a.minFilter=void 0!==t.minFilter?t.minFilter:1008,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps),1===t.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,e&&e(a,t))}),n,i),a}}),Object.assign(gn.prototype,{load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,a=Cr.get(t);return void 0!==a?(r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a):((n=document.createElementNS("http://www.w3.org/1999/xhtml","img")).addEventListener("load",(function(){Cr.add(t,this),e&&e(this),r.manager.itemEnd(t)}),!1),n.addEventListener("error",(function(e){i&&i(e),r.manager.itemError(t)}),!1),void 0!==this.crossOrigin&&(n.crossOrigin=this.crossOrigin),r.manager.itemStart(t),n.src=t,n)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(vn.prototype,{load:function(t,e,n,i){function r(n){s.load(t[n],(function(t){a.images[n]=t,6===++o&&(a.needsUpdate=!0,e&&e(a))}),void 0,i)}var a=new c,s=new gn(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var o=0;for(n=0;n<t.length;++n)r(n);return a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(yn.prototype,{load:function(t,e,n,r){var a=new i,s=new gn(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,(function(n){var i=0<t.search(/\.(jpg|jpeg)$/)||0===t.search(/^data\:image\/jpeg/);a.format=i?1022:1023,a.image=n,a.needsUpdate=!0,void 0!==e&&e(a)}),n,r),a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),_n.prototype=Object.assign(Object.create(it.prototype),{constructor:_n,isLight:!0,copy:function(t){return it.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=it.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),xn.prototype=Object.assign(Object.create(_n.prototype),{constructor:xn,isHemisphereLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(bn.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),wn.prototype=Object.assign(Object.create(bn.prototype),{constructor:wn,isSpotLightShadow:!0,update:function(t){var e=2*lr.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height;t=t.distance||500;var i=this.camera;e===i.fov&&n===i.aspect&&t===i.far||(i.fov=e,i.aspect=n,i.far=t,i.updateProjectionMatrix())}}),Tn.prototype=Object.assign(Object.create(_n.prototype),{constructor:Tn,isSpotLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Mn.prototype=Object.assign(Object.create(_n.prototype),{constructor:Mn,isPointLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Sn.prototype=Object.assign(Object.create(bn.prototype),{constructor:Sn}),En.prototype=Object.assign(Object.create(_n.prototype),{constructor:En,isDirectionalLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Cn.prototype=Object.assign(Object.create(_n.prototype),{constructor:Cn,isAmbientLight:!0});var Lr,Pr={arraySlice:function(t,e,n){return Pr.isTypedArray(t)?new t.constructor(t.subarray(e,n)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=Array(e),i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,s=0;s!==i;++a)for(var o=n[a]*e,l=0;l!==e;++l)r[s++]=t[o+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var s=a[i];if(void 0!==s)if(Array.isArray(s))do{void 0!==(s=a[i])&&(e.push(a.time),n.push.apply(n,s)),a=t[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{void 0!==(s=a[i])&&(e.push(a.time),s.toArray(n,n.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(s=a[i])&&(e.push(a.time),n.push(s)),a=t[r++]}while(void 0!==a)}}};An.prototype={constructor:An,evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{n:{i:if(!(t<i)){for(var a=n+2;;){if(void 0===i){if(t<r)break i;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,r)}if(n===a)break;if(r=i,t<(i=e[++n]))break e}i=e.length;break n}if(t>=r)break t;for(t<(a=e[1])&&(n=2,r=a),a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=r,t>=(r=e[--n-1]))break e}i=n,n=0}for(;n<i;)t<e[r=n+i>>>1]?i=r:n=r+1;if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize;t*=i;for(var r=0;r!==i;++r)e[r]=n[t+r];return e},interpolate_:function(t,e,n,i){throw Error("call to abstract method")},intervalChanged_:function(t,e,n){}},Object.assign(An.prototype,{beforeStart_:An.prototype.copySampleValue_,afterEnd_:An.prototype.copySampleValue_}),Ln.prototype=Object.assign(Object.create(An.prototype),{constructor:Ln,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=t,s=2*e-n;break;case 2402:s=e+i[r=i.length-2]-i[r+1];break;default:r=t,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=t,o=2*n-e;break;case 2402:a=1,o=n+i[1]-i[0];break;default:a=t-1,o=e}t=.5*(n-e),i=this.valueSize,this._weightPrev=t/(e-s),this._weightNext=t/(o-n),this._offsetPrev=r*i,this._offsetNext=a*i},interpolate_:function(t,e,n,i){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(t*=s)-s,l=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,h=this._weightNext,d=(n-e)/(i-e);for(e=-c*(i=(n=d*d)*d)+2*c*n-c*d,c=(1+c)*i+(-1.5-2*c)*n+(-.5+c)*d+1,d=(-1-h)*i+(1.5+h)*n+.5*d,h=h*i-h*n,n=0;n!==s;++n)r[n]=e*a[l+n]+c*a[o+n]+d*a[t+n]+h*a[u+n];return r}}),Pn.prototype=Object.assign(Object.create(An.prototype),{constructor:Pn,interpolate_:function(t,e,n,i){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(t*=s)-s;for(n=1-(e=(n-e)/(i-e)),i=0;i!==s;++i)r[i]=a[o+i]*n+a[t+i]*e;return r}}),Rn.prototype=Object.assign(Object.create(An.prototype),{constructor:Rn,interpolate_:function(t,e,n,i){return this.copySampleValue_(t-1)}}),Lr={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Rn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Pn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Ln(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}console.warn(e)}else this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;return++a,0===r&&a===i||(r>=a&&(r=(a=Math.max(a,1))-1),i=this.getValueSize(),this.times=Pr.arraySlice(n,r,a),this.values=Pr.arraySlice(this.values,r*i,a*i)),this},validate:function(){var t=!0;0!=(n=this.getValueSize())-Math.floor(n)&&(console.error("invalid value size in track",this),t=!1);var e=this.times,n=this.values,i=e.length;0===i&&(console.error("track is empty",this),t=!1);for(var r=null,a=0;a!==i;a++){var s=e[a];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,a,s),t=!1;break}if(null!==r&&r>s){console.error("out of order keys",this,a,s,r),t=!1;break}r=s}if(void 0!==n&&Pr.isTypedArray(n))for(a=0,e=n.length;a!==e;++a)if(i=n[a],isNaN(i)){console.error("value is not a valid number",this,a,i),t=!1;break}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,a=t.length-1,s=1;s<a;++s){var o=!1;if((h=t[s])!==t[s+1]&&(1!==s||h!==h[0]))if(i)o=!0;else for(var l=s*n,u=l-n,c=l+n,h=0;h!==n;++h){var d=e[l+h];if(d!==e[u+h]||d!==e[c+h]){o=!0;break}}if(o){if(s!==r)for(t[r]=t[s],o=s*n,l=r*n,h=0;h!==n;++h)e[l+h]=e[o+h];++r}}if(0<a){for(t[r]=t[a],o=a*n,l=r*n,h=0;h!==n;++h)e[l+h]=e[o+h];++r}return r!==t.length&&(this.times=Pr.arraySlice(t,0,r),this.values=Pr.arraySlice(e,0,r*n)),this}},On.prototype=Object.assign(Object.create(Lr),{constructor:On,ValueTypeName:"vector"}),zn.prototype=Object.assign(Object.create(An.prototype),{constructor:zn,interpolate_:function(t,e,n,i){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize;for(e=(n-e)/(i-e),n=(t*=s)+s;t!==n;t+=4)o.slerpFlat(r,0,a,t-s,a,t,e);return r}}),Dn.prototype=Object.assign(Object.create(Lr),{constructor:Dn,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new zn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Nn.prototype=Object.assign(Object.create(Lr),{constructor:Nn,ValueTypeName:"number"}),kn.prototype=Object.assign(Object.create(Lr),{constructor:kn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Bn.prototype=Object.assign(Object.create(Lr),{constructor:Bn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Fn.prototype=Object.assign(Object.create(Lr),{constructor:Fn,ValueTypeName:"color"}),Un.prototype=Lr,Lr.constructor=Un,Object.assign(Un,{parse:function(t){if(void 0===t.type)throw Error("track type undefined, can not parse");var e=Un._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],i=[];Pr.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){if(void 0!==(e=t.constructor).toJSON)e=e.toJSON(t);else{var e={name:t.name,times:Pr.convertArray(t.times,Array),values:Pr.convertArray(t.values,Array)},n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nn;case"vector":case"vector2":case"vector3":case"vector4":return On;case"color":return Fn;case"quaternion":return Dn;case"bool":case"boolean":return Bn;case"string":return kn}throw Error("Unsupported typeName: "+t)}}),Hn.prototype={constructor:Hn,resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(Hn,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(Un.parse(n[r]).scale(i));return new Hn(t.name,t.duration,e)},toJSON:function(t){var e=[],n=t.tracks;t={name:t.name,duration:t.duration,tracks:e};for(var i=0,r=n.length;i!==r;++i)e.push(Un.toJSON(n[i]));return t},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],s=0;s<r;s++){var o=[];(u=[]).push((s+r-1)%r,s,(s+1)%r),o.push(0,1,0);var l=Pr.getKeyframeOrder(u),u=Pr.sortedArray(u,1,l);o=Pr.sortedArray(o,1,l);i||0!==u[0]||(u.push(r),o.push(o[0])),a.push(new Nn(".morphTargetInfluences["+e[s].name+"]",u,o).scale(1/n))}return new Hn(t,-1,a)},findByName:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,s=t.length;a<s;a++){var o=t[a],l=o.name.match(r);if(l&&1<l.length){var u=l[1];(l=i[u])||(i[u]=l=[]),l.push(o)}}for(u in t=[],i)t.push(Hn.CreateFromMorphTargetSequence(u,i[u],e,n));return t},parseAnimation:function(t,e){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var a=[],s=[];Pr.flattenJSON(n,a,s,i),0!==a.length&&r.push(new t(e,a,s))}},i=[],r=t.name||"default",a=t.length||-1,s=t.fps||30,o=t.hierarchy||[],l=0;l<o.length;l++){var u=o[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){a={};for(var c=0;c<u.length;c++)if(u[c].morphTargets)for(var h=0;h<u[c].morphTargets.length;h++)a[u[c].morphTargets[h]]=-1;for(var d in a){var f=[],p=[];for(h=0;h!==u[c].morphTargets.length;++h){var m=u[c];f.push(m.time),p.push(m.morphTarget===d?1:0)}i.push(new Nn(".morphTargetInfluence["+d+"]",f,p))}a=a.length*(s||1)}else n(On,(c=".bones["+e[l].name+"]")+".position",u,"pos",i),n(Dn,c+".quaternion",u,"rot",i),n(On,c+".scale",u,"scl",i)}return 0===i.length?null:new Hn(r,a,i)}}),Object.assign(Gn.prototype,{load:function(t,e,n,i){var r=this;new fn(r.manager).load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===i[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),i[t]}var i=this.textures,r=new Er[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(r.uniforms=t.uniforms),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.shading&&(r.shading=t.shading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=e(t.map)),void 0!==t.alphaMap&&(r.alphaMap=e(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=e(t.normalMap)),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),r.normalScale=(new n).fromArray(a)}if(void 0!==t.displacementMap&&(r.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=e(t.specularMap)),void 0!==t.envMap&&(r.envMap=e(t.envMap)),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=e(t.gradientMap)),void 0!==t.materials){a=0;for(var s=t.materials.length;a<s;a++)r.materials.push(this.parse(t.materials[a]))}return r}}),Object.assign(jn.prototype,{load:function(t,e,n,i){var r=this;new fn(r.manager).load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){var e=new bt,n=t.data.index,i={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void 0!==n&&(n=new i[n.type](n.array),e.setIndex(new lt(n,1)));var r,a=t.data.attributes;for(r in a){var s=a[r];n=new i[s.type](s.array);e.addAttribute(r,new lt(n,s.itemSize,s.normalized))}if(void 0!==(i=t.data.groups||t.data.drawcalls||t.data.offsets))for(r=0,n=i.length;r!==n;++r)a=i[r],e.addGroup(a.start,a.count,a.materialIndex);return void 0!==(t=t.data.boundingSphere)&&(i=new l,void 0!==t.center&&i.fromArray(t.center),e.boundingSphere=new $(i,t.radius)),e}}),Vn.prototype={constructor:Vn,crossOrigin:void 0,extractUrlBase:function(t){return 1===(t=t.split("/")).length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e,n);return i},createMaterial:function(){var t,e,n,i={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5};return function(r,a,s){function o(t,n,i,r,o){t=a+t;var l=Vn.Handlers.get(t);return null!==l?t=l.load(t):(e.setCrossOrigin(s),t=e.load(t)),void 0!==n&&(t.repeat.fromArray(n),1!==n[0]&&(t.wrapS=1e3),1!==n[1]&&(t.wrapT=1e3)),void 0!==i&&t.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(t.wrapS=1e3),"mirror"===r[0]&&(t.wrapS=1002),"repeat"===r[1]&&(t.wrapT=1e3),"mirror"===r[1]&&(t.wrapT=1002)),void 0!==o&&(t.anisotropy=o),n=lr.generateUUID(),u[n]=t,n}void 0===t&&(t=new U),void 0===e&&(e=new yn),void 0===n&&(n=new Gn);var l,u={},c={uuid:lr.generateUUID(),type:"MeshLambertMaterial"};for(l in r){var h=r[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=i[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(h).getHex();break;case"colorSpecular":c.specular=t.fromArray(h).getHex();break;case"colorEmissive":c.emissive=t.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=o(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=o(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=o(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=o(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=o(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=o(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=o(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=o(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=o(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=o(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=1;break;case"doubleSided":c.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[l]=h;break;case"vertexColors":!0===h&&(c.vertexColors=2),"face"===h&&(c.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,1>c.opacity&&(c.transparent=!0),n.setTextures(u),n.parse(c)}}()},Vn.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n+1];if(e[n].test(t))return r}return null}},Object.assign(Wn.prototype,{load:function(t,e,n,i){var r=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Vn.prototype.extractUrlBase(t),s=new fn(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,(function(n){var i=(n=JSON.parse(n)).metadata;if(void 0!==i&&void 0!==(i=i.type)){if("object"===i.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===i.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}n=r.parse(n,a),e(n.geometry,n.materials)}),n,i)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){var i=new xt,a=void 0!==t.scale?1/t.scale:1;return function(e){var r,a,s,o,u,c,h,d,f,p,m,g,v,y=t.faces;c=t.vertices;var _=t.normals,x=t.colors,b=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&b++;for(r=0;r<b;r++)i.faceVertexUvs[r]=[]}for(o=0,u=c.length;o<u;)(r=new l).x=c[o++]*e,r.y=c[o++]*e,r.z=c[o++]*e,i.vertices.push(r);for(o=0,u=y.length;o<u;)if(f=1&(e=y[o++]),s=2&e,r=8&e,h=16&e,p=32&e,c=64&e,e&=128,f){if((f=new st).a=y[o],f.b=y[o+1],f.c=y[o+3],(m=new st).a=y[o+1],m.b=y[o+2],m.c=y[o+3],o+=4,s&&(s=y[o++],f.materialIndex=s,m.materialIndex=s),s=i.faces.length,r)for(r=0;r<b;r++)for(g=t.uvs[r],i.faceVertexUvs[r][s]=[],i.faceVertexUvs[r][s+1]=[],a=0;4>a;a++)v=new n(v=g[2*(d=y[o++])],d=g[2*d+1]),2!==a&&i.faceVertexUvs[r][s].push(v),0!==a&&i.faceVertexUvs[r][s+1].push(v);if(h&&(h=3*y[o++],f.normal.set(_[h++],_[h++],_[h]),m.normal.copy(f.normal)),p)for(r=0;4>r;r++)h=3*y[o++],p=new l(_[h++],_[h++],_[h]),2!==r&&f.vertexNormals.push(p),0!==r&&m.vertexNormals.push(p);if(c&&(c=x[c=y[o++]],f.color.setHex(c),m.color.setHex(c)),e)for(r=0;4>r;r++)c=x[c=y[o++]],2!==r&&f.vertexColors.push(new U(c)),0!==r&&m.vertexColors.push(new U(c));i.faces.push(f),i.faces.push(m)}else{if((f=new st).a=y[o++],f.b=y[o++],f.c=y[o++],s&&(s=y[o++],f.materialIndex=s),s=i.faces.length,r)for(r=0;r<b;r++)for(g=t.uvs[r],i.faceVertexUvs[r][s]=[],a=0;3>a;a++)v=new n(v=g[2*(d=y[o++])],d=g[2*d+1]),i.faceVertexUvs[r][s].push(v);if(h&&(h=3*y[o++],f.normal.set(_[h++],_[h++],_[h])),p)for(r=0;3>r;r++)h=3*y[o++],p=new l(_[h++],_[h++],_[h]),f.vertexNormals.push(p);if(c&&(c=y[o++],f.color.setHex(x[c])),e)for(r=0;3>r;r++)c=y[o++],f.vertexColors.push(new U(x[c]));i.faces.push(f)}}(a),function(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,a=t.skinWeights.length;n<a;n+=e)i.skinWeights.push(new r(t.skinWeights[n],1<e?t.skinWeights[n+1]:0,2<e?t.skinWeights[n+2]:0,3<e?t.skinWeights[n+3]:0));if(t.skinIndices)for(n=0,a=t.skinIndices.length;n<a;n+=e)i.skinIndices.push(new r(t.skinIndices[n],1<e?t.skinIndices[n+1]:0,2<e?t.skinIndices[n+2]:0,3<e?t.skinIndices[n+3]:0));i.bones=t.bones,i.bones&&0<i.bones.length&&(i.skinWeights.length!==i.skinIndices.length||i.skinIndices.length!==i.vertices.length)&&console.warn("When skinning, number of vertices ("+i.vertices.length+"), skinIndices ("+i.skinIndices.length+"), and skinWeights ("+i.skinWeights.length+") should match.")}(),function(e){if(void 0!==t.morphTargets)for(var n=0,r=t.morphTargets.length;n<r;n++){i.morphTargets[n]={},i.morphTargets[n].name=t.morphTargets[n].name,i.morphTargets[n].vertices=[];for(var a=i.morphTargets[n].vertices,s=t.morphTargets[n].vertices,o=0,u=s.length;o<u;o+=3){var c=new l;c.x=s[o]*e,c.y=s[o+1]*e,c.z=s[o+2]*e,a.push(c)}}if(void 0!==t.morphColors&&0<t.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),e=i.faces,a=t.morphColors[0].colors,n=0,r=e.length;n<r;n++)e[n].color.fromArray(a,3*n)}(a),function(){var e=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var r=0;r<n.length;r++){var a=Hn.parseAnimation(n[r],i.bones);a&&e.push(a)}i.morphTargets&&(n=Hn.CreateClipsFromMorphTargetSequences(i.morphTargets,10),e=e.concat(n)),0<e.length&&(i.animations=e)}(),i.computeFaceNormals(),i.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:i}:(a=Vn.prototype.initMaterials(t.materials,e,this.crossOrigin),{geometry:i,materials:a})}}),Object.assign(qn.prototype,{load:function(t,e,n,i){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this;new fn(r.manager).load(t,(function(n){var a=null;try{a=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}void 0===(n=a.metadata)||void 0===n.type||"geometry"===n.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead."):r.parse(a,e)}),n,i)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseGeometries(t.geometries),i=this.parseImages(t.images,(function(){void 0!==e&&e(r)})),r=(i=this.parseTextures(t.textures,i),i=this.parseMaterials(t.materials,i),this.parseObject(t.object,n,i));return t.animations&&(r.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(r),r},parseGeometries:function(t){var e={};if(void 0!==t)for(var n=new Wn,i=new jn,r=0,a=t.length;r<a;r++){var s,o=t[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Sr[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Sr[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Sr[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Sr[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Sr[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Sr[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new Sr[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Sr[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Sr[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Sr[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Sr[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"BufferGeometry":s=i.parse(o);break;case"Geometry":s=n.parse(o.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),e[o.uuid]=s}return e},parseMaterials:function(t,e){var n={};if(void 0!==t){var i=new Gn;i.setTextures(e);for(var r=0,a=t.length;r<a;r++){var s=i.parse(t[r]);n[s.uuid]=s}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=Hn.parse(t[n]);e.push(i)}return e},parseImages:function(t,e){function n(t){return i.manager.itemStart(t),a.load(t,(function(){i.manager.itemEnd(t)}),void 0,(function(){i.manager.itemError(t)}))}var i=this,r={};if(void 0!==t&&0<t.length){var a=new gn(s=new dn(e));a.setCrossOrigin(this.crossOrigin);for(var s=0,o=t.length;s<o;s++){var l=t[s],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:i.texturePath+l.url;r[l.uuid]=n(u)}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},a={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},s={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008},o={};if(void 0!==t)for(var l=0,u=t.length;l<u;l++){var c=t[l];void 0===c.image&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),void 0===e[c.image]&&console.warn("THREE.ObjectLoader: Undefined image",c.image);var h=new i(e[c.image]);h.needsUpdate=!0,h.uuid=c.uuid,void 0!==c.name&&(h.name=c.name),void 0!==c.mapping&&(h.mapping=n(c.mapping,r)),void 0!==c.offset&&h.offset.fromArray(c.offset),void 0!==c.repeat&&h.repeat.fromArray(c.repeat),void 0!==c.wrap&&(h.wrapS=n(c.wrap[0],a),h.wrapT=n(c.wrap[1],a)),void 0!==c.minFilter&&(h.minFilter=n(c.minFilter,s)),void 0!==c.magFilter&&(h.magFilter=n(c.magFilter,s)),void 0!==c.anisotropy&&(h.anisotropy=c.anisotropy),void 0!==c.flipY&&(h.flipY=c.flipY),o[c.uuid]=h}return o},parseObject:function(){var t=new u;return function(e,n,i){function r(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),n[t]}function a(t){if(void 0!==t)return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}var s;switch(e.type){case"Scene":s=new ee,void 0!==e.background&&Number.isInteger(e.background)&&(s.background=new U(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new te(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new Kt(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":s=new At(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Lt(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":s=new Cn(e.color,e.intensity);break;case"DirectionalLight":s=new En(e.color,e.intensity);break;case"PointLight":s=new Mn(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":s=new Tn(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new xn(e.color,e.groundColor,e.intensity);break;case"Mesh":s=r(e.geometry);var o=a(e.material);s=s.bones&&0<s.bones.length?new le(s,o):new wt(s,o);break;case"LOD":s=new ae;break;case"Line":s=new ce(r(e.geometry),a(e.material),e.mode);break;case"LineSegments":s=new he(r(e.geometry),a(e.material));break;case"PointCloud":case"Points":s=new fe(r(e.geometry),a(e.material));break;case"Sprite":s=new re(a(e.material));break;case"Group":s=new pe;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:s=new it}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.children)for(var l in e.children)s.add(this.parseObject(e.children[l],n,i));if("LOD"===e.type)for(e=e.levels,o=0;o<e.length;o++){var u=e[o];void 0!==(l=s.getObjectByProperty("uuid",u.object))&&s.addLevel(l,u.distance)}return s}}()}),Zn.prototype={constructor:Zn,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){return t=this.getUtoTmapping(t),this.getPoint(t)},getPoints:function(t){isNaN(t)&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){isNaN(t)&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(isNaN(t)&&(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=t;n++)a+=(e=this.getPoint(n/t)).distanceTo(r),i.push(a),r=e;return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i,r=this.getLengths(),a=r.length;i=e||t*r[a-1];for(var s,o=0,l=a-1;o<=l;)if(0>(s=r[n=Math.floor(o+(l-o)/2)]-i))o=n+1;else{if(!(0<s)){l=n;break}l=n-1}return r[n=l]===i?n/(a-1):(n+(i-(o=r[n]))/(r[n+1]-o))/(a-1)},getTangent:function(t){var e=t-1e-4;return 0>e&&(e=0),1<(t+=1e-4)&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){var n,i,r=new l,a=[],s=[],o=[],c=new l,h=new u;for(n=0;n<=t;n++)i=n/t,a[n]=this.getTangentAt(i),a[n].normalize();s[0]=new l,o[0]=new l,n=Number.MAX_VALUE,i=Math.abs(a[0].x);var d=Math.abs(a[0].y),f=Math.abs(a[0].z);for(i<=n&&(n=i,r.set(1,0,0)),d<=n&&(n=d,r.set(0,1,0)),f<=n&&r.set(0,0,1),c.crossVectors(a[0],r).normalize(),s[0].crossVectors(a[0],c),o[0].crossVectors(a[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),o[n]=o[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(lr.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(h.makeRotationAxis(c,r))),o[n].crossVectors(a[n],s[n]);if(!0===e)for(r=Math.acos(lr.clamp(s[0].dot(s[t]),-1,1)),r/=t,0<a[0].dot(c.crossVectors(s[0],s[t]))&&(r=-r),n=1;n<=t;n++)s[n].applyMatrix4(h.makeRotationAxis(a[n],r*n)),o[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:o}}},Jn.prototype=Object.create(Zn.prototype),Jn.prototype.constructor=Jn,Jn.prototype.isLineCurve=!0,Jn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Jn.prototype.getPointAt=function(t){return this.getPoint(t)},Jn.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},Qn.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Qn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Jn(e,t))},getPoint:function(t){var e=t*this.getLength(),n=this.getCurveLengths();for(t=0;t<n.length;){if(n[t]>=e)return e=n[t]-e,n=(t=this.curves[t]).getLength(),t.getPointAt(0===n?0:1-e/n);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){isNaN(t)&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=(a=r[i]).getPoints(a&&a.isEllipseCurve?2*t:a&&a.isLineCurve?1:a&&a.isSplineCurve?t*a.points.length:t),s=0;s<a.length;s++){var o=a[s];e&&e.equals(o)||(n.push(o),e=o)}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(t){return t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){for(var e=new xt,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new l(r.x,r.y,r.z||0))}return e}}),Kn.prototype=Object.create(Zn.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isEllipseCurve=!0,Kn.prototype.getPoint=function(t){for(var e=2*Math.PI,i=this.aEndAngle-this.aStartAngle,r=Math.abs(i)<Number.EPSILON;0>i;)i+=e;for(;i>e;)i-=e;i<Number.EPSILON&&(i=r?0:e),!0!==this.aClockwise||r||(i=i===e?-e:i-e),e=this.aStartAngle+t*i,t=this.aX+this.xRadius*Math.cos(e);var a=this.aY+this.yRadius*Math.sin(e);return 0!==this.aRotation&&(e=Math.cos(this.aRotation),i=Math.sin(this.aRotation),t=(r=t-this.aX)*e-(a-=this.aY)*i+this.aX,a=r*i+a*e+this.aY),new n(t,a)},ti.prototype=Object.create(Zn.prototype),ti.prototype.constructor=ti,ti.prototype.isSplineCurve=!0,ti.prototype.getPoint=function(t){var e=(e=((s=this.points).length-1)*t)-(t=Math.floor(e)),i=s[0===t?t:t-1],r=s[t],a=s[t>s.length-2?s.length-1:t+1],s=s[t>s.length-3?s.length-1:t+2];return new n(Xn(e,i.x,r.x,a.x,s.x),Xn(e,i.y,r.y,a.y,s.y))},ei.prototype=Object.create(Zn.prototype),ei.prototype.constructor=ei,ei.prototype.getPoint=function(t){var e=this.v0,i=this.v1,r=this.v2,a=this.v3;return new n($n(t,e.x,i.x,r.x,a.x),$n(t,e.y,i.y,r.y,a.y))},ni.prototype=Object.create(Zn.prototype),ni.prototype.constructor=ni,ni.prototype.getPoint=function(t){var e=this.v0,i=this.v1,r=this.v2;return new n(Yn(t,e.x,i.x,r.x),Yn(t,e.y,i.y,r.y))};var Rr=Object.assign(Object.create(Qn.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var i=new Jn(this.currentPoint.clone(),new n(t,e));this.curves.push(i),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,i,r){t=new ni(this.currentPoint.clone(),new n(t,e),new n(i,r)),this.curves.push(t),this.currentPoint.set(i,r)},bezierCurveTo:function(t,e,i,r,a,s){t=new ei(this.currentPoint.clone(),new n(t,e),new n(i,r),new n(a,s)),this.curves.push(t),this.currentPoint.set(a,s)},splineThru:function(t){var e=new ti(e=[this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,a){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,a)},absarc:function(t,e,n,i,r,a){this.absellipse(t,e,n,n,i,r,a)},ellipse:function(t,e,n,i,r,a,s,o){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,a,s,o)},absellipse:function(t,e,n,i,r,a,s,o){t=new Kn(t,e,n,i,r,a,s,o),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)}});ii.prototype=Rr,Rr.constructor=ii,ri.prototype=Object.assign(Object.create(Rr),{constructor:ri,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),ai.prototype={moveTo:function(t,e){this.currentPath=new ii,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,a){this.currentPath.bezierCurveTo(t,e,n,i,r,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new ri;a.curves=r.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var s=e[r],o=e[a],l=o.x-s.x,u=o.y-s.y;if(Math.abs(u)>Number.EPSILON){if(0>u&&(s=e[a],l=-l,o=e[r],u=-u),!(t.y<s.y||t.y>o.y))if(t.y===s.y){if(t.x===s.x)return!0}else{if(0===(r=u*(t.x-s.x)-l*(t.y-s.y)))return!0;0>r||(i=!i)}}else if(t.y===s.y&&(o.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=o.x))return!0}return i}var r=Mr.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);var s,o,l,u=[];if(1===a.length)return o=a[0],(l=new ri).curves=o.curves,u.push(l),u;var c=!r(a[0].getPoints());c=t?!c:c;l=[];var h,d=[],f=[],p=0;d[p]=void 0,f[p]=[];for(var m=0,g=a.length;m<g;m++)s=r(h=(o=a[m]).getPoints()),(s=t?!s:s)?(!c&&d[p]&&p++,d[p]={s:new ri,p:h},d[p].s.curves=o.curves,c&&p++,f[p]=[]):f[p].push({h:o,p:h[0]});if(!d[0])return n(a);if(1<d.length){for(m=!1,o=[],r=0,a=d.length;r<a;r++)l[r]=[];for(r=0,a=d.length;r<a;r++)for(s=f[r],c=0;c<s.length;c++){for(p=s[c],h=!0,g=0;g<d.length;g++)i(p.p,d[g].p)&&(r!==g&&o.push({froms:r,tos:g,hole:c}),h?(h=!1,l[g].push(p)):m=!0);h&&l[r].push(p)}0<o.length&&(m||(f=l))}for(m=0,r=d.length;m<r;m++)for(l=d[m].s,u.push(l),a=0,s=(o=f[m]).length;a<s;a++)l.holes.push(o[a].h);return u}},Object.assign(si.prototype,{isFont:!0,generateShapes:function(t,e,n){void 0===e&&(e=100),void 0===n&&(n=4);var i=this.data;t=String(t).split("");var r=e/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,s=0,o=0;e=[];for(var l=0;l<t.length;l++){var u=t[l];if("\n"===u)s=0,o-=a;else{var c;c=r;var h=s,d=o;if(u=i.glyphs[u]||i.glyphs["?"]){var f,p,m,g,v,y,_,x,b=new ai,w=[];if(u.o)for(var T=u._cachedOutline||(u._cachedOutline=u.o.split(" ")),M=0,S=T.length;M<S;)switch(T[M++]){case"m":f=T[M++]*c+h,p=T[M++]*c+d,b.moveTo(f,p);break;case"l":f=T[M++]*c+h,p=T[M++]*c+d,b.lineTo(f,p);break;case"q":if(f=T[M++]*c+h,p=T[M++]*c+d,v=T[M++]*c+h,y=T[M++]*c+d,b.quadraticCurveTo(v,y,f,p),g=w[w.length-1]){m=g.x,g=g.y;for(var E=1;E<=n;E++){var C=E/n;Yn(C,m,v,f),Yn(C,g,y,p)}}break;case"b":if(f=T[M++]*c+h,p=T[M++]*c+d,v=T[M++]*c+h,y=T[M++]*c+d,_=T[M++]*c+h,x=T[M++]*c+d,b.bezierCurveTo(v,y,_,x,f,p),g=w[w.length-1])for(m=g.x,g=g.y,E=1;E<=n;E++)$n(C=E/n,m,v,_,f),$n(C,g,y,x,p)}c={offsetX:u.ha*c,path:b}}else c=void 0;s+=c.offsetX,e.push(c.path)}}for(n=[],i=0,t=e.length;i<t;i++)Array.prototype.push.apply(n,e[i].toShapes());return n}}),Object.assign(oi.prototype,{load:function(t,e,n,i){var r=this;new fn(this.manager).load(t,(function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}t=r.parse(n),e&&e(t)}),n,i)},parse:function(t){return new si(t)}});var Ir,Or,zr,Dr={getContext:function(){return void 0===Ir&&(Ir=new(window.AudioContext||window.webkitAudioContext)),Ir},setContext:function(t){Ir=t}};Object.assign(li.prototype,{load:function(t,e,n,i){var r=new fn(this.manager);r.setResponseType("arraybuffer"),r.load(t,(function(t){Dr.getContext().decodeAudioData(t,(function(t){e(t)}))}),n,i)}}),ui.prototype=Object.assign(Object.create(_n.prototype),{constructor:ui,isRectAreaLight:!0,copy:function(t){return _n.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this}}),Object.assign(ci.prototype,{update:function(){var t,e,n,i,r,a,s,o=new u,l=new u;return function(u){if(t!==this||e!==u.focus||n!==u.fov||i!==u.aspect*this.aspect||r!==u.near||a!==u.far||s!==u.zoom){t=this,e=u.focus,n=u.fov,i=u.aspect*this.aspect,r=u.near,a=u.far,s=u.zoom;var c,h=u.projectionMatrix.clone(),d=this.eyeSep/2,f=d*r/e,p=r*Math.tan(lr.DEG2RAD*n*.5)/s;l.elements[12]=-d,o.elements[12]=d,d=-p*i+f,c=p*i+f,h.elements[0]=2*r/(c-d),h.elements[8]=(c+d)/(c-d),this.cameraL.projectionMatrix.copy(h),d=-p*i-f,c=p*i-f,h.elements[0]=2*r/(c-d),h.elements[8]=(c+d)/(c-d),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(o)}}()}),hi.prototype=Object.create(it.prototype),hi.prototype.constructor=hi,di.prototype=Object.assign(Object.create(it.prototype),{constructor:di,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new l,e=new o,n=new l,i=new l;return function(r){it.prototype.updateMatrixWorld.call(this,r),r=this.context.listener;var a=this.up;this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),r.positionX?(r.positionX.setValueAtTime(t.x,this.context.currentTime),r.positionY.setValueAtTime(t.y,this.context.currentTime),r.positionZ.setValueAtTime(t.z,this.context.currentTime),r.forwardX.setValueAtTime(i.x,this.context.currentTime),r.forwardY.setValueAtTime(i.y,this.context.currentTime),r.forwardZ.setValueAtTime(i.z,this.context.currentTime),r.upX.setValueAtTime(a.x,this.context.currentTime),r.upY.setValueAtTime(a.y,this.context.currentTime),r.upZ.setValueAtTime(a.z,this.context.currentTime)):(r.setPosition(t.x,t.y,t.z),r.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),fi.prototype=Object.assign(Object.create(it.prototype),{constructor:fi,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),t.start(0,this.startTime),this.isPlaying=!0,this.source=t,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),pi.prototype=Object.assign(Object.create(fi.prototype),{constructor:pi,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new l;return function(e){it.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(mi.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),gi.prototype={constructor:gi,accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(a=0;a!==i;++a)n[r+a]=n[a];a=e}else a+=e,this._mixBufferRegion(n,r,0,e/a,i);this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,n=this.buffer;t=t*e+e;var i=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,1>i&&this._mixBufferRegion(n,t,3*e,1-i,e);i=e;for(var a=e+e;i!==a;++i)if(n[i]!==n[i+e]){r.setValue(n,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,n=3*e;this.binding.getValue(t,n);for(var i=e;i!==n;++i)t[i]=t[n+i%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,n,i,r){if(.5<=i)for(i=0;i!==r;++i)t[e+i]=t[n+i]},_slerp:function(t,e,n,i,r){o.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var a=1-i,s=0;s!==r;++s){var o=e+s;t[o]=t[o]*a+t[n+s]*i}}},vi.prototype={constructor:vi,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(this.node=t=vi.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);for(t=t.skeleton.bones,n=0;n<t.length;n++)if(t[n].name===a){a=n;break}break;default:if(void 0===t[n])return void console.error("  can not bind to objectName of node, undefined",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[a]}}if(void 0===(a=t[i]))console.error("  trying to update property for track: "+e.nodeName+"."+i+" but it wasn't found.",t);else{if(e=this.Versioning.None,void 0!==t.needsUpdate?(e=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t),n=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(n=0;n<this.node.geometry.morphTargets.length;n++)if(t.geometry.morphTargets[n].name===r){r=n;break}}n=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(n=this.BindingType.HasFromToArray,this.resolvedProperty=a):void 0!==a.length?(n=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[n],this.setValue=this.SetterByBindingTypeAndVersioning[n][e]}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(vi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:vi.prototype.getValue,_setValue_unbound:vi.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),vi.Composite=function(t,e,n){n=n||vi.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,n)},vi.Composite.prototype={constructor:vi.Composite,getValue:function(t,e){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},vi.create=function(t,e,n){return t&&t.isAnimationObjectGroup?new vi.Composite(t,e,n):new vi(t,e,n)},vi.parseTrackName=function(t){var e=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(t);if(!e)throw Error("cannot parse trackName at all: "+t);if(null===(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]}).propertyName||0===e.propertyName.length)throw Error("can not parse propertyName from trackName: "+t);return e},vi.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=function(t){for(var n=0;n<t.bones.length;n++){var i=t.bones[n];if(i.name===e)return i}return null}(t.skeleton);if(n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e||(r=i(r.children)))return r}return null};if(n=i(t.children))return n}return null},yi.prototype={constructor:yi,isAnimationObjectGroup:!0,add:function(t){for(var e=this._objects,n=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,a=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=r[f=h.uuid];if(void 0===d){d=n++,r[f]=d,e.push(h);for(var f=0,p=l;f!==p;++f)o[f].push(new vi(h,a[f],s[f]))}else if(d<i){var m=--i;for(r[(p=e[m]).uuid]=d,e[d]=p,r[f]=m,e[m]=h,f=0,p=l;f!==p;++f){var g=o[f],v=g[d];g[d]=g[m],void 0===v&&(v=new vi(h,a[f],s[f])),g[m]=v}}else void 0!==e[d]&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=i},remove:function(t){for(var e=this._objects,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,s=0,o=arguments.length;s!==o;++s){var l=arguments[s],u=l.uuid,c=i[u];if(void 0!==c&&c>=n){var h=n++;for(i[(d=e[h]).uuid]=c,e[c]=d,i[u]=h,e[h]=l,l=0,u=a;l!==u;++l){var d,f=(d=r[l])[c];d[c]=d[h],d[h]=f}}}this.nCachedObjects_=n},uncache:function(t){for(var e=this._objects,n=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,a=this._bindings,s=a.length,o=0,l=arguments.length;o!==l;++o){var u=r[c=arguments[o].uuid];if(void 0!==u)if(delete r[c],u<i){var c,h=e[c=--i],d=--n,f=e[d];for(r[h.uuid]=u,e[u]=h,r[f.uuid]=c,e[c]=f,e.pop(),h=0,f=s;h!==f;++h){var p=a[h],m=p[d];p[u]=p[c],p[c]=m,p.pop()}}else for(r[(f=e[d=--n]).uuid]=u,e[u]=f,e.pop(),h=0,f=s;h!==f;++h)(p=a[h])[u]=p[d],p.pop()}this.nCachedObjects_=i},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,s=this._parsedPaths,o=this._objects,l=this.nCachedObjects_,u=Array(o.length);i=r.length;for(n[t]=i,a.push(t),s.push(e),r.push(u),n=l,i=o.length;n!==i;++n)u[n]=new vi(o[n],t,e);return u},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];e[t[s]]=n,a[n]=o,a.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}},_i.prototype={constructor:_i,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){n=this._clip.duration;var i=t._clip.duration,r=n/i;t.warp(1,i/n,e),this.warp(r,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,s=this.timeScale;return null===a&&(this._timeScaleInterpolant=a=i._lendControlInterpolant()),i=a.parameterPositions,a=a.sampleValues,i[0]=r,i[1]=r+n,a[0]=t/s,a[1]=e/s,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(null!==(r=this._startTime)){if(0>(e=(t-r)*n)||0===n)return;this._startTime=null,e*=n}if(e*=this._updateTimeScale(t),n=this._updateTime(e),0<(t=this._updateWeight(t))){e=this._interpolants;for(var r=this._propertyBindings,a=0,s=e.length;a!==s;++a)e[a].evaluate(n),r[a].accumulate(i,t)}},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e=e*i;t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){e=e*n.evaluate(t)[0];t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(2200===i)t:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=n)e=n;else{if(!(0>e))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(i=2202===i,-1===r&&(0<=t?(r=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),e>=n||0>e){var a=Math.floor(e/n),s=(e=e-n*a,r=r+Math.abs(a),this.repetitions-r);0>s?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=0<t?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(0===s?(t=0>t,this._setEndings(t,!t,i)):this._setEndings(!1,!1,i),this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a}))}if(i&&1==(1&r))return this.time=e,n-e}return this.time=e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;return null===a&&(this._weightInterpolant=a=i._lendControlInterpolant()),i=a.parameterPositions,a=a.sampleValues,i[0]=r,a[0]=e,i[1]=r+t,a[1]=n,this}},xi.prototype={constructor:xi,clipAction:function(t,e){var n=(r=e||this._root).uuid,i="string"==typeof t?Hn.findByName(r,t):t,r=null!==i?i.uuid:t,a=this._actionsByClip[r],s=null;if(void 0!==a){if(void 0!==(s=a.actionByRoot[n]))return s;s=a.knownActions[0],null===i&&(i=s._clip)}return null===i?null:(i=new _i(this,i,e),this._bindAction(i,s),this._addInactiveAction(i,r,n),i)},existingAction:function(t,e){var n=(i=e||this._root).uuid,i="string"==typeof t?Hn.findByName(i,t):t;return void 0!==(i=this._actionsByClip[i?i.uuid:t])&&i.actionByRoot[n]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,s=0;s!==n;++s){var o=e[s];o.enabled&&o._update(i,t,r,a)}for(t=this._bindings,e=this._nActiveBindings,s=0;s!==e;++s)t[s].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions;t=t.uuid;var n=this._actionsByClip;if(void 0!==(i=n[t])){for(var i,r=0,a=(i=i.knownActions).length;r!==a;++r){var s=i[r];this._deactivateAction(s);var o=s._cacheIndex,l=e[e.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,l._cacheIndex=o,e[o]=l,e.pop(),this._removeInactiveBindingsForAction(s)}delete n[t]}},uncacheRoot:function(t){t=t.uuid;var e,n=this._actionsByClip;for(e in n){var i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}if(void 0!==(e=this._bindingsByRootAndName[t]))for(var r in e)(t=e[r]).restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},Object.assign(xi.prototype,{_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,s=t._interpolants,o=n.uuid,l=this._bindingsByRootAndName,u=l[o];for(void 0===u&&(u={},l[o]=u),l=0;l!==r;++l){var c=i[l],h=c.name,d=u[h];if(void 0===d){if(void 0!==(d=a[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,o,h));continue}++(d=new gi(vi.create(n,h,e&&e._propertyBindings[l].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(d,o,h)}a[l]=d,s[l].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(n=0,i=(e=t._propertyBindings).length;n!==i;++n){var r=e[n];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,a=r[e];void 0===a?(a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a):(e=a.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;n=t._clip.uuid;var r=(i=this._actionsByClip)[n],a=r.knownActions,s=a[a.length-1],o=t._byClipCacheIndex;s._byClipCacheIndex=o,a[o]=s,a.pop(),t._byClipCacheIndex=null,delete r.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete i[n],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=0,n=(t=t._propertyBindings).length;e!==n;++e){var i=t[e];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],a=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=(i=t.binding).rootNode.uuid,i=i.path,r=this._bindingsByRootAndName,a=r[n],s=e[e.length-1];t=t._cacheIndex,s._cacheIndex=t,e[t]=s,e.pop(),delete a[i];t:{for(var o in a)break t;delete r[n]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Pn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1)}),Object.assign(xi.prototype,e.prototype),bi.prototype.clone=function(){return new bi(void 0===this.value.clone?this.value:this.value.clone())},wi.prototype=Object.create(bt.prototype),wi.prototype.constructor=wi,wi.prototype.isInstancedBufferGeometry=!0,wi.prototype.addGroup=function(t,e,n){this.groups.push({start:t,count:e,materialIndex:n})},wi.prototype.copy=function(t){null!==(n=t.index)&&this.setIndex(n.clone());var e,n=t.attributes;for(e in n)this.addAttribute(e,n[e].clone());for(e=0,n=(t=t.groups).length;e<n;e++){var i=t[e];this.addGroup(i.start,i.count,i.materialIndex)}return this},Ti.prototype={constructor:Ti,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}},Mi.prototype={constructor:Mi,isInterleavedBuffer:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}},Si.prototype=Object.create(Mi.prototype),Si.prototype.constructor=Si,Si.prototype.isInstancedInterleavedBuffer=!0,Si.prototype.copy=function(t){return Mi.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Ei.prototype=Object.create(lt.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isInstancedBufferAttribute=!0,Ei.prototype.copy=function(t){return lt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Ci.prototype={constructor:Ci,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var n=[];return Li(t,this,n,e),n.sort(Ai),n},intersectObjects:function(t,e){var n=[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,r=t.length;i<r;i++)Li(t[i],this,n,e);return n.sort(Ai),n}},Pi.prototype={constructor:Pi,start:function(){this.oldTime=this.startTime=(performance||Date).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3;this.oldTime=e,this.elapsedTime+=t}return t}},Ri.prototype={constructor:Ri,set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(lr.clamp(t.y/this.radius,-1,1))),this}},Ii.prototype={constructor:Ii,set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}},Oi.prototype=Object.create(wt.prototype),Oi.prototype.constructor=Oi,Oi.prototype.createAnimation=function(t,e,n,i){e={start:e,end:n,length:n-e+1,fps:i,duration:(n-e)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[t]=e,this.animationsList.push(e)},Oi.prototype.autoCreateAnimations=function(t){for(var e,n=/([a-z]+)_?(\d+)/i,i={},r=this.geometry,a=0,s=r.morphTargets.length;a<s;a++){var o=r.morphTargets[a].name.match(n);if(o&&1<o.length){var l=o[1];i[l]||(i[l]={start:1/0,end:-1/0}),a<(o=i[l]).start&&(o.start=a),a>o.end&&(o.end=a),e||(e=l)}}for(l in i)o=i[l],this.createAnimation(l,o.start,o.end,t);this.firstAnimation=e},Oi.prototype.setAnimationDirectionForward=function(t){(t=this.animationsMap[t])&&(t.direction=1,t.directionBackwards=!1)},Oi.prototype.setAnimationDirectionBackward=function(t){(t=this.animationsMap[t])&&(t.direction=-1,t.directionBackwards=!0)},Oi.prototype.setAnimationFPS=function(t,e){var n=this.animationsMap[t];n&&(n.fps=e,n.duration=(n.end-n.start)/n.fps)},Oi.prototype.setAnimationDuration=function(t,e){var n=this.animationsMap[t];n&&(n.duration=e,n.fps=(n.end-n.start)/n.duration)},Oi.prototype.setAnimationWeight=function(t,e){var n=this.animationsMap[t];n&&(n.weight=e)},Oi.prototype.setAnimationTime=function(t,e){var n=this.animationsMap[t];n&&(n.time=e)},Oi.prototype.getAnimationTime=function(t){var e=0;return(t=this.animationsMap[t])&&(e=t.time),e},Oi.prototype.getAnimationDuration=function(t){var e=-1;return(t=this.animationsMap[t])&&(e=t.duration),e},Oi.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},Oi.prototype.stopAnimation=function(t){(t=this.animationsMap[t])&&(t.active=!1)},Oi.prototype.update=function(t){for(var e=0,n=this.animationsList.length;e<n;e++){var i=this.animationsList[e];if(i.active){var r=i.duration/i.length;i.time+=i.direction*t,i.mirroredLoop?(i.time>i.duration||0>i.time)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),0>i.time&&(i.time=0,i.directionBackwards=!1)):(i.time%=i.duration,0>i.time&&(i.time+=i.duration));var a=i.start+lr.clamp(Math.floor(i.time/r),0,i.length-1),s=i.weight;a!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*s,this.morphTargetInfluences[a]=0,i.lastFrame=i.currentFrame,i.currentFrame=a),r=i.time%r/r,i.directionBackwards&&(r=1-r),i.currentFrame!==i.lastFrame?(this.morphTargetInfluences[i.currentFrame]=r*s,this.morphTargetInfluences[i.lastFrame]=(1-r)*s):this.morphTargetInfluences[i.currentFrame]=s}}},zi.prototype=Object.create(it.prototype),zi.prototype.constructor=zi,zi.prototype.isImmediateRenderObject=!0,Di.prototype=Object.create(he.prototype),Di.prototype.constructor=Di,Di.prototype.update=function(){var t=new l,e=new l,n=new Z;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var o=s.vertices,l=s.faces,u=s=0,c=l.length;u<c;u++)for(var h=l[u],d=0,f=h.vertexNormals.length;d<f;d++){var p=h.vertexNormals[d];t.copy(o[h[i[d]]]).applyMatrix4(r),e.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),a.setXYZ(s,t.x,t.y,t.z),s+=1,a.setXYZ(s,e.x,e.y,e.z),s+=1}else if(s&&s.isBufferGeometry)for(i=s.attributes.position,o=s.attributes.normal,d=s=0,f=i.count;d<f;d++)t.set(i.getX(d),i.getY(d),i.getZ(d)).applyMatrix4(r),e.set(o.getX(d),o.getY(d),o.getZ(d)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),a.setXYZ(s,t.x,t.y,t.z),s+=1,a.setXYZ(s,e.x,e.y,e.z),s+=1;return a.needsUpdate=!0,this}}(),Ni.prototype=Object.create(it.prototype),Ni.prototype.constructor=Ni,Ni.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ni.prototype.update=function(){var t=new l,e=new l;return function(){var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),ki.prototype=Object.create(he.prototype),ki.prototype.constructor=ki,ki.prototype.getBoneList=function(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,this.getBoneList(t.children[n]));return e},ki.prototype.update=function(){var t=new l,e=new u,n=new u;return function(){var i=this.geometry,r=i.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var a=0,s=0;a<this.bones.length;a++){var o=this.bones[a];o.parent&&o.parent.isBone&&(e.multiplyMatrices(n,o.matrixWorld),t.setFromMatrixPosition(e),r.setXYZ(s,t.x,t.y,t.z),e.multiplyMatrices(n,o.parent.matrixWorld),t.setFromMatrixPosition(e),r.setXYZ(s+1,t.x,t.y,t.z),s+=2)}i.getAttribute("position").needsUpdate=!0}}(),Bi.prototype=Object.create(wt.prototype),Bi.prototype.constructor=Bi,Bi.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Bi.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},Fi.prototype=Object.create(it.prototype),Fi.prototype.constructor=Fi,Fi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},Fi.prototype.update=function(){var t=new l,e=new l;return function(){var n=this.children[0],i=this.children[1];if(this.light.target){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld);var r=e.clone().sub(t);n.lookAt(r),i.lookAt(r)}n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);i=.5*this.light.width,r=.5*this.light.height;var a=(n=n.geometry.getAttribute("position")).array;a[0]=i,a[1]=-r,a[2]=0,a[3]=i,a[4]=r,a[5]=0,a[6]=-i,a[7]=r,a[8]=0,a[9]=-i,a[10]=r,a[11]=0,a[12]=-i,a[13]=-r,a[14]=0,a[15]=i,a[16]=-r,a[17]=0,n.needsUpdate=!0}}(),Ui.prototype=Object.create(it.prototype),Ui.prototype.constructor=Ui,Ui.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ui.prototype.update=function(){var t=new l,e=new U,n=new U;return function(){var i=this.children[0],r=i.geometry.getAttribute("color");e.copy(this.light.color).multiplyScalar(this.light.intensity),n.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var a=0,s=r.count;a<s;a++){var o=a<s/2?e:n;r.setXYZ(a,o.r,o.g,o.b)}i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),r.needsUpdate=!0}}(),Hi.prototype=Object.create(he.prototype),Hi.prototype.constructor=Hi,Gi.prototype=Object.create(he.prototype),Gi.prototype.constructor=Gi,ji.prototype=Object.create(he.prototype),ji.prototype.constructor=ji,ji.prototype.update=function(){var t=new l,e=new l,n=new Z;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i,r=this.object.matrixWorld,a=this.geometry.attributes.position,s=(i=this.object.geometry).vertices,o=0,l=0,u=(i=i.faces).length;l<u;l++){var c=i[l],h=c.normal;t.copy(s[c.a]).add(s[c.b]).add(s[c.c]).divideScalar(3).applyMatrix4(r),e.copy(h).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),a.setXYZ(o,t.x,t.y,t.z),o+=1,a.setXYZ(o,e.x,e.y,e.z),o+=1}return a.needsUpdate=!0,this}}(),Vi.prototype=Object.create(it.prototype),Vi.prototype.constructor=Vi,Vi.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},Vi.prototype.update=function(){var t=new l,e=new l,n=new l;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t);var i=this.children[0],r=this.children[1];i.lookAt(n),i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),r.lookAt(n),r.scale.z=n.length()}}(),Wi.prototype=Object.create(he.prototype),Wi.prototype.constructor=Wi,Wi.prototype.update=function(){function t(t,a,s,o){if(i.set(a,s,o).unproject(r),void 0!==(t=n[t]))for(a=e.getAttribute("position"),s=0,o=t.length;s<o;s++)a.setXYZ(t[s],i.x,i.y,i.z)}var e,n,i=new l,r=new Ct;return function(){e=this.geometry,n=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),qi.prototype=Object.create(he.prototype),qi.prototype.constructor=qi,qi.prototype.update=function(){var t=new Y;return function(e){if(e&&e.isBox3?t.copy(e):t.setFromObject(e),!t.isEmpty()){e=t.min;var n=t.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Xi.prototype=Object.create(it.prototype),Xi.prototype.constructor=Xi,Xi.prototype.setDirection=function(){var t,e=new l;return function(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),Xi.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Xi.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Yi.prototype=Object.create(he.prototype),Yi.prototype.constructor=Yi;var Nr=new l,kr=new $i,Br=new $i,Fr=new $i;Zi.prototype=Object.create(Zn.prototype),Zi.prototype.constructor=Zi,Zi.prototype.getPoint=function(t){var e,n,i,r=this.points;if(2>(o=r.length)&&console.log("duh, you need at least 2 points"),t*=o-(this.closed?0:1),t-=a=Math.floor(t),this.closed?a+=0<a?0:(Math.floor(Math.abs(a)/r.length)+1)*r.length:0===t&&a===o-1&&(a=o-2,t=1),this.closed||0<a?e=r[(a-1)%o]:(Nr.subVectors(r[0],r[1]).add(r[0]),e=Nr),n=r[a%o],i=r[(a+1)%o],this.closed||a+2<o?r=r[(a+2)%o]:(Nr.subVectors(r[o-1],r[o-2]).add(r[o-1]),r=Nr),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var a,s="chordal"===this.type?.5:.25,o=Math.pow(e.distanceToSquared(n),s);1e-4>(a=Math.pow(n.distanceToSquared(i),s))&&(a=1),1e-4>o&&(o=a),1e-4>(s=Math.pow(i.distanceToSquared(r),s))&&(s=a),kr.initNonuniformCatmullRom(e.x,n.x,i.x,r.x,o,a,s),Br.initNonuniformCatmullRom(e.y,n.y,i.y,r.y,o,a,s),Fr.initNonuniformCatmullRom(e.z,n.z,i.z,r.z,o,a,s)}else"catmullrom"===this.type&&(o=void 0!==this.tension?this.tension:.5,kr.initCatmullRom(e.x,n.x,i.x,r.x,o),Br.initCatmullRom(e.y,n.y,i.y,r.y,o),Fr.initCatmullRom(e.z,n.z,i.z,r.z,o));return new l(kr.calc(t),Br.calc(t),Fr.calc(t))},Ji.prototype=Object.create(Zn.prototype),Ji.prototype.constructor=Ji,Ji.prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2,r=this.v3;return new l($n(t,e.x,n.x,i.x,r.x),$n(t,e.y,n.y,i.y,r.y),$n(t,e.z,n.z,i.z,r.z))},Qi.prototype=Object.create(Zn.prototype),Qi.prototype.constructor=Qi,Qi.prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2;return new l(Yn(t,e.x,n.x,i.x),Yn(t,e.y,n.y,i.y),Yn(t,e.z,n.z,i.z))},Ki.prototype=Object.create(Zn.prototype),Ki.prototype.constructor=Ki,Ki.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=new l;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e},tr.prototype=Object.create(Kn.prototype),tr.prototype.constructor=tr,Zn.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Zn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},er.prototype=Object.create(Zi.prototype),nr.prototype=Object.create(Zi.prototype),ir.prototype=Object.create(Zi.prototype),Object.assign(ir.prototype,{initFromArray:function(t){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(t){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(t){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Hi.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(G.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Y.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),rt.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},lr.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(Z.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToBuffer:function(t,e,n){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,n){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(u.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new l),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t,e,n){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,n){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,a)}}),J.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},o.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(tt.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(ri.prototype,{extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Be(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new qe(this,t)}}),Object.assign(n.prototype,{fromAttribute:function(t,e,n){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)}}),Object.assign(l.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)}}),Object.assign(r.prototype,{fromAttribute:function(t,e,n){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)}}),xt.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(it.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(it.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ae.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),At.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(_n.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(lt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(bt.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(bt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(bi.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(W.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new U}}}),Object.defineProperties(on.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(q.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Qt.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Qt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(K.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(t){t=1!==t,console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(a.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),fi.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new li).load(t,(function(t){e.setBuffer(t)})),this},mi.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},t.WebGLRenderTargetCube=s,t.WebGLRenderTarget=a,t.WebGLRenderer=Qt,t.ShaderLib=_r,t.UniformsLib=yr,t.UniformsUtils=mr,t.ShaderChunk=gr,t.FogExp2=Kt,t.Fog=te,t.Scene=ee,t.LensFlare=ne,t.Sprite=re,t.LOD=ae,t.SkinnedMesh=le,t.Skeleton=se,t.Bone=oe,t.Mesh=wt,t.LineSegments=he,t.Line=ce,t.Points=fe,t.Group=pe,t.VideoTexture=me,t.DataTexture=H,t.CompressedTexture=ge,t.CubeTexture=c,t.CanvasTexture=ve,t.DepthTexture=ye,t.Texture=i,t.CompressedTextureLoader=pn,t.DataTextureLoader=mn,t.CubeTextureLoader=vn,t.TextureLoader=yn,t.ObjectLoader=qn,t.MaterialLoader=Gn,t.BufferGeometryLoader=jn,t.DefaultLoadingManager=Ar,t.LoadingManager=dn,t.JSONLoader=Wn,t.ImageLoader=gn,t.FontLoader=oi,t.FileLoader=fn,t.Loader=Vn,t.Cache=Cr,t.AudioLoader=li,t.SpotLightShadow=wn,t.SpotLight=Tn,t.PointLight=Mn,t.RectAreaLight=ui,t.HemisphereLight=xn,t.DirectionalLightShadow=Sn,t.DirectionalLight=En,t.AmbientLight=Cn,t.LightShadow=bn,t.Light=_n,t.StereoCamera=ci,t.PerspectiveCamera=At,t.OrthographicCamera=Lt,t.CubeCamera=hi,t.Camera=Ct,t.AudioListener=di,t.PositionalAudio=pi,t.AudioContext=Dr,t.AudioAnalyser=mi,t.Audio=fi,t.VectorKeyframeTrack=On,t.StringKeyframeTrack=kn,t.QuaternionKeyframeTrack=Dn,t.NumberKeyframeTrack=Nn,t.ColorKeyframeTrack=Fn,t.BooleanKeyframeTrack=Bn,t.PropertyMixer=gi,t.PropertyBinding=vi,t.KeyframeTrack=Un,t.AnimationUtils=Pr,t.AnimationObjectGroup=yi,t.AnimationMixer=xi,t.AnimationClip=Hn,t.Uniform=bi,t.InstancedBufferGeometry=wi,t.BufferGeometry=bt,t.GeometryIdCount=function(){return wr++},t.Geometry=xt,t.InterleavedBufferAttribute=Ti,t.InstancedInterleavedBuffer=Si,t.InterleavedBuffer=Mi,t.InstancedBufferAttribute=Ei,t.Face3=st,t.Object3D=it,t.Raycaster=Ci,t.Layers=nt,t.EventDispatcher=e,t.Clock=Pi,t.QuaternionLinearInterpolant=zn,t.LinearInterpolant=Pn,t.DiscreteInterpolant=Rn,t.CubicInterpolant=Ln,t.Interpolant=An,t.Triangle=at,t.Math=lr,t.Spherical=Ri,t.Cylindrical=Ii,t.Plane=J,t.Frustum=Q,t.Sphere=$,t.Ray=tt,t.Matrix4=u,t.Matrix3=Z,t.Box3=Y,t.Box2=G,t.Line3=rt,t.Euler=et,t.Vector4=r,t.Vector3=l,t.Vector2=n,t.Quaternion=o,t.Color=U,t.MorphBlendMesh=Oi,t.ImmediateRenderObject=zi,t.VertexNormalsHelper=Di,t.SpotLightHelper=Ni,t.SkeletonHelper=ki,t.PointLightHelper=Bi,t.RectAreaLightHelper=Fi,t.HemisphereLightHelper=Ui,t.GridHelper=Hi,t.PolarGridHelper=Gi,t.FaceNormalsHelper=ji,t.DirectionalLightHelper=Vi,t.CameraHelper=Wi,t.BoxHelper=qi,t.ArrowHelper=Xi,t.AxisHelper=Yi,t.CatmullRomCurve3=Zi,t.CubicBezierCurve3=Ji,t.QuadraticBezierCurve3=Qi,t.LineCurve3=Ki,t.ArcCurve=tr,t.EllipseCurve=Kn,t.SplineCurve=ti,t.CubicBezierCurve=ei,t.QuadraticBezierCurve=ni,t.LineCurve=Jn,t.Shape=ri,t.Path=ii,t.ShapePath=ai,t.Font=si,t.CurvePath=Qn,t.Curve=Zn,t.ShapeUtils=Mr,t.SceneUtils={createMultiMaterialObject:function(t,e){for(var n=new pe,i=0,r=e.length;i<r;i++)n.add(new wt(t,e[i]));return n},detach:function(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t)},attach:function(t,e,n){var i=new u;i.getInverse(n.matrixWorld),t.applyMatrix(i),e.remove(t),n.add(t)}},t.WireframeGeometry=_e,t.ParametricGeometry=xe,t.ParametricBufferGeometry=be,t.TetrahedronGeometry=Me,t.TetrahedronBufferGeometry=Se,t.OctahedronGeometry=Ee,t.OctahedronBufferGeometry=Ce,t.IcosahedronGeometry=Ae,t.IcosahedronBufferGeometry=Le,t.DodecahedronGeometry=Pe,t.DodecahedronBufferGeometry=Re,t.PolyhedronGeometry=we,t.PolyhedronBufferGeometry=Te,t.TubeGeometry=Ie,t.TubeBufferGeometry=Oe,t.TorusKnotGeometry=ze,t.TorusKnotBufferGeometry=De,t.TorusGeometry=Ne,t.TorusBufferGeometry=ke,t.TextGeometry=Fe,t.SphereGeometry=Ue,t.SphereBufferGeometry=He,t.RingGeometry=Ge,t.RingBufferGeometry=je,t.PlaneGeometry=St,t.PlaneBufferGeometry=Et,t.LatheGeometry=Ve,t.LatheBufferGeometry=We,t.ShapeGeometry=qe,t.ShapeBufferGeometry=Xe,t.ExtrudeGeometry=Be,t.EdgesGeometry=Ye,t.ConeGeometry=Je,t.ConeBufferGeometry=Qe,t.CylinderGeometry=$e,t.CylinderBufferGeometry=Ze,t.CircleGeometry=Ke,t.CircleBufferGeometry=tn,t.BoxGeometry=Tt,t.BoxBufferGeometry=Mt,t.ShadowMaterial=en,t.SpriteMaterial=ie,t.RawShaderMaterial=nn,t.ShaderMaterial=q,t.PointsMaterial=de,t.MultiMaterial=rn,t.MeshPhysicalMaterial=sn,t.MeshStandardMaterial=an,t.MeshPhongMaterial=on,t.MeshToonMaterial=ln,t.MeshNormalMaterial=un,t.MeshLambertMaterial=cn,t.MeshDepthMaterial=X,t.MeshBasicMaterial=ot,t.LineDashedMaterial=hn,t.LineBasicMaterial=ue,t.Material=W,t.Float64BufferAttribute=vt,t.Float32BufferAttribute=gt,t.Uint32BufferAttribute=mt,t.Int32BufferAttribute=pt,t.Uint16BufferAttribute=ft,t.Int16BufferAttribute=dt,t.Uint8ClampedBufferAttribute=ht,t.Uint8BufferAttribute=ct,t.Int8BufferAttribute=ut,t.BufferAttribute=lt,t.REVISION="84",t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=0,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.FrontSide=0,t.BackSide=1,t.DoubleSide=2,t.FlatShading=1,t.SmoothShading=2,t.NoColors=0,t.FaceColors=1,t.VertexColors=2,t.NoBlending=0,t.NormalBlending=1,t.AdditiveBlending=2,t.SubtractiveBlending=3,t.MultiplyBlending=4,t.CustomBlending=5,t.AddEquation=100,t.SubtractEquation=101,t.ReverseSubtractEquation=102,t.MinEquation=103,t.MaxEquation=104,t.ZeroFactor=200,t.OneFactor=201,t.SrcColorFactor=202,t.OneMinusSrcColorFactor=203,t.SrcAlphaFactor=204,t.OneMinusSrcAlphaFactor=205,t.DstAlphaFactor=206,t.OneMinusDstAlphaFactor=207,t.DstColorFactor=208,t.OneMinusDstColorFactor=209,t.SrcAlphaSaturateFactor=210,t.NeverDepth=0,t.AlwaysDepth=1,t.LessDepth=2,t.LessEqualDepth=3,t.EqualDepth=4,t.GreaterEqualDepth=5,t.GreaterDepth=6,t.NotEqualDepth=7,t.MultiplyOperation=0,t.MixOperation=1,t.AddOperation=2,t.NoToneMapping=0,t.LinearToneMapping=1,t.ReinhardToneMapping=2,t.Uncharted2ToneMapping=3,t.CineonToneMapping=4,t.UVMapping=300,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.SphericalReflectionMapping=305,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.RepeatWrapping=1e3,t.ClampToEdgeWrapping=1001,t.MirroredRepeatWrapping=1002,t.NearestFilter=1003,t.NearestMipMapNearestFilter=1004,t.NearestMipMapLinearFilter=1005,t.LinearFilter=1006,t.LinearMipMapNearestFilter=1007,t.LinearMipMapLinearFilter=1008,t.UnsignedByteType=1009,t.ByteType=1010,t.ShortType=1011,t.UnsignedShortType=1012,t.IntType=1013,t.UnsignedIntType=1014,t.FloatType=1015,t.HalfFloatType=1016,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedInt248Type=1020,t.AlphaFormat=1021,t.RGBFormat=1022,t.RGBAFormat=1023,t.LuminanceFormat=1024,t.LuminanceAlphaFormat=1025,t.RGBEFormat=1023,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.RGB_S3TC_DXT1_Format=2001,t.RGBA_S3TC_DXT1_Format=2002,t.RGBA_S3TC_DXT3_Format=2003,t.RGBA_S3TC_DXT5_Format=2004,t.RGB_PVRTC_4BPPV1_Format=2100,t.RGB_PVRTC_2BPPV1_Format=2101,t.RGBA_PVRTC_4BPPV1_Format=2102,t.RGBA_PVRTC_2BPPV1_Format=2103,t.RGB_ETC1_Format=2151,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=0,t.TriangleStripDrawMode=1,t.TriangleFanDrawMode=2,t.LinearEncoding=3e3,t.sRGBEncoding=3001,t.GammaEncoding=3007,t.RGBEEncoding=3002,t.LogLuvEncoding=3003,t.RGBM7Encoding=3004,t.RGBM16Encoding=3005,t.RGBDEncoding=3006,t.BasicDepthPacking=3200,t.RGBADepthPacking=3201,t.CubeGeometry=Tt,t.Face4=function(t,e,n,i,r,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new st(t,e,n,r,a,s)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new rn(t)},t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new fe(t,e)},t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new re(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new fe(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new de(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new de(t)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new de(t)},t.Vertex=function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new l(t,e,n)},t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new lt(t,e).setDynamic(!0)},t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ut(t,e)},t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ct(t,e)},t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ht(t,e)},t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new dt(t,e)},t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ft(t,e)},t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new pt(t,e)},t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new mt(t,e)},t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new gt(t,e)},t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new vt(t,e)},t.ClosedSplineCurve3=er,t.SplineCurve3=nr,t.Spline=ir,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new qi(t,e)},t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new he(new Ye(t.geometry),new ue({color:void 0!==e?e:16777215}))},t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new he(new _e(t.geometry),new ue({color:void 0!==e?e:16777215}))},t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new fn(t)},t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new mn(t)},t.GeometryUtils={merge:function(t,e,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new yn;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,n,void 0,i),e&&(t.mapping=e),t},loadTextureCube:function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new vn;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,n,void 0,i),e&&(t.mapping=e),t},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},t.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Object.defineProperty(t,"__esModule",{value:!0})})),function(){var t="Expected a function",e="__lodash_placeholder__",n=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],i="[object Arguments]",r="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object GeneratorFunction]",c="[object Map]",h="[object Number]",d="[object Object]",f="[object RegExp]",p="[object Set]",m="[object String]",g="[object Symbol]",v="[object WeakMap]",y="[object ArrayBuffer]",_="[object DataView]",x="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",T="[object Int16Array]",M="[object Int32Array]",S="[object Uint8Array]",E="[object Uint16Array]",C="[object Uint32Array]",A=/\b__p \+= '';/g,L=/\b(__p \+=) '' \+/g,P=/(__e\(.*?\)|\b__t\)) \+\n'';/g,R=/&(?:amp|lt|gt|quot|#39);/g,I=/[&<>"']/g,O=RegExp(R.source),z=RegExp(I.source),D=/<%-([\s\S]+?)%>/g,N=/<%([\s\S]+?)%>/g,k=/<%=([\s\S]+?)%>/g,B=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F=/^\w*$/,U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/[\\^$.*+?()[\]{}|]/g,G=RegExp(H.source),j=/^\s+|\s+$/g,V=/^\s+/,W=/\s+$/,q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,Y=/,? & /,$=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Z=/\\(\\)?/g,J=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Q=/\w*$/,K=/^[-+]0x[0-9a-f]+$/i,tt=/^0b[01]+$/i,et=/^\[object .+?Constructor\]$/,nt=/^0o[0-7]+$/i,it=/^(?:0|[1-9]\d*)$/,rt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,at=/($^)/,st=/['\n\r\u2028\u2029\\]/g,ot="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",lt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ut="[\\ud800-\\udfff]",ct="["+lt+"]",ht="["+ot+"]",dt="\\d+",ft="[\\u2700-\\u27bf]",pt="[a-z\\xdf-\\xf6\\xf8-\\xff]",mt="[^\\ud800-\\udfff"+lt+dt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",gt="\\ud83c[\\udffb-\\udfff]",vt="[^\\ud800-\\udfff]",yt="(?:\\ud83c[\\udde6-\\uddff]){2}",_t="[\\ud800-\\udbff][\\udc00-\\udfff]",xt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",bt="(?:"+pt+"|"+mt+")",wt="(?:"+xt+"|"+mt+")",Tt="(?:"+ht+"|"+gt+")"+"?",Mt="[\\ufe0e\\ufe0f]?"+Tt+("(?:\\u200d(?:"+[vt,yt,_t].join("|")+")[\\ufe0e\\ufe0f]?"+Tt+")*"),St="(?:"+[ft,yt,_t].join("|")+")"+Mt,Et="(?:"+[vt+ht+"?",ht,yt,_t,ut].join("|")+")",Ct=RegExp("['â]","g"),At=RegExp(ht,"g"),Lt=RegExp(gt+"(?="+gt+")|"+Et+Mt,"g"),Pt=RegExp([xt+"?"+pt+"+(?:['â](?:d|ll|m|re|s|t|ve))?(?="+[ct,xt,"$"].join("|")+")",wt+"+(?:['â](?:D|LL|M|RE|S|T|VE))?(?="+[ct,xt+bt,"$"].join("|")+")",xt+"?"+bt+"+(?:['â](?:d|ll|m|re|s|t|ve))?",xt+"+(?:['â](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",dt,St].join("|"),"g"),Rt=RegExp("[\\u200d\\ud800-\\udfff"+ot+"\\ufe0e\\ufe0f]"),It=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zt=-1,Dt={};Dt[x]=Dt[b]=Dt[w]=Dt[T]=Dt[M]=Dt[S]=Dt["[object Uint8ClampedArray]"]=Dt[E]=Dt[C]=!0,Dt[i]=Dt[r]=Dt[y]=Dt[a]=Dt[_]=Dt[s]=Dt[o]=Dt[l]=Dt[c]=Dt[h]=Dt[d]=Dt[f]=Dt[p]=Dt[m]=Dt[v]=!1;var Nt={};Nt[i]=Nt[r]=Nt[y]=Nt[_]=Nt[a]=Nt[s]=Nt[x]=Nt[b]=Nt[w]=Nt[T]=Nt[M]=Nt[c]=Nt[h]=Nt[d]=Nt[f]=Nt[p]=Nt[m]=Nt[g]=Nt[S]=Nt["[object Uint8ClampedArray]"]=Nt[E]=Nt[C]=!0,Nt[o]=Nt[l]=Nt[v]=!1;var kt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bt=parseFloat,Ft=parseInt,Ut="object"==typeof global&&global&&global.Object===Object&&global,Ht="object"==typeof self&&self&&self.Object===Object&&self,Gt=Ut||Ht||Function("return this")(),jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Vt=jt&&"object"==typeof module&&module&&!module.nodeType&&module,Wt=Vt&&Vt.exports===jt,qt=Wt&&Ut.process,Xt=function(){try{var t=Vt&&Vt.require&&Vt.require("util").types;return t||qt&&qt.binding&&qt.binding("util")}catch(t){}}(),Yt=Xt&&Xt.isArrayBuffer,$t=Xt&&Xt.isDate,Zt=Xt&&Xt.isMap,Jt=Xt&&Xt.isRegExp,Qt=Xt&&Xt.isSet,Kt=Xt&&Xt.isTypedArray;function te(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ee(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var s=t[r];e(i,s,n(s),t)}return i}function ne(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function ie(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function re(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var s=t[n];e(s,n,t)&&(a[r++]=s)}return a}function se(t,e){return!!(null==t?0:t.length)&&ge(t,e,0)>-1}function oe(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function le(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function ue(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function ce(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function he(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function de(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var fe=xe("length");function pe(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function me(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function ge(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):me(t,ye,n)}function ve(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function ye(t){return t!=t}function _e(t,e){var n=null==t?0:t.length;return n?Te(t,e)/n:NaN}function xe(t){return function(e){return null==e?void 0:e[t]}}function be(t){return function(e){return null==t?void 0:t[e]}}function we(t,e,n,i,r){return r(t,(function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)})),n}function Te(t,e){for(var n,i=-1,r=t.length;++i<r;){var a=e(t[i]);void 0!==a&&(n=void 0===n?a:n+a)}return n}function Me(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Se(t){return function(e){return t(e)}}function Ee(t,e){return le(e,(function(e){return t[e]}))}function Ce(t,e){return t.has(e)}function Ae(t,e){for(var n=-1,i=t.length;++n<i&&ge(e,t[n],0)>-1;);return n}function Le(t,e){for(var n=t.length;n--&&ge(e,t[n],0)>-1;);return n}function Pe(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var Re=be({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),Ie=be({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Oe(t){return"\\"+kt[t]}function ze(t){return Rt.test(t)}function De(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function Ne(t,e){return function(n){return t(e(n))}}function ke(t,n){for(var i=-1,r=t.length,a=0,s=[];++i<r;){var o=t[i];o!==n&&o!==e||(t[i]=e,s[a++]=i)}return s}function Be(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function Fe(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Ue(t){return ze(t)?function(t){var e=Lt.lastIndex=0;for(;Lt.test(t);)++e;return e}(t):fe(t)}function He(t){return ze(t)?function(t){return t.match(Lt)||[]}(t):function(t){return t.split("")}(t)}var Ge=be({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var je=function ot(lt){var ut,ct=(lt=null==lt?Gt:je.defaults(Gt.Object(),lt,je.pick(Gt,Ot))).Array,ht=lt.Date,dt=lt.Error,ft=lt.Function,pt=lt.Math,mt=lt.Object,gt=lt.RegExp,vt=lt.String,yt=lt.TypeError,_t=ct.prototype,xt=ft.prototype,bt=mt.prototype,wt=lt["__core-js_shared__"],Tt=xt.toString,Mt=bt.hasOwnProperty,St=0,Et=(ut=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||""))?"Symbol(src)_1."+ut:"",Lt=bt.toString,Rt=Tt.call(mt),kt=Gt._,Ut=gt("^"+Tt.call(Mt).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=Wt?lt.Buffer:void 0,jt=lt.Symbol,Vt=lt.Uint8Array,qt=Ht?Ht.allocUnsafe:void 0,Xt=Ne(mt.getPrototypeOf,mt),fe=mt.create,be=bt.propertyIsEnumerable,Ve=_t.splice,We=jt?jt.isConcatSpreadable:void 0,qe=jt?jt.iterator:void 0,Xe=jt?jt.toStringTag:void 0,Ye=function(){try{var t=Kr(mt,"defineProperty");return t({},"",{}),t}catch(t){}}(),$e=lt.clearTimeout!==Gt.clearTimeout&&lt.clearTimeout,Ze=ht&&ht.now!==Gt.Date.now&&ht.now,Je=lt.setTimeout!==Gt.setTimeout&&lt.setTimeout,Qe=pt.ceil,Ke=pt.floor,tn=mt.getOwnPropertySymbols,en=Ht?Ht.isBuffer:void 0,nn=lt.isFinite,rn=_t.join,an=Ne(mt.keys,mt),sn=pt.max,on=pt.min,ln=ht.now,un=lt.parseInt,cn=pt.random,hn=_t.reverse,dn=Kr(lt,"DataView"),fn=Kr(lt,"Map"),pn=Kr(lt,"Promise"),mn=Kr(lt,"Set"),gn=Kr(lt,"WeakMap"),vn=Kr(mt,"create"),yn=gn&&new gn,_n={},xn=Ea(dn),bn=Ea(fn),wn=Ea(pn),Tn=Ea(mn),Mn=Ea(gn),Sn=jt?jt.prototype:void 0,En=Sn?Sn.valueOf:void 0,Cn=Sn?Sn.toString:void 0;function An(t){if(js(t)&&!Is(t)&&!(t instanceof In)){if(t instanceof Rn)return t;if(Mt.call(t,"__wrapped__"))return Ca(t)}return new Rn(t)}var Ln=function(){function t(){}return function(e){if(!Gs(e))return{};if(fe)return fe(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Pn(){}function Rn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function In(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function On(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Dn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Nn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Dn;++e<n;)this.add(t[e])}function kn(t){var e=this.__data__=new zn(t);this.size=e.size}function Bn(t,e){var n=Is(t),i=!n&&Rs(t),r=!n&&!i&&Ns(t),a=!n&&!i&&!r&&Js(t),s=n||i||r||a,o=s?Me(t.length,vt):[],l=o.length;for(var u in t)!e&&!Mt.call(t,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||sa(u,l))||o.push(u);return o}function Fn(t){var e=t.length;return e?t[Ni(0,e-1)]:void 0}function Un(t,e){return Ta(vr(t),$n(e,0,t.length))}function Hn(t){return Ta(vr(t))}function Gn(t,e,n){(void 0!==n&&!As(t[e],n)||void 0===n&&!(e in t))&&Xn(t,e,n)}function jn(t,e,n){var i=t[e];Mt.call(t,e)&&As(i,n)&&(void 0!==n||e in t)||Xn(t,e,n)}function Vn(t,e){for(var n=t.length;n--;)if(As(t[n][0],e))return n;return-1}function Wn(t,e,n,i){return ti(t,(function(t,r,a){e(i,t,n(t),a)})),i}function qn(t,e){return t&&yr(e,xo(e),t)}function Xn(t,e,n){"__proto__"==e&&Ye?Ye(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Yn(t,e){for(var n=-1,i=e.length,r=ct(i),a=null==t;++n<i;)r[n]=a?void 0:mo(t,e[n]);return r}function $n(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Zn(t,e,n,r,o,v){var A,L=1&e,P=2&e,R=4&e;if(n&&(A=o?n(t,r,o,v):n(t)),void 0!==A)return A;if(!Gs(t))return t;var I=Is(t);if(I){if(A=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!L)return vr(t,A)}else{var O=na(t),z=O==l||O==u;if(Ns(t))return hr(t,L);if(O==d||O==i||z&&!o){if(A=P||z?{}:ra(t),!L)return P?function(t,e){return yr(t,ea(t),e)}(t,function(t,e){return t&&yr(e,bo(e),t)}(A,t)):function(t,e){return yr(t,ta(t),e)}(t,qn(A,t))}else{if(!Nt[O])return o?t:{};A=function(t,e,n){var i=t.constructor;switch(e){case y:return dr(t);case a:case s:return new i(+t);case _:return function(t,e){var n=e?dr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case x:case b:case w:case T:case M:case S:case"[object Uint8ClampedArray]":case E:case C:return fr(t,n);case c:return new i;case h:case m:return new i(t);case f:return function(t){var e=new t.constructor(t.source,Q.exec(t));return e.lastIndex=t.lastIndex,e}(t);case p:return new i;case g:return r=t,En?mt(En.call(r)):{}}var r}(t,O,L)}}v||(v=new kn);var D=v.get(t);if(D)return D;v.set(t,A),Ys(t)?t.forEach((function(i){A.add(Zn(i,e,n,i,t,v))})):Vs(t)&&t.forEach((function(i,r){A.set(r,Zn(i,e,n,r,t,v))}));var N=I?void 0:(R?P?qr:Wr:P?bo:xo)(t);return ne(N||t,(function(i,r){N&&(i=t[r=i]),jn(A,r,Zn(i,e,n,r,t,v))})),A}function Jn(t,e,n){var i=n.length;if(null==t)return!i;for(t=mt(t);i--;){var r=n[i],a=e[r],s=t[r];if(void 0===s&&!(r in t)||!a(s))return!1}return!0}function Qn(e,n,i){if("function"!=typeof e)throw new yt(t);return _a((function(){e.apply(void 0,i)}),n)}function Kn(t,e,n,i){var r=-1,a=se,s=!0,o=t.length,l=[],u=e.length;if(!o)return l;n&&(e=le(e,Se(n))),i?(a=oe,s=!1):e.length>=200&&(a=Ce,s=!1,e=new Nn(e));t:for(;++r<o;){var c=t[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,s&&h==h){for(var d=u;d--;)if(e[d]===h)continue t;l.push(c)}else a(e,h,i)||l.push(c)}return l}An.templateSettings={escape:D,evaluate:N,interpolate:k,variable:"",imports:{_:An}},An.prototype=Pn.prototype,An.prototype.constructor=An,Rn.prototype=Ln(Pn.prototype),Rn.prototype.constructor=Rn,In.prototype=Ln(Pn.prototype),In.prototype.constructor=In,On.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},On.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},On.prototype.get=function(t){var e=this.__data__;if(vn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Mt.call(e,t)?e[t]:void 0},On.prototype.has=function(t){var e=this.__data__;return vn?void 0!==e[t]:Mt.call(e,t)},On.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=vn&&void 0===e?"__lodash_hash_undefined__":e,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(t){var e=this.__data__,n=Vn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ve.call(e,n,1),--this.size,!0)},zn.prototype.get=function(t){var e=this.__data__,n=Vn(e,t);return n<0?void 0:e[n][1]},zn.prototype.has=function(t){return Vn(this.__data__,t)>-1},zn.prototype.set=function(t,e){var n=this.__data__,i=Vn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Dn.prototype.clear=function(){this.size=0,this.__data__={hash:new On,map:new(fn||zn),string:new On}},Dn.prototype.delete=function(t){var e=Jr(this,t).delete(t);return this.size-=e?1:0,e},Dn.prototype.get=function(t){return Jr(this,t).get(t)},Dn.prototype.has=function(t){return Jr(this,t).has(t)},Dn.prototype.set=function(t,e){var n=Jr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},Nn.prototype.add=Nn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Nn.prototype.has=function(t){return this.__data__.has(t)},kn.prototype.clear=function(){this.__data__=new zn,this.size=0},kn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},kn.prototype.get=function(t){return this.__data__.get(t)},kn.prototype.has=function(t){return this.__data__.has(t)},kn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof zn){var i=n.__data__;if(!fn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Dn(i)}return n.set(t,e),this.size=n.size,this};var ti=br(li),ei=br(ui,!0);function ni(t,e){var n=!0;return ti(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function ii(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],s=e(a);if(null!=s&&(void 0===o?s==s&&!Zs(s):n(s,o)))var o=s,l=a}return l}function ri(t,e){var n=[];return ti(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function ai(t,e,n,i,r){var a=-1,s=t.length;for(n||(n=aa),r||(r=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?ai(o,e-1,n,i,r):ue(r,o):i||(r[r.length]=o)}return r}var si=wr(),oi=wr(!0);function li(t,e){return t&&si(t,e,xo)}function ui(t,e){return t&&oi(t,e,xo)}function ci(t,e){return ae(e,(function(e){return Fs(t[e])}))}function hi(t,e){for(var n=0,i=(e=or(e,t)).length;null!=t&&n<i;)t=t[Sa(e[n++])];return n&&n==i?t:void 0}function di(t,e,n){var i=e(t);return Is(t)?i:ue(i,n(t))}function fi(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Xe&&Xe in mt(t)?function(t){var e=Mt.call(t,Xe),n=t[Xe];try{t[Xe]=void 0;var i=!0}catch(t){}var r=Lt.call(t);i&&(e?t[Xe]=n:delete t[Xe]);return r}(t):function(t){return Lt.call(t)}(t)}function pi(t,e){return t>e}function mi(t,e){return null!=t&&Mt.call(t,e)}function gi(t,e){return null!=t&&e in mt(t)}function vi(t,e,n){for(var i=n?oe:se,r=t[0].length,a=t.length,s=a,o=ct(a),l=1/0,u=[];s--;){var c=t[s];s&&e&&(c=le(c,Se(e))),l=on(c.length,l),o[s]=!n&&(e||r>=120&&c.length>=120)?new Nn(s&&c):void 0}c=t[0];var h=-1,d=o[0];t:for(;++h<r&&u.length<l;){var f=c[h],p=e?e(f):f;if(f=n||0!==f?f:0,!(d?Ce(d,p):i(u,p,n))){for(s=a;--s;){var m=o[s];if(!(m?Ce(m,p):i(t[s],p,n)))continue t}d&&d.push(p),u.push(f)}}return u}function yi(t,e,n){var i=null==(t=ma(t,e=or(e,t)))?t:t[Sa(Ba(e))];return null==i?void 0:te(i,t,n)}function _i(t){return js(t)&&fi(t)==i}function xi(t,e,n,l,u){return t===e||(null==t||null==e||!js(t)&&!js(e)?t!=t&&e!=e:function(t,e,n,l,u,v){var x=Is(t),b=Is(e),w=x?r:na(t),T=b?r:na(e),M=(w=w==i?d:w)==d,S=(T=T==i?d:T)==d,E=w==T;if(E&&Ns(t)){if(!Ns(e))return!1;x=!0,M=!1}if(E&&!M)return v||(v=new kn),x||Js(t)?jr(t,e,n,l,u,v):function(t,e,n,i,r,l,u){switch(n){case _:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case y:return!(t.byteLength!=e.byteLength||!l(new Vt(t),new Vt(e)));case a:case s:case h:return As(+t,+e);case o:return t.name==e.name&&t.message==e.message;case f:case m:return t==e+"";case c:var d=De;case p:var v=1&i;if(d||(d=Be),t.size!=e.size&&!v)return!1;var x=u.get(t);if(x)return x==e;i|=2,u.set(t,e);var b=jr(d(t),d(e),i,r,l,u);return u.delete(t),b;case g:if(En)return En.call(t)==En.call(e)}return!1}(t,e,w,n,l,u,v);if(!(1&n)){var C=M&&Mt.call(t,"__wrapped__"),A=S&&Mt.call(e,"__wrapped__");if(C||A){var L=C?t.value():t,P=A?e.value():e;return v||(v=new kn),u(L,P,n,l,v)}}if(!E)return!1;return v||(v=new kn),function(t,e,n,i,r,a){var s=1&n,o=Wr(t),l=o.length,u=Wr(e).length;if(l!=u&&!s)return!1;var c=l;for(;c--;){var h=o[c];if(!(s?h in e:Mt.call(e,h)))return!1}var d=a.get(t);if(d&&a.get(e))return d==e;var f=!0;a.set(t,e),a.set(e,t);var p=s;for(;++c<l;){h=o[c];var m=t[h],g=e[h];if(i)var v=s?i(g,m,h,e,t,a):i(m,g,h,t,e,a);if(!(void 0===v?m===g||r(m,g,n,i,a):v)){f=!1;break}p||(p="constructor"==h)}if(f&&!p){var y=t.constructor,_=e.constructor;y==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(f=!1)}return a.delete(t),a.delete(e),f}(t,e,n,l,u,v)}(t,e,n,l,xi,u))}function bi(t,e,n,i){var r=n.length,a=r,s=!i;if(null==t)return!a;for(t=mt(t);r--;){var o=n[r];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++r<a;){var l=(o=n[r])[0],u=t[l],c=o[1];if(s&&o[2]){if(void 0===u&&!(l in t))return!1}else{var h=new kn;if(i)var d=i(u,c,l,t,e,h);if(!(void 0===d?xi(c,u,3,i,h):d))return!1}}return!0}function wi(t){return!(!Gs(t)||(e=t,Et&&Et in e))&&(Fs(t)?Ut:et).test(Ea(t));var e}function Ti(t){return"function"==typeof t?t:null==t?qo:"object"==typeof t?Is(t)?Li(t[0],t[1]):Ai(t):el(t)}function Mi(t){if(!ha(t))return an(t);var e=[];for(var n in mt(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Si(t){if(!Gs(t))return function(t){var e=[];if(null!=t)for(var n in mt(t))e.push(n);return e}(t);var e=ha(t),n=[];for(var i in t)("constructor"!=i||!e&&Mt.call(t,i))&&n.push(i);return n}function Ei(t,e){return t<e}function Ci(t,e){var n=-1,i=zs(t)?ct(t.length):[];return ti(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function Ai(t){var e=Qr(t);return 1==e.length&&e[0][2]?fa(e[0][0],e[0][1]):function(n){return n===t||bi(n,t,e)}}function Li(t,e){return la(t)&&da(e)?fa(Sa(t),e):function(n){var i=mo(n,t);return void 0===i&&i===e?go(n,t):xi(e,i,3)}}function Pi(t,e,n,i,r){t!==e&&si(e,(function(a,s){if(r||(r=new kn),Gs(a))!function(t,e,n,i,r,a,s){var o=va(t,n),l=va(e,n),u=s.get(l);if(u)return void Gn(t,n,u);var c=a?a(o,l,n+"",t,e,s):void 0,h=void 0===c;if(h){var d=Is(l),f=!d&&Ns(l),p=!d&&!f&&Js(l);c=l,d||f||p?Is(o)?c=o:Ds(o)?c=vr(o):f?(h=!1,c=hr(l,!0)):p?(h=!1,c=fr(l,!0)):c=[]:qs(l)||Rs(l)?(c=o,Rs(o)?c=ao(o):Gs(o)&&!Fs(o)||(c=ra(l))):h=!1}h&&(s.set(l,c),r(c,l,i,a,s),s.delete(l));Gn(t,n,c)}(t,e,s,n,Pi,i,r);else{var o=i?i(va(t,s),a,s+"",t,e,r):void 0;void 0===o&&(o=a),Gn(t,s,o)}}),bo)}function Ri(t,e){var n=t.length;if(n)return sa(e+=e<0?n:0,n)?t[e]:void 0}function Ii(t,e,n){var i=-1;return e=le(e.length?e:[qo],Se(Zr())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Ci(t,(function(t,n,r){return{criteria:le(e,(function(e){return e(t)})),index:++i,value:t}})),(function(t,e){return function(t,e,n){var i=-1,r=t.criteria,a=e.criteria,s=r.length,o=n.length;for(;++i<s;){var l=pr(r[i],a[i]);if(l){if(i>=o)return l;var u=n[i];return l*("desc"==u?-1:1)}}return t.index-e.index}(t,e,n)}))}function Oi(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var s=e[i],o=hi(t,s);n(o,s)&&Hi(a,or(s,t),o)}return a}function zi(t,e,n,i){var r=i?ve:ge,a=-1,s=e.length,o=t;for(t===e&&(e=vr(e)),n&&(o=le(t,Se(n)));++a<s;)for(var l=0,u=e[a],c=n?n(u):u;(l=r(o,c,l,i))>-1;)o!==t&&Ve.call(o,l,1),Ve.call(t,l,1);return t}function Di(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;sa(r)?Ve.call(t,r,1):Ki(t,r)}}return t}function Ni(t,e){return t+Ke(cn()*(e-t+1))}function ki(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Ke(e/2))&&(t+=t)}while(e);return n}function Bi(t,e){return xa(pa(t,e,qo),t+"")}function Fi(t){return Fn(Lo(t))}function Ui(t,e){var n=Lo(t);return Ta(n,$n(e,0,n.length))}function Hi(t,e,n,i){if(!Gs(t))return t;for(var r=-1,a=(e=or(e,t)).length,s=a-1,o=t;null!=o&&++r<a;){var l=Sa(e[r]),u=n;if(r!=s){var c=o[l];void 0===(u=i?i(c,l,o):void 0)&&(u=Gs(c)?c:sa(e[r+1])?[]:{})}jn(o,l,u),o=o[l]}return t}var Gi=yn?function(t,e){return yn.set(t,e),t}:qo,ji=Ye?function(t,e){return Ye(t,"toString",{configurable:!0,enumerable:!1,value:jo(e),writable:!0})}:qo;function Vi(t){return Ta(Lo(t))}function Wi(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=ct(r);++i<r;)a[i]=t[i+e];return a}function qi(t,e){var n;return ti(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function Xi(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var a=i+r>>>1,s=t[a];null!==s&&!Zs(s)&&(n?s<=e:s<e)?i=a+1:r=a}return r}return Yi(t,e,qo,n)}function Yi(t,e,n,i){e=n(e);for(var r=0,a=null==t?0:t.length,s=e!=e,o=null===e,l=Zs(e),u=void 0===e;r<a;){var c=Ke((r+a)/2),h=n(t[c]),d=void 0!==h,f=null===h,p=h==h,m=Zs(h);if(s)var g=i||p;else g=u?p&&(i||d):o?p&&d&&(i||!f):l?p&&d&&!f&&(i||!m):!f&&!m&&(i?h<=e:h<e);g?r=c+1:a=c}return on(a,4294967294)}function $i(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var s=t[n],o=e?e(s):s;if(!n||!As(o,l)){var l=o;a[r++]=0===s?0:s}}return a}function Zi(t){return"number"==typeof t?t:Zs(t)?NaN:+t}function Ji(t){if("string"==typeof t)return t;if(Is(t))return le(t,Ji)+"";if(Zs(t))return Cn?Cn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Qi(t,e,n){var i=-1,r=se,a=t.length,s=!0,o=[],l=o;if(n)s=!1,r=oe;else if(a>=200){var u=e?null:kr(t);if(u)return Be(u);s=!1,r=Ce,l=new Nn}else l=e?[]:o;t:for(;++i<a;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,s&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),o.push(c)}else r(l,h,n)||(l!==o&&l.push(h),o.push(c))}return o}function Ki(t,e){return null==(t=ma(t,e=or(e,t)))||delete t[Sa(Ba(e))]}function tr(t,e,n,i){return Hi(t,e,n(hi(t,e)),i)}function er(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?Wi(t,i?0:a,i?a+1:r):Wi(t,i?a+1:0,i?r:a)}function nr(t,e){var n=t;return n instanceof In&&(n=n.value()),ce(e,(function(t,e){return e.func.apply(e.thisArg,ue([t],e.args))}),n)}function ir(t,e,n){var i=t.length;if(i<2)return i?Qi(t[0]):[];for(var r=-1,a=ct(i);++r<i;)for(var s=t[r],o=-1;++o<i;)o!=r&&(a[r]=Kn(a[r]||s,t[o],e,n));return Qi(ai(a,1),e,n)}function rr(t,e,n){for(var i=-1,r=t.length,a=e.length,s={};++i<r;){var o=i<a?e[i]:void 0;n(s,t[i],o)}return s}function ar(t){return Ds(t)?t:[]}function sr(t){return"function"==typeof t?t:qo}function or(t,e){return Is(t)?t:la(t,e)?[t]:Ma(so(t))}var lr=Bi;function ur(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:Wi(t,e,n)}var cr=$e||function(t){return Gt.clearTimeout(t)};function hr(t,e){if(e)return t.slice();var n=t.length,i=qt?qt(n):new t.constructor(n);return t.copy(i),i}function dr(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function fr(t,e){var n=e?dr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function pr(t,e){if(t!==e){var n=void 0!==t,i=null===t,r=t==t,a=Zs(t),s=void 0!==e,o=null===e,l=e==e,u=Zs(e);if(!o&&!u&&!a&&t>e||a&&s&&l&&!o&&!u||i&&s&&l||!n&&l||!r)return 1;if(!i&&!a&&!u&&t<e||u&&n&&r&&!i&&!a||o&&n&&r||!s&&r||!l)return-1}return 0}function mr(t,e,n,i){for(var r=-1,a=t.length,s=n.length,o=-1,l=e.length,u=sn(a-s,0),c=ct(l+u),h=!i;++o<l;)c[o]=e[o];for(;++r<s;)(h||r<a)&&(c[n[r]]=t[r]);for(;u--;)c[o++]=t[r++];return c}function gr(t,e,n,i){for(var r=-1,a=t.length,s=-1,o=n.length,l=-1,u=e.length,c=sn(a-o,0),h=ct(c+u),d=!i;++r<c;)h[r]=t[r];for(var f=r;++l<u;)h[f+l]=e[l];for(;++s<o;)(d||r<a)&&(h[f+n[s]]=t[r++]);return h}function vr(t,e){var n=-1,i=t.length;for(e||(e=ct(i));++n<i;)e[n]=t[n];return e}function yr(t,e,n,i){var r=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var o=e[a],l=i?i(n[o],t[o],o,n,t):void 0;void 0===l&&(l=t[o]),r?Xn(n,o,l):jn(n,o,l)}return n}function _r(t,e){return function(n,i){var r=Is(n)?ee:Wn,a=e?e():{};return r(n,t,Zr(i,2),a)}}function xr(t){return Bi((function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(r--,a):void 0,s&&oa(n[0],n[1],s)&&(a=r<3?void 0:a,r=1),e=mt(e);++i<r;){var o=n[i];o&&t(e,o,i,a)}return e}))}function br(t,e){return function(n,i){if(null==n)return n;if(!zs(n))return t(n,i);for(var r=n.length,a=e?r:-1,s=mt(n);(e?a--:++a<r)&&!1!==i(s[a],a,s););return n}}function wr(t){return function(e,n,i){for(var r=-1,a=mt(e),s=i(e),o=s.length;o--;){var l=s[t?o:++r];if(!1===n(a[l],l,a))break}return e}}function Tr(t){return function(e){var n=ze(e=so(e))?He(e):void 0,i=n?n[0]:e.charAt(0),r=n?ur(n,1).join(""):e.slice(1);return i[t]()+r}}function Mr(t){return function(e){return ce(Uo(Io(e).replace(Ct,"")),t,"")}}function Sr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ln(t.prototype),i=t.apply(n,e);return Gs(i)?i:n}}function Er(t){return function(e,n,i){var r=mt(e);if(!zs(e)){var a=Zr(n,3);e=xo(e),n=function(t){return a(r[t],t,r)}}var s=t(e,n,i);return s>-1?r[a?e[s]:s]:void 0}}function Cr(e){return Vr((function(n){var i=n.length,r=i,a=Rn.prototype.thru;for(e&&n.reverse();r--;){var s=n[r];if("function"!=typeof s)throw new yt(t);if(a&&!o&&"wrapper"==Yr(s))var o=new Rn([],!0)}for(r=o?r:i;++r<i;){var l=Yr(s=n[r]),u="wrapper"==l?Xr(s):void 0;o=u&&ua(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?o[Yr(u[0])].apply(o,u[3]):1==s.length&&ua(s)?o[l]():o.thru(s)}return function(){var t=arguments,e=t[0];if(o&&1==t.length&&Is(e))return o.plant(e).value();for(var r=0,a=i?n[r].apply(this,t):e;++r<i;)a=n[r].call(this,a);return a}}))}function Ar(t,e,n,i,r,a,s,o,l,u){var c=128&e,h=1&e,d=2&e,f=24&e,p=512&e,m=d?void 0:Sr(t);return function g(){for(var v=arguments.length,y=ct(v),_=v;_--;)y[_]=arguments[_];if(f)var x=$r(g),b=Pe(y,x);if(i&&(y=mr(y,i,r,f)),a&&(y=gr(y,a,s,f)),v-=b,f&&v<u){var w=ke(y,x);return Dr(t,e,Ar,g.placeholder,n,y,w,o,l,u-v)}var T=h?n:this,M=d?T[t]:t;return v=y.length,o?y=ga(y,o):p&&v>1&&y.reverse(),c&&l<v&&(y.length=l),this&&this!==Gt&&this instanceof g&&(M=m||Sr(M)),M.apply(T,y)}}function Lr(t,e){return function(n,i){return function(t,e,n,i){return li(t,(function(t,r,a){e(i,n(t),r,a)})),i}(n,t,e(i),{})}}function Pr(t,e){return function(n,i){var r;if(void 0===n&&void 0===i)return e;if(void 0!==n&&(r=n),void 0!==i){if(void 0===r)return i;"string"==typeof n||"string"==typeof i?(n=Ji(n),i=Ji(i)):(n=Zi(n),i=Zi(i)),r=t(n,i)}return r}}function Rr(t){return Vr((function(e){return e=le(e,Se(Zr())),Bi((function(n){var i=this;return t(e,(function(t){return te(t,i,n)}))}))}))}function Ir(t,e){var n=(e=void 0===e?" ":Ji(e)).length;if(n<2)return n?ki(e,t):e;var i=ki(e,Qe(t/Ue(e)));return ze(e)?ur(He(i),0,t).join(""):i.slice(0,t)}function Or(t){return function(e,n,i){return i&&"number"!=typeof i&&oa(e,n,i)&&(n=i=void 0),e=eo(e),void 0===n?(n=e,e=0):n=eo(n),function(t,e,n,i){for(var r=-1,a=sn(Qe((e-t)/(n||1)),0),s=ct(a);a--;)s[i?a:++r]=t,t+=n;return s}(e,n,i=void 0===i?e<n?1:-1:eo(i),t)}}function zr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ro(e),n=ro(n)),t(e,n)}}function Dr(t,e,n,i,r,a,s,o,l,u){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var h=[t,e,r,c?a:void 0,c?s:void 0,c?void 0:a,c?void 0:s,o,l,u],d=n.apply(void 0,h);return ua(t)&&ya(d,h),d.placeholder=i,ba(d,t,e)}function Nr(t){var e=pt[t];return function(t,n){if(t=ro(t),(n=null==n?0:on(no(n),292))&&nn(t)){var i=(so(t)+"e").split("e");return+((i=(so(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var kr=mn&&1/Be(new mn([,-0]))[1]==1/0?function(t){return new mn(t)}:Jo;function Br(t){return function(e){var n=na(e);return n==c?De(e):n==p?Fe(e):function(t,e){return le(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Fr(n,i,r,a,s,o,l,u){var c=2&i;if(!c&&"function"!=typeof n)throw new yt(t);var h=a?a.length:0;if(h||(i&=-97,a=s=void 0),l=void 0===l?l:sn(no(l),0),u=void 0===u?u:no(u),h-=s?s.length:0,64&i){var d=a,f=s;a=s=void 0}var p=c?void 0:Xr(n),m=[n,i,r,a,s,d,f,o,l,u];if(p&&function(t,n){var i=t[1],r=n[1],a=i|r,s=a<131,o=128==r&&8==i||128==r&&256==i&&t[7].length<=n[8]||384==r&&n[7].length<=n[8]&&8==i;if(!s&&!o)return t;1&r&&(t[2]=n[2],a|=1&i?0:4);var l=n[3];if(l){var u=t[3];t[3]=u?mr(u,l,n[4]):l,t[4]=u?ke(t[3],e):n[4]}(l=n[5])&&(u=t[5],t[5]=u?gr(u,l,n[6]):l,t[6]=u?ke(t[5],e):n[6]);(l=n[7])&&(t[7]=l);128&r&&(t[8]=null==t[8]?n[8]:on(t[8],n[8]));null==t[9]&&(t[9]=n[9]);t[0]=n[0],t[1]=a}(m,p),n=m[0],i=m[1],r=m[2],a=m[3],s=m[4],!(u=m[9]=void 0===m[9]?c?0:n.length:sn(m[9]-h,0))&&24&i&&(i&=-25),i&&1!=i)g=8==i||16==i?function(t,e,n){var i=Sr(t);return function r(){for(var a=arguments.length,s=ct(a),o=a,l=$r(r);o--;)s[o]=arguments[o];var u=a<3&&s[0]!==l&&s[a-1]!==l?[]:ke(s,l);if((a-=u.length)<n)return Dr(t,e,Ar,r.placeholder,void 0,s,u,void 0,void 0,n-a);var c=this&&this!==Gt&&this instanceof r?i:t;return te(c,this,s)}}(n,i,u):32!=i&&33!=i||s.length?Ar.apply(void 0,m):function(t,e,n,i){var r=1&e,a=Sr(t);return function e(){for(var s=-1,o=arguments.length,l=-1,u=i.length,c=ct(u+o),h=this&&this!==Gt&&this instanceof e?a:t;++l<u;)c[l]=i[l];for(;o--;)c[l++]=arguments[++s];return te(h,r?n:this,c)}}(n,i,r,a);else var g=function(t,e,n){var i=1&e,r=Sr(t);return function e(){var a=this&&this!==Gt&&this instanceof e?r:t;return a.apply(i?n:this,arguments)}}(n,i,r);return ba((p?Gi:ya)(g,m),n,i)}function Ur(t,e,n,i){return void 0===t||As(t,bt[n])&&!Mt.call(i,n)?e:t}function Hr(t,e,n,i,r,a){return Gs(t)&&Gs(e)&&(a.set(e,t),Pi(t,e,void 0,Hr,a),a.delete(e)),t}function Gr(t){return qs(t)?void 0:t}function jr(t,e,n,i,r,a){var s=1&n,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var c=-1,h=!0,d=2&n?new Nn:void 0;for(a.set(t,e),a.set(e,t);++c<o;){var f=t[c],p=e[c];if(i)var m=s?i(p,f,c,e,t,a):i(f,p,c,t,e,a);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!de(e,(function(t,e){if(!Ce(d,e)&&(f===t||r(f,t,n,i,a)))return d.push(e)}))){h=!1;break}}else if(f!==p&&!r(f,p,n,i,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Vr(t){return xa(pa(t,void 0,Oa),t+"")}function Wr(t){return di(t,xo,ta)}function qr(t){return di(t,bo,ea)}var Xr=yn?function(t){return yn.get(t)}:Jo;function Yr(t){for(var e=t.name+"",n=_n[e],i=Mt.call(_n,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function $r(t){return(Mt.call(An,"placeholder")?An:t).placeholder}function Zr(){var t=An.iteratee||Xo;return t=t===Xo?Ti:t,arguments.length?t(arguments[0],arguments[1]):t}function Jr(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Qr(t){for(var e=xo(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,da(r)]}return e}function Kr(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return wi(n)?n:void 0}var ta=tn?function(t){return null==t?[]:(t=mt(t),ae(tn(t),(function(e){return be.call(t,e)})))}:rl,ea=tn?function(t){for(var e=[];t;)ue(e,ta(t)),t=Xt(t);return e}:rl,na=fi;function ia(t,e,n){for(var i=-1,r=(e=or(e,t)).length,a=!1;++i<r;){var s=Sa(e[i]);if(!(a=null!=t&&n(t,s)))break;t=t[s]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&Hs(r)&&sa(s,r)&&(Is(t)||Rs(t))}function ra(t){return"function"!=typeof t.constructor||ha(t)?{}:Ln(Xt(t))}function aa(t){return Is(t)||Rs(t)||!!(We&&t&&t[We])}function sa(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&it.test(t))&&t>-1&&t%1==0&&t<e}function oa(t,e,n){if(!Gs(n))return!1;var i=typeof e;return!!("number"==i?zs(n)&&sa(e,n.length):"string"==i&&e in n)&&As(n[e],t)}function la(t,e){if(Is(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Zs(t))||(F.test(t)||!B.test(t)||null!=e&&t in mt(e))}function ua(t){var e=Yr(t),n=An[e];if("function"!=typeof n||!(e in In.prototype))return!1;if(t===n)return!0;var i=Xr(n);return!!i&&t===i[0]}(dn&&na(new dn(new ArrayBuffer(1)))!=_||fn&&na(new fn)!=c||pn&&"[object Promise]"!=na(pn.resolve())||mn&&na(new mn)!=p||gn&&na(new gn)!=v)&&(na=function(t){var e=fi(t),n=e==d?t.constructor:void 0,i=n?Ea(n):"";if(i)switch(i){case xn:return _;case bn:return c;case wn:return"[object Promise]";case Tn:return p;case Mn:return v}return e});var ca=wt?Fs:al;function ha(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bt)}function da(t){return t==t&&!Gs(t)}function fa(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in mt(n)))}}function pa(t,e,n){return e=sn(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,a=sn(i.length-e,0),s=ct(a);++r<a;)s[r]=i[e+r];r=-1;for(var o=ct(e+1);++r<e;)o[r]=i[r];return o[e]=n(s),te(t,this,o)}}function ma(t,e){return e.length<2?t:hi(t,Wi(e,0,-1))}function ga(t,e){for(var n=t.length,i=on(e.length,n),r=vr(t);i--;){var a=e[i];t[i]=sa(a,n)?r[a]:void 0}return t}function va(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ya=wa(Gi),_a=Je||function(t,e){return Gt.setTimeout(t,e)},xa=wa(ji);function ba(t,e,i){var r=e+"";return xa(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(q,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ne(n,(function(n){var i="_."+n[0];e&n[1]&&!se(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(X);return e?e[1].split(Y):[]}(r),i)))}function wa(t){var e=0,n=0;return function(){var i=ln(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Ta(t,e){var n=-1,i=t.length,r=i-1;for(e=void 0===e?i:e;++n<e;){var a=Ni(n,r),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Ma=function(t){var e=ws(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(U,(function(t,n,i,r){e.push(i?r.replace(Z,"$1"):n||t)})),e}));function Sa(t){if("string"==typeof t||Zs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ea(t){if(null!=t){try{return Tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ca(t){if(t instanceof In)return t.clone();var e=new Rn(t.__wrapped__,t.__chain__);return e.__actions__=vr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Aa=Bi((function(t,e){return Ds(t)?Kn(t,ai(e,1,Ds,!0)):[]})),La=Bi((function(t,e){var n=Ba(e);return Ds(n)&&(n=void 0),Ds(t)?Kn(t,ai(e,1,Ds,!0),Zr(n,2)):[]})),Pa=Bi((function(t,e){var n=Ba(e);return Ds(n)&&(n=void 0),Ds(t)?Kn(t,ai(e,1,Ds,!0),void 0,n):[]}));function Ra(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:no(n);return r<0&&(r=sn(i+r,0)),me(t,Zr(e,3),r)}function Ia(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return void 0!==n&&(r=no(n),r=n<0?sn(i+r,0):on(r,i-1)),me(t,Zr(e,3),r,!0)}function Oa(t){return(null==t?0:t.length)?ai(t,1):[]}function za(t){return t&&t.length?t[0]:void 0}var Da=Bi((function(t){var e=le(t,ar);return e.length&&e[0]===t[0]?vi(e):[]})),Na=Bi((function(t){var e=Ba(t),n=le(t,ar);return e===Ba(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?vi(n,Zr(e,2)):[]})),ka=Bi((function(t){var e=Ba(t),n=le(t,ar);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?vi(n,void 0,e):[]}));function Ba(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Fa=Bi(Ua);function Ua(t,e){return t&&t.length&&e&&e.length?zi(t,e):t}var Ha=Vr((function(t,e){var n=null==t?0:t.length,i=Yn(t,e);return Di(t,le(e,(function(t){return sa(t,n)?+t:t})).sort(pr)),i}));function Ga(t){return null==t?t:hn.call(t)}var ja=Bi((function(t){return Qi(ai(t,1,Ds,!0))})),Va=Bi((function(t){var e=Ba(t);return Ds(e)&&(e=void 0),Qi(ai(t,1,Ds,!0),Zr(e,2))})),Wa=Bi((function(t){var e=Ba(t);return e="function"==typeof e?e:void 0,Qi(ai(t,1,Ds,!0),void 0,e)}));function qa(t){if(!t||!t.length)return[];var e=0;return t=ae(t,(function(t){if(Ds(t))return e=sn(t.length,e),!0})),Me(e,(function(e){return le(t,xe(e))}))}function Xa(t,e){if(!t||!t.length)return[];var n=qa(t);return null==e?n:le(n,(function(t){return te(e,void 0,t)}))}var Ya=Bi((function(t,e){return Ds(t)?Kn(t,e):[]})),$a=Bi((function(t){return ir(ae(t,Ds))})),Za=Bi((function(t){var e=Ba(t);return Ds(e)&&(e=void 0),ir(ae(t,Ds),Zr(e,2))})),Ja=Bi((function(t){var e=Ba(t);return e="function"==typeof e?e:void 0,ir(ae(t,Ds),void 0,e)})),Qa=Bi(qa);var Ka=Bi((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Xa(t,n)}));function ts(t){var e=An(t);return e.__chain__=!0,e}function es(t,e){return e(t)}var ns=Vr((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Yn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof In&&sa(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:es,args:[r],thisArg:void 0}),new Rn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(r)}));var is=_r((function(t,e,n){Mt.call(t,n)?++t[n]:Xn(t,n,1)}));var rs=Er(Ra),as=Er(Ia);function ss(t,e){return(Is(t)?ne:ti)(t,Zr(e,3))}function os(t,e){return(Is(t)?ie:ei)(t,Zr(e,3))}var ls=_r((function(t,e,n){Mt.call(t,n)?t[n].push(e):Xn(t,n,[e])}));var us=Bi((function(t,e,n){var i=-1,r="function"==typeof e,a=zs(t)?ct(t.length):[];return ti(t,(function(t){a[++i]=r?te(e,t,n):yi(t,e,n)})),a})),cs=_r((function(t,e,n){Xn(t,n,e)}));function hs(t,e){return(Is(t)?le:Ci)(t,Zr(e,3))}var ds=_r((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var fs=Bi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&oa(t,e[0],e[1])?e=[]:n>2&&oa(e[0],e[1],e[2])&&(e=[e[0]]),Ii(t,ai(e,1),[])})),ps=Ze||function(){return Gt.Date.now()};function ms(t,e,n){return e=n?void 0:e,Fr(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function gs(e,n){var i;if("function"!=typeof n)throw new yt(t);return e=no(e),function(){return--e>0&&(i=n.apply(this,arguments)),e<=1&&(n=void 0),i}}var vs=Bi((function(t,e,n){var i=1;if(n.length){var r=ke(n,$r(vs));i|=32}return Fr(t,i,e,n,r)})),ys=Bi((function(t,e,n){var i=3;if(n.length){var r=ke(n,$r(ys));i|=32}return Fr(e,i,t,n,r)}));function _s(e,n,i){var r,a,s,o,l,u,c=0,h=!1,d=!1,f=!0;if("function"!=typeof e)throw new yt(t);function p(t){var n=r,i=a;return r=a=void 0,c=t,o=e.apply(i,n)}function m(t){return c=t,l=_a(v,n),h?p(t):o}function g(t){var e=t-u;return void 0===u||e>=n||e<0||d&&t-c>=s}function v(){var t=ps();if(g(t))return y(t);l=_a(v,function(t){var e=n-(t-u);return d?on(e,s-(t-c)):e}(t))}function y(t){return l=void 0,f&&r?p(t):(r=a=void 0,o)}function _(){var t=ps(),e=g(t);if(r=arguments,a=this,u=t,e){if(void 0===l)return m(u);if(d)return cr(l),l=_a(v,n),p(u)}return void 0===l&&(l=_a(v,n)),o}return n=ro(n)||0,Gs(i)&&(h=!!i.leading,s=(d="maxWait"in i)?sn(ro(i.maxWait)||0,n):s,f="trailing"in i?!!i.trailing:f),_.cancel=function(){void 0!==l&&cr(l),c=0,r=u=a=l=void 0},_.flush=function(){return void 0===l?o:y(ps())},_}var xs=Bi((function(t,e){return Qn(t,1,e)})),bs=Bi((function(t,e,n){return Qn(t,ro(e)||0,n)}));function ws(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new yt(t);var i=function(){var t=arguments,r=n?n.apply(this,t):t[0],a=i.cache;if(a.has(r))return a.get(r);var s=e.apply(this,t);return i.cache=a.set(r,s)||a,s};return i.cache=new(ws.Cache||Dn),i}function Ts(e){if("function"!=typeof e)throw new yt(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ws.Cache=Dn;var Ms=lr((function(t,e){var n=(e=1==e.length&&Is(e[0])?le(e[0],Se(Zr())):le(ai(e,1),Se(Zr()))).length;return Bi((function(i){for(var r=-1,a=on(i.length,n);++r<a;)i[r]=e[r].call(this,i[r]);return te(t,this,i)}))})),Ss=Bi((function(t,e){return Fr(t,32,void 0,e,ke(e,$r(Ss)))})),Es=Bi((function(t,e){return Fr(t,64,void 0,e,ke(e,$r(Es)))})),Cs=Vr((function(t,e){return Fr(t,256,void 0,void 0,void 0,e)}));function As(t,e){return t===e||t!=t&&e!=e}var Ls=zr(pi),Ps=zr((function(t,e){return t>=e})),Rs=_i(function(){return arguments}())?_i:function(t){return js(t)&&Mt.call(t,"callee")&&!be.call(t,"callee")},Is=ct.isArray,Os=Yt?Se(Yt):function(t){return js(t)&&fi(t)==y};function zs(t){return null!=t&&Hs(t.length)&&!Fs(t)}function Ds(t){return js(t)&&zs(t)}var Ns=en||al,ks=$t?Se($t):function(t){return js(t)&&fi(t)==s};function Bs(t){if(!js(t))return!1;var e=fi(t);return e==o||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!qs(t)}function Fs(t){if(!Gs(t))return!1;var e=fi(t);return e==l||e==u||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Us(t){return"number"==typeof t&&t==no(t)}function Hs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Gs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function js(t){return null!=t&&"object"==typeof t}var Vs=Zt?Se(Zt):function(t){return js(t)&&na(t)==c};function Ws(t){return"number"==typeof t||js(t)&&fi(t)==h}function qs(t){if(!js(t)||fi(t)!=d)return!1;var e=Xt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Tt.call(n)==Rt}var Xs=Jt?Se(Jt):function(t){return js(t)&&fi(t)==f};var Ys=Qt?Se(Qt):function(t){return js(t)&&na(t)==p};function $s(t){return"string"==typeof t||!Is(t)&&js(t)&&fi(t)==m}function Zs(t){return"symbol"==typeof t||js(t)&&fi(t)==g}var Js=Kt?Se(Kt):function(t){return js(t)&&Hs(t.length)&&!!Dt[fi(t)]};var Qs=zr(Ei),Ks=zr((function(t,e){return t<=e}));function to(t){if(!t)return[];if(zs(t))return $s(t)?He(t):vr(t);if(qe&&t[qe])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[qe]());var e=na(t);return(e==c?De:e==p?Be:Lo)(t)}function eo(t){return t?(t=ro(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function no(t){var e=eo(t),n=e%1;return e==e?n?e-n:e:0}function io(t){return t?$n(no(t),0,4294967295):0}function ro(t){if("number"==typeof t)return t;if(Zs(t))return NaN;if(Gs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Gs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(j,"");var n=tt.test(t);return n||nt.test(t)?Ft(t.slice(2),n?2:8):K.test(t)?NaN:+t}function ao(t){return yr(t,bo(t))}function so(t){return null==t?"":Ji(t)}var oo=xr((function(t,e){if(ha(e)||zs(e))yr(e,xo(e),t);else for(var n in e)Mt.call(e,n)&&jn(t,n,e[n])})),lo=xr((function(t,e){yr(e,bo(e),t)})),uo=xr((function(t,e,n,i){yr(e,bo(e),t,i)})),co=xr((function(t,e,n,i){yr(e,xo(e),t,i)})),ho=Vr(Yn);var fo=Bi((function(t,e){t=mt(t);var n=-1,i=e.length,r=i>2?e[2]:void 0;for(r&&oa(e[0],e[1],r)&&(i=1);++n<i;)for(var a=e[n],s=bo(a),o=-1,l=s.length;++o<l;){var u=s[o],c=t[u];(void 0===c||As(c,bt[u])&&!Mt.call(t,u))&&(t[u]=a[u])}return t})),po=Bi((function(t){return t.push(void 0,Hr),te(To,void 0,t)}));function mo(t,e,n){var i=null==t?void 0:hi(t,e);return void 0===i?n:i}function go(t,e){return null!=t&&ia(t,e,gi)}var vo=Lr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),t[e]=n}),jo(qo)),yo=Lr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Lt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),Zr),_o=Bi(yi);function xo(t){return zs(t)?Bn(t):Mi(t)}function bo(t){return zs(t)?Bn(t,!0):Si(t)}var wo=xr((function(t,e,n){Pi(t,e,n)})),To=xr((function(t,e,n,i){Pi(t,e,n,i)})),Mo=Vr((function(t,e){var n={};if(null==t)return n;var i=!1;e=le(e,(function(e){return e=or(e,t),i||(i=e.length>1),e})),yr(t,qr(t),n),i&&(n=Zn(n,7,Gr));for(var r=e.length;r--;)Ki(n,e[r]);return n}));var So=Vr((function(t,e){return null==t?{}:function(t,e){return Oi(t,e,(function(e,n){return go(t,n)}))}(t,e)}));function Eo(t,e){if(null==t)return{};var n=le(qr(t),(function(t){return[t]}));return e=Zr(e),Oi(t,n,(function(t,n){return e(t,n[0])}))}var Co=Br(xo),Ao=Br(bo);function Lo(t){return null==t?[]:Ee(t,xo(t))}var Po=Mr((function(t,e,n){return e=e.toLowerCase(),t+(n?Ro(e):e)}));function Ro(t){return Fo(so(t).toLowerCase())}function Io(t){return(t=so(t))&&t.replace(rt,Re).replace(At,"")}var Oo=Mr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),zo=Mr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Do=Tr("toLowerCase");var No=Mr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var ko=Mr((function(t,e,n){return t+(n?" ":"")+Fo(e)}));var Bo=Mr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Fo=Tr("toUpperCase");function Uo(t,e,n){return t=so(t),void 0===(e=n?void 0:e)?function(t){return It.test(t)}(t)?function(t){return t.match(Pt)||[]}(t):function(t){return t.match($)||[]}(t):t.match(e)||[]}var Ho=Bi((function(t,e){try{return te(t,void 0,e)}catch(t){return Bs(t)?t:new dt(t)}})),Go=Vr((function(t,e){return ne(e,(function(e){e=Sa(e),Xn(t,e,vs(t[e],t))})),t}));function jo(t){return function(){return t}}var Vo=Cr(),Wo=Cr(!0);function qo(t){return t}function Xo(t){return Ti("function"==typeof t?t:Zn(t,1))}var Yo=Bi((function(t,e){return function(n){return yi(n,t,e)}})),$o=Bi((function(t,e){return function(n){return yi(t,n,e)}}));function Zo(t,e,n){var i=xo(e),r=ci(e,i);null!=n||Gs(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=ci(e,xo(e)));var a=!(Gs(n)&&"chain"in n&&!n.chain),s=Fs(t);return ne(r,(function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),r=n.__actions__=vr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,ue([this.value()],arguments))})})),t}function Jo(){}var Qo=Rr(le),Ko=Rr(re),tl=Rr(de);function el(t){return la(t)?xe(Sa(t)):function(t){return function(e){return hi(e,t)}}(t)}var nl=Or(),il=Or(!0);function rl(){return[]}function al(){return!1}var sl=Pr((function(t,e){return t+e}),0),ol=Nr("ceil"),ll=Pr((function(t,e){return t/e}),1),ul=Nr("floor");var cl,hl=Pr((function(t,e){return t*e}),1),dl=Nr("round"),fl=Pr((function(t,e){return t-e}),0);return An.after=function(e,n){if("function"!=typeof n)throw new yt(t);return e=no(e),function(){if(--e<1)return n.apply(this,arguments)}},An.ary=ms,An.assign=oo,An.assignIn=lo,An.assignInWith=uo,An.assignWith=co,An.at=ho,An.before=gs,An.bind=vs,An.bindAll=Go,An.bindKey=ys,An.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Is(t)?t:[t]},An.chain=ts,An.chunk=function(t,e,n){e=(n?oa(t,e,n):void 0===e)?1:sn(no(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,a=0,s=ct(Qe(i/e));r<i;)s[a++]=Wi(t,r,r+=e);return s},An.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},An.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ct(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return ue(Is(n)?vr(n):[n],ai(e,1))},An.cond=function(e){var n=null==e?0:e.length,i=Zr();return e=n?le(e,(function(e){if("function"!=typeof e[1])throw new yt(t);return[i(e[0]),e[1]]})):[],Bi((function(t){for(var i=-1;++i<n;){var r=e[i];if(te(r[0],this,t))return te(r[1],this,t)}}))},An.conforms=function(t){return function(t){var e=xo(t);return function(n){return Jn(n,t,e)}}(Zn(t,1))},An.constant=jo,An.countBy=is,An.create=function(t,e){var n=Ln(t);return null==e?n:qn(n,e)},An.curry=function t(e,n,i){var r=Fr(e,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=t.placeholder,r},An.curryRight=function t(e,n,i){var r=Fr(e,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return r.placeholder=t.placeholder,r},An.debounce=_s,An.defaults=fo,An.defaultsDeep=po,An.defer=xs,An.delay=bs,An.difference=Aa,An.differenceBy=La,An.differenceWith=Pa,An.drop=function(t,e,n){var i=null==t?0:t.length;return i?Wi(t,(e=n||void 0===e?1:no(e))<0?0:e,i):[]},An.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Wi(t,0,(e=i-(e=n||void 0===e?1:no(e)))<0?0:e):[]},An.dropRightWhile=function(t,e){return t&&t.length?er(t,Zr(e,3),!0,!0):[]},An.dropWhile=function(t,e){return t&&t.length?er(t,Zr(e,3),!0):[]},An.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&oa(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=no(n))<0&&(n=-n>r?0:r+n),(i=void 0===i||i>r?r:no(i))<0&&(i+=r),i=n>i?0:io(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},An.filter=function(t,e){return(Is(t)?ae:ri)(t,Zr(e,3))},An.flatMap=function(t,e){return ai(hs(t,e),1)},An.flatMapDeep=function(t,e){return ai(hs(t,e),1/0)},An.flatMapDepth=function(t,e,n){return n=void 0===n?1:no(n),ai(hs(t,e),n)},An.flatten=Oa,An.flattenDeep=function(t){return(null==t?0:t.length)?ai(t,1/0):[]},An.flattenDepth=function(t,e){return(null==t?0:t.length)?ai(t,e=void 0===e?1:no(e)):[]},An.flip=function(t){return Fr(t,512)},An.flow=Vo,An.flowRight=Wo,An.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},An.functions=function(t){return null==t?[]:ci(t,xo(t))},An.functionsIn=function(t){return null==t?[]:ci(t,bo(t))},An.groupBy=ls,An.initial=function(t){return(null==t?0:t.length)?Wi(t,0,-1):[]},An.intersection=Da,An.intersectionBy=Na,An.intersectionWith=ka,An.invert=vo,An.invertBy=yo,An.invokeMap=us,An.iteratee=Xo,An.keyBy=cs,An.keys=xo,An.keysIn=bo,An.map=hs,An.mapKeys=function(t,e){var n={};return e=Zr(e,3),li(t,(function(t,i,r){Xn(n,e(t,i,r),t)})),n},An.mapValues=function(t,e){var n={};return e=Zr(e,3),li(t,(function(t,i,r){Xn(n,i,e(t,i,r))})),n},An.matches=function(t){return Ai(Zn(t,1))},An.matchesProperty=function(t,e){return Li(t,Zn(e,1))},An.memoize=ws,An.merge=wo,An.mergeWith=To,An.method=Yo,An.methodOf=$o,An.mixin=Zo,An.negate=Ts,An.nthArg=function(t){return t=no(t),Bi((function(e){return Ri(e,t)}))},An.omit=Mo,An.omitBy=function(t,e){return Eo(t,Ts(Zr(e)))},An.once=function(t){return gs(2,t)},An.orderBy=function(t,e,n,i){return null==t?[]:(Is(e)||(e=null==e?[]:[e]),Is(n=i?void 0:n)||(n=null==n?[]:[n]),Ii(t,e,n))},An.over=Qo,An.overArgs=Ms,An.overEvery=Ko,An.overSome=tl,An.partial=Ss,An.partialRight=Es,An.partition=ds,An.pick=So,An.pickBy=Eo,An.property=el,An.propertyOf=function(t){return function(e){return null==t?void 0:hi(t,e)}},An.pull=Fa,An.pullAll=Ua,An.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?zi(t,e,Zr(n,2)):t},An.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?zi(t,e,void 0,n):t},An.pullAt=Ha,An.range=nl,An.rangeRight=il,An.rearg=Cs,An.reject=function(t,e){return(Is(t)?ae:ri)(t,Ts(Zr(e,3)))},An.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=Zr(e,3);++i<a;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return Di(t,r),n},An.rest=function(e,n){if("function"!=typeof e)throw new yt(t);return Bi(e,n=void 0===n?n:no(n))},An.reverse=Ga,An.sampleSize=function(t,e,n){return e=(n?oa(t,e,n):void 0===e)?1:no(e),(Is(t)?Un:Ui)(t,e)},An.set=function(t,e,n){return null==t?t:Hi(t,e,n)},An.setWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:Hi(t,e,n,i)},An.shuffle=function(t){return(Is(t)?Hn:Vi)(t)},An.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&oa(t,e,n)?(e=0,n=i):(e=null==e?0:no(e),n=void 0===n?i:no(n)),Wi(t,e,n)):[]},An.sortBy=fs,An.sortedUniq=function(t){return t&&t.length?$i(t):[]},An.sortedUniqBy=function(t,e){return t&&t.length?$i(t,Zr(e,2)):[]},An.split=function(t,e,n){return n&&"number"!=typeof n&&oa(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=so(t))&&("string"==typeof e||null!=e&&!Xs(e))&&!(e=Ji(e))&&ze(t)?ur(He(t),0,n):t.split(e,n):[]},An.spread=function(e,n){if("function"!=typeof e)throw new yt(t);return n=null==n?0:sn(no(n),0),Bi((function(t){var i=t[n],r=ur(t,0,n);return i&&ue(r,i),te(e,this,r)}))},An.tail=function(t){var e=null==t?0:t.length;return e?Wi(t,1,e):[]},An.take=function(t,e,n){return t&&t.length?Wi(t,0,(e=n||void 0===e?1:no(e))<0?0:e):[]},An.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Wi(t,(e=i-(e=n||void 0===e?1:no(e)))<0?0:e,i):[]},An.takeRightWhile=function(t,e){return t&&t.length?er(t,Zr(e,3),!1,!0):[]},An.takeWhile=function(t,e){return t&&t.length?er(t,Zr(e,3)):[]},An.tap=function(t,e){return e(t),t},An.throttle=function(e,n,i){var r=!0,a=!0;if("function"!=typeof e)throw new yt(t);return Gs(i)&&(r="leading"in i?!!i.leading:r,a="trailing"in i?!!i.trailing:a),_s(e,n,{leading:r,maxWait:n,trailing:a})},An.thru=es,An.toArray=to,An.toPairs=Co,An.toPairsIn=Ao,An.toPath=function(t){return Is(t)?le(t,Sa):Zs(t)?[t]:vr(Ma(so(t)))},An.toPlainObject=ao,An.transform=function(t,e,n){var i=Is(t),r=i||Ns(t)||Js(t);if(e=Zr(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:Gs(t)&&Fs(a)?Ln(Xt(t)):{}}return(r?ne:li)(t,(function(t,i,r){return e(n,t,i,r)})),n},An.unary=function(t){return ms(t,1)},An.union=ja,An.unionBy=Va,An.unionWith=Wa,An.uniq=function(t){return t&&t.length?Qi(t):[]},An.uniqBy=function(t,e){return t&&t.length?Qi(t,Zr(e,2)):[]},An.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Qi(t,void 0,e):[]},An.unset=function(t,e){return null==t||Ki(t,e)},An.unzip=qa,An.unzipWith=Xa,An.update=function(t,e,n){return null==t?t:tr(t,e,sr(n))},An.updateWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:tr(t,e,sr(n),i)},An.values=Lo,An.valuesIn=function(t){return null==t?[]:Ee(t,bo(t))},An.without=Ya,An.words=Uo,An.wrap=function(t,e){return Ss(sr(e),t)},An.xor=$a,An.xorBy=Za,An.xorWith=Ja,An.zip=Qa,An.zipObject=function(t,e){return rr(t||[],e||[],jn)},An.zipObjectDeep=function(t,e){return rr(t||[],e||[],Hi)},An.zipWith=Ka,An.entries=Co,An.entriesIn=Ao,An.extend=lo,An.extendWith=uo,Zo(An,An),An.add=sl,An.attempt=Ho,An.camelCase=Po,An.capitalize=Ro,An.ceil=ol,An.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=ro(n))==n?n:0),void 0!==e&&(e=(e=ro(e))==e?e:0),$n(ro(t),e,n)},An.clone=function(t){return Zn(t,4)},An.cloneDeep=function(t){return Zn(t,5)},An.cloneDeepWith=function(t,e){return Zn(t,5,e="function"==typeof e?e:void 0)},An.cloneWith=function(t,e){return Zn(t,4,e="function"==typeof e?e:void 0)},An.conformsTo=function(t,e){return null==e||Jn(t,e,xo(e))},An.deburr=Io,An.defaultTo=function(t,e){return null==t||t!=t?e:t},An.divide=ll,An.endsWith=function(t,e,n){t=so(t),e=Ji(e);var i=t.length,r=n=void 0===n?i:$n(no(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},An.eq=As,An.escape=function(t){return(t=so(t))&&z.test(t)?t.replace(I,Ie):t},An.escapeRegExp=function(t){return(t=so(t))&&G.test(t)?t.replace(H,"\\$&"):t},An.every=function(t,e,n){var i=Is(t)?re:ni;return n&&oa(t,e,n)&&(e=void 0),i(t,Zr(e,3))},An.find=rs,An.findIndex=Ra,An.findKey=function(t,e){return pe(t,Zr(e,3),li)},An.findLast=as,An.findLastIndex=Ia,An.findLastKey=function(t,e){return pe(t,Zr(e,3),ui)},An.floor=ul,An.forEach=ss,An.forEachRight=os,An.forIn=function(t,e){return null==t?t:si(t,Zr(e,3),bo)},An.forInRight=function(t,e){return null==t?t:oi(t,Zr(e,3),bo)},An.forOwn=function(t,e){return t&&li(t,Zr(e,3))},An.forOwnRight=function(t,e){return t&&ui(t,Zr(e,3))},An.get=mo,An.gt=Ls,An.gte=Ps,An.has=function(t,e){return null!=t&&ia(t,e,mi)},An.hasIn=go,An.head=za,An.identity=qo,An.includes=function(t,e,n,i){t=zs(t)?t:Lo(t),n=n&&!i?no(n):0;var r=t.length;return n<0&&(n=sn(r+n,0)),$s(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&ge(t,e,n)>-1},An.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:no(n);return r<0&&(r=sn(i+r,0)),ge(t,e,r)},An.inRange=function(t,e,n){return e=eo(e),void 0===n?(n=e,e=0):n=eo(n),function(t,e,n){return t>=on(e,n)&&t<sn(e,n)}(t=ro(t),e,n)},An.invoke=_o,An.isArguments=Rs,An.isArray=Is,An.isArrayBuffer=Os,An.isArrayLike=zs,An.isArrayLikeObject=Ds,An.isBoolean=function(t){return!0===t||!1===t||js(t)&&fi(t)==a},An.isBuffer=Ns,An.isDate=ks,An.isElement=function(t){return js(t)&&1===t.nodeType&&!qs(t)},An.isEmpty=function(t){if(null==t)return!0;if(zs(t)&&(Is(t)||"string"==typeof t||"function"==typeof t.splice||Ns(t)||Js(t)||Rs(t)))return!t.length;var e=na(t);if(e==c||e==p)return!t.size;if(ha(t))return!Mi(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},An.isEqual=function(t,e){return xi(t,e)},An.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===i?xi(t,e,void 0,n):!!i},An.isError=Bs,An.isFinite=function(t){return"number"==typeof t&&nn(t)},An.isFunction=Fs,An.isInteger=Us,An.isLength=Hs,An.isMap=Vs,An.isMatch=function(t,e){return t===e||bi(t,e,Qr(e))},An.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,bi(t,e,Qr(e),n)},An.isNaN=function(t){return Ws(t)&&t!=+t},An.isNative=function(t){if(ca(t))throw new dt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wi(t)},An.isNil=function(t){return null==t},An.isNull=function(t){return null===t},An.isNumber=Ws,An.isObject=Gs,An.isObjectLike=js,An.isPlainObject=qs,An.isRegExp=Xs,An.isSafeInteger=function(t){return Us(t)&&t>=-9007199254740991&&t<=9007199254740991},An.isSet=Ys,An.isString=$s,An.isSymbol=Zs,An.isTypedArray=Js,An.isUndefined=function(t){return void 0===t},An.isWeakMap=function(t){return js(t)&&na(t)==v},An.isWeakSet=function(t){return js(t)&&"[object WeakSet]"==fi(t)},An.join=function(t,e){return null==t?"":rn.call(t,e)},An.kebabCase=Oo,An.last=Ba,An.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return void 0!==n&&(r=(r=no(n))<0?sn(i+r,0):on(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):me(t,ye,r,!0)},An.lowerCase=zo,An.lowerFirst=Do,An.lt=Qs,An.lte=Ks,An.max=function(t){return t&&t.length?ii(t,qo,pi):void 0},An.maxBy=function(t,e){return t&&t.length?ii(t,Zr(e,2),pi):void 0},An.mean=function(t){return _e(t,qo)},An.meanBy=function(t,e){return _e(t,Zr(e,2))},An.min=function(t){return t&&t.length?ii(t,qo,Ei):void 0},An.minBy=function(t,e){return t&&t.length?ii(t,Zr(e,2),Ei):void 0},An.stubArray=rl,An.stubFalse=al,An.stubObject=function(){return{}},An.stubString=function(){return""},An.stubTrue=function(){return!0},An.multiply=hl,An.nth=function(t,e){return t&&t.length?Ri(t,no(e)):void 0},An.noConflict=function(){return Gt._===this&&(Gt._=kt),this},An.noop=Jo,An.now=ps,An.pad=function(t,e,n){t=so(t);var i=(e=no(e))?Ue(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Ir(Ke(r),n)+t+Ir(Qe(r),n)},An.padEnd=function(t,e,n){t=so(t);var i=(e=no(e))?Ue(t):0;return e&&i<e?t+Ir(e-i,n):t},An.padStart=function(t,e,n){t=so(t);var i=(e=no(e))?Ue(t):0;return e&&i<e?Ir(e-i,n)+t:t},An.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),un(so(t).replace(V,""),e||0)},An.random=function(t,e,n){if(n&&"boolean"!=typeof n&&oa(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=eo(t),void 0===e?(e=t,t=0):e=eo(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=cn();return on(t+r*(e-t+Bt("1e-"+((r+"").length-1))),e)}return Ni(t,e)},An.reduce=function(t,e,n){var i=Is(t)?ce:we,r=arguments.length<3;return i(t,Zr(e,4),n,r,ti)},An.reduceRight=function(t,e,n){var i=Is(t)?he:we,r=arguments.length<3;return i(t,Zr(e,4),n,r,ei)},An.repeat=function(t,e,n){return e=(n?oa(t,e,n):void 0===e)?1:no(e),ki(so(t),e)},An.replace=function(){var t=arguments,e=so(t[0]);return t.length<3?e:e.replace(t[1],t[2])},An.result=function(t,e,n){var i=-1,r=(e=or(e,t)).length;for(r||(r=1,t=void 0);++i<r;){var a=null==t?void 0:t[Sa(e[i])];void 0===a&&(i=r,a=n),t=Fs(a)?a.call(t):a}return t},An.round=dl,An.runInContext=ot,An.sample=function(t){return(Is(t)?Fn:Fi)(t)},An.size=function(t){if(null==t)return 0;if(zs(t))return $s(t)?Ue(t):t.length;var e=na(t);return e==c||e==p?t.size:Mi(t).length},An.snakeCase=No,An.some=function(t,e,n){var i=Is(t)?de:qi;return n&&oa(t,e,n)&&(e=void 0),i(t,Zr(e,3))},An.sortedIndex=function(t,e){return Xi(t,e)},An.sortedIndexBy=function(t,e,n){return Yi(t,e,Zr(n,2))},An.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Xi(t,e);if(i<n&&As(t[i],e))return i}return-1},An.sortedLastIndex=function(t,e){return Xi(t,e,!0)},An.sortedLastIndexBy=function(t,e,n){return Yi(t,e,Zr(n,2),!0)},An.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Xi(t,e,!0)-1;if(As(t[n],e))return n}return-1},An.startCase=ko,An.startsWith=function(t,e,n){return t=so(t),n=null==n?0:$n(no(n),0,t.length),e=Ji(e),t.slice(n,n+e.length)==e},An.subtract=fl,An.sum=function(t){return t&&t.length?Te(t,qo):0},An.sumBy=function(t,e){return t&&t.length?Te(t,Zr(e,2)):0},An.template=function(t,e,n){var i=An.templateSettings;n&&oa(t,e,n)&&(e=void 0),t=so(t),e=uo({},e,i,Ur);var r,a,s=uo({},e.imports,i.imports,Ur),o=xo(s),l=Ee(s,o),u=0,c=e.interpolate||at,h="__p += '",d=gt((e.escape||at).source+"|"+c.source+"|"+(c===k?J:at).source+"|"+(e.evaluate||at).source+"|$","g"),f="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++zt+"]")+"\n";t.replace(d,(function(e,n,i,s,o,l){return i||(i=s),h+=t.slice(u,l).replace(st,Oe),n&&(r=!0,h+="' +\n__e("+n+") +\n'"),o&&(a=!0,h+="';\n"+o+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),h+="';\n";var p=Mt.call(e,"variable")&&e.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(A,""):h).replace(L,"$1").replace(P,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Ho((function(){return ft(o,f+"return "+h).apply(void 0,l)}));if(m.source=h,Bs(m))throw m;return m},An.times=function(t,e){if((t=no(t))<1||t>9007199254740991)return[];var n=4294967295,i=on(t,4294967295);t-=4294967295;for(var r=Me(i,e=Zr(e));++n<t;)e(n);return r},An.toFinite=eo,An.toInteger=no,An.toLength=io,An.toLower=function(t){return so(t).toLowerCase()},An.toNumber=ro,An.toSafeInteger=function(t){return t?$n(no(t),-9007199254740991,9007199254740991):0===t?t:0},An.toString=so,An.toUpper=function(t){return so(t).toUpperCase()},An.trim=function(t,e,n){if((t=so(t))&&(n||void 0===e))return t.replace(j,"");if(!t||!(e=Ji(e)))return t;var i=He(t),r=He(e);return ur(i,Ae(i,r),Le(i,r)+1).join("")},An.trimEnd=function(t,e,n){if((t=so(t))&&(n||void 0===e))return t.replace(W,"");if(!t||!(e=Ji(e)))return t;var i=He(t);return ur(i,0,Le(i,He(e))+1).join("")},An.trimStart=function(t,e,n){if((t=so(t))&&(n||void 0===e))return t.replace(V,"");if(!t||!(e=Ji(e)))return t;var i=He(t);return ur(i,Ae(i,He(e))).join("")},An.truncate=function(t,e){var n=30,i="...";if(Gs(e)){var r="separator"in e?e.separator:r;n="length"in e?no(e.length):n,i="omission"in e?Ji(e.omission):i}var a=(t=so(t)).length;if(ze(t)){var s=He(t);a=s.length}if(n>=a)return t;var o=n-Ue(i);if(o<1)return i;var l=s?ur(s,0,o).join(""):t.slice(0,o);if(void 0===r)return l+i;if(s&&(o+=l.length-o),Xs(r)){if(t.slice(o).search(r)){var u,c=l;for(r.global||(r=gt(r.source,so(Q.exec(r))+"g")),r.lastIndex=0;u=r.exec(c);)var h=u.index;l=l.slice(0,void 0===h?o:h)}}else if(t.indexOf(Ji(r),o)!=o){var d=l.lastIndexOf(r);d>-1&&(l=l.slice(0,d))}return l+i},An.unescape=function(t){return(t=so(t))&&O.test(t)?t.replace(R,Ge):t},An.uniqueId=function(t){var e=++St;return so(t)+e},An.upperCase=Bo,An.upperFirst=Fo,An.each=ss,An.eachRight=os,An.first=za,Zo(An,(cl={},li(An,(function(t,e){Mt.call(An.prototype,e)||(cl[e]=t)})),cl),{chain:!1}),An.VERSION="4.17.15",ne(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){An[t].placeholder=An})),ne(["drop","take"],(function(t,e){In.prototype[t]=function(n){n=void 0===n?1:sn(no(n),0);var i=this.__filtered__&&!e?new In(this):this.clone();return i.__filtered__?i.__takeCount__=on(n,i.__takeCount__):i.__views__.push({size:on(n,4294967295),type:t+(i.__dir__<0?"Right":"")}),i},In.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ne(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;In.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Zr(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),ne(["head","last"],(function(t,e){var n="take"+(e?"Right":"");In.prototype[t]=function(){return this[n](1).value()[0]}})),ne(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");In.prototype[t]=function(){return this.__filtered__?new In(this):this[n](1)}})),In.prototype.compact=function(){return this.filter(qo)},In.prototype.find=function(t){return this.filter(t).head()},In.prototype.findLast=function(t){return this.reverse().find(t)},In.prototype.invokeMap=Bi((function(t,e){return"function"==typeof t?new In(this):this.map((function(n){return yi(n,t,e)}))})),In.prototype.reject=function(t){return this.filter(Ts(Zr(t)))},In.prototype.slice=function(t,e){t=no(t);var n=this;return n.__filtered__&&(t>0||e<0)?new In(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=no(e))<0?n.dropRight(-e):n.take(e-t)),n)},In.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},In.prototype.toArray=function(){return this.take(4294967295)},li(In.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),r=An[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);r&&(An.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,o=e instanceof In,l=s[0],u=o||Is(e),c=function(t){var e=r.apply(An,ue([t],s));return i&&h?e[0]:e};u&&n&&"function"==typeof l&&1!=l.length&&(o=u=!1);var h=this.__chain__,d=!!this.__actions__.length,f=a&&!h,p=o&&!d;if(!a&&u){e=p?e:new In(this);var m=t.apply(e,s);return m.__actions__.push({func:es,args:[c],thisArg:void 0}),new Rn(m,h)}return f&&p?t.apply(this,s):(m=this.thru(c),f?i?m.value()[0]:m.value():m)})})),ne(["pop","push","shift","sort","splice","unshift"],(function(t){var e=_t[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);An.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Is(r)?r:[],t)}return this[n]((function(n){return e.apply(Is(n)?n:[],t)}))}})),li(In.prototype,(function(t,e){var n=An[e];if(n){var i=n.name+"";Mt.call(_n,i)||(_n[i]=[]),_n[i].push({name:e,func:n})}})),_n[Ar(void 0,2).name]=[{name:"wrapper",func:void 0}],In.prototype.clone=function(){var t=new In(this.__wrapped__);return t.__actions__=vr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=vr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=vr(this.__views__),t},In.prototype.reverse=function(){if(this.__filtered__){var t=new In(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},In.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Is(t),i=e<0,r=n?t.length:0,a=function(t,e,n){var i=-1,r=n.length;for(;++i<r;){var a=n[i],s=a.size;switch(a.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=on(e,t+s);break;case"takeRight":t=sn(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=a.start,o=a.end,l=o-s,u=i?o:s-1,c=this.__iteratees__,h=c.length,d=0,f=on(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return nr(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var m=-1,g=t[u+=e];++m<h;){var v=c[m],y=v.iteratee,_=v.type,x=y(g);if(2==_)g=x;else if(!x){if(1==_)continue t;break t}}p[d++]=g}return p},An.prototype.at=ns,An.prototype.chain=function(){return ts(this)},An.prototype.commit=function(){return new Rn(this.value(),this.__chain__)},An.prototype.next=function(){void 0===this.__values__&&(this.__values__=to(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},An.prototype.plant=function(t){for(var e,n=this;n instanceof Pn;){var i=Ca(n);i.__index__=0,i.__values__=void 0,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},An.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof In){var e=t;return this.__actions__.length&&(e=new In(this)),(e=e.reverse()).__actions__.push({func:es,args:[Ga],thisArg:void 0}),new Rn(e,this.__chain__)}return this.thru(Ga)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return nr(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,qe&&(An.prototype[qe]=function(){return this}),An}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Gt._=je,define((function(){return je}))):Vt?((Vt.exports=je)._=je,jt._=je):Gt._=je}.call(this),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).BezierEasing=t()}((function(){return function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return r(e[s][1][t]||t)}),c,c.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){var i="function"==typeof Float32Array;function r(t,e){return 1-3*e+3*t}function a(t,e){return 3*e-6*t}function s(t){return 3*t}function o(t,e,n){return((r(e,n)*t+a(e,n))*t+s(e))*t}function l(t,e,n){return 3*r(e,n)*t*t+2*a(e,n)*t+s(e)}function u(t){return t}e.exports=function(t,e,n,r){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return u;for(var a=i?new Float32Array(11):new Array(11),s=0;s<11;++s)a[s]=o(.1*s,t,n);return function(i){return 0===i?0:1===i?1:o(function(e){for(var i=0,r=1;10!==r&&a[r]<=e;++r)i+=.1;var s=i+(e-a[--r])/(a[r+1]-a[r])*.1,u=l(s,t,n);return.001<=u?function(t,e,n,i){for(var r=0;r<4;++r){var a=l(e,n,i);if(0===a)return e;e-=(o(e,n,i)-t)/a}return e}(e,s,t,n):0===u?s:function(t,e,n,i,r){for(var a,s,l=0;0<(a=o(s=e+(n-e)/2,i,r)-t)?n=s:e=s,Math.abs(a)>1e-7&&++l<10;);return s}(e,i,i+.1,t,n)}(i),e,r)}}},{}]},{},[1])(1)})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Swiper=e()}(this,(function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function n(t){return null!==t&&"object"==typeof t&&"constructor"in t&&t.constructor===Object}function i(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(e).forEach((function(r){void 0===t[r]?t[r]=e[r]:n(e[r])&&n(t[r])&&Object.keys(e[r]).length>0&&i(t[r],e[r])}))}var r={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function a(){var t="undefined"!=typeof document?document:{};return i(t,r),t}var s={document:r,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(t){return"undefined"==typeof setTimeout?(t(),null):setTimeout(t,0)},cancelAnimationFrame:function(t){"undefined"!=typeof setTimeout&&clearTimeout(t)}};function o(){var t="undefined"!=typeof window?window:{};return i(t,s),t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t,e,n){return(h=c()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&u(r,n.prototype),r}).apply(null,arguments)}function d(t){var e="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return h(t,arguments,l(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u(i,t)})(t)}var f=function(t){var e,n;function i(e){var n,i,r;return i=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n=t.call.apply(t,[this].concat(e))||this),r=i.__proto__,Object.defineProperty(i,"__proto__",{get:function(){return r},set:function(t){r.__proto__=t}}),n}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i}(d(Array));function p(t){void 0===t&&(t=[]);var e=[];return t.forEach((function(t){Array.isArray(t)?e.push.apply(e,p(t)):e.push(t)})),e}function m(t,e){return Array.prototype.filter.call(t,e)}function g(t,e){var n=o(),i=a(),r=[];if(!e&&t instanceof f)return t;if(!t)return new f(r);if("string"==typeof t){var s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var l="div";0===s.indexOf("<li")&&(l="ul"),0===s.indexOf("<tr")&&(l="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(l="tr"),0===s.indexOf("<tbody")&&(l="table"),0===s.indexOf("<option")&&(l="select");var u=i.createElement(l);u.innerHTML=s;for(var c=0;c<u.childNodes.length;c+=1)r.push(u.childNodes[c])}else r=function(t,e){if("string"!=typeof t)return[t];for(var n=[],i=e.querySelectorAll(t),r=0;r<i.length;r+=1)n.push(i[r]);return n}(t.trim(),e||i)}else if(t.nodeType||t===n||t===i)r.push(t);else if(Array.isArray(t)){if(t instanceof f)return t;r=t}return new f(function(t){for(var e=[],n=0;n<t.length;n+=1)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(r))}g.fn=f.prototype;var v,y,_,x={addClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=p(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).add.apply(e,i)})),this},removeClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=p(e.map((function(t){return t.split(" ")})));return this.forEach((function(t){var e;(e=t.classList).remove.apply(e,i)})),this},hasClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=p(e.map((function(t){return t.split(" ")})));return m(this,(function(t){return i.filter((function(e){return t.classList.contains(e)})).length>0})).length>0},toggleClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=p(e.map((function(t){return t.split(" ")})));this.forEach((function(t){i.forEach((function(e){t.classList.toggle(e)}))}))},attr:function(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(t,e);else for(var i in t)this[n][i]=t[i],this[n].setAttribute(i,t[i]);return this},removeAttr:function(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this},transform:function(t){for(var e=0;e<this.length;e+=1)this[e].style.transform=t;return this},transition:function(t){for(var e=0;e<this.length;e+=1)this[e].style.transitionDuration="string"!=typeof t?t+"ms":t;return this},on:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0],r=e[1],a=e[2],s=e[3];function o(t){var e=t.target;if(e){var n=t.target.dom7EventData||[];if(n.indexOf(t)<0&&n.unshift(t),g(e).is(r))a.apply(e,n);else for(var i=g(e).parents(),s=0;s<i.length;s+=1)g(i[s]).is(r)&&a.apply(i[s],n)}}function l(t){var e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),a.apply(this,e)}"function"==typeof e[1]&&(i=e[0],a=e[1],s=e[2],r=void 0),s||(s=!1);for(var u,c=i.split(" "),h=0;h<this.length;h+=1){var d=this[h];if(r)for(u=0;u<c.length;u+=1){var f=c[u];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[f]||(d.dom7LiveListeners[f]=[]),d.dom7LiveListeners[f].push({listener:a,proxyListener:o}),d.addEventListener(f,o,s)}else for(u=0;u<c.length;u+=1){var p=c[u];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[p]||(d.dom7Listeners[p]=[]),d.dom7Listeners[p].push({listener:a,proxyListener:l}),d.addEventListener(p,l,s)}}return this},off:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0],r=e[1],a=e[2],s=e[3];"function"==typeof e[1]&&(i=e[0],a=e[1],s=e[2],r=void 0),s||(s=!1);for(var o=i.split(" "),l=0;l<o.length;l+=1)for(var u=o[l],c=0;c<this.length;c+=1){var h=this[c],d=void 0;if(!r&&h.dom7Listeners?d=h.dom7Listeners[u]:r&&h.dom7LiveListeners&&(d=h.dom7LiveListeners[u]),d&&d.length)for(var f=d.length-1;f>=0;f-=1){var p=d[f];a&&p.listener===a||a&&p.listener&&p.listener.dom7proxy&&p.listener.dom7proxy===a?(h.removeEventListener(u,p.proxyListener,s),d.splice(f,1)):a||(h.removeEventListener(u,p.proxyListener,s),d.splice(f,1))}}return this},trigger:function(){for(var t=o(),e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=n[0].split(" "),a=n[1],s=0;s<r.length;s+=1)for(var l=r[s],u=0;u<this.length;u+=1){var c=this[u];if(t.CustomEvent){var h=new t.CustomEvent(l,{detail:a,bubbles:!0,cancelable:!0});c.dom7EventData=n.filter((function(t,e){return e>0})),c.dispatchEvent(h),c.dom7EventData=[],delete c.dom7EventData}}return this},transitionEnd:function(t){var e=this;return t&&e.on("transitionend",(function n(i){i.target===this&&(t.call(this,i),e.off("transitionend",n))})),this},outerWidth:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var t=o();return this[0]?t.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var t=o(),e=a(),n=this[0],i=n.getBoundingClientRect(),r=e.body,s=n.clientTop||r.clientTop||0,l=n.clientLeft||r.clientLeft||0,u=n===t?t.scrollY:n.scrollTop,c=n===t?t.scrollX:n.scrollLeft;return{top:i.top+u-s,left:i.left+c-l}}return null},css:function(t,e){var n,i=o();if(1===arguments.length){if("string"!=typeof t){for(n=0;n<this.length;n+=1)for(var r in t)this[n].style[r]=t[r];return this}if(this[0])return i.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(n=0;n<this.length;n+=1)this[n].style[t]=e;return this}return this},each:function(t){return t?(this.forEach((function(e,n){t.apply(e,[e,n])})),this):this},html:function(t){if(void 0===t)return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this},text:function(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this},is:function(t){var e,n,i=o(),r=a(),s=this[0];if(!s||void 0===t)return!1;if("string"==typeof t){if(s.matches)return s.matches(t);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(t);if(s.msMatchesSelector)return s.msMatchesSelector(t);for(e=g(t),n=0;n<e.length;n+=1)if(e[n]===s)return!0;return!1}if(t===r)return s===r;if(t===i)return s===i;if(t.nodeType||t instanceof f){for(e=t.nodeType?[t]:t,n=0;n<e.length;n+=1)if(e[n]===s)return!0;return!1}return!1},index:function(){var t,e=this[0];if(e){for(t=0;null!==(e=e.previousSibling);)1===e.nodeType&&(t+=1);return t}},eq:function(t){if(void 0===t)return this;var e=this.length;if(t>e-1)return g([]);if(t<0){var n=e+t;return g(n<0?[]:[this[n]])}return g([this[t]])},append:function(){for(var t,e=a(),n=0;n<arguments.length;n+=1){t=n<0||arguments.length<=n?void 0:arguments[n];for(var i=0;i<this.length;i+=1)if("string"==typeof t){var r=e.createElement("div");for(r.innerHTML=t;r.firstChild;)this[i].appendChild(r.firstChild)}else if(t instanceof f)for(var s=0;s<t.length;s+=1)this[i].appendChild(t[s]);else this[i].appendChild(t)}return this},prepend:function(t){var e,n,i=a();for(e=0;e<this.length;e+=1)if("string"==typeof t){var r=i.createElement("div");for(r.innerHTML=t,n=r.childNodes.length-1;n>=0;n-=1)this[e].insertBefore(r.childNodes[n],this[e].childNodes[0])}else if(t instanceof f)for(n=0;n<t.length;n+=1)this[e].insertBefore(t[n],this[e].childNodes[0]);else this[e].insertBefore(t,this[e].childNodes[0]);return this},next:function(t){return this.length>0?t?this[0].nextElementSibling&&g(this[0].nextElementSibling).is(t)?g([this[0].nextElementSibling]):g([]):this[0].nextElementSibling?g([this[0].nextElementSibling]):g([]):g([])},nextAll:function(t){var e=[],n=this[0];if(!n)return g([]);for(;n.nextElementSibling;){var i=n.nextElementSibling;t?g(i).is(t)&&e.push(i):e.push(i),n=i}return g(e)},prev:function(t){if(this.length>0){var e=this[0];return t?e.previousElementSibling&&g(e.previousElementSibling).is(t)?g([e.previousElementSibling]):g([]):e.previousElementSibling?g([e.previousElementSibling]):g([])}return g([])},prevAll:function(t){var e=[],n=this[0];if(!n)return g([]);for(;n.previousElementSibling;){var i=n.previousElementSibling;t?g(i).is(t)&&e.push(i):e.push(i),n=i}return g(e)},parent:function(t){for(var e=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(t?g(this[n].parentNode).is(t)&&e.push(this[n].parentNode):e.push(this[n].parentNode));return g(e)},parents:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var i=this[n].parentNode;i;)t?g(i).is(t)&&e.push(i):e.push(i),i=i.parentNode;return g(e)},closest:function(t){var e=this;return void 0===t?g([]):(e.is(t)||(e=e.parents(t).eq(0)),e)},find:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var i=this[n].querySelectorAll(t),r=0;r<i.length;r+=1)e.push(i[r]);return g(e)},children:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var i=this[n].children,r=0;r<i.length;r+=1)t&&!g(i[r]).is(t)||e.push(i[r]);return g(e)},filter:function(t){return g(m(this,t))},remove:function(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}};function b(t,e){return void 0===e&&(e=0),setTimeout(t,e)}function w(){return Date.now()}function T(t,e){void 0===e&&(e="x");var n,i,r,a=o(),s=a.getComputedStyle(t,null);return a.WebKitCSSMatrix?((i=s.transform||s.webkitTransform).split(",").length>6&&(i=i.split(", ").map((function(t){return t.replace(",",".")})).join(", ")),r=new a.WebKitCSSMatrix("none"===i?"":i)):n=(r=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===e&&(i=a.WebKitCSSMatrix?r.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===e&&(i=a.WebKitCSSMatrix?r.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),i||0}function M(t){return"object"==typeof t&&null!==t&&t.constructor&&t.constructor===Object}function S(){for(var t=Object(arguments.length<=0?void 0:arguments[0]),e=1;e<arguments.length;e+=1){var n=e<0||arguments.length<=e?void 0:arguments[e];if(null!=n)for(var i=Object.keys(Object(n)),r=0,a=i.length;r<a;r+=1){var s=i[r],o=Object.getOwnPropertyDescriptor(n,s);void 0!==o&&o.enumerable&&(M(t[s])&&M(n[s])?S(t[s],n[s]):!M(t[s])&&M(n[s])?(t[s]={},S(t[s],n[s])):t[s]=n[s])}}return t}function E(t,e){Object.keys(e).forEach((function(n){M(e[n])&&Object.keys(e[n]).forEach((function(i){"function"==typeof e[n][i]&&(e[n][i]=e[n][i].bind(t))})),t[n]=e[n]}))}function C(){return v||(v=function(){var t=o(),e=a();return{touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!!t.PointerEvent&&"maxTouchPoints"in t.navigator&&t.navigator.maxTouchPoints>=0,observer:"MutationObserver"in t||"WebkitMutationObserver"in t,passiveListener:function(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testPassiveListener",null,n)}catch(t){}return e}(),gestures:"ongesturestart"in t}}()),v}function A(t){return void 0===t&&(t={}),y||(y=function(t){var e=(void 0===t?{}:t).userAgent,n=C(),i=o(),r=i.navigator.platform,a=e||i.navigator.userAgent,s={ios:!1,android:!1},l=i.screen.width,u=i.screen.height,c=a.match(/(Android);?[\s\/]+([\d.]+)?/),h=a.match(/(iPad).*OS\s([\d_]+)/),d=a.match(/(iPod)(.*OS\s([\d_]+))?/),f=!h&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===r,m="MacIntel"===r;return!h&&m&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(l+"x"+u)>=0&&((h=a.match(/(Version)\/([\d.]+)/))||(h=[0,1,"13_0_0"]),m=!1),c&&!p&&(s.os="android",s.android=!0),(h||f||d)&&(s.os="ios",s.ios=!0),s}(t)),y}function L(){return _||(_=function(){var t,e=o();return{isEdge:!!e.navigator.userAgent.match(/Edge/g),isSafari:(t=e.navigator.userAgent.toLowerCase(),t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),_}Object.keys(x).forEach((function(t){g.fn[t]=x[t]}));var P={name:"resize",create:function(){var t=this;S(t,{resize:{resizeHandler:function(){t&&!t.destroyed&&t.initialized&&(t.emit("beforeResize"),t.emit("resize"))},orientationChangeHandler:function(){t&&!t.destroyed&&t.initialized&&t.emit("orientationchange")}}})},on:{init:function(t){var e=o();e.addEventListener("resize",t.resize.resizeHandler),e.addEventListener("orientationchange",t.resize.orientationChangeHandler)},destroy:function(t){var e=o();e.removeEventListener("resize",t.resize.resizeHandler),e.removeEventListener("orientationchange",t.resize.orientationChangeHandler)}}},R={attach:function(t,e){void 0===e&&(e={});var n=o(),i=this,r=new(n.MutationObserver||n.WebkitMutationObserver)((function(t){if(1!==t.length){var e=function(){i.emit("observerUpdate",t[0])};n.requestAnimationFrame?n.requestAnimationFrame(e):n.setTimeout(e,0)}else i.emit("observerUpdate",t[0])}));r.observe(t,{attributes:void 0===e.attributes||e.attributes,childList:void 0===e.childList||e.childList,characterData:void 0===e.characterData||e.characterData}),i.observer.observers.push(r)},init:function(){var t=this;if(t.support.observer&&t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)t.observer.attach(e[n]);t.observer.attach(t.$el[0],{childList:t.params.observeSlideChildren}),t.observer.attach(t.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(t){t.disconnect()})),this.observer.observers=[]}},I={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){E(this,{observer:e({},R,{observers:[]})})},on:{init:function(t){t.observer.init()},destroy:function(t){t.observer.destroy()}}};function O(t){var e=this,n=a(),i=o(),r=e.touchEventsData,s=e.params,l=e.touches;if(!e.animating||!s.preventInteractionOnTransition){var u=t;u.originalEvent&&(u=u.originalEvent);var c=g(u.target);if(("wrapper"!==s.touchEventsTarget||c.closest(e.wrapperEl).length)&&(r.isTouchEvent="touchstart"===u.type,(r.isTouchEvent||!("which"in u)||3!==u.which)&&!(!r.isTouchEvent&&"button"in u&&u.button>0||r.isTouched&&r.isMoved)))if(!!s.noSwipingClass&&""!==s.noSwipingClass&&u.target&&u.target.shadowRoot&&t.path&&t.path[0]&&(c=g(t.path[0])),s.noSwiping&&c.closest(s.noSwipingSelector?s.noSwipingSelector:"."+s.noSwipingClass)[0])e.allowClick=!0;else if(!s.swipeHandler||c.closest(s.swipeHandler)[0]){l.currentX="touchstart"===u.type?u.targetTouches[0].pageX:u.pageX,l.currentY="touchstart"===u.type?u.targetTouches[0].pageY:u.pageY;var h=l.currentX,d=l.currentY,f=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,p=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(f&&(h<=p||h>=i.innerWidth-p)){if("prevent"!==f)return;t.preventDefault()}if(S(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=h,l.startY=d,r.touchStartTime=w(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1),"touchstart"!==u.type){var m=!0;c.is(r.formElements)&&(m=!1),n.activeElement&&g(n.activeElement).is(r.formElements)&&n.activeElement!==c[0]&&n.activeElement.blur();var v=m&&e.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!v||c[0].isContentEditable||u.preventDefault()}e.emit("touchStart",u)}}}function z(t){var e=a(),n=this,i=n.touchEventsData,r=n.params,s=n.touches,o=n.rtlTranslate,l=t;if(l.originalEvent&&(l=l.originalEvent),i.isTouched){if(!i.isTouchEvent||"touchmove"===l.type){var u="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),c="touchmove"===l.type?u.pageX:l.pageX,h="touchmove"===l.type?u.pageY:l.pageY;if(l.preventedByNestedSwiper)return s.startX=c,void(s.startY=h);if(!n.allowTouchMove)return n.allowClick=!1,void(i.isTouched&&(S(s,{startX:c,startY:h,currentX:c,currentY:h}),i.touchStartTime=w()));if(i.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(h<s.startY&&n.translate<=n.maxTranslate()||h>s.startY&&n.translate>=n.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(c<s.startX&&n.translate<=n.maxTranslate()||c>s.startX&&n.translate>=n.minTranslate())return;if(i.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&g(l.target).is(i.formElements))return i.isMoved=!0,void(n.allowClick=!1);if(i.allowTouchCallbacks&&n.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){s.currentX=c,s.currentY=h;var d,f=s.currentX-s.startX,p=s.currentY-s.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(f,2)+Math.pow(p,2))<n.params.threshold))if(void 0===i.isScrolling&&(n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:f*f+p*p>=25&&(d=180*Math.atan2(Math.abs(p),Math.abs(f))/Math.PI,i.isScrolling=n.isHorizontal()?d>r.touchAngle:90-d>r.touchAngle)),i.isScrolling&&n.emit("touchMoveOpposite",l),void 0===i.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){n.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation(),i.isMoved||(r.loop&&n.loopFix(),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)),n.emit("sliderMove",l),i.isMoved=!0;var m=n.isHorizontal()?f:p;s.diff=m,m*=r.touchRatio,o&&(m=-m),n.swipeDirection=m>0?"prev":"next",i.currentTranslate=m+i.startTranslate;var v=!0,y=r.resistanceRatio;if(r.touchReleaseOnEdges&&(y=0),m>0&&i.currentTranslate>n.minTranslate()?(v=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+i.startTranslate+m,y))):m<0&&i.currentTranslate<n.maxTranslate()&&(v=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-i.startTranslate-m,y))),v&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(m)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,void(s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}r.followFinger&&!r.cssMode&&((r.freeMode||r.watchSlidesProgress||r.watchSlidesVisibility)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&(0===i.velocities.length&&i.velocities.push({position:s[n.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:s[n.isHorizontal()?"currentX":"currentY"],time:w()})),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}}}}else i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l)}function D(t){var e=this,n=e.touchEventsData,i=e.params,r=e.touches,a=e.rtlTranslate,s=e.$wrapperEl,o=e.slidesGrid,l=e.snapGrid,u=t;if(u.originalEvent&&(u=u.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",u),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&i.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);i.grabCursor&&n.isMoved&&n.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);var c,h=w(),d=h-n.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(u),e.emit("tap click",u),d<300&&h-n.lastClickTime<300&&e.emit("doubleTap doubleClick",u)),n.lastClickTime=w(),b((function(){e.destroyed||(e.allowClick=!0)})),!n.isTouched||!n.isMoved||!e.swipeDirection||0===r.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,c=i.followFinger?a?e.translate:-e.translate:-n.currentTranslate,!i.cssMode)if(i.freeMode){if(c<-e.minTranslate())return void e.slideTo(e.activeIndex);if(c>-e.maxTranslate())return void(e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1));if(i.freeModeMomentum){if(n.velocities.length>1){var f=n.velocities.pop(),p=n.velocities.pop(),m=f.position-p.position,g=f.time-p.time;e.velocity=m/g,e.velocity/=2,Math.abs(e.velocity)<i.freeModeMinimumVelocity&&(e.velocity=0),(g>150||w()-f.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeModeMomentumVelocityRatio,n.velocities.length=0;var v=1e3*i.freeModeMomentumRatio,y=e.velocity*v,_=e.translate+y;a&&(_=-_);var x,T,M=!1,S=20*Math.abs(e.velocity)*i.freeModeMomentumBounceRatio;if(_<e.maxTranslate())i.freeModeMomentumBounce?(_+e.maxTranslate()<-S&&(_=e.maxTranslate()-S),x=e.maxTranslate(),M=!0,n.allowMomentumBounce=!0):_=e.maxTranslate(),i.loop&&i.centeredSlides&&(T=!0);else if(_>e.minTranslate())i.freeModeMomentumBounce?(_-e.minTranslate()>S&&(_=e.minTranslate()+S),x=e.minTranslate(),M=!0,n.allowMomentumBounce=!0):_=e.minTranslate(),i.loop&&i.centeredSlides&&(T=!0);else if(i.freeModeSticky){for(var E,C=0;C<l.length;C+=1)if(l[C]>-_){E=C;break}_=-(_=Math.abs(l[E]-_)<Math.abs(l[E-1]-_)||"next"===e.swipeDirection?l[E]:l[E-1])}if(T&&e.once("transitionEnd",(function(){e.loopFix()})),0!==e.velocity){if(v=a?Math.abs((-_-e.translate)/e.velocity):Math.abs((_-e.translate)/e.velocity),i.freeModeSticky){var A=Math.abs((a?-_:_)-e.translate),L=e.slidesSizesGrid[e.activeIndex];v=A<L?i.speed:A<2*L?1.5*i.speed:2.5*i.speed}}else if(i.freeModeSticky)return void e.slideToClosest();i.freeModeMomentumBounce&&M?(e.updateProgress(x),e.setTransition(v),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating=!0,s.transitionEnd((function(){e&&!e.destroyed&&n.allowMomentumBounce&&(e.emit("momentumBounce"),e.setTransition(i.speed),setTimeout((function(){e.setTranslate(x),s.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()}))}),0))}))):e.velocity?(e.updateProgress(_),e.setTransition(v),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,s.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(_),e.updateActiveIndex(),e.updateSlidesClasses()}else if(i.freeModeSticky)return void e.slideToClosest();(!i.freeModeMomentum||d>=i.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}else{for(var P=0,R=e.slidesSizesGrid[0],I=0;I<o.length;I+=I<i.slidesPerGroupSkip?1:i.slidesPerGroup){var O=I<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==o[I+O]?c>=o[I]&&c<o[I+O]&&(P=I,R=o[I+O]-o[I]):c>=o[I]&&(P=I,R=o[o.length-1]-o[o.length-2])}var z=(c-o[P])/R,D=P<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(d>i.longSwipesMs){if(!i.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(z>=i.longSwipesRatio?e.slideTo(P+D):e.slideTo(P)),"prev"===e.swipeDirection&&(z>1-i.longSwipesRatio?e.slideTo(P+D):e.slideTo(P))}else{if(!i.shortSwipes)return void e.slideTo(e.activeIndex);!e.navigation||u.target!==e.navigation.nextEl&&u.target!==e.navigation.prevEl?("next"===e.swipeDirection&&e.slideTo(P+D),"prev"===e.swipeDirection&&e.slideTo(P)):u.target===e.navigation.nextEl?e.slideTo(P+D):e.slideTo(P)}}}function N(){var t=this,e=t.params,n=t.el;if(!n||0!==n.offsetWidth){e.breakpoints&&t.setBreakpoint();var i=t.allowSlideNext,r=t.allowSlidePrev,a=t.snapGrid;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=r,t.allowSlideNext=i,t.params.watchOverflow&&a!==t.snapGrid&&t.checkOverflow()}}function k(t){var e=this;e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function B(){var t=this,e=t.wrapperEl,n=t.rtlTranslate;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=n?e.scrollWidth-e.offsetWidth-e.scrollLeft:-e.scrollLeft:t.translate=-e.scrollTop,-0===t.translate&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();var i=t.maxTranslate()-t.minTranslate();(0===i?0:(t.translate-t.minTranslate())/i)!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}var F=!1;function U(){}var H={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,nested:!1,width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1},G={modular:{useParams:function(t){var e=this;e.modules&&Object.keys(e.modules).forEach((function(n){var i=e.modules[n];i.params&&S(t,i.params)}))},useModules:function(t){void 0===t&&(t={});var e=this;e.modules&&Object.keys(e.modules).forEach((function(n){var i=e.modules[n],r=t[n]||{};i.on&&e.on&&Object.keys(i.on).forEach((function(t){e.on(t,i.on[t])})),i.create&&i.create.bind(e)(r)}))}},eventsEmitter:{on:function(t,e,n){var i=this;if("function"!=typeof e)return i;var r=n?"unshift":"push";return t.split(" ").forEach((function(t){i.eventsListeners[t]||(i.eventsListeners[t]=[]),i.eventsListeners[t][r](e)})),i},once:function(t,e,n){var i=this;if("function"!=typeof e)return i;function r(){i.off(t,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];e.apply(i,a)}return r.__emitterProxy=e,i.on(t,r,n)},onAny:function(t,e){var n=this;if("function"!=typeof t)return n;var i=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[i](t),n},offAny:function(t){var e=this;if(!e.eventsAnyListeners)return e;var n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off:function(t,e){var n=this;return n.eventsListeners?(t.split(" ").forEach((function(t){void 0===e?n.eventsListeners[t]=[]:n.eventsListeners[t]&&n.eventsListeners[t].forEach((function(i,r){(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&n.eventsListeners[t].splice(r,1)}))})),n):n},emit:function(){var t,e,n,i=this;if(!i.eventsListeners)return i;for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];"string"==typeof a[0]||Array.isArray(a[0])?(t=a[0],e=a.slice(1,a.length),n=i):(t=a[0].events,e=a[0].data,n=a[0].context||i),e.unshift(n);var o=Array.isArray(t)?t:t.split(" ");return o.forEach((function(t){i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach((function(i){i.apply(n,[t].concat(e))})),i.eventsListeners&&i.eventsListeners[t]&&i.eventsListeners[t].forEach((function(t){t.apply(n,e)}))})),i}},update:{updateSize:function(){var t,e,n=this,i=n.$el;t=void 0!==n.params.width&&null!==n.params.width?n.params.width:i[0].clientWidth,e=void 0!==n.params.height&&null!==n.params.height?n.params.height:i[0].clientHeight,0===t&&n.isHorizontal()||0===e&&n.isVertical()||(t=t-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),e=e-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(e)&&(e=0),S(n,{width:t,height:e,size:n.isHorizontal()?t:e}))},updateSlides:function(){var t=this,e=o(),n=t.params,i=t.$wrapperEl,r=t.size,a=t.rtlTranslate,s=t.wrongRTL,l=t.virtual&&n.virtual.enabled,u=l?t.virtual.slides.length:t.slides.length,c=i.children("."+t.params.slideClass),h=l?t.virtual.slides.length:c.length,d=[],f=[],p=[];function m(t,e){return!n.cssMode||e!==c.length-1}var g=n.slidesOffsetBefore;"function"==typeof g&&(g=n.slidesOffsetBefore.call(t));var v=n.slidesOffsetAfter;"function"==typeof v&&(v=n.slidesOffsetAfter.call(t));var y=t.snapGrid.length,_=t.slidesGrid.length,x=n.spaceBetween,b=-g,w=0,T=0;if(void 0!==r){var M,E;"string"==typeof x&&x.indexOf("%")>=0&&(x=parseFloat(x.replace("%",""))/100*r),t.virtualSize=-x,a?c.css({marginLeft:"",marginTop:""}):c.css({marginRight:"",marginBottom:""}),n.slidesPerColumn>1&&(M=Math.floor(h/n.slidesPerColumn)===h/t.params.slidesPerColumn?h:Math.ceil(h/n.slidesPerColumn)*n.slidesPerColumn,"auto"!==n.slidesPerView&&"row"===n.slidesPerColumnFill&&(M=Math.max(M,n.slidesPerView*n.slidesPerColumn)));for(var C,A=n.slidesPerColumn,L=M/A,P=Math.floor(h/n.slidesPerColumn),R=0;R<h;R+=1){E=0;var I=c.eq(R);if(n.slidesPerColumn>1){var O=void 0,z=void 0,D=void 0;if("row"===n.slidesPerColumnFill&&n.slidesPerGroup>1){var N=Math.floor(R/(n.slidesPerGroup*n.slidesPerColumn)),k=R-n.slidesPerColumn*n.slidesPerGroup*N,B=0===N?n.slidesPerGroup:Math.min(Math.ceil((h-N*A*n.slidesPerGroup)/A),n.slidesPerGroup);O=(z=k-(D=Math.floor(k/B))*B+N*n.slidesPerGroup)+D*M/A,I.css({"-webkit-box-ordinal-group":O,"-moz-box-ordinal-group":O,"-ms-flex-order":O,"-webkit-order":O,order:O})}else"column"===n.slidesPerColumnFill?(D=R-(z=Math.floor(R/A))*A,(z>P||z===P&&D===A-1)&&(D+=1)>=A&&(D=0,z+=1)):z=R-(D=Math.floor(R/L))*L;I.css("margin-"+(t.isHorizontal()?"top":"left"),0!==D&&n.spaceBetween&&n.spaceBetween+"px")}if("none"!==I.css("display")){if("auto"===n.slidesPerView){var F=e.getComputedStyle(I[0],null),U=I[0].style.transform,H=I[0].style.webkitTransform;if(U&&(I[0].style.transform="none"),H&&(I[0].style.webkitTransform="none"),n.roundLengths)E=t.isHorizontal()?I.outerWidth(!0):I.outerHeight(!0);else if(t.isHorizontal()){var G=parseFloat(F.getPropertyValue("width")||0),j=parseFloat(F.getPropertyValue("padding-left")||0),V=parseFloat(F.getPropertyValue("padding-right")||0),W=parseFloat(F.getPropertyValue("margin-left")||0),q=parseFloat(F.getPropertyValue("margin-right")||0),X=F.getPropertyValue("box-sizing");if(X&&"border-box"===X)E=G+W+q;else{var Y=I[0],$=Y.clientWidth;E=G+j+V+W+q+(Y.offsetWidth-$)}}else{var Z=parseFloat(F.getPropertyValue("height")||0),J=parseFloat(F.getPropertyValue("padding-top")||0),Q=parseFloat(F.getPropertyValue("padding-bottom")||0),K=parseFloat(F.getPropertyValue("margin-top")||0),tt=parseFloat(F.getPropertyValue("margin-bottom")||0),et=F.getPropertyValue("box-sizing");if(et&&"border-box"===et)E=Z+K+tt;else{var nt=I[0],it=nt.clientHeight;E=Z+J+Q+K+tt+(nt.offsetHeight-it)}}U&&(I[0].style.transform=U),H&&(I[0].style.webkitTransform=H),n.roundLengths&&(E=Math.floor(E))}else E=(r-(n.slidesPerView-1)*x)/n.slidesPerView,n.roundLengths&&(E=Math.floor(E)),c[R]&&(t.isHorizontal()?c[R].style.width=E+"px":c[R].style.height=E+"px");c[R]&&(c[R].swiperSlideSize=E),p.push(E),n.centeredSlides?(b=b+E/2+w/2+x,0===w&&0!==R&&(b=b-r/2-x),0===R&&(b=b-r/2-x),Math.abs(b)<.001&&(b=0),n.roundLengths&&(b=Math.floor(b)),T%n.slidesPerGroup==0&&d.push(b),f.push(b)):(n.roundLengths&&(b=Math.floor(b)),(T-Math.min(t.params.slidesPerGroupSkip,T))%t.params.slidesPerGroup==0&&d.push(b),f.push(b),b=b+E+x),t.virtualSize+=E+x,w=E,T+=1}}if(t.virtualSize=Math.max(t.virtualSize,r)+v,a&&s&&("slide"===n.effect||"coverflow"===n.effect)&&i.css({width:t.virtualSize+n.spaceBetween+"px"}),n.setWrapperSize&&(t.isHorizontal()?i.css({width:t.virtualSize+n.spaceBetween+"px"}):i.css({height:t.virtualSize+n.spaceBetween+"px"})),n.slidesPerColumn>1&&(t.virtualSize=(E+n.spaceBetween)*M,t.virtualSize=Math.ceil(t.virtualSize/n.slidesPerColumn)-n.spaceBetween,t.isHorizontal()?i.css({width:t.virtualSize+n.spaceBetween+"px"}):i.css({height:t.virtualSize+n.spaceBetween+"px"}),n.centeredSlides)){C=[];for(var rt=0;rt<d.length;rt+=1){var at=d[rt];n.roundLengths&&(at=Math.floor(at)),d[rt]<t.virtualSize+d[0]&&C.push(at)}d=C}if(!n.centeredSlides){C=[];for(var st=0;st<d.length;st+=1){var ot=d[st];n.roundLengths&&(ot=Math.floor(ot)),d[st]<=t.virtualSize-r&&C.push(ot)}d=C,!t.params.freeMode&&Math.floor(t.virtualSize-r)-Math.floor(d[d.length-1])>1&&d.push(t.virtualSize-r)}if(0===d.length&&(d=[0]),0!==n.spaceBetween&&(t.isHorizontal()?a?c.filter(m).css({marginLeft:x+"px"}):c.filter(m).css({marginRight:x+"px"}):c.filter(m).css({marginBottom:x+"px"})),n.centeredSlides&&n.centeredSlidesBounds){var lt=0;p.forEach((function(t){lt+=t+(n.spaceBetween?n.spaceBetween:0)}));var ut=(lt-=n.spaceBetween)-r;d=d.map((function(t){return t<0?-g:t>ut?ut+v:t}))}if(n.centerInsufficientSlides){var ct=0;if(p.forEach((function(t){ct+=t+(n.spaceBetween?n.spaceBetween:0)})),(ct-=n.spaceBetween)<r){var ht=(r-ct)/2;d.forEach((function(t,e){d[e]=t-ht})),f.forEach((function(t,e){f[e]=t+ht}))}}S(t,{slides:c,snapGrid:d,slidesGrid:f,slidesSizesGrid:p}),h!==u&&t.emit("slidesLengthChange"),d.length!==y&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),f.length!==_&&t.emit("slidesGridLengthChange"),(n.watchSlidesProgress||n.watchSlidesVisibility)&&t.updateSlidesOffset()}},updateAutoHeight:function(t){var e,n=this,i=[],r=0;if("number"==typeof t?n.setTransition(t):!0===t&&n.setTransition(n.params.speed),"auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)n.visibleSlides.each((function(t){i.push(t)}));else for(e=0;e<Math.ceil(n.params.slidesPerView);e+=1){var a=n.activeIndex+e;if(a>n.slides.length)break;i.push(n.slides.eq(a)[0])}else i.push(n.slides.eq(n.activeIndex)[0]);for(e=0;e<i.length;e+=1)if(void 0!==i[e]){var s=i[e].offsetHeight;r=s>r?s:r}r&&n.$wrapperEl.css("height",r+"px")},updateSlidesOffset:function(){for(var t=this.slides,e=0;e<t.length;e+=1)t[e].swiperSlideOffset=this.isHorizontal()?t[e].offsetLeft:t[e].offsetTop},updateSlidesProgress:function(t){void 0===t&&(t=this&&this.translate||0);var e=this,n=e.params,i=e.slides,r=e.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&e.updateSlidesOffset();var a=-t;r&&(a=t),i.removeClass(n.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(var s=0;s<i.length;s+=1){var o=i[s],l=(a+(n.centeredSlides?e.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+n.spaceBetween);if(n.watchSlidesVisibility||n.centeredSlides&&n.autoHeight){var u=-(a-o.swiperSlideOffset),c=u+e.slidesSizesGrid[s];(u>=0&&u<e.size-1||c>1&&c<=e.size||u<=0&&c>=e.size)&&(e.visibleSlides.push(o),e.visibleSlidesIndexes.push(s),i.eq(s).addClass(n.slideVisibleClass))}o.progress=r?-l:l}e.visibleSlides=g(e.visibleSlides)}},updateProgress:function(t){var e=this;if(void 0===t){var n=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*n||0}var i=e.params,r=e.maxTranslate()-e.minTranslate(),a=e.progress,s=e.isBeginning,o=e.isEnd,l=s,u=o;0===r?(a=0,s=!0,o=!0):(s=(a=(t-e.minTranslate())/r)<=0,o=a>=1),S(e,{progress:a,isBeginning:s,isEnd:o}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),o&&!u&&e.emit("reachEnd toEdge"),(l&&!s||u&&!o)&&e.emit("fromEdge"),e.emit("progress",a)},updateSlidesClasses:function(){var t,e=this,n=e.slides,i=e.params,r=e.$wrapperEl,a=e.activeIndex,s=e.realIndex,o=e.virtual&&i.virtual.enabled;n.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(t=o?e.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+a+'"]'):n.eq(a)).addClass(i.slideActiveClass),i.loop&&(t.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+s+'"]').addClass(i.slideDuplicateActiveClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+s+'"]').addClass(i.slideDuplicateActiveClass));var l=t.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=n.eq(0)).addClass(i.slideNextClass);var u=t.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===u.length&&(u=n.eq(-1)).addClass(i.slidePrevClass),i.loop&&(l.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),u.hasClass(i.slideDuplicateClass)?r.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):r.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass)),e.emitSlidesClasses()},updateActiveIndex:function(t){var e,n=this,i=n.rtlTranslate?n.translate:-n.translate,r=n.slidesGrid,a=n.snapGrid,s=n.params,o=n.activeIndex,l=n.realIndex,u=n.snapIndex,c=t;if(void 0===c){for(var h=0;h<r.length;h+=1)void 0!==r[h+1]?i>=r[h]&&i<r[h+1]-(r[h+1]-r[h])/2?c=h:i>=r[h]&&i<r[h+1]&&(c=h+1):i>=r[h]&&(c=h);s.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(a.indexOf(i)>=0)e=a.indexOf(i);else{var d=Math.min(s.slidesPerGroupSkip,c);e=d+Math.floor((c-d)/s.slidesPerGroup)}if(e>=a.length&&(e=a.length-1),c!==o){var f=parseInt(n.slides.eq(c).attr("data-swiper-slide-index")||c,10);S(n,{snapIndex:e,realIndex:f,previousIndex:o,activeIndex:c}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),l!==f&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else e!==u&&(n.snapIndex=e,n.emit("snapIndexChange"))},updateClickedSlide:function(t){var e=this,n=e.params,i=g(t.target).closest("."+n.slideClass)[0],r=!1;if(i)for(var a=0;a<e.slides.length;a+=1)e.slides[a]===i&&(r=!0);if(!i||!r)return e.clickedSlide=void 0,void(e.clickedIndex=void 0);e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(g(i).attr("data-swiper-slide-index"),10):e.clickedIndex=g(i).index(),n.slideToClickedSlide&&void 0!==e.clickedIndex&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}},translate:{getTranslate:function(t){void 0===t&&(t=this.isHorizontal()?"x":"y");var e=this,n=e.params,i=e.rtlTranslate,r=e.translate,a=e.$wrapperEl;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;var s=T(a[0],t);return i&&(s=-s),s||0},setTranslate:function(t,e){var n=this,i=n.rtlTranslate,r=n.params,a=n.$wrapperEl,s=n.wrapperEl,o=n.progress,l=0,u=0;n.isHorizontal()?l=i?-t:t:u=t,r.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),r.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-u:r.virtualTranslate||a.transform("translate3d("+l+"px, "+u+"px, 0px)"),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:u;var c=n.maxTranslate()-n.minTranslate();(0===c?0:(t-n.minTranslate())/c)!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(t,e,n,i,r){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===n&&(n=!0),void 0===i&&(i=!0);var a=this,s=a.params,o=a.wrapperEl;if(a.animating&&s.preventInteractionOnTransition)return!1;var l,u=a.minTranslate(),c=a.maxTranslate();if(l=i&&t>u?u:i&&t<c?c:t,a.updateProgress(l),s.cssMode){var h,d=a.isHorizontal();return 0===e?o[d?"scrollLeft":"scrollTop"]=-l:o.scrollTo?o.scrollTo(((h={})[d?"left":"top"]=-l,h.behavior="smooth",h)):o[d?"scrollLeft":"scrollTop"]=-l,!0}return 0===e?(a.setTransition(0),a.setTranslate(l),n&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(l),n&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,n&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(t,e){var n=this;n.params.cssMode||n.$wrapperEl.transition(t),n.emit("setTransition",t,e)},transitionStart:function(t,e){void 0===t&&(t=!0);var n=this,i=n.activeIndex,r=n.params,a=n.previousIndex;if(!r.cssMode){r.autoHeight&&n.updateAutoHeight();var s=e;if(s||(s=i>a?"next":i<a?"prev":"reset"),n.emit("transitionStart"),t&&i!==a){if("reset"===s)return void n.emit("slideResetTransitionStart");n.emit("slideChangeTransitionStart"),"next"===s?n.emit("slideNextTransitionStart"):n.emit("slidePrevTransitionStart")}}},transitionEnd:function(t,e){void 0===t&&(t=!0);var n=this,i=n.activeIndex,r=n.previousIndex,a=n.params;if(n.animating=!1,!a.cssMode){n.setTransition(0);var s=e;if(s||(s=i>r?"next":i<r?"prev":"reset"),n.emit("transitionEnd"),t&&i!==r){if("reset"===s)return void n.emit("slideResetTransitionEnd");n.emit("slideChangeTransitionEnd"),"next"===s?n.emit("slideNextTransitionEnd"):n.emit("slidePrevTransitionEnd")}}}},slide:{slideTo:function(t,e,n,i){if(void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===n&&(n=!0),"number"!=typeof t&&"string"!=typeof t)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof t+"] given.");if("string"==typeof t){var r=parseInt(t,10);if(!isFinite(r))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+t+"] given.");t=r}var a=this,s=t;s<0&&(s=0);var o=a.params,l=a.snapGrid,u=a.slidesGrid,c=a.previousIndex,h=a.activeIndex,d=a.rtlTranslate,f=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var p=Math.min(a.params.slidesPerGroupSkip,s),m=p+Math.floor((s-p)/a.params.slidesPerGroup);m>=l.length&&(m=l.length-1),(h||o.initialSlide||0)===(c||0)&&n&&a.emit("beforeSlideChangeStart");var g,v=-l[m];if(a.updateProgress(v),o.normalizeSlideIndex)for(var y=0;y<u.length;y+=1){var _=-Math.floor(100*v),x=Math.floor(100*u[y]),b=Math.floor(100*u[y+1]);void 0!==u[y+1]?_>=x&&_<b-(b-x)/2?s=y:_>=x&&_<b&&(s=y+1):_>=x&&(s=y)}if(a.initialized&&s!==h){if(!a.allowSlideNext&&v<a.translate&&v<a.minTranslate())return!1;if(!a.allowSlidePrev&&v>a.translate&&v>a.maxTranslate()&&(h||0)!==s)return!1}if(g=s>h?"next":s<h?"prev":"reset",d&&-v===a.translate||!d&&v===a.translate)return a.updateActiveIndex(s),o.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==o.effect&&a.setTranslate(v),"reset"!==g&&(a.transitionStart(n,g),a.transitionEnd(n,g)),!1;if(o.cssMode){var w,T=a.isHorizontal(),M=-v;return d&&(M=f.scrollWidth-f.offsetWidth-M),0===e?f[T?"scrollLeft":"scrollTop"]=M:f.scrollTo?f.scrollTo(((w={})[T?"left":"top"]=M,w.behavior="smooth",w)):f[T?"scrollLeft":"scrollTop"]=M,!0}return 0===e?(a.setTransition(0),a.setTranslate(v),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,i),a.transitionStart(n,g),a.transitionEnd(n,g)):(a.setTransition(e),a.setTranslate(v),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,i),a.transitionStart(n,g),a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(n,g))}),a.$wrapperEl[0].addEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===n&&(n=!0);var r=this,a=t;return r.params.loop&&(a+=r.loopedSlides),r.slideTo(a,e,n,i)},slideNext:function(t,e,n){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this,r=i.params,a=i.animating,s=i.activeIndex<r.slidesPerGroupSkip?1:r.slidesPerGroup;if(r.loop){if(a&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return i.slideTo(i.activeIndex+s,t,e,n)},slidePrev:function(t,e,n){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var i=this,r=i.params,a=i.animating,s=i.snapGrid,o=i.slidesGrid,l=i.rtlTranslate;if(r.loop){if(a&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function u(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}var c=u(l?i.translate:-i.translate),h=s.map((function(t){return u(t)}));s[h.indexOf(c)];var d,f=s[h.indexOf(c)-1];return void 0===f&&r.cssMode&&s.forEach((function(t){!f&&c>=t&&(f=t)})),void 0!==f&&(d=o.indexOf(f))<0&&(d=i.activeIndex-1),i.slideTo(d,t,e,n)},slideReset:function(t,e,n){return void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),this.slideTo(this.activeIndex,t,e,n)},slideToClosest:function(t,e,n,i){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),void 0===i&&(i=.5);var r=this,a=r.activeIndex,s=Math.min(r.params.slidesPerGroupSkip,a),o=s+Math.floor((a-s)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){var u=r.snapGrid[o];l-u>(r.snapGrid[o+1]-u)*i&&(a+=r.params.slidesPerGroup)}else{var c=r.snapGrid[o-1];l-c<=(r.snapGrid[o]-c)*i&&(a-=r.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,r.slidesGrid.length-1),r.slideTo(a,t,e,n)},slideToClickedSlide:function(){var t,e=this,n=e.params,i=e.$wrapperEl,r="auto"===n.slidesPerView?e.slidesPerViewDynamic():n.slidesPerView,a=e.clickedIndex;if(n.loop){if(e.animating)return;t=parseInt(g(e.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?a<e.loopedSlides-r/2||a>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),a=i.children("."+n.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),b((function(){e.slideTo(a)}))):e.slideTo(a):a>e.slides.length-r?(e.loopFix(),a=i.children("."+n.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),b((function(){e.slideTo(a)}))):e.slideTo(a)}else e.slideTo(a)}},loop:{loopCreate:function(){var t=this,e=a(),n=t.params,i=t.$wrapperEl;i.children("."+n.slideClass+"."+n.slideDuplicateClass).remove();var r=i.children("."+n.slideClass);if(n.loopFillGroupWithBlank){var s=n.slidesPerGroup-r.length%n.slidesPerGroup;if(s!==n.slidesPerGroup){for(var o=0;o<s;o+=1){var l=g(e.createElement("div")).addClass(n.slideClass+" "+n.slideBlankClass);i.append(l)}r=i.children("."+n.slideClass)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length),t.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),t.loopedSlides+=n.loopAdditionalSlides,t.loopedSlides>r.length&&(t.loopedSlides=r.length);var u=[],c=[];r.each((function(e,n){var i=g(e);n<t.loopedSlides&&c.push(e),n<r.length&&n>=r.length-t.loopedSlides&&u.push(e),i.attr("data-swiper-slide-index",n)}));for(var h=0;h<c.length;h+=1)i.append(g(c[h].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var d=u.length-1;d>=0;d-=1)i.prepend(g(u[d].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var t=this;t.emit("beforeLoopFix");var e,n=t.activeIndex,i=t.slides,r=t.loopedSlides,a=t.allowSlidePrev,s=t.allowSlideNext,o=t.snapGrid,l=t.rtlTranslate;t.allowSlidePrev=!0,t.allowSlideNext=!0;var u=-o[n]-t.getTranslate();n<r?(e=i.length-3*r+n,e+=r,t.slideTo(e,0,!1,!0)&&0!==u&&t.setTranslate((l?-t.translate:t.translate)-u)):n>=i.length-r&&(e=-i.length+n+r,e+=r,t.slideTo(e,0,!1,!0)&&0!==u&&t.setTranslate((l?-t.translate:t.translate)-u)),t.allowSlidePrev=a,t.allowSlideNext=s,t.emit("loopFix")},loopDestroy:function(){var t=this,e=t.$wrapperEl,n=t.params,i=t.slides;e.children("."+n.slideClass+"."+n.slideDuplicateClass+",."+n.slideClass+"."+n.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(t){var e=this;if(!(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)){var n=e.el;n.style.cursor="move",n.style.cursor=t?"-webkit-grabbing":"-webkit-grab",n.style.cursor=t?"-moz-grabbin":"-moz-grab",n.style.cursor=t?"grabbing":"grab"}},unsetGrabCursor:function(){var t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.el.style.cursor="")}},manipulation:{appendSlide:function(t){var e=this,n=e.$wrapperEl,i=e.params;if(i.loop&&e.loopDestroy(),"object"==typeof t&&"length"in t)for(var r=0;r<t.length;r+=1)t[r]&&n.append(t[r]);else n.append(t);i.loop&&e.loopCreate(),i.observer&&e.support.observer||e.update()},prependSlide:function(t){var e=this,n=e.params,i=e.$wrapperEl,r=e.activeIndex;n.loop&&e.loopDestroy();var a=r+1;if("object"==typeof t&&"length"in t){for(var s=0;s<t.length;s+=1)t[s]&&i.prepend(t[s]);a=r+t.length}else i.prepend(t);n.loop&&e.loopCreate(),n.observer&&e.support.observer||e.update(),e.slideTo(a,0,!1)},addSlide:function(t,e){var n=this,i=n.$wrapperEl,r=n.params,a=n.activeIndex;r.loop&&(a-=n.loopedSlides,n.loopDestroy(),n.slides=i.children("."+r.slideClass));var s=n.slides.length;if(t<=0)n.prependSlide(e);else if(t>=s)n.appendSlide(e);else{for(var o=a>t?a+1:a,l=[],u=s-1;u>=t;u-=1){var c=n.slides.eq(u);c.remove(),l.unshift(c)}if("object"==typeof e&&"length"in e){for(var h=0;h<e.length;h+=1)e[h]&&i.append(e[h]);o=a>t?a+e.length:a}else i.append(e);for(var d=0;d<l.length;d+=1)i.append(l[d]);r.loop&&n.loopCreate(),r.observer&&n.support.observer||n.update(),r.loop?n.slideTo(o+n.loopedSlides,0,!1):n.slideTo(o,0,!1)}},removeSlide:function(t){var e=this,n=e.params,i=e.$wrapperEl,r=e.activeIndex;n.loop&&(r-=e.loopedSlides,e.loopDestroy(),e.slides=i.children("."+n.slideClass));var a,s=r;if("object"==typeof t&&"length"in t){for(var o=0;o<t.length;o+=1)a=t[o],e.slides[a]&&e.slides.eq(a).remove(),a<s&&(s-=1);s=Math.max(s,0)}else a=t,e.slides[a]&&e.slides.eq(a).remove(),a<s&&(s-=1),s=Math.max(s,0);n.loop&&e.loopCreate(),n.observer&&e.support.observer||e.update(),n.loop?e.slideTo(s+e.loopedSlides,0,!1):e.slideTo(s,0,!1)},removeAllSlides:function(){for(var t=[],e=0;e<this.slides.length;e+=1)t.push(e);this.removeSlide(t)}},events:{attachEvents:function(){var t=this,e=a(),n=t.params,i=t.touchEvents,r=t.el,s=t.wrapperEl,o=t.device,l=t.support;t.onTouchStart=O.bind(t),t.onTouchMove=z.bind(t),t.onTouchEnd=D.bind(t),n.cssMode&&(t.onScroll=B.bind(t)),t.onClick=k.bind(t);var u=!!n.nested;if(!l.touch&&l.pointerEvents)r.addEventListener(i.start,t.onTouchStart,!1),e.addEventListener(i.move,t.onTouchMove,u),e.addEventListener(i.end,t.onTouchEnd,!1);else{if(l.touch){var c=!("touchstart"!==i.start||!l.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};r.addEventListener(i.start,t.onTouchStart,c),r.addEventListener(i.move,t.onTouchMove,l.passiveListener?{passive:!1,capture:u}:u),r.addEventListener(i.end,t.onTouchEnd,c),i.cancel&&r.addEventListener(i.cancel,t.onTouchEnd,c),F||(e.addEventListener("touchstart",U),F=!0)}(n.simulateTouch&&!o.ios&&!o.android||n.simulateTouch&&!l.touch&&o.ios)&&(r.addEventListener("mousedown",t.onTouchStart,!1),e.addEventListener("mousemove",t.onTouchMove,u),e.addEventListener("mouseup",t.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&r.addEventListener("click",t.onClick,!0),n.cssMode&&s.addEventListener("scroll",t.onScroll),n.updateOnWindowResize?t.on(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",N,!0):t.on("observerUpdate",N,!0)},detachEvents:function(){var t=this,e=a(),n=t.params,i=t.touchEvents,r=t.el,s=t.wrapperEl,o=t.device,l=t.support,u=!!n.nested;if(!l.touch&&l.pointerEvents)r.removeEventListener(i.start,t.onTouchStart,!1),e.removeEventListener(i.move,t.onTouchMove,u),e.removeEventListener(i.end,t.onTouchEnd,!1);else{if(l.touch){var c=!("onTouchStart"!==i.start||!l.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};r.removeEventListener(i.start,t.onTouchStart,c),r.removeEventListener(i.move,t.onTouchMove,u),r.removeEventListener(i.end,t.onTouchEnd,c),i.cancel&&r.removeEventListener(i.cancel,t.onTouchEnd,c)}(n.simulateTouch&&!o.ios&&!o.android||n.simulateTouch&&!l.touch&&o.ios)&&(r.removeEventListener("mousedown",t.onTouchStart,!1),e.removeEventListener("mousemove",t.onTouchMove,u),e.removeEventListener("mouseup",t.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&r.removeEventListener("click",t.onClick,!0),n.cssMode&&s.removeEventListener("scroll",t.onScroll),t.off(o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",N)}},breakpoints:{setBreakpoint:function(){var t=this,e=t.activeIndex,n=t.initialized,i=t.loopedSlides,r=void 0===i?0:i,a=t.params,s=t.$el,o=a.breakpoints;if(o&&(!o||0!==Object.keys(o).length)){var l=t.getBreakpoint(o);if(l&&t.currentBreakpoint!==l){var u=l in o?o[l]:void 0;u&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(t){var e=u[t];void 0!==e&&(u[t]="slidesPerView"!==t||"AUTO"!==e&&"auto"!==e?"slidesPerView"===t?parseFloat(e):parseInt(e,10):"auto")}));var c=u||t.originalParams,h=a.slidesPerColumn>1,d=c.slidesPerColumn>1;h&&!d?(s.removeClass(a.containerModifierClass+"multirow "+a.containerModifierClass+"multirow-column"),t.emitContainerClasses()):!h&&d&&(s.addClass(a.containerModifierClass+"multirow"),"column"===c.slidesPerColumnFill&&s.addClass(a.containerModifierClass+"multirow-column"),t.emitContainerClasses());var f=c.direction&&c.direction!==a.direction,p=a.loop&&(c.slidesPerView!==a.slidesPerView||f);f&&n&&t.changeDirection(),S(t.params,c),S(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),t.currentBreakpoint=l,t.emit("_beforeBreakpoint",c),p&&n&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-r+t.loopedSlides,0,!1)),t.emit("breakpoint",c)}}},getBreakpoint:function(t){var e=o();if(t){var n=!1,i=Object.keys(t).map((function(t){if("string"==typeof t&&0===t.indexOf("@")){var n=parseFloat(t.substr(1));return{value:e.innerHeight*n,point:t}}return{value:t,point:t}}));i.sort((function(t,e){return parseInt(t.value,10)-parseInt(e.value,10)}));for(var r=0;r<i.length;r+=1){var a=i[r],s=a.point;a.value<=e.innerWidth&&(n=s)}return n||"max"}}},checkOverflow:{checkOverflow:function(){var t=this,e=t.params,n=t.isLocked,i=t.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(t.slides.length-1)+t.slides[0].offsetWidth*t.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&i?t.isLocked=i<=t.size:t.isLocked=1===t.snapGrid.length,t.allowSlideNext=!t.isLocked,t.allowSlidePrev=!t.isLocked,n!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock"),n&&n!==t.isLocked&&(t.isEnd=!1,t.navigation&&t.navigation.update())}},classes:{addClasses:function(){var t=this,e=t.classNames,n=t.params,i=t.rtl,r=t.$el,a=t.device,s=t.support,o=[];o.push("initialized"),o.push(n.direction),s.pointerEvents&&!s.touch&&o.push("pointer-events"),n.freeMode&&o.push("free-mode"),n.autoHeight&&o.push("autoheight"),i&&o.push("rtl"),n.slidesPerColumn>1&&(o.push("multirow"),"column"===n.slidesPerColumnFill&&o.push("multirow-column")),a.android&&o.push("android"),a.ios&&o.push("ios"),n.cssMode&&o.push("css-mode"),o.forEach((function(t){e.push(n.containerModifierClass+t)})),r.addClass(e.join(" ")),t.emitContainerClasses()},removeClasses:function(){var t=this,e=t.$el,n=t.classNames;e.removeClass(n.join(" ")),t.emitContainerClasses()}},images:{loadImage:function(t,e,n,i,r,a){var s,l=o();function u(){a&&a()}g(t).parent("picture")[0]||t.complete&&r?u():e?((s=new l.Image).onload=u,s.onerror=u,i&&(s.sizes=i),n&&(s.srcset=n),e&&(s.src=e)):u()},preloadImages:function(){var t=this;function e(){null!=t&&t&&!t.destroyed&&(void 0!==t.imagesLoaded&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}t.imagesToLoad=t.$el.find("img");for(var n=0;n<t.imagesToLoad.length;n+=1){var i=t.imagesToLoad[n];t.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,e)}}}},j={},V=function(){function e(){for(var t,n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];if(1===r.length&&r[0].constructor&&r[0].constructor===Object?n=r[0]:(t=r[0],n=r[1]),n||(n={}),n=S({},n),t&&!n.el&&(n.el=t),n.el&&g(n.el).length>1){var s=[];return g(n.el).each((function(t){var i=S({},n,{el:t});s.push(new e(i))})),s}var o=this;o.support=C(),o.device=A({userAgent:n.userAgent}),o.browser=L(),o.eventsListeners={},o.eventsAnyListeners=[],void 0===o.modules&&(o.modules={}),Object.keys(o.modules).forEach((function(t){var e=o.modules[t];if(e.params){var i=Object.keys(e.params)[0],r=e.params[i];if("object"!=typeof r||null===r)return;if(!(i in n)||!("enabled"in r))return;!0===n[i]&&(n[i]={enabled:!0}),"object"!=typeof n[i]||"enabled"in n[i]||(n[i].enabled=!0),n[i]||(n[i]={enabled:!1})}}));var l,u,c=S({},H);return o.useParams(c),o.params=S({},c,j,n),o.originalParams=S({},o.params),o.passedParams=S({},n),o.params&&o.params.on&&Object.keys(o.params.on).forEach((function(t){o.on(t,o.params.on[t])})),o.params&&o.params.onAny&&o.onAny(o.params.onAny),o.$=g,S(o,{el:t,classNames:[],slides:g(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===o.params.direction},isVertical:function(){return"vertical"===o.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEvents:(l=["touchstart","touchmove","touchend","touchcancel"],u=["mousedown","mousemove","mouseup"],o.support.pointerEvents&&(u=["pointerdown","pointermove","pointerup"]),o.touchEventsTouch={start:l[0],move:l[1],end:l[2],cancel:l[3]},o.touchEventsDesktop={start:u[0],move:u[1],end:u[2]},o.support.touch||!o.params.simulateTouch?o.touchEventsTouch:o.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:w(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.useModules(),o.emit("_swiper"),o.params.init&&o.init(),o}var n,i,r=e.prototype;return r.emitContainerClasses=function(){var t=this;if(t.params._emitClasses&&t.el){var e=t.el.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-container")||0===e.indexOf(t.params.containerModifierClass)}));t.emit("_containerClasses",e.join(" "))}},r.getSlideClasses=function(t){var e=this;return t.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-slide")||0===t.indexOf(e.params.slideClass)})).join(" ")},r.emitSlidesClasses=function(){var t=this;if(t.params._emitClasses&&t.el){var e=[];t.slides.each((function(n){var i=t.getSlideClasses(n);e.push({slideEl:n,classNames:i}),t.emit("_slideClass",n,i)})),t.emit("_slideClasses",e)}},r.slidesPerViewDynamic=function(){var t=this,e=t.params,n=t.slides,i=t.slidesGrid,r=t.size,a=t.activeIndex,s=1;if(e.centeredSlides){for(var o,l=n[a].swiperSlideSize,u=a+1;u<n.length;u+=1)n[u]&&!o&&(s+=1,(l+=n[u].swiperSlideSize)>r&&(o=!0));for(var c=a-1;c>=0;c-=1)n[c]&&!o&&(s+=1,(l+=n[c].swiperSlideSize)>r&&(o=!0))}else for(var h=a+1;h<n.length;h+=1)i[h]-i[a]<r&&(s+=1);return s},r.update=function(){var t=this;if(t&&!t.destroyed){var e=t.snapGrid,n=t.params;n.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.params.freeMode?(i(),t.params.autoHeight&&t.updateAutoHeight()):(("auto"===t.params.slidesPerView||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0))||i(),n.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}function i(){var e=t.rtlTranslate?-1*t.translate:t.translate,n=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(n),t.updateActiveIndex(),t.updateSlidesClasses()}},r.changeDirection=function(t,e){void 0===e&&(e=!0);var n=this,i=n.params.direction;return t||(t="horizontal"===i?"vertical":"horizontal"),t===i||"horizontal"!==t&&"vertical"!==t||(n.$el.removeClass(""+n.params.containerModifierClass+i).addClass(""+n.params.containerModifierClass+t),n.emitContainerClasses(),n.params.direction=t,n.slides.each((function(e){"vertical"===t?e.style.width="":e.style.height=""})),n.emit("changeDirection"),e&&n.update()),n},r.mount=function(t){var e=this;if(!e.mounted){var n,i=g(t||e.params.el);(t=i[0])&&(t.swiper=e,t&&t.shadowRoot&&t.shadowRoot.querySelector?(n=g(t.shadowRoot.querySelector("."+e.params.wrapperClass))).children=function(t){return i.children(t)}:n=i.children("."+e.params.wrapperClass),S(e,{$el:i,el:t,$wrapperEl:n,wrapperEl:n[0],mounted:!0,rtl:"rtl"===t.dir.toLowerCase()||"rtl"===i.css("direction"),rtlTranslate:"horizontal"===e.params.direction&&("rtl"===t.dir.toLowerCase()||"rtl"===i.css("direction")),wrongRTL:"-webkit-box"===n.css("display")}))}},r.init=function(t){var e=this;e.initialized||(e.mount(t),e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit),e.attachEvents(),e.initialized=!0,e.emit("init"),e.emit("afterInit"))},r.destroy=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var n,i=this,r=i.params,a=i.$el,s=i.$wrapperEl,o=i.slides;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),e&&(i.removeClasses(),a.removeAttr("style"),s.removeAttr("style"),o&&o.length&&o.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach((function(t){i.off(t)})),!1!==t&&(i.$el[0].swiper=null,n=i,Object.keys(n).forEach((function(t){try{n[t]=null}catch(t){}try{delete n[t]}catch(t){}}))),i.destroyed=!0),null},e.extendDefaults=function(t){S(j,t)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var n=t.name||Object.keys(e.prototype.modules).length+"_"+w();e.prototype.modules[n]=t},e.use=function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)},n=e,i=[{key:"extendedDefaults",get:function(){return j}},{key:"defaults",get:function(){return H}}],null&&t(n.prototype,null),i&&t(n,i),e}();Object.keys(G).forEach((function(t){Object.keys(G[t]).forEach((function(e){V.prototype[e]=G[t][e]}))})),V.use([P,I]);var W={update:function(t){var e=this,n=e.params,i=n.slidesPerView,r=n.slidesPerGroup,a=n.centeredSlides,s=e.params.virtual,o=s.addSlidesBefore,l=s.addSlidesAfter,u=e.virtual,c=u.from,h=u.to,d=u.slides,f=u.slidesGrid,p=u.renderSlide,m=u.offset;e.updateActiveIndex();var g,v,y,_=e.activeIndex||0;g=e.rtlTranslate?"right":e.isHorizontal()?"left":"top",a?(v=Math.floor(i/2)+r+l,y=Math.floor(i/2)+r+o):(v=i+(r-1)+l,y=r+o);var x=Math.max((_||0)-y,0),b=Math.min((_||0)+v,d.length-1),w=(e.slidesGrid[x]||0)-(e.slidesGrid[0]||0);function T(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load()}if(S(e.virtual,{from:x,to:b,offset:w,slidesGrid:e.slidesGrid}),c===x&&h===b&&!t)return e.slidesGrid!==f&&w!==m&&e.slides.css(g,w+"px"),void e.updateProgress();if(e.params.virtual.renderExternal)return e.params.virtual.renderExternal.call(e,{offset:w,from:x,to:b,slides:function(){for(var t=[],e=x;e<=b;e+=1)t.push(d[e]);return t}()}),void(e.params.virtual.renderExternalUpdate&&T());var M=[],E=[];if(t)e.$wrapperEl.find("."+e.params.slideClass).remove();else for(var C=c;C<=h;C+=1)(C<x||C>b)&&e.$wrapperEl.find("."+e.params.slideClass+'[data-swiper-slide-index="'+C+'"]').remove();for(var A=0;A<d.length;A+=1)A>=x&&A<=b&&(void 0===h||t?E.push(A):(A>h&&E.push(A),A<c&&M.push(A)));E.forEach((function(t){e.$wrapperEl.append(p(d[t],t))})),M.sort((function(t,e){return e-t})).forEach((function(t){e.$wrapperEl.prepend(p(d[t],t))})),e.$wrapperEl.children(".swiper-slide").css(g,w+"px"),T()},renderSlide:function(t,e){var n=this,i=n.params.virtual;if(i.cache&&n.virtual.cache[e])return n.virtual.cache[e];var r=i.renderSlide?g(i.renderSlide.call(n,t,e)):g('<div class="'+n.params.slideClass+'" data-swiper-slide-index="'+e+'">'+t+"</div>");return r.attr("data-swiper-slide-index")||r.attr("data-swiper-slide-index",e),i.cache&&(n.virtual.cache[e]=r),r},appendSlide:function(t){var e=this;if("object"==typeof t&&"length"in t)for(var n=0;n<t.length;n+=1)t[n]&&e.virtual.slides.push(t[n]);else e.virtual.slides.push(t);e.virtual.update(!0)},prependSlide:function(t){var e=this,n=e.activeIndex,i=n+1,r=1;if(Array.isArray(t)){for(var a=0;a<t.length;a+=1)t[a]&&e.virtual.slides.unshift(t[a]);i=n+t.length,r=t.length}else e.virtual.slides.unshift(t);if(e.params.virtual.cache){var s=e.virtual.cache,o={};Object.keys(s).forEach((function(t){var e=s[t],n=e.attr("data-swiper-slide-index");n&&e.attr("data-swiper-slide-index",parseInt(n,10)+1),o[parseInt(t,10)+r]=e})),e.virtual.cache=o}e.virtual.update(!0),e.slideTo(i,0)},removeSlide:function(t){var e=this;if(null!=t){var n=e.activeIndex;if(Array.isArray(t))for(var i=t.length-1;i>=0;i-=1)e.virtual.slides.splice(t[i],1),e.params.virtual.cache&&delete e.virtual.cache[t[i]],t[i]<n&&(n-=1),n=Math.max(n,0);else e.virtual.slides.splice(t,1),e.params.virtual.cache&&delete e.virtual.cache[t],t<n&&(n-=1),n=Math.max(n,0);e.virtual.update(!0),e.slideTo(n,0)}},removeAllSlides:function(){var t=this;t.virtual.slides=[],t.params.virtual.cache&&(t.virtual.cache={}),t.virtual.update(!0),t.slideTo(0,0)}},q={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}},create:function(){E(this,{virtual:e({},W,{slides:this.params.virtual.slides,cache:{}})})},on:{beforeInit:function(t){if(t.params.virtual.enabled){t.classNames.push(t.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};S(t.params,e),S(t.originalParams,e),t.params.initialSlide||t.virtual.update()}},setTranslate:function(t){t.params.virtual.enabled&&t.virtual.update()}}},X={handle:function(t){var e=this,n=o(),i=a(),r=e.rtlTranslate,s=t;s.originalEvent&&(s=s.originalEvent);var l=s.keyCode||s.charCode,u=e.params.keyboard.pageUpDown,c=u&&33===l,h=u&&34===l,d=37===l,f=39===l,p=38===l,m=40===l;if(!e.allowSlideNext&&(e.isHorizontal()&&f||e.isVertical()&&m||h))return!1;if(!e.allowSlidePrev&&(e.isHorizontal()&&d||e.isVertical()&&p||c))return!1;if(!(s.shiftKey||s.altKey||s.ctrlKey||s.metaKey||i.activeElement&&i.activeElement.nodeName&&("input"===i.activeElement.nodeName.toLowerCase()||"textarea"===i.activeElement.nodeName.toLowerCase()))){if(e.params.keyboard.onlyInViewport&&(c||h||d||f||p||m)){var g=!1;if(e.$el.parents("."+e.params.slideClass).length>0&&0===e.$el.parents("."+e.params.slideActiveClass).length)return;var v=n.innerWidth,y=n.innerHeight,_=e.$el.offset();r&&(_.left-=e.$el[0].scrollLeft);for(var x=[[_.left,_.top],[_.left+e.width,_.top],[_.left,_.top+e.height],[_.left+e.width,_.top+e.height]],b=0;b<x.length;b+=1){var w=x[b];if(w[0]>=0&&w[0]<=v&&w[1]>=0&&w[1]<=y){if(0===w[0]&&0===w[1])continue;g=!0}}if(!g)return}e.isHorizontal()?((c||h||d||f)&&(s.preventDefault?s.preventDefault():s.returnValue=!1),((h||f)&&!r||(c||d)&&r)&&e.slideNext(),((c||d)&&!r||(h||f)&&r)&&e.slidePrev()):((c||h||p||m)&&(s.preventDefault?s.preventDefault():s.returnValue=!1),(h||m)&&e.slideNext(),(c||p)&&e.slidePrev()),e.emit("keyPress",l)}},enable:function(){var t=this,e=a();t.keyboard.enabled||(g(e).on("keydown",t.keyboard.handle),t.keyboard.enabled=!0)},disable:function(){var t=this,e=a();t.keyboard.enabled&&(g(e).off("keydown",t.keyboard.handle),t.keyboard.enabled=!1)}},Y={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){E(this,{keyboard:e({enabled:!1},X)})},on:{init:function(t){t.params.keyboard.enabled&&t.keyboard.enable()},destroy:function(t){t.keyboard.enabled&&t.keyboard.disable()}}},$={lastScrollTime:w(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return o().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var t=a(),e="onwheel",n=e in t;if(!n){var i=t.createElement("div");i.setAttribute(e,"return;"),n="function"==typeof i.onwheel}return!n&&t.implementation&&t.implementation.hasFeature&&!0!==t.implementation.hasFeature("","")&&(n=t.implementation.hasFeature("Events.wheel","3.0")),n}()?"wheel":"mousewheel"},normalize:function(t){var e=0,n=0,i=0,r=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),i=10*e,r=10*n,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(i=t.deltaX),t.shiftKey&&!i&&(i=r,r=0),(i||r)&&t.deltaMode&&(1===t.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!e&&(e=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:e,spinY:n,pixelX:i,pixelY:r}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(t){var e=t,n=this,i=n.params.mousewheel;n.params.cssMode&&e.preventDefault();var r=n.$el;if("container"!==n.params.mousewheel.eventsTarget&&(r=g(n.params.mousewheel.eventsTarget)),!n.mouseEntered&&!r[0].contains(e.target)&&!i.releaseOnEdges)return!0;e.originalEvent&&(e=e.originalEvent);var a=0,s=n.rtlTranslate?-1:1,o=$.normalize(e);if(i.forceToAxis)if(n.isHorizontal()){if(!(Math.abs(o.pixelX)>Math.abs(o.pixelY)))return!0;a=-o.pixelX*s}else{if(!(Math.abs(o.pixelY)>Math.abs(o.pixelX)))return!0;a=-o.pixelY}else a=Math.abs(o.pixelX)>Math.abs(o.pixelY)?-o.pixelX*s:-o.pixelY;if(0===a)return!0;i.invert&&(a=-a);var l=n.getTranslate()+a*i.sensitivity;if(l>=n.minTranslate()&&(l=n.minTranslate()),l<=n.maxTranslate()&&(l=n.maxTranslate()),(!!n.params.loop||!(l===n.minTranslate()||l===n.maxTranslate()))&&n.params.nested&&e.stopPropagation(),n.params.freeMode){var u={time:w(),delta:Math.abs(a),direction:Math.sign(a)},c=n.mousewheel.lastEventBeforeSnap,h=c&&u.time<c.time+500&&u.delta<=c.delta&&u.direction===c.direction;if(!h){n.mousewheel.lastEventBeforeSnap=void 0,n.params.loop&&n.loopFix();var d=n.getTranslate()+a*i.sensitivity,f=n.isBeginning,p=n.isEnd;if(d>=n.minTranslate()&&(d=n.minTranslate()),d<=n.maxTranslate()&&(d=n.maxTranslate()),n.setTransition(0),n.setTranslate(d),n.updateProgress(),n.updateActiveIndex(),n.updateSlidesClasses(),(!f&&n.isBeginning||!p&&n.isEnd)&&n.updateSlidesClasses(),n.params.freeModeSticky){clearTimeout(n.mousewheel.timeout),n.mousewheel.timeout=void 0;var m=n.mousewheel.recentWheelEvents;m.length>=15&&m.shift();var v=m.length?m[m.length-1]:void 0,y=m[0];if(m.push(u),v&&(u.delta>v.delta||u.direction!==v.direction))m.splice(0);else if(m.length>=15&&u.time-y.time<500&&y.delta-u.delta>=1&&u.delta<=6){var _=a>0?.8:.2;n.mousewheel.lastEventBeforeSnap=u,m.splice(0),n.mousewheel.timeout=b((function(){n.slideToClosest(n.params.speed,!0,void 0,_)}),0)}n.mousewheel.timeout||(n.mousewheel.timeout=b((function(){n.mousewheel.lastEventBeforeSnap=u,m.splice(0),n.slideToClosest(n.params.speed,!0,void 0,.5)}),500))}if(h||n.emit("scroll",e),n.params.autoplay&&n.params.autoplayDisableOnInteraction&&n.autoplay.stop(),d===n.minTranslate()||d===n.maxTranslate())return!0}}else{var x={time:w(),delta:Math.abs(a),direction:Math.sign(a),raw:t},T=n.mousewheel.recentWheelEvents;T.length>=2&&T.shift();var M=T.length?T[T.length-1]:void 0;if(T.push(x),M?(x.direction!==M.direction||x.delta>M.delta||x.time>M.time+150)&&n.mousewheel.animateSlider(x):n.mousewheel.animateSlider(x),n.mousewheel.releaseScroll(x))return!0}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},animateSlider:function(t){var e=this,n=o();return!(this.params.mousewheel.thresholdDelta&&t.delta<this.params.mousewheel.thresholdDelta||this.params.mousewheel.thresholdTime&&w()-e.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime||!(t.delta>=6&&w()-e.mousewheel.lastScrollTime<60)&&(t.direction<0?e.isEnd&&!e.params.loop||e.animating||(e.slideNext(),e.emit("scroll",t.raw)):e.isBeginning&&!e.params.loop||e.animating||(e.slidePrev(),e.emit("scroll",t.raw)),e.mousewheel.lastScrollTime=(new n.Date).getTime(),1))},releaseScroll:function(t){var e=this,n=e.params.mousewheel;if(t.direction<0){if(e.isEnd&&!e.params.loop&&n.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&n.releaseOnEdges)return!0;return!1},enable:function(){var t=this,e=$.event();if(t.params.cssMode)return t.wrapperEl.removeEventListener(e,t.mousewheel.handle),!0;if(!e)return!1;if(t.mousewheel.enabled)return!1;var n=t.$el;return"container"!==t.params.mousewheel.eventsTarget&&(n=g(t.params.mousewheel.eventsTarget)),n.on("mouseenter",t.mousewheel.handleMouseEnter),n.on("mouseleave",t.mousewheel.handleMouseLeave),n.on(e,t.mousewheel.handle),t.mousewheel.enabled=!0,!0},disable:function(){var t=this,e=$.event();if(t.params.cssMode)return t.wrapperEl.addEventListener(e,t.mousewheel.handle),!0;if(!e)return!1;if(!t.mousewheel.enabled)return!1;var n=t.$el;return"container"!==t.params.mousewheel.eventsTarget&&(n=g(t.params.mousewheel.eventsTarget)),n.off(e,t.mousewheel.handle),t.mousewheel.enabled=!1,!0}},Z={update:function(){var t=this,e=t.params.navigation;if(!t.params.loop){var n=t.navigation,i=n.$nextEl,r=n.$prevEl;r&&r.length>0&&(t.isBeginning?r.addClass(e.disabledClass):r.removeClass(e.disabledClass),r[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](e.lockClass)),i&&i.length>0&&(t.isEnd?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(t){var e=this;t.preventDefault(),e.isBeginning&&!e.params.loop||e.slidePrev()},onNextClick:function(t){var e=this;t.preventDefault(),e.isEnd&&!e.params.loop||e.slideNext()},init:function(){var t,e,n=this,i=n.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(t=g(i.nextEl),n.params.uniqueNavElements&&"string"==typeof i.nextEl&&t.length>1&&1===n.$el.find(i.nextEl).length&&(t=n.$el.find(i.nextEl))),i.prevEl&&(e=g(i.prevEl),n.params.uniqueNavElements&&"string"==typeof i.prevEl&&e.length>1&&1===n.$el.find(i.prevEl).length&&(e=n.$el.find(i.prevEl))),t&&t.length>0&&t.on("click",n.navigation.onNextClick),e&&e.length>0&&e.on("click",n.navigation.onPrevClick),S(n.navigation,{$nextEl:t,nextEl:t&&t[0],$prevEl:e,prevEl:e&&e[0]}))},destroy:function(){var t=this,e=t.navigation,n=e.$nextEl,i=e.$prevEl;n&&n.length&&(n.off("click",t.navigation.onNextClick),n.removeClass(t.params.navigation.disabledClass)),i&&i.length&&(i.off("click",t.navigation.onPrevClick),i.removeClass(t.params.navigation.disabledClass))}},J={update:function(){var t=this,e=t.rtl,n=t.params.pagination;if(n.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var i,r=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,a=t.pagination.$el,s=t.params.loop?Math.ceil((r-2*t.loopedSlides)/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?((i=Math.ceil((t.activeIndex-t.loopedSlides)/t.params.slidesPerGroup))>r-1-2*t.loopedSlides&&(i-=r-2*t.loopedSlides),i>s-1&&(i-=s),i<0&&"bullets"!==t.params.paginationType&&(i=s+i)):i=void 0!==t.snapIndex?t.snapIndex:t.activeIndex||0,"bullets"===n.type&&t.pagination.bullets&&t.pagination.bullets.length>0){var o,l,u,c=t.pagination.bullets;if(n.dynamicBullets&&(t.pagination.bulletSize=c.eq(0)[t.isHorizontal()?"outerWidth":"outerHeight"](!0),a.css(t.isHorizontal()?"width":"height",t.pagination.bulletSize*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==t.previousIndex&&(t.pagination.dynamicBulletIndex+=i-t.previousIndex,t.pagination.dynamicBulletIndex>n.dynamicMainBullets-1?t.pagination.dynamicBulletIndex=n.dynamicMainBullets-1:t.pagination.dynamicBulletIndex<0&&(t.pagination.dynamicBulletIndex=0)),o=i-t.pagination.dynamicBulletIndex,u=((l=o+(Math.min(c.length,n.dynamicMainBullets)-1))+o)/2),c.removeClass(n.bulletActiveClass+" "+n.bulletActiveClass+"-next "+n.bulletActiveClass+"-next-next "+n.bulletActiveClass+"-prev "+n.bulletActiveClass+"-prev-prev "+n.bulletActiveClass+"-main"),a.length>1)c.each((function(t){var e=g(t),r=e.index();r===i&&e.addClass(n.bulletActiveClass),n.dynamicBullets&&(r>=o&&r<=l&&e.addClass(n.bulletActiveClass+"-main"),r===o&&e.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),r===l&&e.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next"))}));else{var h=c.eq(i),d=h.index();if(h.addClass(n.bulletActiveClass),n.dynamicBullets){for(var f=c.eq(o),p=c.eq(l),m=o;m<=l;m+=1)c.eq(m).addClass(n.bulletActiveClass+"-main");if(t.params.loop)if(d>=c.length-n.dynamicMainBullets){for(var v=n.dynamicMainBullets;v>=0;v-=1)c.eq(c.length-v).addClass(n.bulletActiveClass+"-main");c.eq(c.length-n.dynamicMainBullets-1).addClass(n.bulletActiveClass+"-prev")}else f.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),p.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next");else f.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),p.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next")}}if(n.dynamicBullets){var y=Math.min(c.length,n.dynamicMainBullets+4),_=(t.pagination.bulletSize*y-t.pagination.bulletSize)/2-u*t.pagination.bulletSize,x=e?"right":"left";c.css(t.isHorizontal()?x:"top",_+"px")}}if("fraction"===n.type&&(a.find("."+n.currentClass).text(n.formatFractionCurrent(i+1)),a.find("."+n.totalClass).text(n.formatFractionTotal(s))),"progressbar"===n.type){var b;b=n.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";var w=(i+1)/s,T=1,M=1;"horizontal"===b?T=w:M=w,a.find("."+n.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+T+") scaleY("+M+")").transition(t.params.speed)}"custom"===n.type&&n.renderCustom?(a.html(n.renderCustom(t,i+1,s)),t.emit("paginationRender",a[0])):t.emit("paginationUpdate",a[0]),a[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](n.lockClass)}},render:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var n=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,i=t.pagination.$el,r="";if("bullets"===e.type){for(var a=t.params.loop?Math.ceil((n-2*t.loopedSlides)/t.params.slidesPerGroup):t.snapGrid.length,s=0;s<a;s+=1)e.renderBullet?r+=e.renderBullet.call(t,s,e.bulletClass):r+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";i.html(r),t.pagination.bullets=i.find("."+e.bulletClass.replace(/ /g,"."))}"fraction"===e.type&&(r=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',i.html(r)),"progressbar"===e.type&&(r=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',i.html(r)),"custom"!==e.type&&t.emit("paginationRender",t.pagination.$el[0])}},init:function(){var t=this,e=t.params.pagination;if(e.el){var n=g(e.el);0!==n.length&&(t.params.uniqueNavElements&&"string"==typeof e.el&&n.length>1&&(n=t.$el.find(e.el)),"bullets"===e.type&&e.clickable&&n.addClass(e.clickableClass),n.addClass(e.modifierClass+e.type),"bullets"===e.type&&e.dynamicBullets&&(n.addClass(""+e.modifierClass+e.type+"-dynamic"),t.pagination.dynamicBulletIndex=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&n.addClass(e.progressbarOppositeClass),e.clickable&&n.on("click","."+e.bulletClass.replace(/ /g,"."),(function(e){e.preventDefault();var n=g(this).index()*t.params.slidesPerGroup;t.params.loop&&(n+=t.loopedSlides),t.slideTo(n)})),S(t.pagination,{$el:n,el:n[0]}))}},destroy:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var n=t.pagination.$el;n.removeClass(e.hiddenClass),n.removeClass(e.modifierClass+e.type),t.pagination.bullets&&t.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&n.off("click","."+e.bulletClass.replace(/ /g,"."))}}},Q={setTranslate:function(){var t=this;if(t.params.scrollbar.el&&t.scrollbar.el){var e=t.scrollbar,n=t.rtlTranslate,i=t.progress,r=e.dragSize,a=e.trackSize,s=e.$dragEl,o=e.$el,l=t.params.scrollbar,u=r,c=(a-r)*i;n?(c=-c)>0?(u=r-c,c=0):-c+r>a&&(u=a+c):c<0?(u=r+c,c=0):c+r>a&&(u=a-c),t.isHorizontal()?(s.transform("translate3d("+c+"px, 0, 0)"),s[0].style.width=u+"px"):(s.transform("translate3d(0px, "+c+"px, 0)"),s[0].style.height=u+"px"),l.hide&&(clearTimeout(t.scrollbar.timeout),o[0].style.opacity=1,t.scrollbar.timeout=setTimeout((function(){o[0].style.opacity=0,o.transition(400)}),1e3))}},setTransition:function(t){var e=this;e.params.scrollbar.el&&e.scrollbar.el&&e.scrollbar.$dragEl.transition(t)},updateSize:function(){var t=this;if(t.params.scrollbar.el&&t.scrollbar.el){var e=t.scrollbar,n=e.$dragEl,i=e.$el;n[0].style.width="",n[0].style.height="";var r,a=t.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,s=t.size/t.virtualSize,o=s*(a/t.size);r="auto"===t.params.scrollbar.dragSize?a*s:parseInt(t.params.scrollbar.dragSize,10),t.isHorizontal()?n[0].style.width=r+"px":n[0].style.height=r+"px",i[0].style.display=s>=1?"none":"",t.params.scrollbar.hide&&(i[0].style.opacity=0),S(e,{trackSize:a,divider:s,moveDivider:o,dragSize:r}),e.$el[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](t.params.scrollbar.lockClass)}},getPointerPosition:function(t){return this.isHorizontal()?"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientX:t.clientX:"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientY:t.clientY},setDragPosition:function(t){var e,n=this,i=n.scrollbar,r=n.rtlTranslate,a=i.$el,s=i.dragSize,o=i.trackSize,l=i.dragStartPos;e=(i.getPointerPosition(t)-a.offset()[n.isHorizontal()?"left":"top"]-(null!==l?l:s/2))/(o-s),e=Math.max(Math.min(e,1),0),r&&(e=1-e);var u=n.minTranslate()+(n.maxTranslate()-n.minTranslate())*e;n.updateProgress(u),n.setTranslate(u),n.updateActiveIndex(),n.updateSlidesClasses()},onDragStart:function(t){var e=this,n=e.params.scrollbar,i=e.scrollbar,r=e.$wrapperEl,a=i.$el,s=i.$dragEl;e.scrollbar.isTouched=!0,e.scrollbar.dragStartPos=t.target===s[0]||t.target===s?i.getPointerPosition(t)-t.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,t.preventDefault(),t.stopPropagation(),r.transition(100),s.transition(100),i.setDragPosition(t),clearTimeout(e.scrollbar.dragTimeout),a.transition(0),n.hide&&a.css("opacity",1),e.params.cssMode&&e.$wrapperEl.css("scroll-snap-type","none"),e.emit("scrollbarDragStart",t)},onDragMove:function(t){var e=this,n=e.scrollbar,i=e.$wrapperEl,r=n.$el,a=n.$dragEl;e.scrollbar.isTouched&&(t.preventDefault?t.preventDefault():t.returnValue=!1,n.setDragPosition(t),i.transition(0),r.transition(0),a.transition(0),e.emit("scrollbarDragMove",t))},onDragEnd:function(t){var e=this,n=e.params.scrollbar,i=e.scrollbar,r=e.$wrapperEl,a=i.$el;e.scrollbar.isTouched&&(e.scrollbar.isTouched=!1,e.params.cssMode&&(e.$wrapperEl.css("scroll-snap-type",""),r.transition("")),n.hide&&(clearTimeout(e.scrollbar.dragTimeout),e.scrollbar.dragTimeout=b((function(){a.css("opacity",0),a.transition(400)}),1e3)),e.emit("scrollbarDragEnd",t),n.snapOnRelease&&e.slideToClosest())},enableDraggable:function(){var t=this;if(t.params.scrollbar.el){var e=a(),n=t.scrollbar,i=t.touchEventsTouch,r=t.touchEventsDesktop,s=t.params,o=t.support,l=n.$el[0],u=!(!o.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},c=!(!o.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};l&&(o.touch?(l.addEventListener(i.start,t.scrollbar.onDragStart,u),l.addEventListener(i.move,t.scrollbar.onDragMove,u),l.addEventListener(i.end,t.scrollbar.onDragEnd,c)):(l.addEventListener(r.start,t.scrollbar.onDragStart,u),e.addEventListener(r.move,t.scrollbar.onDragMove,u),e.addEventListener(r.end,t.scrollbar.onDragEnd,c)))}},disableDraggable:function(){var t=this;if(t.params.scrollbar.el){var e=a(),n=t.scrollbar,i=t.touchEventsTouch,r=t.touchEventsDesktop,s=t.params,o=t.support,l=n.$el[0],u=!(!o.passiveListener||!s.passiveListeners)&&{passive:!1,capture:!1},c=!(!o.passiveListener||!s.passiveListeners)&&{passive:!0,capture:!1};l&&(o.touch?(l.removeEventListener(i.start,t.scrollbar.onDragStart,u),l.removeEventListener(i.move,t.scrollbar.onDragMove,u),l.removeEventListener(i.end,t.scrollbar.onDragEnd,c)):(l.removeEventListener(r.start,t.scrollbar.onDragStart,u),e.removeEventListener(r.move,t.scrollbar.onDragMove,u),e.removeEventListener(r.end,t.scrollbar.onDragEnd,c)))}},init:function(){var t=this;if(t.params.scrollbar.el){var e=t.scrollbar,n=t.$el,i=t.params.scrollbar,r=g(i.el);t.params.uniqueNavElements&&"string"==typeof i.el&&r.length>1&&1===n.find(i.el).length&&(r=n.find(i.el));var a=r.find("."+t.params.scrollbar.dragClass);0===a.length&&(a=g('<div class="'+t.params.scrollbar.dragClass+'"></div>'),r.append(a)),S(e,{$el:r,el:r[0],$dragEl:a,dragEl:a[0]}),i.draggable&&e.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},K={setTransform:function(t,e){var n=this.rtl,i=g(t),r=n?-1:1,a=i.attr("data-swiper-parallax")||"0",s=i.attr("data-swiper-parallax-x"),o=i.attr("data-swiper-parallax-y"),l=i.attr("data-swiper-parallax-scale"),u=i.attr("data-swiper-parallax-opacity");if(s||o?(s=s||"0",o=o||"0"):this.isHorizontal()?(s=a,o="0"):(o=a,s="0"),s=s.indexOf("%")>=0?parseInt(s,10)*e*r+"%":s*e*r+"px",o=o.indexOf("%")>=0?parseInt(o,10)*e+"%":o*e+"px",null!=u){var c=u-(u-1)*(1-Math.abs(e));i[0].style.opacity=c}if(null==l)i.transform("translate3d("+s+", "+o+", 0px)");else{var h=l-(l-1)*(1-Math.abs(e));i.transform("translate3d("+s+", "+o+", 0px) scale("+h+")")}},setTranslate:function(){var t=this,e=t.$el,n=t.slides,i=t.progress,r=t.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e){t.parallax.setTransform(e,i)})),n.each((function(e,n){var a=e.progress;t.params.slidesPerGroup>1&&"auto"!==t.params.slidesPerView&&(a+=Math.ceil(n/2)-i*(r.length-1)),a=Math.min(Math.max(a,-1),1),g(e).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e){t.parallax.setTransform(e,a)}))}))},setTransition:function(t){void 0===t&&(t=this.params.speed),this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e){var n=g(e),i=parseInt(n.attr("data-swiper-parallax-duration"),10)||t;0===t&&(i=0),n.transition(i)}))}},tt={getDistanceBetweenTouches:function(t){if(t.targetTouches.length<2)return 1;var e=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,i=t.targetTouches[1].pageX,r=t.targetTouches[1].pageY;return Math.sqrt(Math.pow(i-e,2)+Math.pow(r-n,2))},onGestureStart:function(t){var e=this,n=e.support,i=e.params.zoom,r=e.zoom,a=r.gesture;if(r.fakeGestureTouched=!1,r.fakeGestureMoved=!1,!n.gestures){if("touchstart"!==t.type||"touchstart"===t.type&&t.targetTouches.length<2)return;r.fakeGestureTouched=!0,a.scaleStart=tt.getDistanceBetweenTouches(t)}a.$slideEl&&a.$slideEl.length||(a.$slideEl=g(t.target).closest("."+e.params.slideClass),0===a.$slideEl.length&&(a.$slideEl=e.slides.eq(e.activeIndex)),a.$imageEl=a.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),a.$imageWrapEl=a.$imageEl.parent("."+i.containerClass),a.maxRatio=a.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==a.$imageWrapEl.length)?(a.$imageEl&&a.$imageEl.transition(0),e.zoom.isScaling=!0):a.$imageEl=void 0},onGestureChange:function(t){var e=this,n=e.support,i=e.params.zoom,r=e.zoom,a=r.gesture;if(!n.gestures){if("touchmove"!==t.type||"touchmove"===t.type&&t.targetTouches.length<2)return;r.fakeGestureMoved=!0,a.scaleMove=tt.getDistanceBetweenTouches(t)}a.$imageEl&&0!==a.$imageEl.length?(n.gestures?r.scale=t.scale*r.currentScale:r.scale=a.scaleMove/a.scaleStart*r.currentScale,r.scale>a.maxRatio&&(r.scale=a.maxRatio-1+Math.pow(r.scale-a.maxRatio+1,.5)),r.scale<i.minRatio&&(r.scale=i.minRatio+1-Math.pow(i.minRatio-r.scale+1,.5)),a.$imageEl.transform("translate3d(0,0,0) scale("+r.scale+")")):"gesturechange"===t.type&&r.onGestureStart(t)},onGestureEnd:function(t){var e=this,n=e.device,i=e.support,r=e.params.zoom,a=e.zoom,s=a.gesture;if(!i.gestures){if(!a.fakeGestureTouched||!a.fakeGestureMoved)return;if("touchend"!==t.type||"touchend"===t.type&&t.changedTouches.length<2&&!n.android)return;a.fakeGestureTouched=!1,a.fakeGestureMoved=!1}s.$imageEl&&0!==s.$imageEl.length&&(a.scale=Math.max(Math.min(a.scale,s.maxRatio),r.minRatio),s.$imageEl.transition(e.params.speed).transform("translate3d(0,0,0) scale("+a.scale+")"),a.currentScale=a.scale,a.isScaling=!1,1===a.scale&&(s.$slideEl=void 0))},onTouchStart:function(t){var e=this.device,n=this.zoom,i=n.gesture,r=n.image;i.$imageEl&&0!==i.$imageEl.length&&(r.isTouched||(e.android&&t.cancelable&&t.preventDefault(),r.isTouched=!0,r.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,r.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},onTouchMove:function(t){var e=this,n=e.zoom,i=n.gesture,r=n.image,a=n.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(e.allowClick=!1,r.isTouched&&i.$slideEl)){r.isMoved||(r.width=i.$imageEl[0].offsetWidth,r.height=i.$imageEl[0].offsetHeight,r.startX=T(i.$imageWrapEl[0],"x")||0,r.startY=T(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),e.rtl&&(r.startX=-r.startX,r.startY=-r.startY));var s=r.width*n.scale,o=r.height*n.scale;if(!(s<i.slideWidth&&o<i.slideHeight)){if(r.minX=Math.min(i.slideWidth/2-s/2,0),r.maxX=-r.minX,r.minY=Math.min(i.slideHeight/2-o/2,0),r.maxY=-r.minY,r.touchesCurrent.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,r.touchesCurrent.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,!r.isMoved&&!n.isScaling){if(e.isHorizontal()&&(Math.floor(r.minX)===Math.floor(r.startX)&&r.touchesCurrent.x<r.touchesStart.x||Math.floor(r.maxX)===Math.floor(r.startX)&&r.touchesCurrent.x>r.touchesStart.x))return void(r.isTouched=!1);if(!e.isHorizontal()&&(Math.floor(r.minY)===Math.floor(r.startY)&&r.touchesCurrent.y<r.touchesStart.y||Math.floor(r.maxY)===Math.floor(r.startY)&&r.touchesCurrent.y>r.touchesStart.y))return void(r.isTouched=!1)}t.cancelable&&t.preventDefault(),t.stopPropagation(),r.isMoved=!0,r.currentX=r.touchesCurrent.x-r.touchesStart.x+r.startX,r.currentY=r.touchesCurrent.y-r.touchesStart.y+r.startY,r.currentX<r.minX&&(r.currentX=r.minX+1-Math.pow(r.minX-r.currentX+1,.8)),r.currentX>r.maxX&&(r.currentX=r.maxX-1+Math.pow(r.currentX-r.maxX+1,.8)),r.currentY<r.minY&&(r.currentY=r.minY+1-Math.pow(r.minY-r.currentY+1,.8)),r.currentY>r.maxY&&(r.currentY=r.maxY-1+Math.pow(r.currentY-r.maxY+1,.8)),a.prevPositionX||(a.prevPositionX=r.touchesCurrent.x),a.prevPositionY||(a.prevPositionY=r.touchesCurrent.y),a.prevTime||(a.prevTime=Date.now()),a.x=(r.touchesCurrent.x-a.prevPositionX)/(Date.now()-a.prevTime)/2,a.y=(r.touchesCurrent.y-a.prevPositionY)/(Date.now()-a.prevTime)/2,Math.abs(r.touchesCurrent.x-a.prevPositionX)<2&&(a.x=0),Math.abs(r.touchesCurrent.y-a.prevPositionY)<2&&(a.y=0),a.prevPositionX=r.touchesCurrent.x,a.prevPositionY=r.touchesCurrent.y,a.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+r.currentX+"px, "+r.currentY+"px,0)")}}},onTouchEnd:function(){var t=this.zoom,e=t.gesture,n=t.image,i=t.velocity;if(e.$imageEl&&0!==e.$imageEl.length){if(!n.isTouched||!n.isMoved)return n.isTouched=!1,void(n.isMoved=!1);n.isTouched=!1,n.isMoved=!1;var r=300,a=300,s=i.x*r,o=n.currentX+s,l=i.y*a,u=n.currentY+l;0!==i.x&&(r=Math.abs((o-n.currentX)/i.x)),0!==i.y&&(a=Math.abs((u-n.currentY)/i.y));var c=Math.max(r,a);n.currentX=o,n.currentY=u;var h=n.width*t.scale,d=n.height*t.scale;n.minX=Math.min(e.slideWidth/2-h/2,0),n.maxX=-n.minX,n.minY=Math.min(e.slideHeight/2-d/2,0),n.maxY=-n.minY,n.currentX=Math.max(Math.min(n.currentX,n.maxX),n.minX),n.currentY=Math.max(Math.min(n.currentY,n.maxY),n.minY),e.$imageWrapEl.transition(c).transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}},onTransitionEnd:function(){var t=this,e=t.zoom,n=e.gesture;n.$slideEl&&t.previousIndex!==t.activeIndex&&(n.$imageEl&&n.$imageEl.transform("translate3d(0,0,0) scale(1)"),n.$imageWrapEl&&n.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,n.$slideEl=void 0,n.$imageEl=void 0,n.$imageWrapEl=void 0)},toggle:function(t){var e=this.zoom;e.scale&&1!==e.scale?e.out():e.in(t)},in:function(t){var e,n,i,r,a,s,l,u,c,h,d,f,p,m,g,v,y=this,_=o(),x=y.zoom,b=y.params.zoom,w=x.gesture,T=x.image;w.$slideEl||(y.params.virtual&&y.params.virtual.enabled&&y.virtual?w.$slideEl=y.$wrapperEl.children("."+y.params.slideActiveClass):w.$slideEl=y.slides.eq(y.activeIndex),w.$imageEl=w.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),w.$imageWrapEl=w.$imageEl.parent("."+b.containerClass)),w.$imageEl&&0!==w.$imageEl.length&&(w.$slideEl.addClass(""+b.zoomedSlideClass),void 0===T.touchesStart.x&&t?(e="touchend"===t.type?t.changedTouches[0].pageX:t.pageX,n="touchend"===t.type?t.changedTouches[0].pageY:t.pageY):(e=T.touchesStart.x,n=T.touchesStart.y),x.scale=w.$imageWrapEl.attr("data-swiper-zoom")||b.maxRatio,x.currentScale=w.$imageWrapEl.attr("data-swiper-zoom")||b.maxRatio,t?(g=w.$slideEl[0].offsetWidth,v=w.$slideEl[0].offsetHeight,i=w.$slideEl.offset().left+_.scrollX+g/2-e,r=w.$slideEl.offset().top+_.scrollY+v/2-n,l=w.$imageEl[0].offsetWidth,u=w.$imageEl[0].offsetHeight,c=l*x.scale,h=u*x.scale,p=-(d=Math.min(g/2-c/2,0)),m=-(f=Math.min(v/2-h/2,0)),(a=i*x.scale)<d&&(a=d),a>p&&(a=p),(s=r*x.scale)<f&&(s=f),s>m&&(s=m)):(a=0,s=0),w.$imageWrapEl.transition(300).transform("translate3d("+a+"px, "+s+"px,0)"),w.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+x.scale+")"))},out:function(){var t=this,e=t.zoom,n=t.params.zoom,i=e.gesture;i.$slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?i.$slideEl=t.$wrapperEl.children("."+t.params.slideActiveClass):i.$slideEl=t.slides.eq(t.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),i.$imageWrapEl=i.$imageEl.parent("."+n.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(e.scale=1,e.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+n.zoomedSlideClass),i.$slideEl=void 0)},toggleGestures:function(t){var e=this,n=e.zoom,i=n.slideSelector,r=n.passiveListener;e.$wrapperEl[t]("gesturestart",i,n.onGestureStart,r),e.$wrapperEl[t]("gesturechange",i,n.onGestureChange,r),e.$wrapperEl[t]("gestureend",i,n.onGestureEnd,r)},enableGestures:function(){this.zoom.gesturesEnabled||(this.zoom.gesturesEnabled=!0,this.zoom.toggleGestures("on"))},disableGestures:function(){this.zoom.gesturesEnabled&&(this.zoom.gesturesEnabled=!1,this.zoom.toggleGestures("off"))},enable:function(){var t=this,e=t.support,n=t.zoom;if(!n.enabled){n.enabled=!0;var i=!("touchstart"!==t.touchEvents.start||!e.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},r=!e.passiveListener||{passive:!1,capture:!0},a="."+t.params.slideClass;t.zoom.passiveListener=i,t.zoom.slideSelector=a,e.gestures?(t.$wrapperEl.on(t.touchEvents.start,t.zoom.enableGestures,i),t.$wrapperEl.on(t.touchEvents.end,t.zoom.disableGestures,i)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.on(t.touchEvents.start,a,n.onGestureStart,i),t.$wrapperEl.on(t.touchEvents.move,a,n.onGestureChange,r),t.$wrapperEl.on(t.touchEvents.end,a,n.onGestureEnd,i),t.touchEvents.cancel&&t.$wrapperEl.on(t.touchEvents.cancel,a,n.onGestureEnd,i)),t.$wrapperEl.on(t.touchEvents.move,"."+t.params.zoom.containerClass,n.onTouchMove,r)}},disable:function(){var t=this,e=t.zoom;if(e.enabled){var n=t.support;t.zoom.enabled=!1;var i=!("touchstart"!==t.touchEvents.start||!n.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},r=!n.passiveListener||{passive:!1,capture:!0},a="."+t.params.slideClass;n.gestures?(t.$wrapperEl.off(t.touchEvents.start,t.zoom.enableGestures,i),t.$wrapperEl.off(t.touchEvents.end,t.zoom.disableGestures,i)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.off(t.touchEvents.start,a,e.onGestureStart,i),t.$wrapperEl.off(t.touchEvents.move,a,e.onGestureChange,r),t.$wrapperEl.off(t.touchEvents.end,a,e.onGestureEnd,i),t.touchEvents.cancel&&t.$wrapperEl.off(t.touchEvents.cancel,a,e.onGestureEnd,i)),t.$wrapperEl.off(t.touchEvents.move,"."+t.params.zoom.containerClass,e.onTouchMove,r)}}},et={loadInSlide:function(t,e){void 0===e&&(e=!0);var n=this,i=n.params.lazy;if(void 0!==t&&0!==n.slides.length){var r=n.virtual&&n.params.virtual.enabled?n.$wrapperEl.children("."+n.params.slideClass+'[data-swiper-slide-index="'+t+'"]'):n.slides.eq(t),a=r.find("."+i.elementClass+":not(."+i.loadedClass+"):not(."+i.loadingClass+")");!r.hasClass(i.elementClass)||r.hasClass(i.loadedClass)||r.hasClass(i.loadingClass)||a.push(r[0]),0!==a.length&&a.each((function(t){var a=g(t);a.addClass(i.loadingClass);var s=a.attr("data-background"),o=a.attr("data-src"),l=a.attr("data-srcset"),u=a.attr("data-sizes"),c=a.parent("picture");n.loadImage(a[0],o||s,l,u,!1,(function(){if(null!=n&&n&&(!n||n.params)&&!n.destroyed){if(s?(a.css("background-image",'url("'+s+'")'),a.removeAttr("data-background")):(l&&(a.attr("srcset",l),a.removeAttr("data-srcset")),u&&(a.attr("sizes",u),a.removeAttr("data-sizes")),c.length&&c.children("source").each((function(t){var e=g(t);e.attr("data-srcset")&&(e.attr("srcset",e.attr("data-srcset")),e.removeAttr("data-srcset"))})),o&&(a.attr("src",o),a.removeAttr("data-src"))),a.addClass(i.loadedClass).removeClass(i.loadingClass),r.find("."+i.preloaderClass).remove(),n.params.loop&&e){var t=r.attr("data-swiper-slide-index");if(r.hasClass(n.params.slideDuplicateClass)){var h=n.$wrapperEl.children('[data-swiper-slide-index="'+t+'"]:not(.'+n.params.slideDuplicateClass+")");n.lazy.loadInSlide(h.index(),!1)}else{var d=n.$wrapperEl.children("."+n.params.slideDuplicateClass+'[data-swiper-slide-index="'+t+'"]');n.lazy.loadInSlide(d.index(),!1)}}n.emit("lazyImageReady",r[0],a[0]),n.params.autoHeight&&n.updateAutoHeight()}})),n.emit("lazyImageLoad",r[0],a[0])}))}},load:function(){var t=this,e=t.$wrapperEl,n=t.params,i=t.slides,r=t.activeIndex,a=t.virtual&&n.virtual.enabled,s=n.lazy,o=n.slidesPerView;function l(t){if(a){if(e.children("."+n.slideClass+'[data-swiper-slide-index="'+t+'"]').length)return!0}else if(i[t])return!0;return!1}function u(t){return a?g(t).attr("data-swiper-slide-index"):g(t).index()}if("auto"===o&&(o=0),t.lazy.initialImageLoaded||(t.lazy.initialImageLoaded=!0),t.params.watchSlidesVisibility)e.children("."+n.slideVisibleClass).each((function(e){var n=a?g(e).attr("data-swiper-slide-index"):g(e).index();t.lazy.loadInSlide(n)}));else if(o>1)for(var c=r;c<r+o;c+=1)l(c)&&t.lazy.loadInSlide(c);else t.lazy.loadInSlide(r);if(s.loadPrevNext)if(o>1||s.loadPrevNextAmount&&s.loadPrevNextAmount>1){for(var h=s.loadPrevNextAmount,d=o,f=Math.min(r+d+Math.max(h,d),i.length),p=Math.max(r-Math.max(d,h),0),m=r+o;m<f;m+=1)l(m)&&t.lazy.loadInSlide(m);for(var v=p;v<r;v+=1)l(v)&&t.lazy.loadInSlide(v)}else{var y=e.children("."+n.slideNextClass);y.length>0&&t.lazy.loadInSlide(u(y));var _=e.children("."+n.slidePrevClass);_.length>0&&t.lazy.loadInSlide(u(_))}},checkInViewOnLoad:function(){var t=o(),e=this;if(e&&!e.destroyed){var n=e.params.lazy.scrollingElement?g(e.params.lazy.scrollingElement):g(t),i=n[0]===t,r=i?t.innerWidth:n[0].offsetWidth,a=i?t.innerHeight:n[0].offsetHeight,s=e.$el.offset(),l=!1;e.rtlTranslate&&(s.left-=e.$el[0].scrollLeft);for(var u=[[s.left,s.top],[s.left+e.width,s.top],[s.left,s.top+e.height],[s.left+e.width,s.top+e.height]],c=0;c<u.length;c+=1){var h=u[c];if(h[0]>=0&&h[0]<=r&&h[1]>=0&&h[1]<=a){if(0===h[0]&&0===h[1])continue;l=!0}}l?(e.lazy.load(),n.off("scroll",e.lazy.checkInViewOnLoad)):e.lazy.scrollHandlerAttached||(e.lazy.scrollHandlerAttached=!0,n.on("scroll",e.lazy.checkInViewOnLoad))}}},nt={LinearSpline:function(t,e){var n,i,r,a,s;return this.x=t,this.y=e,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(s=function(t,e){for(i=-1,n=t.length;n-i>1;)t[r=n+i>>1]<=e?i=r:n=r;return n}(this.x,t),a=s-1,(t-this.x[a])*(this.y[s]-this.y[a])/(this.x[s]-this.x[a])+this.y[a]):0},this},getInterpolateFunction:function(t){var e=this;e.controller.spline||(e.controller.spline=e.params.loop?new nt.LinearSpline(e.slidesGrid,t.slidesGrid):new nt.LinearSpline(e.snapGrid,t.snapGrid))},setTranslate:function(t,e){var n,i,r=this,a=r.controller.control,s=r.constructor;function o(t){var e=r.rtlTranslate?-r.translate:r.translate;"slide"===r.params.controller.by&&(r.controller.getInterpolateFunction(t),i=-r.controller.spline.interpolate(-e)),i&&"container"!==r.params.controller.by||(n=(t.maxTranslate()-t.minTranslate())/(r.maxTranslate()-r.minTranslate()),i=(e-r.minTranslate())*n+t.minTranslate()),r.params.controller.inverse&&(i=t.maxTranslate()-i),t.updateProgress(i),t.setTranslate(i,r),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(a))for(var l=0;l<a.length;l+=1)a[l]!==e&&a[l]instanceof s&&o(a[l]);else a instanceof s&&e!==a&&o(a)},setTransition:function(t,e){var n,i=this,r=i.constructor,a=i.controller.control;function s(e){e.setTransition(t,i),0!==t&&(e.transitionStart(),e.params.autoHeight&&b((function(){e.updateAutoHeight()})),e.$wrapperEl.transitionEnd((function(){a&&(e.params.loop&&"slide"===i.params.controller.by&&e.loopFix(),e.transitionEnd())})))}if(Array.isArray(a))for(n=0;n<a.length;n+=1)a[n]!==e&&a[n]instanceof r&&s(a[n]);else a instanceof r&&e!==a&&s(a)}},it={getRandomNumber:function(t){return void 0===t&&(t=16),"x".repeat(t).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)}))},makeElFocusable:function(t){return t.attr("tabIndex","0"),t},makeElNotFocusable:function(t){return t.attr("tabIndex","-1"),t},addElRole:function(t,e){return t.attr("role",e),t},addElRoleDescription:function(t,e){return t.attr("aria-role-description",e),t},addElControls:function(t,e){return t.attr("aria-controls",e),t},addElLabel:function(t,e){return t.attr("aria-label",e),t},addElId:function(t,e){return t.attr("id",e),t},addElLive:function(t,e){return t.attr("aria-live",e),t},disableEl:function(t){return t.attr("aria-disabled",!0),t},enableEl:function(t){return t.attr("aria-disabled",!1),t},onEnterKey:function(t){var e=this,n=e.params.a11y;if(13===t.keyCode){var i=g(t.target);e.navigation&&e.navigation.$nextEl&&i.is(e.navigation.$nextEl)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?e.a11y.notify(n.lastSlideMessage):e.a11y.notify(n.nextSlideMessage)),e.navigation&&e.navigation.$prevEl&&i.is(e.navigation.$prevEl)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?e.a11y.notify(n.firstSlideMessage):e.a11y.notify(n.prevSlideMessage)),e.pagination&&i.is("."+e.params.pagination.bulletClass.replace(/ /g,"."))&&i[0].click()}},notify:function(t){var e=this.a11y.liveRegion;0!==e.length&&(e.html(""),e.html(t))},updateNavigation:function(){var t=this;if(!t.params.loop&&t.navigation){var e=t.navigation,n=e.$nextEl,i=e.$prevEl;i&&i.length>0&&(t.isBeginning?(t.a11y.disableEl(i),t.a11y.makeElNotFocusable(i)):(t.a11y.enableEl(i),t.a11y.makeElFocusable(i))),n&&n.length>0&&(t.isEnd?(t.a11y.disableEl(n),t.a11y.makeElNotFocusable(n)):(t.a11y.enableEl(n),t.a11y.makeElFocusable(n)))}},updatePagination:function(){var t=this,e=t.params.a11y;t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.bullets.each((function(n){var i=g(n);t.a11y.makeElFocusable(i),t.params.pagination.renderBullet||(t.a11y.addElRole(i,"button"),t.a11y.addElLabel(i,e.paginationBulletMessage.replace(/\{\{index\}\}/,i.index()+1)))}))},init:function(){var t=this,e=t.params.a11y;t.$el.append(t.a11y.liveRegion);var n=t.$el;e.containerRoleDescriptionMessage&&t.a11y.addElRoleDescription(n,e.containerRoleDescriptionMessage),e.containerMessage&&t.a11y.addElLabel(n,e.containerMessage);var i,r,a,s=t.$wrapperEl,o=s.attr("id")||"swiper-wrapper-"+t.a11y.getRandomNumber(16);t.a11y.addElId(s,o),i=t.params.autoplay&&t.params.autoplay.enabled?"off":"polite",t.a11y.addElLive(s,i),e.itemRoleDescriptionMessage&&t.a11y.addElRoleDescription(g(t.slides),e.itemRoleDescriptionMessage),t.a11y.addElRole(g(t.slides),"group"),t.slides.each((function(e){var n=g(e);t.a11y.addElLabel(n,n.index()+1+" / "+t.slides.length)})),t.navigation&&t.navigation.$nextEl&&(r=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(a=t.navigation.$prevEl),r&&r.length&&(t.a11y.makeElFocusable(r),"BUTTON"!==r[0].tagName&&(t.a11y.addElRole(r,"button"),r.on("keydown",t.a11y.onEnterKey)),t.a11y.addElLabel(r,e.nextSlideMessage),t.a11y.addElControls(r,o)),a&&a.length&&(t.a11y.makeElFocusable(a),"BUTTON"!==a[0].tagName&&(t.a11y.addElRole(a,"button"),a.on("keydown",t.a11y.onEnterKey)),t.a11y.addElLabel(a,e.prevSlideMessage),t.a11y.addElControls(a,o)),t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.$el.on("keydown","."+t.params.pagination.bulletClass.replace(/ /g,"."),t.a11y.onEnterKey)},destroy:function(){var t,e,n=this;n.a11y.liveRegion&&n.a11y.liveRegion.length>0&&n.a11y.liveRegion.remove(),n.navigation&&n.navigation.$nextEl&&(t=n.navigation.$nextEl),n.navigation&&n.navigation.$prevEl&&(e=n.navigation.$prevEl),t&&t.off("keydown",n.a11y.onEnterKey),e&&e.off("keydown",n.a11y.onEnterKey),n.pagination&&n.params.pagination.clickable&&n.pagination.bullets&&n.pagination.bullets.length&&n.pagination.$el.off("keydown","."+n.params.pagination.bulletClass.replace(/ /g,"."),n.a11y.onEnterKey)}},rt={init:function(){var t=this,e=o();if(t.params.history){if(!e.history||!e.history.pushState)return t.params.history.enabled=!1,void(t.params.hashNavigation.enabled=!0);var n=t.history;n.initialized=!0,n.paths=rt.getPathValues(t.params.url),(n.paths.key||n.paths.value)&&(n.scrollToSlide(0,n.paths.value,t.params.runCallbacksOnInit),t.params.history.replaceState||e.addEventListener("popstate",t.history.setHistoryPopState))}},destroy:function(){var t=o();this.params.history.replaceState||t.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){var t=this;t.history.paths=rt.getPathValues(t.params.url),t.history.scrollToSlide(t.params.speed,t.history.paths.value,!1)},getPathValues:function(t){var e=o(),n=(t?new URL(t):e.location).pathname.slice(1).split("/").filter((function(t){return""!==t})),i=n.length;return{key:n[i-2],value:n[i-1]}},setHistory:function(t,e){var n=this,i=o();if(n.history.initialized&&n.params.history.enabled){var r;r=n.params.url?new URL(n.params.url):i.location;var a=n.slides.eq(e),s=rt.slugify(a.attr("data-history"));r.pathname.includes(t)||(s=t+"/"+s);var l=i.history.state;l&&l.value===s||(n.params.history.replaceState?i.history.replaceState({value:s},null,s):i.history.pushState({value:s},null,s))}},slugify:function(t){return t.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(t,e,n){var i=this;if(e)for(var r=0,a=i.slides.length;r<a;r+=1){var s=i.slides.eq(r);if(rt.slugify(s.attr("data-history"))===e&&!s.hasClass(i.params.slideDuplicateClass)){var o=s.index();i.slideTo(o,t,n)}}else i.slideTo(0,t,n)}},at={onHashCange:function(){var t=this,e=a();t.emit("hashChange");var n=e.location.hash.replace("#","");if(n!==t.slides.eq(t.activeIndex).attr("data-hash")){var i=t.$wrapperEl.children("."+t.params.slideClass+'[data-hash="'+n+'"]').index();if(void 0===i)return;t.slideTo(i)}},setHash:function(){var t=this,e=o(),n=a();if(t.hashNavigation.initialized&&t.params.hashNavigation.enabled)if(t.params.hashNavigation.replaceState&&e.history&&e.history.replaceState)e.history.replaceState(null,null,"#"+t.slides.eq(t.activeIndex).attr("data-hash")||""),t.emit("hashSet");else{var i=t.slides.eq(t.activeIndex),r=i.attr("data-hash")||i.attr("data-history");n.location.hash=r||"",t.emit("hashSet")}},init:function(){var t=this,e=a(),n=o();if(!(!t.params.hashNavigation.enabled||t.params.history&&t.params.history.enabled)){t.hashNavigation.initialized=!0;var i=e.location.hash.replace("#","");if(i)for(var r=0,s=t.slides.length;r<s;r+=1){var l=t.slides.eq(r);if((l.attr("data-hash")||l.attr("data-history"))===i&&!l.hasClass(t.params.slideDuplicateClass)){var u=l.index();t.slideTo(u,0,t.params.runCallbacksOnInit,!0)}}t.params.hashNavigation.watchState&&g(n).on("hashchange",t.hashNavigation.onHashCange)}},destroy:function(){var t=o();this.params.hashNavigation.watchState&&g(t).off("hashchange",this.hashNavigation.onHashCange)}},st={run:function(){var t=this,e=t.slides.eq(t.activeIndex),n=t.params.autoplay.delay;e.attr("data-swiper-autoplay")&&(n=e.attr("data-swiper-autoplay")||t.params.autoplay.delay),clearTimeout(t.autoplay.timeout),t.autoplay.timeout=b((function(){var e;t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),e=t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(e=t.slideTo(t.slides.length-1,t.params.speed,!0,!0),t.emit("autoplay")):(e=t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.params.loop?(t.loopFix(),e=t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(e=t.slideTo(0,t.params.speed,!0,!0),t.emit("autoplay")):(e=t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")),(t.params.cssMode&&t.autoplay.running||!1===e)&&t.autoplay.run()}),n)},start:function(){var t=this;return void 0===t.autoplay.timeout&&!t.autoplay.running&&(t.autoplay.running=!0,t.emit("autoplayStart"),t.autoplay.run(),!0)},stop:function(){var t=this;return!!t.autoplay.running&&void 0!==t.autoplay.timeout&&(t.autoplay.timeout&&(clearTimeout(t.autoplay.timeout),t.autoplay.timeout=void 0),t.autoplay.running=!1,t.emit("autoplayStop"),!0)},pause:function(t){var e=this;e.autoplay.running&&(e.autoplay.paused||(e.autoplay.timeout&&clearTimeout(e.autoplay.timeout),e.autoplay.paused=!0,0!==t&&e.params.autoplay.waitForTransition?(e.$wrapperEl[0].addEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].addEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd)):(e.autoplay.paused=!1,e.autoplay.run())))},onVisibilityChange:function(){var t=this,e=a();"hidden"===e.visibilityState&&t.autoplay.running&&t.autoplay.pause(),"visible"===e.visibilityState&&t.autoplay.paused&&(t.autoplay.run(),t.autoplay.paused=!1)},onTransitionEnd:function(t){var e=this;e&&!e.destroyed&&e.$wrapperEl&&t.target===e.$wrapperEl[0]&&(e.$wrapperEl[0].removeEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].removeEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd),e.autoplay.paused=!1,e.autoplay.running?e.autoplay.run():e.autoplay.stop())}},ot={setTranslate:function(){for(var t=this,e=t.slides,n=0;n<e.length;n+=1){var i=t.slides.eq(n),r=-i[0].swiperSlideOffset;t.params.virtualTranslate||(r-=t.translate);var a=0;t.isHorizontal()||(a=r,r=0);var s=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:s}).transform("translate3d("+r+"px, "+a+"px, 0px)")}},setTransition:function(t){var e=this,n=e.slides,i=e.$wrapperEl;if(n.transition(t),e.params.virtualTranslate&&0!==t){var r=!1;n.transitionEnd((function(){if(!r&&e&&!e.destroyed){r=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],n=0;n<t.length;n+=1)i.trigger(t[n])}}))}}},lt={setTranslate:function(){var t,e=this,n=e.$el,i=e.$wrapperEl,r=e.slides,a=e.width,s=e.height,o=e.rtlTranslate,l=e.size,u=e.browser,c=e.params.cubeEffect,h=e.isHorizontal(),d=e.virtual&&e.params.virtual.enabled,f=0;c.shadow&&(h?(0===(t=i.find(".swiper-cube-shadow")).length&&(t=g('<div class="swiper-cube-shadow"></div>'),i.append(t)),t.css({height:a+"px"})):0===(t=n.find(".swiper-cube-shadow")).length&&(t=g('<div class="swiper-cube-shadow"></div>'),n.append(t)));for(var p=0;p<r.length;p+=1){var m=r.eq(p),v=p;d&&(v=parseInt(m.attr("data-swiper-slide-index"),10));var y=90*v,_=Math.floor(y/360);o&&(y=-y,_=Math.floor(-y/360));var x=Math.max(Math.min(m[0].progress,1),-1),b=0,w=0,T=0;v%4==0?(b=4*-_*l,T=0):(v-1)%4==0?(b=0,T=4*-_*l):(v-2)%4==0?(b=l+4*_*l,T=l):(v-3)%4==0&&(b=-l,T=3*l+4*l*_),o&&(b=-b),h||(w=b,b=0);var M="rotateX("+(h?0:-y)+"deg) rotateY("+(h?y:0)+"deg) translate3d("+b+"px, "+w+"px, "+T+"px)";if(x<=1&&x>-1&&(f=90*v+90*x,o&&(f=90*-v-90*x)),m.transform(M),c.slideShadows){var S=h?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),E=h?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===S.length&&(S=g('<div class="swiper-slide-shadow-'+(h?"left":"top")+'"></div>'),m.append(S)),0===E.length&&(E=g('<div class="swiper-slide-shadow-'+(h?"right":"bottom")+'"></div>'),m.append(E)),S.length&&(S[0].style.opacity=Math.max(-x,0)),E.length&&(E[0].style.opacity=Math.max(x,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),c.shadow)if(h)t.transform("translate3d(0px, "+(a/2+c.shadowOffset)+"px, "+-a/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var C=Math.abs(f)-90*Math.floor(Math.abs(f)/90),A=1.5-(Math.sin(2*C*Math.PI/360)/2+Math.cos(2*C*Math.PI/360)/2),L=c.shadowScale,P=c.shadowScale/A,R=c.shadowOffset;t.transform("scale3d("+L+", 1, "+P+") translate3d(0px, "+(s/2+R)+"px, "+-s/2/P+"px) rotateX(-90deg)")}var I=u.isSafari||u.isWebView?-l/2:0;i.transform("translate3d(0px,0,"+I+"px) rotateX("+(e.isHorizontal()?0:f)+"deg) rotateY("+(e.isHorizontal()?-f:0)+"deg)")},setTransition:function(t){var e=this,n=e.$el;e.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.cubeEffect.shadow&&!e.isHorizontal()&&n.find(".swiper-cube-shadow").transition(t)}},ut={setTranslate:function(){for(var t=this,e=t.slides,n=t.rtlTranslate,i=0;i<e.length;i+=1){var r=e.eq(i),a=r[0].progress;t.params.flipEffect.limitRotation&&(a=Math.max(Math.min(r[0].progress,1),-1));var s=-180*a,o=0,l=-r[0].swiperSlideOffset,u=0;if(t.isHorizontal()?n&&(s=-s):(u=l,l=0,o=-s,s=0),r[0].style.zIndex=-Math.abs(Math.round(a))+e.length,t.params.flipEffect.slideShadows){var c=t.isHorizontal()?r.find(".swiper-slide-shadow-left"):r.find(".swiper-slide-shadow-top"),h=t.isHorizontal()?r.find(".swiper-slide-shadow-right"):r.find(".swiper-slide-shadow-bottom");0===c.length&&(c=g('<div class="swiper-slide-shadow-'+(t.isHorizontal()?"left":"top")+'"></div>'),r.append(c)),0===h.length&&(h=g('<div class="swiper-slide-shadow-'+(t.isHorizontal()?"right":"bottom")+'"></div>'),r.append(h)),c.length&&(c[0].style.opacity=Math.max(-a,0)),h.length&&(h[0].style.opacity=Math.max(a,0))}r.transform("translate3d("+l+"px, "+u+"px, 0px) rotateX("+o+"deg) rotateY("+s+"deg)")}},setTransition:function(t){var e=this,n=e.slides,i=e.activeIndex,r=e.$wrapperEl;if(n.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.virtualTranslate&&0!==t){var a=!1;n.eq(i).transitionEnd((function(){if(!a&&e&&!e.destroyed){a=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],n=0;n<t.length;n+=1)r.trigger(t[n])}}))}}},ct={setTranslate:function(){for(var t=this,e=t.width,n=t.height,i=t.slides,r=t.slidesSizesGrid,a=t.params.coverflowEffect,s=t.isHorizontal(),o=t.translate,l=s?e/2-o:n/2-o,u=s?a.rotate:-a.rotate,c=a.depth,h=0,d=i.length;h<d;h+=1){var f=i.eq(h),p=r[h],m=(l-f[0].swiperSlideOffset-p/2)/p*a.modifier,v=s?u*m:0,y=s?0:u*m,_=-c*Math.abs(m),x=a.stretch;"string"==typeof x&&-1!==x.indexOf("%")&&(x=parseFloat(a.stretch)/100*p);var b=s?0:x*m,w=s?x*m:0,T=1-(1-a.scale)*Math.abs(m);Math.abs(w)<.001&&(w=0),Math.abs(b)<.001&&(b=0),Math.abs(_)<.001&&(_=0),Math.abs(v)<.001&&(v=0),Math.abs(y)<.001&&(y=0),Math.abs(T)<.001&&(T=0);var M="translate3d("+w+"px,"+b+"px,"+_+"px)  rotateX("+y+"deg) rotateY("+v+"deg) scale("+T+")";if(f.transform(M),f[0].style.zIndex=1-Math.abs(Math.round(m)),a.slideShadows){var S=s?f.find(".swiper-slide-shadow-left"):f.find(".swiper-slide-shadow-top"),E=s?f.find(".swiper-slide-shadow-right"):f.find(".swiper-slide-shadow-bottom");0===S.length&&(S=g('<div class="swiper-slide-shadow-'+(s?"left":"top")+'"></div>'),f.append(S)),0===E.length&&(E=g('<div class="swiper-slide-shadow-'+(s?"right":"bottom")+'"></div>'),f.append(E)),S.length&&(S[0].style.opacity=m>0?m:0),E.length&&(E[0].style.opacity=-m>0?-m:0)}}},setTransition:function(t){this.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)}},ht={init:function(){var t=this,e=t.params.thumbs;if(t.thumbs.initialized)return!1;t.thumbs.initialized=!0;var n=t.constructor;return e.swiper instanceof n?(t.thumbs.swiper=e.swiper,S(t.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),S(t.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):M(e.swiper)&&(t.thumbs.swiper=new n(S({},e.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),t.thumbs.swiperCreated=!0),t.thumbs.swiper.$el.addClass(t.params.thumbs.thumbsContainerClass),t.thumbs.swiper.on("tap",t.thumbs.onThumbClick),!0},onThumbClick:function(){var t=this,e=t.thumbs.swiper;if(e){var n=e.clickedIndex,i=e.clickedSlide;if(!(i&&g(i).hasClass(t.params.thumbs.slideThumbActiveClass)||null==n)){var r;if(r=e.params.loop?parseInt(g(e.clickedSlide).attr("data-swiper-slide-index"),10):n,t.params.loop){var a=t.activeIndex;t.slides.eq(a).hasClass(t.params.slideDuplicateClass)&&(t.loopFix(),t._clientLeft=t.$wrapperEl[0].clientLeft,a=t.activeIndex);var s=t.slides.eq(a).prevAll('[data-swiper-slide-index="'+r+'"]').eq(0).index(),o=t.slides.eq(a).nextAll('[data-swiper-slide-index="'+r+'"]').eq(0).index();r=void 0===s?o:void 0===o?s:o-a<a-s?o:s}t.slideTo(r)}}},update:function(t){var e=this,n=e.thumbs.swiper;if(n){var i="auto"===n.params.slidesPerView?n.slidesPerViewDynamic():n.params.slidesPerView,r=e.params.thumbs.autoScrollOffset,a=r&&!n.params.loop;if(e.realIndex!==n.realIndex||a){var s,o,l=n.activeIndex;if(n.params.loop){n.slides.eq(l).hasClass(n.params.slideDuplicateClass)&&(n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft,l=n.activeIndex);var u=n.slides.eq(l).prevAll('[data-swiper-slide-index="'+e.realIndex+'"]').eq(0).index(),c=n.slides.eq(l).nextAll('[data-swiper-slide-index="'+e.realIndex+'"]').eq(0).index();s=void 0===u?c:void 0===c?u:c-l==l-u?l:c-l<l-u?c:u,o=e.activeIndex>e.previousIndex?"next":"prev"}else o=(s=e.realIndex)>e.previousIndex?"next":"prev";a&&(s+="next"===o?r:-1*r),n.visibleSlidesIndexes&&n.visibleSlidesIndexes.indexOf(s)<0&&(n.params.centeredSlides?s=s>l?s-Math.floor(i/2)+1:s+Math.floor(i/2)-1:s>l&&(s=s-i+1),n.slideTo(s,t?0:void 0))}var h=1,d=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(h=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(h=1),h=Math.floor(h),n.slides.removeClass(d),n.params.loop||n.params.virtual&&n.params.virtual.enabled)for(var f=0;f<h;f+=1)n.$wrapperEl.children('[data-swiper-slide-index="'+(e.realIndex+f)+'"]').addClass(d);else for(var p=0;p<h;p+=1)n.slides.eq(e.realIndex+p).addClass(d)}}},dt=[q,Y,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){E(this,{mousewheel:{enabled:!1,lastScrollTime:w(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:$.enable,disable:$.disable,handle:$.handle,handleMouseEnter:$.handleMouseEnter,handleMouseLeave:$.handleMouseLeave,animateSlider:$.animateSlider,releaseScroll:$.releaseScroll}})},on:{init:function(t){!t.params.mousewheel.enabled&&t.params.cssMode&&t.mousewheel.disable(),t.params.mousewheel.enabled&&t.mousewheel.enable()},destroy:function(t){t.params.cssMode&&t.mousewheel.enable(),t.mousewheel.enabled&&t.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){E(this,{navigation:e({},Z)})},on:{init:function(t){t.navigation.init(),t.navigation.update()},toEdge:function(t){t.navigation.update()},fromEdge:function(t){t.navigation.update()},destroy:function(t){t.navigation.destroy()},click:function(t,e){var n,i=t.navigation,r=i.$nextEl,a=i.$prevEl;!t.params.navigation.hideOnClick||g(e.target).is(a)||g(e.target).is(r)||(r?n=r.hasClass(t.params.navigation.hiddenClass):a&&(n=a.hasClass(t.params.navigation.hiddenClass)),!0===n?t.emit("navigationShow"):t.emit("navigationHide"),r&&r.toggleClass(t.params.navigation.hiddenClass),a&&a.toggleClass(t.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(t){return t},formatFractionTotal:function(t){return t},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){E(this,{pagination:e({dynamicBulletIndex:0},J)})},on:{init:function(t){t.pagination.init(),t.pagination.render(),t.pagination.update()},activeIndexChange:function(t){(t.params.loop||void 0===t.snapIndex)&&t.pagination.update()},snapIndexChange:function(t){t.params.loop||t.pagination.update()},slidesLengthChange:function(t){t.params.loop&&(t.pagination.render(),t.pagination.update())},snapGridLengthChange:function(t){t.params.loop||(t.pagination.render(),t.pagination.update())},destroy:function(t){t.pagination.destroy()},click:function(t,e){t.params.pagination.el&&t.params.pagination.hideOnClick&&t.pagination.$el.length>0&&!g(e.target).hasClass(t.params.pagination.bulletClass)&&(!0===t.pagination.$el.hasClass(t.params.pagination.hiddenClass)?t.emit("paginationShow"):t.emit("paginationHide"),t.pagination.$el.toggleClass(t.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){E(this,{scrollbar:e({isTouched:!1,timeout:null,dragTimeout:null},Q)})},on:{init:function(t){t.scrollbar.init(),t.scrollbar.updateSize(),t.scrollbar.setTranslate()},update:function(t){t.scrollbar.updateSize()},resize:function(t){t.scrollbar.updateSize()},observerUpdate:function(t){t.scrollbar.updateSize()},setTranslate:function(t){t.scrollbar.setTranslate()},setTransition:function(t,e){t.scrollbar.setTransition(e)},destroy:function(t){t.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){E(this,{parallax:e({},K)})},on:{beforeInit:function(t){t.params.parallax.enabled&&(t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)},init:function(t){t.params.parallax.enabled&&t.parallax.setTranslate()},setTranslate:function(t){t.params.parallax.enabled&&t.parallax.setTranslate()},setTransition:function(t,e){t.params.parallax.enabled&&t.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var t=this;E(t,{zoom:e({enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}},tt)});var n=1;Object.defineProperty(t.zoom,"scale",{get:function(){return n},set:function(e){if(n!==e){var i=t.zoom.gesture.$imageEl?t.zoom.gesture.$imageEl[0]:void 0,r=t.zoom.gesture.$slideEl?t.zoom.gesture.$slideEl[0]:void 0;t.emit("zoomChange",e,i,r)}n=e}})},on:{init:function(t){t.params.zoom.enabled&&t.zoom.enable()},destroy:function(t){t.zoom.disable()},touchStart:function(t,e){t.zoom.enabled&&t.zoom.onTouchStart(e)},touchEnd:function(t,e){t.zoom.enabled&&t.zoom.onTouchEnd(e)},doubleTap:function(t,e){t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&t.zoom.toggle(e)},transitionEnd:function(t){t.zoom.enabled&&t.params.zoom.enabled&&t.zoom.onTransitionEnd()},slideChange:function(t){t.zoom.enabled&&t.params.zoom.enabled&&t.params.cssMode&&t.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){E(this,{lazy:e({initialImageLoaded:!1},et)})},on:{beforeInit:function(t){t.params.lazy.enabled&&t.params.preloadImages&&(t.params.preloadImages=!1)},init:function(t){t.params.lazy.enabled&&!t.params.loop&&0===t.params.initialSlide&&(t.params.lazy.checkInView?t.lazy.checkInViewOnLoad():t.lazy.load())},scroll:function(t){t.params.freeMode&&!t.params.freeModeSticky&&t.lazy.load()},resize:function(t){t.params.lazy.enabled&&t.lazy.load()},scrollbarDragMove:function(t){t.params.lazy.enabled&&t.lazy.load()},transitionStart:function(t){t.params.lazy.enabled&&(t.params.lazy.loadOnTransitionStart||!t.params.lazy.loadOnTransitionStart&&!t.lazy.initialImageLoaded)&&t.lazy.load()},transitionEnd:function(t){t.params.lazy.enabled&&!t.params.lazy.loadOnTransitionStart&&t.lazy.load()},slideChange:function(t){t.params.lazy.enabled&&t.params.cssMode&&t.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){E(this,{controller:e({control:this.params.controller.control},nt)})},on:{update:function(t){t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},resize:function(t){t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},observerUpdate:function(t){t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},setTranslate:function(t,e,n){t.controller.control&&t.controller.setTranslate(e,n)},setTransition:function(t,e,n){t.controller.control&&t.controller.setTransition(e,n)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null}},create:function(){E(this,{a11y:e({},it,{liveRegion:g('<span class="'+this.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')})})},on:{afterInit:function(t){t.params.a11y.enabled&&(t.a11y.init(),t.a11y.updateNavigation())},toEdge:function(t){t.params.a11y.enabled&&t.a11y.updateNavigation()},fromEdge:function(t){t.params.a11y.enabled&&t.a11y.updateNavigation()},paginationUpdate:function(t){t.params.a11y.enabled&&t.a11y.updatePagination()},destroy:function(t){t.params.a11y.enabled&&t.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){E(this,{history:e({},rt)})},on:{init:function(t){t.params.history.enabled&&t.history.init()},destroy:function(t){t.params.history.enabled&&t.history.destroy()},transitionEnd:function(t){t.history.initialized&&t.history.setHistory(t.params.history.key,t.activeIndex)},slideChange:function(t){t.history.initialized&&t.params.cssMode&&t.history.setHistory(t.params.history.key,t.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){E(this,{hashNavigation:e({initialized:!1},at)})},on:{init:function(t){t.params.hashNavigation.enabled&&t.hashNavigation.init()},destroy:function(t){t.params.hashNavigation.enabled&&t.hashNavigation.destroy()},transitionEnd:function(t){t.hashNavigation.initialized&&t.hashNavigation.setHash()},slideChange:function(t){t.hashNavigation.initialized&&t.params.cssMode&&t.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){E(this,{autoplay:e({},st,{running:!1,paused:!1})})},on:{init:function(t){t.params.autoplay.enabled&&(t.autoplay.start(),a().addEventListener("visibilitychange",t.autoplay.onVisibilityChange))},beforeTransitionStart:function(t,e,n){t.autoplay.running&&(n||!t.params.autoplay.disableOnInteraction?t.autoplay.pause(e):t.autoplay.stop())},sliderFirstMove:function(t){t.autoplay.running&&(t.params.autoplay.disableOnInteraction?t.autoplay.stop():t.autoplay.pause())},touchEnd:function(t){t.params.cssMode&&t.autoplay.paused&&!t.params.autoplay.disableOnInteraction&&t.autoplay.run()},destroy:function(t){t.autoplay.running&&t.autoplay.stop(),a().removeEventListener("visibilitychange",t.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){E(this,{fadeEffect:e({},ot)})},on:{beforeInit:function(t){if("fade"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};S(t.params,e),S(t.originalParams,e)}},setTranslate:function(t){"fade"===t.params.effect&&t.fadeEffect.setTranslate()},setTransition:function(t,e){"fade"===t.params.effect&&t.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){E(this,{cubeEffect:e({},lt)})},on:{beforeInit:function(t){if("cube"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"cube"),t.classNames.push(t.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};S(t.params,e),S(t.originalParams,e)}},setTranslate:function(t){"cube"===t.params.effect&&t.cubeEffect.setTranslate()},setTransition:function(t,e){"cube"===t.params.effect&&t.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){E(this,{flipEffect:e({},ut)})},on:{beforeInit:function(t){if("flip"===t.params.effect){t.classNames.push(t.params.containerModifierClass+"flip"),t.classNames.push(t.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};S(t.params,e),S(t.originalParams,e)}},setTranslate:function(t){"flip"===t.params.effect&&t.flipEffect.setTranslate()},setTransition:function(t,e){"flip"===t.params.effect&&t.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){E(this,{coverflowEffect:e({},ct)})},on:{beforeInit:function(t){"coverflow"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"coverflow"),t.classNames.push(t.params.containerModifierClass+"3d"),t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)},setTranslate:function(t){"coverflow"===t.params.effect&&t.coverflowEffect.setTranslate()},setTransition:function(t,e){"coverflow"===t.params.effect&&t.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){E(this,{thumbs:e({swiper:null,initialized:!1},ht)})},on:{beforeInit:function(t){var e=t.params.thumbs;e&&e.swiper&&(t.thumbs.init(),t.thumbs.update(!0))},slideChange:function(t){t.thumbs.swiper&&t.thumbs.update()},update:function(t){t.thumbs.swiper&&t.thumbs.update()},resize:function(t){t.thumbs.swiper&&t.thumbs.update()},observerUpdate:function(t){t.thumbs.swiper&&t.thumbs.update()},setTransition:function(t,e){var n=t.thumbs.swiper;n&&n.setTransition(e)},beforeDestroy:function(t){var e=t.thumbs.swiper;e&&t.thumbs.swiperCreated&&e&&e.destroy()}}}];return V.use(dt),V}));var paper=function(t,e){var n=(t=t||require("./node/self.js")).window,i=t.document,r=new function(){var t=/^(statics|enumerable|beans|preserve)$/,n=[],i=n.slice,r=Object.create,a=Object.getOwnPropertyDescriptor,s=Object.defineProperty,o=n.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},l=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},u=function(t,e,n){if(t){var i=a(t,"length");(i&&"number"==typeof i.value?o:function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}).call(t,e,n=n||t)}return n};function c(e,n,i,r,o){var l={};function u(t,u){"string"==typeof(u=u||(u=a(n,t))&&(u.get?u:u.value))&&"#"===u[0]&&(u=e[u.substring(1)]||u);var c,d="function"==typeof u,f=u,p=o||d&&!u.base?u&&u.get?t in e:e[t]:null;o&&p||(d&&p&&(u.base=p),d&&!1!==r&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),f&&!d&&f.get&&"function"==typeof f.get&&h.isPlainObject(f)||(f={value:f,writable:!0}),(a(e,t)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=null!=i?i:!c),s(e,t,f))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&u(c);for(var c in l){var d=l[c],f=e["set"+d],p=e["get"+d]||f&&e["is"+d];!p||!0!==r&&0!==p.length||u(c,{get:p,set:f})}}return e}function h(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&l(this,n)}return this}return c(h,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve;e!==t&&c(this.prototype,t,t.enumerable,n,i),c(this,e,null,n,i)}for(var r=1,a=arguments.length;r<a;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n,i=this,a=0,o=arguments.length;a<o&&(!t||!e);a++)n=arguments[a],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){i.apply(this,arguments)}).prototype=e||r(this.prototype),s(e,"constructor",{value:t,writable:!0,configurable:!0}),c(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}}).inject({enumerable:!1,initialize:h,set:h,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&c(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=r(this);return t.inject.apply(t,arguments)},each:function(t,e){return u(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:l,each:u,create:r,define:s,describe:a,clone:function(t){return l(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===h||"Object"===e.name)},pick:function(t,n){return t!==e?t:n},slice:function(t,e,n){return i.call(t,e,n)}}})};"undefined"!=typeof module&&(module.exports=r),r.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+r.each(this,(function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?l.instance.number(t):"string"===n?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return r.importJSON(t,this)},exportJSON:function(t){return r.exportJSON(this,t)},toJSON:function(){return r.serialize(this)},set:function(t,e){return t&&r.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!r.exports[n]&&(r.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!r.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var a=i[n];if(!e.hasOwnProperty(a)||!r.equals(t[a],e[a]))return!1}}return!0}return!1},read:function(t,n,i,a){if(this===r){var s=this.peek(t,n);return t.__index++,s}var o=this.prototype,l=o._readIndex,u=n||l&&t.__index||0,c=t.length,h=t[u];if(a=a||c-u,h instanceof this||i&&i.readNull&&null==h&&a<=1)return l&&(t.__index=u+1),h&&i&&i.clone?h.clone():h;if(h=r.create(o),l&&(h.__read=!0),h=h.initialize.apply(h,0<u||u+a<c?r.slice(t,u,u+a):t)||h,l){t.__index=u+h.__read;var d=h.__filtered;d&&(t.__filtered=d,h.__filtered=e),h.__read=e}return h},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,a=[],s=e||0,o=i?s+i:t.length,l=s;l<o;l++)a.push(Array.isArray(r=t[l])?this.read(r,0,n):this.read(t,l,n,1));return a},readNamed:function(t,n,i,a,s){var o=this.getNamed(t,n),l=o!==e;if(l){var u=t.__filtered;u||((u=t.__filtered=r.create(t[0])).__unfiltered=t[0]),u[n]=e}var c=l?[o]:t;return this.read(c,i,a,s)},getNamed:function(t,n){var i=t[0];if(t._hasObject===e&&(t._hasObject=1===t.length&&r.isPlainObject(i)),t._hasObject)return n?i[n]:t.__filtered||i},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,n,i,r){var a;function s(r){if(!(i&&r in i||a&&r in a)){var s=n[r];s!==e&&(t[r]=s)}}if(r){for(var o,l={},u=0,c=r.length;u<c;u++)(o=r[u])in n&&(s(o),l[o]=!0);a=l}return Object.keys(n.__unfiltered||n).forEach(s),t},isPlainValue:function(t,e){return r.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var a,s=!i;if(s&&(e.formatter=new l(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),a=t._class;a&&r[0]!==a&&r.unshift(a),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){a=t._serialize(e,i);var o=t._class;!o||t._compactSerialize||!s&&n||a[0]===o||a.unshift(o)}else if(Array.isArray(t)){a=[];for(var u=0,c=t.length;u<c;u++)a[u]=r.serialize(t[u],e,n,i)}else if(r.isPlainObject(t)){a={};var h=Object.keys(t);for(u=0,c=h.length;u<c;u++){var d=h[u];a[d]=r.serialize(t[d],e,n,i)}}else a="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&0<i.length?[["dictionary",i.definitions],a]:a},deserialize:function(t,e,n,i,a){var s=t,o=!n,l=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],c="dictionary"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];s=[];for(var h=(u=r.exports[u])?1:0,d=t.length;h<d;h++)s.push(r.deserialize(t[h],e,n,c,l));if(u){var f=s;s=e?e(u,f,o||a):new u(f)}}else if(r.isPlainObject(t))for(var p in s={},i&&(n.dictionary=s),t)s[p]=r.deserialize(t[p],e,n);return l?s[1]:s},exportJSON:function(t,e){var n=r.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return r.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,n,i){var a=i&&e&&e.constructor===t,s=a?e:r.create(t.prototype);if(1===n.length&&s instanceof x&&(a||!(s instanceof w))){var o=n[0];r.isPlainObject(o)&&(o.insert=!1)}return(a?s.set:t).apply(s,n),a&&(e=null),s}))},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}return t},splice:function(t,n,i,a){var s=n&&n.length,o=i===e;(i=o?t.length:i)>t.length&&(i=t.length);for(var l=0;l<s;l++)n[l]._index=i+l;if(o)return r.push(t,n),[];var u=[i,a];n&&r.push(u,n);for(var c=t.splice.apply(t,u),h=(l=0,c.length);l<h;l++)c[l]._index=e;for(l=i+s,h=t.length;l<h;l++)t[l]._index=l;return c},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(t,e){if("string"!=typeof t)r.each(t,(function(t,e){this.on(e,t)}),this);else{var n=this._eventTypes,i=n&&n[t],a=this._callbacks=this._callbacks||{};-1===(a=a[t]=a[t]||[]).indexOf(e)&&(a.push(e),i&&i.install&&1===a.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var n,i=this._eventTypes,a=i&&i[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||-1!==(n=s.indexOf(e))&&1===s.length?(a&&a.uninstall&&a.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&s.splice(n,1)),this}r.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function n(){e.apply(this,arguments),this.off(t,n)}))},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=r.slice(arguments,1),a=e&&e.target&&!e.currentTarget;n=n.slice(),a&&(e.currentTarget=this);for(var s=0,o=n.length;s<o;s++)if(0==n[s].apply(this,i)){e&&e.stop&&e.stop();break}return a&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(0<n[r].length){var a=e[r],s=a&&a[i];s&&s.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};r.each(n,(function(t,n){var a="string"==typeof t,s=a?t:n,o=r.capitalize(s),l=s.substring(2).toLowerCase();i[l]=a?{}:t,s="_"+s,e["get"+o]=function(){return this[s]},e["set"+o]=function(t){var e=this[s];e&&this.off(l,e),t&&this.on(l,t),this[s]=t}})),e._eventTypes=i}return t.base.apply(this,arguments)}}},s=r.extend({_class:"PaperScope",initialize:function e(){(it=this).settings=new r({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var n=e.prototype;if(!this.support){var i=K.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:tt.nativeModes},K.release(i)}if(!this.agent){var a=t.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(a)||[])[0],o="darwin"===s?"mac":s,l=n.agent=n.browser={platform:o};o&&(l[o]=!0),a.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,n,i,r){if(!l.chrome){var a="opera"===e?i:/^(node|trident)$/.test(e)?r:n;l.version=a,l.versionNumber=parseFloat(a),e="trident"===e?"msie":e,l.name=e,l[e]=!0}})),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},version:"0.12.0",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){},install:function(t){var e=this;for(var n in r.each(["project","view","tool"],(function(n){r.define(t,n,{configurable:!0,get:function(){return e[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return(it=this).project=new _(t),this},createCanvas:function(t,e){return K.getCanvas(t,e)},activate:function(){it=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;0<=n;n--)t[n].remove();for(n=e.length-1;0<=n;n--)e[n].remove()},remove:function(){this.clear(),delete s._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),o=r.extend(a,{initialize:function(t){this._scope=it,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),(this._scope[this._reference]=this).emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(r.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),!(this._scope=null))},getView:function(){return this._scope.getView()}}),l=r.extend({initialize:function(t){this.precision=r.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});l.instance=new l;var u=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,a=Math.log2||function(t){return Math.log(t)*Math.LOG2E},s=1e-12,o=112e-18;function l(t,e,n){return t<e?e:n<t?n:t}function c(t,e,i){function r(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var a=e*e-t*i,s=e*e+t*i;if(3*n(a)<s){var o=r(t),l=r(e),u=r(i),c=e*e,h=t*i;a=c-h+(l[0]*l[0]-c+2*l[0]*l[1]+l[1]*l[1]-(o[0]*u[0]-h+o[0]*u[1]+o[1]*u[0]+o[1]*u[1]))}return a}function h(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||1e8<t)?r(2,-Math.round(a(t))):0}return{EPSILON:s,MACHINE_EPSILON:o,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(i(2)-1)/3,isZero:function(t){return-s<=t&&t<=s},clamp:l,integrate:function(n,i,r,a){for(var s=t[a-2],o=e[a-2],l=.5*(r-i),u=l+i,c=0,h=a+1>>1,d=1&a?o[c++]*n(u):0;c<h;){var f=l*s[c];d+=o[c++]*(n(u+f)+n(u-f))}return l*d},findRoot:function(t,e,i,r,a,s,o){for(var u=0;u<s;u++){var c=t(i),h=c/e(i),d=i-h;if(n(h)<o){i=d;break}i=0<c?(a=i,d<=r?.5*(r+a):d):(r=i,a<=d?.5*(r+a):d)}return l(i,r,a)},solveQuadratic:function(t,e,r,a,u,d){var f,p=1/0;if(n(t)<s){if(n(e)<s)return n(r)<s?-1:0;f=-r/e}else{var m=c(t,e*=-.5,r);if(m&&n(m)<o){var g=h(n(t),n(e),n(r));g&&(m=c(t*=g,e*=g,r*=g))}if(-o<=m){var v=m<0?0:i(m),y=e+(e<0?-v:v);p=0===y?-(f=r/t):(f=y/t,r/y)}}var _=0,x=null==u,b=u-s,w=d+s;return isFinite(f)&&(x||b<f&&f<w)&&(a[_++]=x?f:l(f,u,d)),p!==f&&isFinite(p)&&(x||b<p&&p<w)&&(a[_++]=x?p:l(p,u,d)),_},solveCubic:function(t,e,a,c,d,f,p){var m,g,v,y,_,x=h(n(t),n(e),n(a),n(c));function b(n){var i=t*(m=n);y=(i+(g=i+e))*m+(v=g*m+a),_=v*m+c}if(x&&(t*=x,e*=x,a*=x,c*=x),n(t)<s)t=e,g=a,v=c,m=1/0;else if(n(c)<s)g=e,v=a,m=0;else{b(-e/t/3);var w=_/t,T=r(n(w),1/3),M=w<0?-1:1,S=-y/t,E=0<S?1.324717957244746*Math.max(T,i(S)):T,C=m-M*E;if(C!==m){for(;b(C),M*m<M*(C=0===y?m:m-_/y/(1+o)););n(t)*m*m>n(c/m)&&(g=((v=-c/m)-a)/m)}}var A=u.solveQuadratic(t,g,v,d,f,p),L=null==f;return isFinite(m)&&(0===A||0<A&&m!==d[0]&&m!==d[1])&&(L||f-s<m&&m<p+s)&&(d[A++]=L?m:l(m,f,p)),A}}},c={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},h=r.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var s="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(s)?this._set(+s[0],+(1<s.length?s[1]:s[0])):"x"in s?this._set(s.x||0,s.y||0):"width"in s?this._set(s.width||0,s.height||0):"angle"in s?(this._set(s.length||0,0),this.setAngle(s.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new h(this.x,this.y)},toString:function(){var t=l.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();u.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=h.read(arguments),e=this.getLength()*t.getLength();if(u.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:1<n?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return 0<=this.x?0<=this.y?1:4:0<=this.y?2:3}},{beans:!1,getDirectedAngle:function(){var t=h.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=h.read(arguments),e=t.x-this.x,n=t.y-this.y,i=e*e+n*n;return r.read(arguments)?i:Math.sqrt(i)},normalize:function(t){t===e&&(t=1);var n=this.getLength(),i=0!==n?t/n:0,r=new h(this.x*i,this.y*i);return 0<=i&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new h(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=h.read(arguments);return new h(this.x+t.x,this.y+t.y)},subtract:function(){var t=h.read(arguments);return new h(this.x-t.x,this.y-t.y)},multiply:function(){var t=h.read(arguments);return new h(this.x*t.x,this.y*t.y)},divide:function(){var t=h.read(arguments);return new h(this.x/t.x,this.y/t.y)},modulo:function(){var t=h.read(arguments);return new h(this.x%t.x,this.y%t.y)},negate:function(){return new h(-this.x,-this.y)},isInside:function(){return m.read(arguments).contains(this)},isClose:function(){var t=h.read(arguments),e=r.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=h.read(arguments);return h.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=h.read(arguments);return h.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=u.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return 0<=this.x*(1<t&&t<4?-1:1)&&0<=this.y*(2<t?-1:1)},dot:function(){var t=h.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=h.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=h.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new h(t.x*e,t.y*e)},statics:{min:function(){var t=h.read(arguments),e=h.read(arguments);return new h(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=h.read(arguments),e=h.read(arguments);return new h(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new h(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},r.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new h(e(this.x),e(this.y))}}),{})),d=h.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),f=r.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var s="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(s)?this._set(+s[0],+(1<s.length?s[1]:s[0])):"width"in s?this._set(s.width||0,s.height||0):"x"in s?this._set(s.x||0,s.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new f(this.width,this.height)},toString:function(){var t=l.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=f.read(arguments);return new f(this.width+t.width,this.height+t.height)},subtract:function(){var t=f.read(arguments);return new f(this.width-t.width,this.height-t.height)},multiply:function(){var t=f.read(arguments);return new f(this.width*t.width,this.height*t.height)},divide:function(){var t=f.read(arguments);return new f(this.width/t.width,this.height/t.height)},modulo:function(){var t=f.read(arguments);return new f(this.width%t.width,this.height%t.height)},negate:function(){return new f(-this.width,-this.height)},isZero:function(){var t=u.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new f(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new f(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new f(Math.random(),Math.random())}}},r.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new f(e(this.width),e(this.height))}}),{})),p=f.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),m=r.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,n,i,a){var s,o=typeof t;if("number"===o?(this._set(t,n,i,a),s=4):"undefined"===o||null===t?(this._set(0,0,0,0),s=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),s=1):t.x!==e||t.width!==e?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),s=1):t.from===e&&t.to===e&&(this._set(0,0,0,0),r.filter(this,t),s=1)),s===e){var l,u,c=h.readNamed(arguments,"from"),d=r.peek(arguments),p=c.x,m=c.y;if(d&&d.x!==e||r.hasNamed(arguments,"to")){var g=h.readNamed(arguments,"to");l=g.x-p,u=g.y-m,l<0&&(p=g.x,l=-l),u<0&&(m=g.y,u=-u)}else{var v=f.read(arguments);l=v.width,u=v.height}this._set(p,m,l,u),s=arguments.__index;var y=arguments.__filtered;y&&(this.__filtered=y)}return this.__read&&(this.__read=s),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new m(this.x,this.y,this.width,this.height)},equals:function(t){var e=r.isPlainValue(t)?m.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=l.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?h:d)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=h.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?f:p)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=f.read(arguments),e=this._sx,n=this._sy,i=t.width,r=t.height;e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?h:d)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=h.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==e||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(m.read(arguments)):this._containsPoint(h.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=m.read(arguments),e=r.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=m.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new m(e,n,i-e,r-n)},unite:function(){var t=m.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new m(e,n,i-e,r-n)},include:function(){var t=h.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new m(e,n,i-e,r-n)},expand:function(){var t=f.read(arguments),e=t.width,n=t.height;return new m(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,n){return this.expand(this.width*t-this.width,this.height*(n===e?t:n)-this.height)}},r.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var n=t.join(""),i=/^[RL]/.test(n);4<=e&&(t[1]+=i?"Y":"X");var r=t[i?0:1],a=t[i?1:0],s="get"+r,o="get"+a,l="set"+r,u="set"+a,c="set"+n;this["get"+n]=function(t){return new(t?h:d)(this[s](),this[o](),this,c)},this[c]=function(){var t=h.read(arguments);this[l](t.x),this[u](t.y)}}),{beans:!0})),g=m.extend({initialize:function(t,e,n,i,r,a){this._set(t,e,n,i,!0),this._owner=r,this._setter=a},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=m.prototype;return r.each(["x","y","width","height"],(function(t){var e=r.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),r.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),v=r.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments.length,r=!0;if(6<=i?this._set.apply(this,arguments):1===i||2===i?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):r=!1:i?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,a,s){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=a,s||this._changed(),this},_serialize:function(t,e){return r.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new v(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=l.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,r.pick(t,!0),e),this.isIdentity())},translate:function(){var t=h.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=h.read(arguments),e=h.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=h.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),a=Math.sin(t),s=n-n*r+i*a,o=i-n*a-i*r,l=this._a,u=this._b,c=this._c,d=this._d;return this._a=r*l+a*c,this._b=r*u+a*d,this._c=-a*l+r*c,this._d=-a*u+r*d,this._tx+=s*l+o*c,this._ty+=s*u+o*d,this._changed(),this},shear:function(){var t=h.read(arguments),e=h.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=h.read(arguments),e=h.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new h(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},append:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,a=this._d,s=t._a,o=t._c,l=t._b,u=t._d,c=t._tx,h=t._ty;this._a=s*n+l*r,this._c=o*n+u*r,this._b=s*i+l*a,this._d=o*i+u*a,this._tx+=c*n+h*r,this._ty+=c*i+h*a,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,a=this._d,s=this._tx,o=this._ty,l=t._a,u=t._c,c=t._b,h=t._d,d=t._tx,f=t._ty;this._a=l*n+u*i,this._c=l*r+u*a,this._b=c*n+h*i,this._d=c*r+h*a,this._tx=l*s+u*o+d,this._ty=c*s+h*o+f,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,a=this._ty,s=t*i-e*n,o=null;return s&&!isNaN(s)&&isFinite(r)&&isFinite(a)&&(this._a=i/s,this._b=-e/s,this._c=-n/s,this._d=t/s,this._tx=(n*a-i*r)/s,this._ty=(e*r-t*a)/s,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new v(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(h.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new h),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var a=t[i],s=t[i+1];e[i]=a*this._a+s*this._c+this._tx,e[i+1]=a*this._b+s*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,a=[e,n,i,n,i,r,e,r];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),a=r.slice(),s=2;s<8;s++){var o=i[s],l=1&s;o<r[l]?r[l]=o:o>a[l]&&(a[l]=o)}return e||(e=new m),e._set(r[0],r[1],a[0]-r[0],a[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(h.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,a=this._c,s=this._d,o=this._tx,l=this._ty,u=i*s-r*a,c=null;if(u&&!isNaN(u)&&isFinite(o)&&isFinite(l)){var d=t.x-this._tx,f=t.y-this._ty;e||(e=new h),c=e._set((d*s-f*a)/u,(f*i-d*r)/u,n)}return c},decompose:function(){var t,e,n,i=this._a,r=this._b,a=this._c,s=this._d,o=i*s-r*a,l=Math.sqrt,u=Math.atan2,c=180/Math.PI;if(0!==i||0!==r){var d=l(i*i+r*r);t=Math.acos(i/d)*(0<r?1:-1),e=[d,o/d],n=[u(i*a+r*s,d*d),0]}else if(0!==a||0!==s){var f=l(a*a+s*s);t=Math.asin(a/f)*(0<s?1:-1),e=[o/f,f],n=[0,u(i*a+r*s,f*f)]}else n=e=[t=0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new h(e),skewing:new h(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new h(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},r.each(["a","b","c","d","tx","ty"],(function(t){var e=r.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}}),{})),y=r.extend({_class:"Line",initialize:function(t,e,n,i,r){(4<=arguments.length?(this._px=t,this._py=e,this._vx=n,this._vy=i,r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,n))||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new h(this._px,this._py)},getVector:function(){return new h(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return y.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return y.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return y.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return h.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return h.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,a,s,o,l,c){l||(n-=t,i-=e,s-=r,o-=a);var d=n*o-i*s;if(!u.isZero(d)){var f=t-r,p=e-a,m=(s*p-o*f)/d,g=(n*p-i*f)/d;if(c||-1e-12<m&&m<1+1e-12&&-1e-12<g&&g<1+1e-12)return c||(m=m<=0?0:1<=m?1:m),new h(t+m*n,e+m*i)}},getSide:function(t,e,n,i,r,a,s,o){s||(n-=t,i-=e);var l=r-t,c=l*i-(a-e)*n;return!o&&u.isZero(c)&&0<=(c=(l*n+l*n)/(n*n+i*i))&&c<=1&&(c=0),c<0?-1:0<c?1:0},getSignedDistance:function(t,e,n,i,r,a,s){return s||(n-=t,i-=e),0===n?0<i?r-t:t-r:0===i?n<0?a-e:e-a:((r-t)*i-(a-e)*n)/Math.sqrt(n*n+i*i)},getDistance:function(t,e,n,i,r,a,s){return Math.abs(y.getSignedDistance(t,e,n,i,r,a,s))}}}),_=o.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){o.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new G(null,null,this),this._view=W.create(this,t||K.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return r.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,a=e._id,s=r[a];s?s.flags|=t:i.push(r[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;0<=e;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new w({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:S,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(e,t)},insertLayer:function(t,e){if(e instanceof w){e._remove(!1,!0),r.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,n,i){return n=this.insertLayer(t,n)||(this._activeLayer||this._insertItem(e,new w(x.NO_INSERT),!0)).insertChild(t,n),i&&n.activate&&n.activate(),n},getItems:function(t){return x._getItems(this,t)},getItem:function(t){return x._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return r.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var a in e){var s=e[a];s&&s!=n&&delete s[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,a=new r({offset:new h(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new v],updateMatrix:!0}),s=0,o=i.length;s<o;s++)i[s].draw(t,a);if(t.restore(),0<this._selectionCount){t.save(),t.strokeWidth=1;var l=this._selectionItems,u=this._scope.settings.handleSize,c=this._updateVersion;for(var d in l)l[d]._drawSelection(t,e,u,l,c);t.restore()}}}),x=r.extend(a,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=r.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new v,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return r.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,n){var i=t&&r.isPlainObject(t),a=i&&!0===t.internal,s=this._matrix=new v,o=i&&t.project||it.project,l=it.settings;return this._id=a?null:c.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,n&&s.translate(n),(s._owner=this)._style=new G(o._currentStyle,this,o),a||i&&0==t.insert||!l.insertItems&&(!i||!0!==t.insert)?this._setProject(o):(i&&t.parent||o)._insertItem(e,this,!0),i&&t!==x.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){var n={},i=this;function a(a){for(var s in a){var o=i[s];r.equals(o,"leading"===s?1.2*a.fontSize:a[s])||(n[s]=r.serialize(o,t,"data"!==s,e))}}return a(this._serializeFields),this instanceof b||a(this._style._defaults),[this._class,n]},_changed:function(t){var n=this._symbol,i=this._parent||n,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=e),16&t&&(this._globalMatrix=e),i&&72&t&&x._clearBoundsCache(i),2&t&&x._clearBoundsCache(this),r&&r._changed(t,this),n&&n._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var n=this._getOwner();if(t&&n){var i=n._children,r=n._namedChildren;(r[t]=r[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||e,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},r.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=r.capitalize(t),n="_"+t,i={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&((this._clipMask=t)&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?h:d,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(h.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new d(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=h.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},r.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var n=e||t instanceof v,i=r.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var a=this._getCachedBounds(n&&t,i).rect;return arguments.length?a:new g(a.x,a.y,a.width,a.height,this,"setBounds")},setBounds:function(){var t=m.read(arguments),e=this.getBounds(),n=this._matrix,i=new v,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new v).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(x._updateBoundsCache(this,e.cacheItem),x._getBounds(n,t,e)):new m},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i=e.internal&&!n,r=e.cacheItem,a=i?null:this._matrix._orNullIfIdentity(),s=r&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,i),o=this._bounds;if(x._updateBoundsCache(this._parent||this._symbol,r),s&&o&&s in o)return{rect:(d=o[s]).rect.clone(),nonscaling:d.nonscaling};var l=this._getBounds(t||a,e),u=l.rect||l,c=this._style,h=l.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(s){o||(this._bounds=o={});var d=o[s]={rect:u.clone(),nonscaling:h,internal:i}}return{rect:u,nonscaling:h}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var n=t._boundsCache;if(n){t._bounds=t._position=t._boundsCache=e;for(var i=0,r=n.list,a=r.length;i<a;i++){var s=r[i];s!==t&&(s._bounds=s._position=e,s._boundsCache&&x._clearBoundsCache(s))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,a=i,s=r,o=!1;n=n||{};for(var l=0,u=t.length;l<u;l++){var c=t[l];if(c._visible&&!c.isEmpty()){var h=c._getCachedBounds(e&&e.appended(c._matrix),n,!0),d=h.rect;i=Math.min(d.x,i),a=Math.min(d.y,a),r=Math.max(d.x+d.width,r),s=Math.max(d.y+d.height,s),h.nonscaling&&(o=!0)}}return{rect:isFinite(i)?new m(i,a,r-i,s-a):new m,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new d(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=h.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),i=this._decomposed,r=new v,a=this.getPosition(!0);r.translate(a),n&&r.rotate(n),r.scale(e.x/t.x,e.y/t.y),n&&r.rotate(-n),r.translate(a.negate()),this.transform(r),i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){e=null;for(var r=0,a=i.length;r<a;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}return e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0))),t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof w)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return r.equals(this._children,t._children)},clone:function(t){var n=new this.constructor(x.NO_INSERT),i=this._children,a=r.pick(t?t.insert:e,t===e||!0===t),s=r.pick(t?t.deep:e,!0);i&&n.copyAttributes(this),i&&!s||n.copyContent(this),i||n.copyAttributes(this),a&&n.insertAbove(this);var o=this._name,l=this._parent;if(o&&l){i=l._children;for(var u=o,c=1;i[o];)o=u+" "+c++;o!==u&&n.setName(o)}return n},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,a=n.length;i<a;i++){var s=n[i];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,l=t._name;this._data=o?r.clone(o):null,l&&this.setName(l)},rasterize:function(t,n){var i=this.getStrokeBounds(),a=(t||this.getView().getResolution())/72,s=i.getTopLeft().floor(),o=i.getBottomRight().ceil(),l=new f(o.subtract(s)),u=new M(x.NO_INSERT);if(!l.isZero()){var c=K.getCanvas(l.multiply(a)),h=c.getContext("2d"),d=(new v).scale(a).translate(s.negate());h.save(),d.applyToContext(h),this.draw(h,new r({matrices:[d]})),h.restore(),u.setCanvas(c)}return u.transform((new v).translate(s.add(l.divide(2))).scale(1/a)),(n===e||n)&&u.insertAbove(this),u},contains:function(){return!!this._contains(this._matrix._inverseTransform(h.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;0<=n;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return m.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new O.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof x&&0<this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length}},new function(){function t(){return this._hitTest(h.read(arguments),C.getOptions(arguments))}function e(){var t=h.read(arguments),e=C.getOptions(arguments),n=[];return this._hitTest(t,r.set({all:n},e)),n}function n(t,e,n,i){var r=this._children;if(r)for(var a=r.length-1;0<=a;a--){var s=r[a],o=s!==i&&s._hitTest(t,e,n);if(o&&!e.all)return o}return null}return _.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,a=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),s=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new f(O._getStrokePadding(s,i._shiftless().invert()));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var l,u,c=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==r.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=e.match,d=this;function p(t){return t&&h&&!h(t)&&(t=null),t&&e.all&&e.all.push(t),t}function m(e,n){var i=n?l["get"+n]():d.getPosition();if(t.subtract(i).divide(o).length<=1)return new C(e,d,{name:n?r.hyphenate(n):e,point:i})}var g=e.position,v=e.center,y=e.bounds;if(c&&this._parent&&(g||v||y)){if((v||y)&&(l=this.getInternalBounds()),!(u=g&&m("position")||v&&m("center","Center"))&&y)for(var _=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],x=0;x<8&&!u;x++)u=m("bounds",_[x]);u=p(u)}return u||(u=this._hitTestChildren(t,e,a)||c&&p(this._hitTestSelf(t,e,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null),u&&u.point&&(u.point=i.transform(u.point)),u},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new C("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var a=/^(empty|editable)$/.test(t)?this["is"+r.capitalize(t)]():"type"===t?r.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;a=this._class}if("function"==typeof e)return!!e(a);if(e){if(e.test)return e.test(a);if(r.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var a=e[i],s=n[i];if(r.isPlainObject(a)&&r.isPlainObject(s)){if(!t(a,s))return!1}else if(!r.equals(a,s))return!1}return!0}(e,a)}return r.equals(a,e)},getItems:function(t){return x._getItems(this,t,this._matrix)},getItem:function(t){return x._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,a,s){if(!a){var o="object"==typeof n&&n,l=o&&o.overlapping,u=o&&o.inside,c=(x=l||u)&&m.read([x]);a={items:[],recursive:o&&!1!==o.recursive,inside:!!u,overlapping:!!l,rect:c,path:l&&new O.Rectangle({rectangle:c,insert:!1})},o&&(n=r.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=e._children,d=a.items;i=(c=a.rect)&&(i||new v);for(var f=0,p=h&&h.length;f<p;f++){var g=h[f],y=i&&i.appended(g._matrix),_=!0;if(c){var x=g.getBounds(y);if(!c.intersects(x))continue;c.contains(x)||a.overlapping&&(x.contains(c)||a.path.intersects(g,y))||(_=!1)}if(_&&g.matches(n)&&(d.push(g),s))break;if(!1!==a.recursive&&t(g,n,y,a,s),s&&0<d.length)break}return d}}},{importJSON:function(t){var e=r.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(e,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&0<e.length){for(var i={},a=(e=r.slice(e)).length-1;0<=a;a--){var s=(c=e[a])&&c._id;!c||i[s]?e.splice(a,1):(c._remove(!1,!0),i[s]=!0)}r.splice(n,e,t,0);for(var o=this._project,l=o._changes,u=(a=0,e.length);a<u;a++){var c,h=(c=e[a])._name;c._parent=this,c._setProject(o,!0),h&&c.setName(h),l&&c._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(e,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],a=r?r.indexOf(this):-1;-1!==a&&(e[i]==this&&delete e[i],r.splice(a,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,a=this._index;return this._style&&this._style._dispose(),!(!n||(this._name&&this._removeNamed(),null!=a&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),r.splice(n._children,null,a,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null))},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=r.pick(e,this._children.length);for(var n=r.splice(this._children,null,t,e-t),i=n.length-1;0<=i;i--)n[i]._remove(!0,!1);return 0<n.length&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){for(var e=[];e.unshift(t),t=t._parent;);return e}for(var n=e(this),i=e(t),r=0,a=Math.min(n.length,i.length);r<a;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&0<this._children.length},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},r.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=(e?r:h).read(arguments),i=h.read(arguments,0,{readNull:!0});return this.transform((new v)[t](n,i||this.getPosition(!0)))}}),{translate:function(){var t=new v;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,i){var r=this._matrix,a=t&&!t.isIdentity(),s=(e||this._applyMatrix)&&(!r.isIdentity()||a||e&&n&&this._children);if(!a&&!s)return this;if(a){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var o=this._style,l=o.getFillColor(!0),u=o.getStrokeColor(!0);l&&l.transform(t),u&&u.transform(t)}if(s&&(s=this._transformContent(r,n,i))){var c=this._pivot;c&&r._transformPoint(c,c,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var h=this._bounds,d=this._position;(a||s)&&this._changed(25);var f=a&&h&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90==0){for(var p in h){var m=h[p];if(m.nonscaling)delete h[p];else if(s||!m.internal){var g=m.rect;t._transformBounds(g,g)}}var v=(this._bounds=h)[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else a&&d&&this._pivot&&(this._position=t._transformPoint(d,d));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,a=i.length;r<a;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(h.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(h.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(h.read(arguments))},localToParent:function(){return this._matrix._transformPoint(h.read(arguments))},fitBounds:function(t,e){t=m.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,a=(e?r<i:i<r)?t.width/n.width:t.height/n.height,s=new m(new h,new f(n.width*a,n.height*a));s.setCenter(t.getCenter()),this.setBounds(s)}}),{_setStyles:function(t,e,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t,r)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=i.getStrokeWidth();var a=i.getStrokeJoin(),s=i.getStrokeCap(),o=i.getMiterLimit();if(a&&(t.lineJoin=a),s&&(t.lineCap=s),o&&(t.miterLimit=o),it.support.nativeDash){var l=i.getDashArray(),u=i.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=u):(t.mozDash=l,t.mozDashOffset=u))}}if(i.hasShadow()){var c=e.pixelRatio||1,d=n._shiftless().prepend((new v).scale(c,c)),f=d.transform(new h(i.getShadowBlur(),0)),p=d.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=p.x,t.shadowOffsetY=p.y}},draw:function(t,e,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var i=e.matrices,r=e.viewMatrix,a=this._matrix,s=i[i.length-1].appended(a);if(s.isInvertible()){r=r?r.appended(s):s,i.push(s),e.updateMatrix&&(this._globalMatrix=s);var o,l,u,c=this._blendMode,h=this._opacity,d="normal"===c,f=tt.nativeModes[c],p=d&&1===h||e.dontStart||e.clip||(f||d&&h<1)&&this._canComposite(),m=e.pixelRatio||1;if(!p){var g=this.getStrokeBounds(r);if(!g.width||!g.height)return void i.pop();u=e.offset,l=e.offset=g.getTopLeft().floor(),o=t,t=K.getContext(g.getSize().ceil().add(1).multiply(m)),1!==m&&t.scale(m,m)}t.save();var v=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,y=!p&&e.clipItem,_=!v||y;if(p?(t.globalAlpha=h,f&&(t.globalCompositeOperation=c)):_&&t.translate(-l.x,-l.y),_&&(p?a:r).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),v){t.setTransform(m,0,0,m,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,r,v),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(),p||(tt.process(c,t,o,h,l.subtract(u).multiply(m)),K.release(t),e.offset=u)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof z)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var a=this._selection,s=1&a,o=2&a||s&&this._selectBounds,l=4&a;if(this._drawSelected||(s=!1),(s||o||l)&&this._isUpdated(r)){var u,c=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),h=e.appended(this.getGlobalMatrix(!0)),d=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):"#009dec",s&&this._drawSelected(t,h,i),l){var f=this.getPosition(!0),p=this._parent,m=p?p.localToGlobal(f):f,g=m.x,v=m.y;t.beginPath(),t.arc(g,v,d,0,2*Math.PI,!0),t.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],_=d,x=n+1,b=0;b<4;b++){var w=y[b],T=w[0],M=w[1];t.moveTo(g+T*_,v+M*_),t.lineTo(g+T*x,v+M*x),t.stroke()}}if(o){var S=h._transformCorners(this.getInternalBounds());for(t.beginPath(),b=0;b<8;b++)t[b?"lineTo":"moveTo"](S[b],S[++b]);for(t.closePath(),t.stroke(),b=0;b<8;b++)t.fillRect(S[b]-d,S[++b]-d,n,n)}}},_canComposite:function(){return!1}},r.each(["down","drag","up","move"],(function(t){this["removeOn"+r.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=n&&n.easing,r=n&&n.start,a=null!=n&&("number"==typeof n?n:n.duration),s=new Q(this,t,e,a,i,r);return a&&this.on("frame",(function t(e){s._handleFrame(1e3*e.time),s.running||this.off("frame",t)})),s},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),b=x.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(n){t.base.call(this,n),2050&n&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;if(t===e){t=null;for(var n=this._children,i=0,r=n.length;i<r;i++)if(n[i]._clipMask){t=n[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(e&&e.appended(i._matrix),r.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,a=0,s=r.length;a<s;a++){var o=r[a];o!==i&&o.draw(t,e)}}}),w=b.extend({_class:"Layer",initialize:function(){b.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),T=x.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&r.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new p(t.width,t.height,this,"setSize")},setSize:function(){var t=f.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(f.min(this._radius,t.divide(2))):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new p(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=f.read(arguments),this._radius){if(this._radius.equals(t))return;this._radius.set(t),"rectangle"===e?(n=f.max(this._size,t.multiply(2)),this._size.set(n)):"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var n=new(O[r.capitalize(this._type)])({center:new h,size:this._size,radius:this._radius,insert:!1});return n.copyAttributes(this),it.settings.applyMatrix&&n.setApplyMatrix(!0),(t===e||t)&&n.insertAbove(this),n},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r=this._style,a=r.hasFill(),s=r.hasStroke(),o=e.dontFinish||e.clip,l=!i;if(a||s||o){var u=this._type,c=this._radius,h="circle"===u;if(e.dontStart||t.beginPath(),l&&h)t.arc(0,0,c,0,2*Math.PI,!0);else{var d=h?c:c.width,f=h?c:c.height,p=this._size,m=p.width,g=p.height;if(l&&"rectangle"===u&&0===d&&0===f)t.rect(-m/2,-g/2,m,g);else{var v=m/2,y=g/2,_=.44771525016920644,x=d*_,b=f*_,w=[-v,-y+f,-v,-y+b,-v+x,-y,-v+d,-y,v-d,-y,v-x,-y,v,-y+b,v,-y+f,v,y-f,v,y-b,v-x,y,v-d,y,-v+d,y,-v+x,y,-v,y-b,-v,y-f];i&&i.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==d&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==f&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==d&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}o||!a&&!s||(this._setStyles(t,e,n),a&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),s&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new m(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(O._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),a=1;a<=4;a++){var s=new h(1<a&&a<4?-1:1,2<a?-1:1),o=s.multiply(r),l=o.subtract(s.multiply(i));if(new m(n?o.add(s.multiply(n)):o,l).contains(e))return{point:l,quadrant:a}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"!==this._type)return n.divide(this.size).getLength()<=.5;var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)},_hitTestSelf:function n(i,r,a,s){var o=!1,l=this._style,u=r.stroke&&l.hasStroke(),c=r.fill&&l.hasFill();if(u||c){var h=this._type,d=this._radius,f=u?l.getStrokeWidth()/2:0,p=r._tolerancePadding.add(O._getStrokePadding(f,!l.getStrokeScaling()&&s));if("rectangle"===h){var g=p.multiply(2),v=t(this,i,g);if(v)o=e(i.subtract(v.point),d,p,v.quadrant);else{var y=new m(this._size).setCenter(0,0),_=y.expand(g),x=y.expand(g.negate());o=_._containsPoint(i)&&!x._containsPoint(i)}}else o=e(i,d,p)}return o?new C(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,a){var s=new T(r.getNamed(a),e);return s._type=t,s._size=n,s._radius=i,s}return{Circle:function(){var e=h.readNamed(arguments,"center"),n=r.readNamed(arguments,"radius");return t("circle",e,new f(2*n),n,arguments)},Rectangle:function(){var e=m.readNamed(arguments,"rectangle"),n=f.min(f.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=T._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(r.hasNamed(t,"radius"))e=h.readNamed(t,"center"),n=f.readNamed(t,"radius");else{var i=m.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),M=x.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:!0,initialize:function(t,n){if(!this._initialize(t,n!==e&&h.read(arguments,1))){var r="string"==typeof t?i.getElementById(t):t;r?this.setImage(r):this.setSource(t)}this._size||(this._size=new f,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=K.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new p(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=f.read(arguments);if(!t.equals(this._size))if(0<t.width&&0<t.height){var e=this.getElement();this._setImage(K.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&K.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new h(0,0).transform(t),n=new h(1,0).transform(t).subtract(e),i=new h(0,1).transform(t).subtract(e);return new f(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),i=t&&t.type||"load";n&&e.responds(i)&&(it=n._scope,e.emit(i,new X(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&V.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&K.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new f(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=K.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){K.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(e){var n=new t.Image,i=this._crossOrigin;i&&(n.crossOrigin=i),n.src=e,this.setImage(n)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=t,this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=m.read(arguments),e=K.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=m.read(arguments),e=new M(x.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=h.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof I?e=(n=t).getBounds():"object"==typeof t&&("width"in t?e=new m(t):"x"in t&&(e=new m(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=Math.min(e.width,32),a=Math.min(e.height,32),s=M._sampleContext;s?s.clearRect(0,0,33,33):s=M._sampleContext=K.getContext(new f(32)),s.save();var o=(new v).scale(i/e.width,a/e.height).translate(-e.x,-e.y);o.applyToContext(s),n&&n.draw(s,new r({clip:!0,matrices:[o]})),this._matrix.applyToContext(s);var l=this.getElement(),u=this._size;l&&s.drawImage(l,-u.width/2,-u.height/2),s.restore();for(var c=s.getImageData(.5,.5,Math.ceil(i),Math.ceil(a)).data,h=[0,0,0],d=0,p=0,g=c.length;p<g;p+=4){var y=c[p+3];d+=y,y/=255,h[0]+=c[p]*y,h[1]+=c[p+1]*y,h[2]+=c[p+2]*y}for(p=0;p<3;p++)h[p]/=d;return d?F.read(h):null},getPixel:function(){var t=h.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new F("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=h.read(arguments),e=F.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),a=r.createImageData(1,1),s=a.data;s[0]=255*n[0],s[1]=255*n[1],s[2]=255*n[2],s[3]=null!=i?255*i:255,r.putImageData(a,t.x,t.y)},createImageData:function(){var t=f.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=m.read(arguments);return t.isEmpty()&&(t=new m(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=h.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new m(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new C("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();i&&0<i.width&&0<i.height&&(t.globalAlpha=this._opacity,this._setStyles(t,e,n),j.setPrefixed(t,"imageSmoothingEnabled",this._smoothing),t.drawImage(i,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),S=x.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,n){this._initialize(t,n!==e&&h.read(arguments,1))||this.setDefinition(t instanceof E?t:new E(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var i=this._definition._item._hitTest(t,e,n);return i&&(i.item=this),i},_draw:function(t,e){this._definition._item.draw(t,e)}}),E=r.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=c.get(),this.project=it.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return r.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&x._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),(this._item=t).remove(),t.setSelected(!1),e||t.setPosition(new h),(t._symbol=this)._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new S(this,t)},clone:function(){return new E(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),C=r.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&r.read(t);return r.set({type:null,tolerance:it.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),A=r.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,n,i,r,a,s){var o,l,u,c,h=arguments.length;0<h&&(null==t||"object"==typeof t?c=1===h&&t&&"point"in t?(o=t.point,l=t.handleIn,u=t.handleOut,t.selection):(o=t,l=n,u=i,r):(o=[t,n],l=i!==e?[i,r]:null,u=a!==e?[a,s]:null)),new L(o,this,"_point"),new L(l,this,"_handleIn"),new L(u,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,i=this._selection,a=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&a.push(i),r.serialize(a,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=0<r?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(h.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(h.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(h.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(0<e&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new R(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,n,i){var r=t||{},a=r.type,s=r.factor,o=this.getPrevious(),l=this.getNext(),u=(o||this)._point,c=this._point,d=(l||this)._point,f=u.getDistance(c),p=c.getDistance(d);if(a&&"catmull-rom"!==a){if("geometric"!==a)throw new Error("Smoothing method '"+a+"' not supported.");if(o&&l){var m=u.subtract(d),g=s===e?.4:s,v=g*f/(f+p);n||this.setHandleIn(m.multiply(v)),i||this.setHandleOut(m.multiply(v-g))}}else{var y=s===e?.5:s,_=Math.pow(f,y),x=_*_,b=Math.pow(p,y),w=b*b;if(!n&&o){var T=2*w+3*b*_+x,M=3*b*(b+_);this.setHandleIn(0!==M?new h((w*u._x+T*c._x-x*d._x)/M-c._x,(w*u._y+T*c._y-x*d._y)/M-c._y):new h)}!i&&l&&(T=2*x+3*_*b+w,M=3*_*(_+b),this.setHandleOut(0!==M?new h((x*d._x+T*c._x-w*u._x)/M-c._x,(x*d._y+T*c._y-w*u._y)/M-c._y):new h))}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new A(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new A(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,a=t._point,s=e._point,o=t._handleIn,l=e._handleIn,u=e._handleOut,c=t._handleOut;this._point._set(i*a._x+r*s._x,i*a._y+r*s._y,!0),this._handleIn._set(i*o._x+r*l._x,i*o._y+r*l._y,!0),this._handleOut._set(i*c._x+r*u._x,i*c._y+r*u._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,s=i._x,o=i._y,l=2;return e[0]=s,e[1]=o,r&&(e[l++]=r._x+s,e[l++]=r._y+o),a&&(e[l++]=a._x+s,e[l++]=a._y+o),t&&(t._transformCoordinates(e,e,l/2),s=e[0],o=e[1],n?(i._x=s,i._y=o,l=2,r&&(r._x=e[l++]-s,r._y=e[l++]-o),a&&(a._x=e[l++]-s,a._y=e[l++]-o)):(r||(e[l++]=s,e[l++]=o),a||(e[l++]=s,e[l++]=o))),e}}),L=h.extend({initialize:function(t,n,i){var r,a,s;if(t)if((r=t[0])!==e)a=t[1];else{var o=t;(r=o.x)===e&&(r=(o=h.read(arguments)).x),a=o.y,s=o.selected}else r=a=0;this._x=r,this._y=a,(this._owner=n)[i]=this,s&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=u.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),P=r.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,a,s,o){var l,u,c,h,d,f,p=arguments.length;3===p?(this._path=t,l=e,u=n):p?1===p?"segment1"in t?(l=new A(t.segment1),u=new A(t.segment2)):"point1"in t?(c=t.point1,d=t.handle1,f=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],d=[t[2]-t[0],t[3]-t[1]],f=[t[4]-t[6],t[5]-t[7]]):2===p?(l=new A(t),u=new A(e)):4===p?(c=t,d=e,f=n,h=i):8===p&&(c=[t,e],h=[s,o],d=[n-t,i-e],f=[r-s,a-o]):(l=new A,u=new A),this._segment1=l||new A(c,null,d),this._segment2=u||new A(h,f,null)},_serialize:function(t,e){return r.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=e},clone:function(){return new P(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return P.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(h.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(h.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(h.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(h.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return P.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new h(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=P.getLength(this.getValues(),0,1)),this._length},getArea:function(){return P.getArea(this.getValues())},getLine:function(){return new y(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new P(P.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return P.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(1e-8<=t&&t<=1-1e-8){var i=P.subdivide(this.getValues(),t),r=i[0],a=i[1],s=e||this.hasHandles(),o=this._segment1,l=this._segment2,u=this._path;s&&(o._handleOut._set(r[2]-r[0],r[3]-r[1]),l._handleIn._set(a[4]-a[6],a[5]-a[7]));var c=r[6],d=r[7],f=new A(new h(c,d),s&&new h(r[4]-c,r[5]-d),s&&new h(a[2]-c,a[3]-d));n=u?(u.insert(o._index+1,f),this.getNext()):(this._segment2=f,this._changed(),new P(f,l))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,n){return this.divideAtTime(t===e?.5:n?t:this.getTimeAt(t))},split:function(t,n){return this.splitAtTime(t===e?.5:n?t:this.getTimeAt(t))},reversed:function(){return new P(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,a=t._handleOut,s=e._handleIn,o=e._point,l=r.x,u=r.y,c=o.x,h=o.y,d=i?[l,u,l,u,c,h,c,h]:[l,u,l+a._x,u+a._y,c+s._x,h+s._y,c,h];return n&&n._transformCoordinates(d,d,4),d},subdivide:function(t,n){var i=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7];n===e&&(n=.5);var h=1-n,d=h*i+n*a,f=h*r+n*s,p=h*a+n*o,m=h*s+n*l,g=h*o+n*u,v=h*l+n*c,y=h*d+n*p,_=h*f+n*m,x=h*p+n*g,b=h*m+n*v,w=h*y+n*x,T=h*_+n*b;return[[i,r,d,f,y,_,w,T],[w,T,x,b,g,v,u,c]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],a=t[i+2],s=t[i+4],o=t[i+6];if(a<=r==s<=a&&s<=a==o<=s||P.isStraight(t))n.push(t);else{var l=3*(a-s)-r+o,c=2*(r+s)-4*a,h=a-r,d=[],f=u.solveQuadratic(l,c,h,d,1e-8,1-1e-8);if(f){d.sort();var p=d[0],m=P.subdivide(t,p);n.push(m[0]),1<f&&(p=(d[1]-p)/(1-p),m=P.subdivide(m[1],p),n.push(m[0])),n.push(m[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,a){var s=t[e],o=t[e+2],l=t[e+4],c=t[e+6],h=0;if(!(s<n&&c<n&&o<n&&l<n||n<s&&n<c&&n<o&&n<l)){var d=3*(o-s),f=3*(l-o)-d,p=c-s-d-f;h=u.solveCubic(p,f,d,s-n,i,r,a)}return h},getTimeOf:function(t,e){var n=new h(t[0],t[1]),i=new h(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var r=[e.x,e.y],a=[],s=0;s<2;s++)for(var o=P.solveCubic(t,s,r[s],a,0,1),l=0;l<o;l++){var u=a[l];if(e.isClose(P.getPoint(t,u),1e-7))return u}return e.isClose(n,1e-7)?0:e.isClose(i,1e-7)?1:null},getNearestTime:function(t,e){if(P.isStraight(t)){var n=t[0],i=t[1],r=t[6]-n,a=t[7]-i,s=r*r+a*a;if(0===s)return 0;var o=((e.x-n)*r+(e.y-i)*a)/s;return o<1e-12?0:.999999999999<o?1:P.getTimeOf(t,new h(n+o*r,i+o*a))}var l=1/0,u=0;function c(n){if(0<=n&&n<=1){var i=e.getDistance(P.getPoint(t,n),!0);if(i<l)return l=i,u=n,!0}}for(var d=0;d<=100;d++)c(d/100);for(var f=.005;1e-8<f;)c(u-f)||c(u+f)||(f/=2);return u},getPart:function(t,e,n){var i=n<e;if(i){var r=e;e=n,n=r}return 0<e&&(t=P.subdivide(t,e)[1]),n<1&&(t=P.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],u=t[7],c=3*r-2*n-l,h=3*a-2*i-u,d=3*s-2*l-n,f=3*o-2*u-i;return Math.max(c*c,d*d)+Math.max(h*h,f*f)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7];return 3*((l-n)*(i+a)-(o-e)*(r+s)+r*(e-a)-i*(n-s)+l*(a+e/3)-o*(s+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)P._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new m(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,a,s,o,l){function c(t,e){var n=t-e,i=t+e;n<s[r]&&(s[r]=n),i>o[r]&&(o[r]=i)}a/=2;var h=s[r]-a,d=o[r]+a;if(t<h||e<h||n<h||i<h||d<t||d<e||d<n||d<i)if(e<t!=e<i&&n<t!=n<i)c(t,a),c(i,a);else{var f=3*(e-n)-t+i,p=2*(t+n)-4*e,m=e-t,g=u.solveQuadratic(f,p,m,l);c(i,0);for(var v=0;v<g;v++){var y=l[v],_=1-y;1e-8<=y&&y<=1-1e-8&&c(_*_*_*t+3*_*_*y*e+3*_*y*y*n+y*y*y*i,a)}}}}},r.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=O[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),r.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var a=new y(t,i);if(a.getDistance(t.add(e))<1e-7&&a.getDistance(i.add(n))<1e-7){var s=r.dot(r),o=r.dot(e)/s,l=r.dot(n)/s;return 0<=o&&o<=1&&l<=0&&-1<=l}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},(function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],a=e[6],s=e[7];return t(new h(i,r),new h(e[2]-i,e[3]-r),new h(e[4]-a,e[5]-s),new h(a,s),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&0<=t&&t<=1?new R(this,t):null},getTimeAt:function(t,e){return P.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=h.read(arguments);return t.isZero()?[]:P.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(h.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return P.getTimeOf(this.getValues(),h.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=h.read(arguments),e=this.getValues(),n=P.getNearestTime(e,t),i=P.getPoint(e,n);return new R(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return r.each(t,(function(t){this[t+"At"]=function(e,n){var i=this.getValues();return P[t](i,n?e:P.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return P[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],u=9*(i-a)+3*(o-e),c=6*(e+a)-12*i,h=3*(i-e),d=9*(r-s)+3*(l-n),f=6*(n+s)-12*r,p=3*(r-n);return function(t){var e=(u*t+c)*t+h,n=(d*t+f)*t+p;return Math.sqrt(e*e+n*n)}}function n(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,n,i){if(null==e||e<0||1<e)return null;var r=t[0],a=t[1],s=t[2],o=t[3],l=t[4],c=t[5],d=t[6],f=t[7],p=u.isZero;p(s-r)&&p(o-a)&&(s=r,o=a),p(l-d)&&p(c-f)&&(l=d,c=f);var m,g,v=3*(s-r),y=3*(l-s)-v,_=d-r-v-y,x=3*(o-a),b=3*(c-o)-x,w=f-a-x-b;if(0===n)m=0===e?r:1===e?d:((_*e+y)*e+v)*e+r,g=0===e?a:1===e?f:((w*e+b)*e+x)*e+a;else{if(g=e<1e-8?(m=v,x):1-1e-8<e?(m=3*(d-l),3*(f-c)):(m=(3*_*e+2*y)*e+v,(3*w*e+2*b)*e+x),i){0===m&&0===g&&(e<1e-8||1-1e-8<e)&&(m=l-s,g=c-o);var T=Math.sqrt(m*m+g*g);T&&(m/=T,g/=T)}if(3===n){l=6*_*e+2*y,c=6*w*e+2*b;var M=Math.pow(m*m+g*g,1.5);m=0!==M?(m*c-g*l)/M:0,g=0}}return 2===n?new h(g,-m):new h(m,g)}return{statics:{classify:function(t){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],h=r*(i-c)+a*(l-n)+n*c-i*l,d=3*(s*(a-i)+o*(n-r)+r*i-a*n),f=d-h,p=f-h+(n*(c-o)+i*(s-l)+l*o-c*s),m=Math.sqrt(p*p+f*f+d*d),g=0!==m?1/m:0,v=u.isZero,y="serpentine";function _(t,n,i){var r=n!==e,a=r&&0<n&&n<1,s=r&&0<i&&i<1;return!r||(a||s)&&("loop"!==t||a&&s)||(a=s=!(t="arch")),{type:t,roots:a||s?a&&s?n<i?[n,i]:[i,n]:[a?n:i]:null}}if(f*=g,d*=g,v(p*=g))return v(f)?_(v(d)?"line":"quadratic"):_(y,d/(3*f));var x=3*f*f-4*p*d;if(v(x))return _("cusp",f/(2*p));var b=0<x?Math.sqrt(x/3):Math.sqrt(-x),w=2*p;return _(0<x?y:"loop",(f+b)/w,(f-b)/w)},getLength:function(i,r,a,s){if(r===e&&(r=0),a===e&&(a=1),P.isStraight(i)){var o=i;a<1&&(o=P.subdivide(o,a)[0],r/=a),0<r&&(o=P.subdivide(o,r)[1]);var l=o[6]-o[0],c=o[7]-o[1];return Math.sqrt(l*l+c*c)}return u.integrate(s||t(i),r,a,n(r,a))},getTimeAt:function(i,r,a){if(a===e&&(a=r<0?1:0),0===r)return a;var s=Math.abs,o=0<r,l=o?a:0,c=o?1:a,h=t(i),d=P.getLength(i,l,c,h),f=s(r)-d;if(s(f)<1e-12)return o?c:l;if(1e-12<f)return null;var p=r/d,m=0;return u.findRoot((function(t){return m+=u.integrate(h,a,t,n(a,t)),a=t,m-r}),h,a+p,l,c,32,1e-12)},getPoint:function(t,e){return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=3*i-e-3*a+t[6],l=3*e-6*i+3*a,c=-3*e+3*i,h=3*r-n-3*s+t[7],d=3*n-6*r+3*s,f=-3*n+3*r,p=[];return u.solveCubic(9*(o*o+h*h),9*(o*l+d*h),2*(l*l+d*d)+3*(c*o+f*h),c*l+d*f,p,1e-8,1-1e-8),p.sort()}}}},new function(){function t(t,e,n,i,r,a,s){var o=!s&&n.getPrevious()===r,l=!s&&n!==r&&n.getNext()===r;if(null!==i&&(o?1e-8:0)<=i&&i<=(l?1-1e-8:1)&&null!==a&&(l?1e-8:0)<=a&&a<=(o?1-1e-8:1)){var u=new R(n,i,null,s),c=new R(r,a,null,s);(u._intersection=c)._intersection=u,e&&!e(u)||R.insert(t,u,!0)}}function e(t,e,i,r){return t[0][1]<i?n(t,!0,i):e[0][1]>r?n(e,!1,r):t[0][0]}function n(t,e,n){for(var i=t[0][0],r=t[0][1],a=1,s=t.length;a<s;a++){var o=t[a][0],l=t[a][1];if(e?n<=l:l<=n)return l===n?o:i+(n-r)*(o-i)/(l-r);i=o,r=l}return null}function i(t,e,n,i,r){var a=u.isZero;if(a(i)&&a(r)){var s=P.getTimeOf(t,new h(e,n));return null===s?[]:[s]}for(var o=Math.atan2(-r,i),l=Math.sin(o),c=Math.cos(o),d=[],f=[],p=0;p<8;p+=2){var m=t[p]-e,g=t[p+1]-n;d.push(m*c-g*l,m*l+g*c)}return P.solveCubic(d,1,0,f,0,1),f}function a(n,r,a,s,l,u){var c=1e-12,d=Math.min,f=Math.max;if(f(n[0],n[2],n[4],n[6])+c>d(r[0],r[2],r[4],r[6])&&d(n[0],n[2],n[4],n[6])-c<f(r[0],r[2],r[4],r[6])&&f(n[1],n[3],n[5],n[7])+c>d(r[1],r[3],r[5],r[7])&&d(n[1],n[3],n[5],n[7])-c<f(r[1],r[3],r[5],r[7])){var p=o(n,r);if(p)for(var m=0;m<2;m++){var g=p[m];t(l,u,a,g[0],s,g[1],!0)}else{var v=P.isStraight(n),_=P.isStraight(r),x=v&&_,b=v&&!_,w=l.length;if((x?function(e,n,i,r,a,s){var o=y.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);o&&t(a,s,i,P.getTimeOf(e,o),r,P.getTimeOf(n,o))}:v||_?function(e,n,r,a,s,o,l){for(var u=n[0],c=n[1],h=i(e,u,c,n[6]-u,n[7]-c),d=0,f=h.length;d<f;d++){var p=h[d],m=P.getPoint(e,p),g=P.getTimeOf(n,m);null!==g&&t(s,o,l?a:r,l?g:p,l?r:a,l?p:g)}}:function n(i,r,a,s,o,l,u,c,h,d,f,p,m){if(4096<=++h||40<=++c)return h;var g,v,_=r[0],x=r[1],b=r[6],w=r[7],T=y.getSignedDistance,M=T(_,x,b,w,r[2],r[3]),S=T(_,x,b,w,r[4],r[5]),E=0<M*S?.75:4/9,C=E*Math.min(0,M,S),A=E*Math.max(0,M,S),L=T(_,x,b,w,i[0],i[1]),R=T(_,x,b,w,i[2],i[3]),I=T(_,x,b,w,i[4],i[5]),O=T(_,x,b,w,i[6],i[7]),z=function(t,e,n,i){var r,a=[0,t],s=[1/3,e],o=[2/3,n],l=[1,i],u=e-(2*t+i)/3,c=n-(t+2*i)/3;if(u*c<0)r=[[a,s,l],[a,o,l]];else{var h=u/c;r=[2<=h?[a,s,l]:h<=.5?[a,o,l]:[a,s,o,l],[a,l]]}return(u||c)<0?r.reverse():r}(L,R,I,O),D=z[0],N=z[1];if(0===M&&0===S&&0===L&&0===R&&0===I&&0===O||null==(g=e(D,N,C,A))||null==(v=e(D.reverse(),N.reverse(),C,A)))return h;var k=d+(f-d)*g,B=d+(f-d)*v;if(Math.max(m-p,B-k)<1e-9){var F=(k+B)/2,U=(p+m)/2;t(o,l,u?s:a,u?U:F,u?a:s,u?F:U)}else if(i=P.getPart(i,g,v),.8<v-g)if(m-p<B-k)F=(k+B)/2,h=n(r,(H=P.subdivide(i,.5))[0],s,a,o,l,!u,c,h,p,m,k,F),h=n(r,H[1],s,a,o,l,!u,c,h,p,m,F,B);else{var H;U=(p+m)/2,h=n((H=P.subdivide(r,.5))[0],i,s,a,o,l,!u,c,h,p,U,k,B),h=n(H[1],i,s,a,o,l,!u,c,h,U,m,k,B)}else h=1e-9<=m-p?n(r,i,s,a,o,l,!u,c,h,p,m,k,B):n(i,r,a,s,o,l,u,c,h,k,B,p,m);return h})(b?r:n,b?n:r,b?s:a,b?a:s,l,u,b,0,0,0,1,0,1),!x||l.length===w)for(m=0;m<4;m++){var T=m>>1,M=1&m,S=6*T,E=6*M,C=new h(n[S],n[S+1]),A=new h(r[E],r[E+1]);C.isClose(A,c)&&t(l,u,a,T,s,M)}}}return l}function s(e,n,i,r){var a=P.classify(e);if("loop"===a.type){var s=a.roots;t(i,r,n,s[0],n,s[1])}return i}function o(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=y.getDistance,a=1e-7,s=P.isStraight(t),o=P.isStraight(e),l=s&&o,u=n(t)<n(e),c=u?e:t,d=u?t:e,f=c[0],p=c[1],m=c[6]-f,g=c[7]-p;if(r(f,p,m,g,d[0],d[1],!0)<a&&r(f,p,m,g,d[6],d[7],!0)<a)!l&&r(f,p,m,g,c[2],c[3],!0)<a&&r(f,p,m,g,c[4],c[5],!0)<a&&r(f,p,m,g,d[2],d[3],!0)<a&&r(f,p,m,g,d[4],d[5],!0)<a&&(s=o=l=!0);else if(l)return null;if(s^o)return null;for(var v=[t,e],_=[],x=0;x<4&&_.length<2;x++){var b=1&x,w=1^b,T=x>>1,M=P.getTimeOf(v[b],new h(v[w][T?6:0],v[w][T?7:1]));if(null!=M){var S=b?[T,M]:[M,T];(!_.length||1e-8<i(S[0]-_[0][0])&&1e-8<i(S[1]-_[0][1]))&&_.push(S)}if(2<x&&!_.length)break}if(2!==_.length)_=null;else if(!l){var E=P.getPart(t,_[0][0],_[1][0]),C=P.getPart(e,_[0][1],_[1][1]);(i(C[2]-E[2])>a||i(C[3]-E[3])>a||i(C[4]-E[4])>a||i(C[5]-E[5])>a)&&(_=null)}return _}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?a(e,n,this,t,[]):s(e,this,[])},statics:{getOverlaps:o,getIntersections:function(t,e,n,i,o,l){var u=!e;u&&(e=t);for(var c,h,d=t.length,f=e.length,p=[],m=[],g=0;g<f;g++)p[g]=e[g].getValues(o);for(g=0;g<d;g++){var v=t[g],y=u?p[g]:v.getValues(i),_=v.getPath();_!==h&&(h=_,c=[],m.push(c)),u&&s(y,v,c,n);for(var x=u?g+1:0;x<f;x++){if(l&&c.length)return c;a(y,p[x],v,e[x],c,n)}}c=[],g=0;for(var b=m.length;g<b;g++)r.push(c,m[g]);return c},getCurveLineIntersections:i,getTimesWithTangent:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],h=e.normalize(),d=h.x,f=h.y,p=3*l-9*s+9*r-3*n,m=3*c-9*o+9*a-3*i,g=6*s-12*r+6*n,v=6*o-12*a+6*i,y=3*r-3*n,_=3*a-3*i,x=2*p*f-2*m*d,b=[];if(Math.abs(x)<u.CURVETIME_EPSILON){if(0!=(x=p*v-m*g)){var w=-(p*_-m*y)/x;0<=w&&w<=1&&b.push(w)}}else{var T=(g*g-4*p*y)*f*f+(-2*g*v+4*m*y+4*p*_)*d*f+(v*v-4*m*_)*d*d,M=g*f-v*d;if(0<=T&&0!=x){var S=Math.sqrt(T),E=-(M+S)/x,C=(-M+S)/x;0<=E&&E<=1&&b.push(E),0<=C&&C<=1&&b.push(C)}}return b}}}}),R=r.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(.99999999<=e){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof R){var i=this.getCurve(),r=t.getCurve(),a=i._path;if(a===r._path){var s=Math.abs,o=s(this.getOffset()-t.getOffset()),l=!e&&this._intersection,u=!e&&t._intersection;n=(o<1e-7||a&&s(a.getLength()-o)<1e-7)&&(!l&&!u||l&&u&&l.equals(u,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=l.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),i=1e-8,r=1-i,a=i<=e&&e<=r,s=i<=n&&n<=r;if(a&&s)return!this.isTouching();var o=this.getCurve(),l=e<i?o.getPrevious():o,u=t.getCurve(),c=n<i?u.getPrevious():u;if(r<e&&(o=o.getNext()),r<n&&(u=u.getNext()),!(l&&o&&c&&u))return!1;var h=[];function d(t,e){var n=t.getValues(),i=P.classify(n).roots||P.getPeaks(n),r=i.length,a=e&&1<r?i[r-1]:0<r?i[0]:.5;h.push(P.getLength(n,e?a:0,e?1:a)/2)}function f(t,e,n){return e<n?e<t&&t<n:e<t||t<n}a||(d(l,!0),d(o,!1)),s||(d(c,!0),d(u,!1));var p=this.getPoint(),m=Math.min.apply(Math,h),g=a?o.getTangentAtTime(e):o.getPointAt(m).subtract(p),v=a?g.negate():l.getPointAt(-m).subtract(p),y=s?u.getTangentAtTime(n):u.getPointAt(m).subtract(p),_=s?y.negate():c.getPointAt(-m).subtract(p),x=v.getAngle(),b=g.getAngle(),w=_.getAngle(),T=y.getAngle();return!!(a?f(x,w,T)^f(b,w,T)&&f(x,T,w)^f(b,T,w):f(w,x,b)^f(T,x,b)&&f(w,b,x)^f(T,b,x))},hasOverlap:function(){return!!this._overlap}},r.each(P._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,a=i-1;function s(n,r){for(var a=n+r;-1<=a&&a<=i;a+=r){var s=t[(a%i+i)%i];if(!e.getPoint().isClose(s.getPoint(),1e-7))break;if(e.equals(s))return s}return null}for(;r<=a;){var o,l=r+a>>>1,u=t[l];if(n&&(o=e.equals(u)?u:s(l,-1)||s(l,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var c=e.getPath(),h=u.getPath();(c!==h?c._id-h._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?a=l-1:r=l+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;0<=i;i--)t(n,e[i]._intersection,!1);return n}}}}),I=x.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(r.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var a=n[0];i=a&&Array.isArray(a[0])}else e&&(i=1<(e.match(/m/gi)||[]).length||/z\s*\S+/i.test(e));return new(i?z:O)(t)}},_asPathItem:function(){return this},isClockwise:function(){return 0<=this.getArea()},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,i,r=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,s=new h,o=new h;function l(t,n){var i=+e[t];return a&&(i+=s[n]),i}function u(t){return new h(l(t,"x"),l(t+1,"y"))}this.clear();for(var c=0,d=r&&r.length;c<d;c++){var p=r[c],m=p[0],g=m.toLowerCase(),v=(e=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(a=m===g,"z"!==n||/[mz]/.test(g)||this.moveTo(s),g){case"m":case"l":for(var y="m"===g,_=0;_<v;_+=2)this[y?"moveTo":"lineTo"](s=u(_)),y&&(o=s,y=!1);i=s;break;case"h":case"v":var x="h"===g?"x":"y";for(s=s.clone(),_=0;_<v;_++)s[x]=l(_,x),this.lineTo(s);i=s;break;case"c":for(_=0;_<v;_+=6)this.cubicCurveTo(u(_),i=u(_+2),s=u(_+4));break;case"s":for(_=0;_<v;_+=4)this.cubicCurveTo(/[cs]/.test(n)?s.multiply(2).subtract(i):s,i=u(_),s=u(_+2)),n=g;break;case"q":for(_=0;_<v;_+=4)this.quadraticCurveTo(i=u(_),s=u(_+2));break;case"t":for(_=0;_<v;_+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?s.multiply(2).subtract(i):s,s=u(_)),n=g;break;case"a":for(_=0;_<v;_+=7)this.arcTo(s=u(_+5),new f(+e[_],+e[_+1]),+e[_+2],+e[_+4],+e[_+3]);break;case"z":this.closePath(1e-12),s=o}n=g}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,a=this._matrix._orNullIfIdentity(),s=r?a:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(a).intersects(t.getBounds(s),1e-12)?P.getIntersections(this.getCurves(),!r&&t.getCurves(),e,a,s,i):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.hasOverlap()||t.isCrossing()}))},getNearestLocation:function(){for(var t=h.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,a=e.length;r<a;r++){var s=e[r].getNearestLocation(t);s._distance<n&&(n=s._distance,i=s)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",a=t[r],s=e[r],o=this[r];if(!a||!s||a.length!==s.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=o.length,u=s.length;if(l<u)for(var c=i?A:O,h=l;h<u;h++)this.add(new c);else u<l&&this[i?"removeSegments":"removeChildren"](u,l);for(h=0;h<u;h++)o[h].interpolate(a[h],s[h],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,a=i.length,s=[],o=0;e=!0;for(var l=r-1;0<=l&&e;l--){var u=n[l];e=!1;for(var c=a-1;0<=c&&!e;c--)u.compare(i[c])&&(s[c]||(s[c]=!0,o++),e=!0)}e=e&&o===a}return e}}),O=I.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var n=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==e||t.x===e&&t.point===e?null:arguments;n&&0<n.length?this.setSegments(n):(this._curves=e,this._segmentSelection=0,n||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!n&&t)},_equals:function(t){return this._closed===t._closed&&r.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(n){if(t.base.call(this,n),8&n){if(this._length=this._area=e,32&n)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else 64&n&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof z?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var n=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,i){var r=t[i-1];"boolean"==typeof r&&(this.setClosed(r),i--),this._add(A.readList(t,0,{},i))}n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new P(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new P(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,i,r,a,s,o,u,c,h=this._segments,d=h.length,f=new l(e),p=new Array(6),m=!0,g=[];function v(e,l){if(e._transformCoordinates(t,p),n=p[0],i=p[1],m)g.push("M"+f.pair(n,i)),m=!1;else if(s=p[2],o=p[3],s===n&&o===i&&u===r&&c===a){if(!l){var h=n-r,d=i-a;g.push(0===h?"v"+f.number(d):0===d?"h"+f.number(h):"l"+f.pair(h,d))}}else g.push("c"+f.pair(u-r,c-a)+" "+f.pair(s-r,o-a)+" "+f.pair(n-r,i-a));r=n,a=i,u=p[4],c=p[5]}if(!d)return"";for(var y=0;y<d;y++)v(h[y]);return this._closed&&0<d&&(v(h[0],!0),g.push("z")),g.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,a=t.length,s=null==e,o=(e=s?n.length:e,0);o<a;o++){var l=t[o];l._path&&(l=t[o]=l.clone()),l._path=this,l._index=e+o,l._selection&&this._updateSelection(l,0,l._selection)}if(s)r.push(n,t);else{n.splice.apply(n,[e,0].concat(t)),o=e+a;for(var u=n.length;o<u;o++)n[o]._index=o}if(i){var c=this._countCurves(),h=0<e&&e+a-1===c?e-1:e,d=h,f=Math.min(h+a,c);for(t._curves&&(i.splice.apply(i,[h,0].concat(t._curves)),d+=t._curves.length),o=d;o<f;o++)i.splice(o,0,new P(this,null,null));this._adjustCurves(h,f)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,a=t;a<e;a++)(n=r[a])._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&0<t?t-1:t},add:function(t){return 1<arguments.length&&"number"!=typeof t?this._add(A.readList(arguments)):this._add([A.read(arguments)])[0]},insert:function(t,e){return 2<arguments.length&&"number"!=typeof e?this._add(A.readList(arguments,1),t):this._add([A.read(arguments,1)],t)[0]},addSegment:function(){return this._add([A.read(arguments)])[0]},insertSegment:function(t){return this._add([A.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(A.readList(t))},insertSegments:function(t,e){return this._add(A.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=r.pick(e,this._segments.length);var i=this._segments,a=this._curves,s=i.length,o=i.splice(t,e-t),l=o.length;if(!l)return o;for(var u=0;u<l;u++){var c=o[u];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}u=t;for(var h=i.length;u<h;u++)i[u]._index=u;if(a){var d=0<t&&e===s+(this._closed?1:0)?t-1:t;for(u=(a=a.splice(d,l)).length-1;0<=u;u--)a[u]._path=null;n&&(o._curves=a.slice(1)),this._adjustCurves(d,d)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){for(var e=this._segments,n=this._closed,i=t=0,r=e.length;i<r;i++){var a=i+1===r;t+=P.getArea(P.getValues(e[i],e[a?0:i+1],null,a&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&0<t&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,0<(this._segmentSelection+=n-e)&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time;1-1e-8<i&&(n++,i=0);var r=this.getCurves();if(0<=n&&n<r.length){1e-8<=i&&r[n++].divideAtTime(i);var a,s=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new O(x.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(s,0),this.addSegment(s[0]),a}return null},split:function(t,n){var i,r=n===e?t:(i=this.getCurves()[t])&&i.getLocationAtTime(n);return null!=r?this.splitAt(r):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;r&&r._point.isClose(a._point,n)&&t.reverse();var s=t.getFirstSegment();if(r&&r._point.isClose(s._point,n))r.setHandleOut(s._handleOut),this._add(i.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(s._point,n)&&t.reverse(),a=t.getLastSegment(),o&&o._point.isClose(a._point,n)?(o.setHandleIn(a._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var l=this.getFirstSegment(),u=this.getLastSegment();return l!==u&&l._point.isClose(u._point,n)&&(l.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;0<=r;r--){var a=e[r];!a.hasHandles()&&(!a.hasLength(i)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new D(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new A(e[r].curve.slice(0,2)));!this._closed&&0<n&&i.push(new A(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new N(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var n=this,i=t||{},r=i.type||"asymmetric",a=this._segments,s=a.length,o=this._closed;function l(t,e){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==n)throw new Error(t._class+" "+i+" of "+r+" is not part of "+n);e&&t instanceof P&&i++}else i="number"==typeof t?t:e;return Math.min(i<0&&o?i%s:i<0?i+s:i,s-1)}var u=o&&i.from===e&&i.to===e,c=l(i.from,0),h=l(i.to,s-1);if(h<c)if(o)c-=s;else{var d=c;c=h,h=d}if(/^(?:asymmetric|continuous)$/.test(r)){var f="asymmetric"===r,p=Math.min,m=h-c+1,g=m-1,v=u?p(m,4):1,y=v,_=v,x=[];if(o||(y=p(1,c),_=p(1,s-h-1)),(g+=y+_)<=1)return;for(var b=0,w=c-y;b<=g;b++,w++)x[b]=a[(w<0?w+s:w)%s]._point;var T=x[0]._x+2*x[1]._x,M=x[0]._y+2*x[1]._y,S=2,E=g-1,C=[T],A=[M],L=[S],R=[],I=[];for(b=1;b<g;b++){var O=b<E,z=O?4:f?2:7,D=O?4:f?3:8,N=O?2:f?0:1,k=(O||f?1:2)/S;S=L[b]=z-k,T=C[b]=D*x[b]._x+N*x[b+1]._x-k*T,M=A[b]=D*x[b]._y+N*x[b+1]._y-k*M}for(R[E]=C[E]/L[E],I[E]=A[E]/L[E],b=g-2;0<=b;b--)R[b]=(C[b]-R[b+1])/L[b],I[b]=(A[b]-I[b+1])/L[b];R[g]=(3*x[g]._x-R[E])/2,I[g]=(3*x[g]._y-I[E])/2,b=y;var B=g-_;for(w=c;b<=B;b++,w++){var F=a[w<0?w+s:w],U=F._point,H=R[b]-U._x,G=I[b]-U._y;(u||b<B)&&F.setHandleOut(H,G),(u||y<b)&&F.setHandleIn(-H,-G)}}else for(b=c;b<=h;b++)a[b<0?b+s:b].smooth(i,!u&&b===c,!u&&b===h)},toShape:function(t){if(!this._closed)return null;var n,i,r,a,s,o,l,c=this._segments;function h(t,e){var n=c[t],i=n.getNext(),r=c[e],a=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&a._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(a._point.subtract(r._point))}function d(t){var e=c[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,a=.5522847498307936;if(i.isOrthogonal(r)){var s=e._point,o=n._point,l=new y(s,i,!0).intersect(new y(o,r,!0),!0);return l&&u.isZero(i.getLength()/l.subtract(s).getLength()-a)&&u.isZero(r.getLength()/l.subtract(o).getLength()-a)}return!1}function p(t,e){return c[t]._point.getDistance(c[e]._point)}if(!this.hasHandles()&&4===c.length&&h(0,2)&&h(1,3)&&(o=(s=c[1]).getPrevious(),l=s.getNext(),o._handleOut.isZero()&&s._handleIn.isZero()&&s._handleOut.isZero()&&l._handleIn.isZero()&&s._point.subtract(o._point).isOrthogonal(l._point.subtract(s._point)))?(n=T.Rectangle,i=new f(p(0,3),p(0,1)),a=c[1]._point.add(c[2]._point).divide(2)):8===c.length&&d(0)&&d(2)&&d(4)&&d(6)&&h(1,5)&&h(3,7)?(n=T.Rectangle,r=(i=new f(p(1,6),p(0,3))).subtract(new f(p(0,7),p(1,2))).divide(2),a=c[3]._point.add(c[4]._point).divide(2)):4===c.length&&d(0)&&d(1)&&d(2)&&d(3)&&(r=u.isZero(p(0,2)-p(1,3))?(n=T.Circle,p(0,2)/2):(n=T.Ellipse,new f(p(2,0)/2,p(3,1)/2)),a=c[1]._point),n){var m=this.getPosition(!0),g=new n({center:m,size:i,radius:r,insert:!1});return g.copyAttributes(this,!0),g._matrix.prepend(this._matrix),g.rotate(a.subtract(m).getAngle()+90),(t===e||t)&&g.insertAbove(this),g}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof z)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,a=i.length;if(!r||!a)return r==a;for(var s,o,l=n[0].getValues(),u=[],c=0,h=0,d=0;d<a;d++){var f=i[d].getValues();if(u.push(f),g=P.getOverlaps(l,f)){s=!d&&0<g[0][0]?a-1:d,o=g[0][1];break}}var p,m=Math.abs;for(f=u[s];l&&f;){var g;if((g=P.getOverlaps(l,f))&&m(g[0][0]-h)<1e-8){1===(h=g[1][0])&&(l=++c<r?n[c].getValues():null,h=0);var v=g[0][1];if(m(v-o)<1e-8){if(p||(p=[s,v]),1===(o=g[1][1])&&(++s>=a&&(s=0),f=u[s]||i[s].getValues(),o=0),!l)return p[0]===s&&p[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){var r,a,s,o,l,u,c=this,h=this.getStyle(),d=this._segments,f=d.length,p=this._closed,m=e._tolerancePadding,g=m,v=e.stroke&&h.hasStroke(),y=e.fill&&h.hasFill(),_=e.curves,x=v?h.getStrokeWidth()/2:y&&0<e.tolerance||_?0:null;function b(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(n!==r&&(n=n.add(r)),b(n,g))return new C(i,c,{segment:t,point:n})}}function T(t,n){return(n||e.segments)&&w(t,t._point,"segment")||!n&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function M(t){o.add(t)}function S(e){var n,l=p||0<e._index&&e._index<f-1;return"round"===(l?r:a)?b(e._point,g):(o=new O({internal:!0,closed:!0}),l?e.isSmooth()||O._addBevelJoin(e,r,x,s,null,i,M,!0):"square"===a&&O._addSquareCap(e,a,x,null,i,M,!0),o.isEmpty()?void 0:o.contains(t)||(n=o.getNearestLocation(t))&&b(n.getPoint(),m))}if(null!==x&&(0<x?(r=h.getStrokeJoin(),a=h.getStrokeCap(),s=h.getMiterLimit(),g=g.add(O._getStrokePadding(x,i))):r=a="round"),!e.ends||e.segments||p){if(e.segments||e.handles)for(var E=0;E<f;E++)if(u=T(d[E]))return u}else if(u=T(d[0],!0)||T(d[f-1],!0))return u;if(null!==x){if(l=this.getNearestLocation(t)){var A=l.getTime();0===A||1===A&&1<f?S(l.getSegment())||(l=null):b(l.getPoint(),g)||(l=null)}if(!l&&"miter"===r&&1<f)for(E=0;E<f;E++){var L=d[E];if(t.getDistance(L._point)<=s*x&&S(L)){l=L.getLocation();break}}}return!l&&y&&this._contains(t)||l&&!v&&!_?new C("fill",this):l?new C(v?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},r.each(P._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}}),{beans:!1,getLocationOf:function(){for(var t=h.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var a=n,s=e[i];if(t<(n+=s.getLength()))return s.getLocationAt(t-a)}if(0<e.length&&t<=this.getLength())return new R(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=h.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),r=0,a=i.length;r<a;r++){for(var s=i[r],o=s.getTimesWithTangent(t),l=0,u=o.length;l<u;l++){var c=n+s.getOffsetAtTime(o[l]);e.indexOf(c)<0&&e.push(c)}n+=s.length}return e}}),new function(){function t(t,e,n){var i,r,a,s,o,l,u,c,h=e._segments,d=h.length,f=new Array(6),p=!0;function m(e){if(n)e._transformCoordinates(n,f),i=f[0],r=f[1];else{var h=e._point;i=h._x,r=h._y}if(p)t.moveTo(i,r),p=!1;else{if(n)o=f[2],l=f[3];else{var d=e._handleIn;o=i+d._x,l=r+d._y}o===i&&l===r&&u===a&&c===s?t.lineTo(i,r):t.bezierCurveTo(u,c,o,l,i,r)}a=i,s=r,n?(u=f[4],c=f[5]):(d=e._handleOut,u=a+d._x,c=s+d._y)}for(var g=0;g<d;g++)m(h[g]);e._closed&&0<d&&m(h[0])}return{_draw:function(e,n,i,r){var a=n.dontStart,s=n.dontFinish||n.clip,o=this.getStyle(),l=o.hasFill(),u=o.hasStroke(),c=o.getDashArray(),h=!it.support.nativeDash&&u&&c&&c.length;function d(t){return c[(t%h+h)%h]}if(a||e.beginPath(),(l||u&&!h||s)&&(t(e,this,r),this._closed&&e.closePath()),!s&&(l||u)&&(this._setStyles(e,n,i),l&&(e.fill(o.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),u)){if(h){a||e.beginPath();var f,p=new D(this,.25,32,!1,r),m=p.length,g=-o.getDashOffset(),v=0;for(g%=m;0<g;)g-=d(v--)+d(v--);for(;g<m;)f=g+d(v++),(0<g||0<f)&&p.drawPart(e,Math.max(g,0),Math.max(f,0)),g=f+d(v++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){var r,a,s=i/2,o=new Array(6);function l(e){var n=o[e],i=o[e+1];r==n&&a==i||(t.beginPath(),t.moveTo(r,a),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,s,0,2*Math.PI,!0),t.fill())}for(var u=0,c=e.length;u<c;u++){var h=e[u],d=h._selection;if(h._transformCoordinates(n,o),r=o[0],a=o[1],2&d&&l(2),4&d&&l(4),t.fillRect(r-s,a-s,i,i),!(1&d)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-s+1,a-s+1,i-2,i-2),t.fillStyle=f}}}(e,this._segments,n,it.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new A(h.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new A(h.read(arguments))])},cubicCurveTo:function(){var e=h.read(arguments),n=h.read(arguments),i=h.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new A(i,n.subtract(i))])},quadraticCurveTo:function(){var e=h.read(arguments),n=h.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=h.read(arguments),n=h.read(arguments),i=r.pick(r.read(arguments),.5),a=1-i,s=t(this)._point,o=e.subtract(s.multiply(a*a)).subtract(n.multiply(i*i)).divide(2*i*a);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(o,n)},arcTo:function(){var e,n,i,a,s=Math.abs,o=Math.sqrt,l=t(this),c=l._point,d=h.read(arguments),p=r.peek(arguments);if("boolean"==typeof(b=r.pick(p,!0)))var m=(T=c.add(d).divide(2)).add(T.subtract(c).rotate(b?-90:90));else if(r.remain(arguments)<=2)m=d,d=h.read(arguments);else{var g=f.read(arguments),_=u.isZero;if(_(g.width)||_(g.height))return this.lineTo(d);var x=r.read(arguments),b=!!r.read(arguments),w=!!r.read(arguments),T=c.add(d).divide(2),M=(q=c.subtract(T).rotate(-x)).x,S=q.y,E=s(g.width),C=s(g.height),L=E*E,P=C*C,R=M*M,I=S*S,O=o(R/L+I/P);if(1<O&&(L=(E*=O)*E,P=(C*=O)*C),s(O=(L*P-L*I-P*R)/(L*I+P*R))<1e-12&&(O=0),O<0)throw new Error("Cannot create an arc with the given arguments");e=new h(E*S/C,-C*M/E).multiply((w===b?-1:1)*o(O)).rotate(x).add(T),n=(i=(a=(new v).translate(e).rotate(x).scale(E,C))._inverseTransform(c)).getDirectedAngle(a._inverseTransform(d)),!b&&0<n?n-=360:b&&n<0&&(n+=360)}if(m){var z=new y(c.add(m).divide(2),m.subtract(c).rotate(90),!0),D=new y(m.add(d).divide(2),d.subtract(m).rotate(90),!0),N=new y(c,d),k=N.getSide(m);if(!(e=z.intersect(D,!0))){if(!k)return this.lineTo(d);throw new Error("Cannot create an arc with the given arguments")}n=(i=c.subtract(e)).getDirectedAngle(d.subtract(e));var B=N.getSide(e,!0);0===B?n=k*s(n):k===B&&(n+=n<0?360:-360)}for(var F=s(n),U=360<=F?4:Math.ceil((F-1e-7)/90),H=n/U,G=H*Math.PI/360,j=4/3*Math.sin(G)/(1+Math.cos(G)),V=[],W=0;W<=U;W++){var q=d,X=null;if(W<U&&(X=i.rotate(90).multiply(j),a?(q=a._transformPoint(i),X=a._transformPoint(i.add(X)).subtract(q)):q=e.add(i)),W){var Y=i.rotate(-90).multiply(j);a&&(Y=a._transformPoint(i.add(Y)).subtract(q)),V.push(new A(q,Y,X))}else l.setHandleOut(X);i=i.rotate(H)}this._add(V)},lineBy:function(){var e=h.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=h.read(arguments),n=h.read(arguments),i=r.read(arguments),a=t(this)._point;this.curveTo(a.add(e),a.add(n),i)},cubicCurveBy:function(){var e=h.read(arguments),n=h.read(arguments),i=h.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=h.read(arguments),n=h.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(h.read(arguments)),i=r.pick(r.peek(arguments),!0);"boolean"==typeof i?this.arcTo(n,i):this.arcTo(n,e.add(h.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return O[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,a){var s=t[0];if(!s)return new m;var o=new Array(6),l=s._transformCoordinates(i,new Array(6)),u=l.slice(0,2),c=u.slice(),h=new Array(2);function d(t){t._transformCoordinates(i,o);for(var e=0;e<2;e++)P._addBounds(l[e],l[e+4],o[e+2],o[e],e,a?a[e]:0,u,c,h);var n=l;l=o,o=n}for(var f=1,p=t.length;f<p;f++)d(t[f]);return e&&d(s),new m(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(t,e,n,i,r){var a=n.getStyle(),s=a.hasStroke(),o=a.getStrokeWidth(),l=s&&n._getStrokeMatrix(i,r),u=s&&O._getStrokePadding(o,l),c=O.getBounds(t,e,n,i,r,u);if(!s)return c;var h=o/2,d=a.getStrokeJoin(),p=a.getStrokeCap(),g=a.getMiterLimit(),v=new m(new f(u));function y(t){c=c.include(t)}function _(t){c=c.unite(v.setCenter(t._point.transform(i)))}function x(t,e){"round"===e||t.isSmooth()?_(t):O._addBevelJoin(t,e,h,g,i,l,y)}function b(t,e){"round"===e?_(t):O._addSquareCap(t,e,h,i,l,y)}for(var w=t.length-(e?0:1),T=1;T<w;T++)x(t[T],d);return e?x(t[0],d):0<w&&(b(t[0],p),b(t[t.length-1],p)),c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new h(t,0).transform(e),i=new h(0,t).transform(e),r=n.getAngleInRadians(),a=n.getLength(),s=i.getLength(),o=Math.sin(r),l=Math.cos(r),u=Math.tan(r),c=Math.atan2(s*u,a),d=Math.atan2(s,u*a);return[Math.abs(a*Math.cos(c)*l+s*Math.sin(c)*o),Math.abs(s*Math.sin(d)*l+a*Math.cos(d)*o)]},_addBevelJoin:function(t,e,n,i,r,a,s,o){var l=t.getCurve(),u=l.getPrevious(),c=l.getPoint1().transform(r),d=u.getNormalAtTime(1).multiply(n).transform(a),f=l.getNormalAtTime(0).multiply(n).transform(a);if(d.getDirectedAngle(f)<0&&(d=d.negate(),f=f.negate()),o&&s(c),s(c.add(d)),"miter"===e){var p=new y(c.add(d),new h(-d.y,d.x),!0).intersect(new y(c.add(f),new h(-f.y,f.x),!0),!0);p&&c.getDistance(p)<=i*n&&s(p)}s(c.add(f))},_addSquareCap:function(t,e,n,i,r,a,s){var o=t._point.transform(i),l=t.getLocation(),u=l.getNormal().multiply(0===l.getTime()?n:-n).transform(r);"square"===e&&(s&&(a(o.subtract(u)),a(o.add(u))),o=o.add(u.rotate(-90))),a(o.add(u)),a(o.subtract(u))},getHandleBounds:function(t,e,n,i,r){var a,s,o=n.getStyle();if(r.stroke&&o.hasStroke()){var l=n._getStrokeMatrix(i,r),u=o.getStrokeWidth()/2,c=u;"miter"===o.getStrokeJoin()&&(c=u*o.getMiterLimit()),"square"===o.getStrokeCap()&&(c=Math.max(c,u*Math.SQRT2)),a=O._getStrokePadding(u,l),s=O._getStrokePadding(c,l)}for(var h=new Array(6),d=1/0,f=-d,p=d,g=f,v=0,y=t.length;v<y;v++){t[v]._transformCoordinates(i,h);for(var _=0;_<6;_+=2){var x=_?a:s,b=x?x[0]:0,w=x?x[1]:0,T=h[_],M=h[_+1],S=T-b,E=T+b,C=M-w,A=M+w;S<d&&(d=S),f<E&&(f=E),C<p&&(p=C),g<A&&(g=A)}}return new m(d,p,f-d,g-p)}}});O.inject({statics:new function(){var t=.5522847498307936,e=[new A([-1,0],[0,t],[0,-t]),new A([0,-1],[-t,0],[t,0]),new A([1,0],[0,-t],[0,t]),new A([0,1],[t,0],[-t,0])];function n(t,e,n){var i=r.getNamed(n),a=new O(i&&0==i.insert&&x.NO_INSERT);return a._add(t),a._closed=e,a.set(i,{insert:!0})}function i(t,i,r){for(var a=new Array(4),s=0;s<4;s++){var o=e[s];a[s]=new A(o._point.multiply(i).add(t),o._handleIn.multiply(i),o._handleOut.multiply(i))}return n(a,!0,r)}return{Line:function(){return n([new A(h.readNamed(arguments,"from")),new A(h.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=h.readNamed(arguments,"center"),e=r.readNamed(arguments,"radius");return i(t,new f(e),arguments)},Rectangle:function(){var e,i=m.readNamed(arguments,"rectangle"),r=f.readNamed(arguments,"radius",0,{readNull:!0}),a=i.getBottomLeft(!0),s=i.getTopLeft(!0),o=i.getTopRight(!0),l=i.getBottomRight(!0);if(!r||r.isZero())e=[new A(a),new A(s),new A(o),new A(l)];else{var u=(r=f.min(r,i.getSize(!0).divide(2))).width,c=r.height,h=u*t,d=c*t;e=[new A(a.add(u,0),null,[-h,0]),new A(a.subtract(0,c),[0,d]),new A(s.add(0,c),null,[0,-d]),new A(s.add(u,0),[-h,0],null),new A(o.subtract(u,0),null,[h,0]),new A(o.add(0,c),[0,-d],null),new A(l.subtract(0,c),null,[0,d]),new A(l.subtract(u,0),[h,0])]}return n(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=T._readEllipse(arguments);return i(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=h.readNamed(arguments,"from"),e=h.readNamed(arguments,"through"),n=h.readNamed(arguments,"to"),i=r.getNamed(arguments),a=new O(i&&0==i.insert&&x.NO_INSERT);return a.moveTo(t),a.arcTo(e,n),a.set(i)},RegularPolygon:function(){for(var t=h.readNamed(arguments,"center"),e=r.readNamed(arguments,"sides"),i=r.readNamed(arguments,"radius"),a=360/e,s=e%3==0,o=new h(0,s?-i:i),l=s?-1:.5,u=new Array(e),c=0;c<e;c++)u[c]=new A(t.add(o.rotate((c+l)*a)));return n(u,!0,arguments)},Star:function(){for(var t=h.readNamed(arguments,"center"),e=2*r.readNamed(arguments,"points"),i=r.readNamed(arguments,"radius1"),a=r.readNamed(arguments,"radius2"),s=360/e,o=new h(0,-1),l=new Array(e),u=0;u<e;u++)l[u]=new A(t.add(o.rotate(s*u).multiply(u%2?a:i)));return n(l,!0,arguments)}}}});var z=I.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,a=i[0];a&&"number"==typeof a[0]&&(i=[i]);for(var s=n.length-1;0<=s;s--){var o=i[s];i!==n||o instanceof O||(i=r.slice(i)),Array.isArray(o)?i[s]=new O({segments:o,insert:!1}):o instanceof z&&(i.splice.apply(i,[s,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;0<=i;i--)(r=n[i].reduce(e)).isEmpty()&&r.remove();return n.length?t.base.call(this):((r=new O(x.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r);var r},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)r.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,a=n.length;r<a;r++){var s=n[r],o=s._matrix;i.push(s.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===O||"path"===n.type?n:r.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,s=r.length;a<s;a++)r[a].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,a=i.length;r<a;r++){var s=i[r],o=s._matrix;n[s._id]||s._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return r.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new O(x.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=h.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},r.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var n,i=this._children,r=0,a=i.length;r<a;r++)n=i[r][t](e)||n;return n}}),{}));I.inject(new function(){var t=Math.min,n=Math.max,i=Math.abs,a={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0):n}function o(t,e,n,i,r){var a=new z(x.NO_INSERT);return a.addChildren(t,!0),a=a.reduce({simplify:e}),r&&0==r.insert||a.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),a.copyAttributes(n,!0),a}function l(t,e,n,i){if(i&&(0==i.trace||i.stroke)&&/^(subtract|intersect)$/.test(n))return c(t,e,n);var l=s(t,!0),u=e&&t!==e&&s(e,!0),h=a[n];h[n]=!0,u&&(h.subtract||h.exclude)^u.isClockwise()^l.isClockwise()&&u.reverse();var d,m=p(R.expand(l.getCrossings(u))),y=l._children||[l],_=u&&(u._children||[u]),x=[],b=[];function w(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];r.push(x,i._segments),r.push(b,i.getCurves()),i._overlapsOnly=!0}}if(m.length){w(y),_&&w(_);for(var T=0,M=m.length;T<M;T++)g(m[T]._segment,l,u,b,h);for(T=0,M=x.length;T<M;T++){var S=x[T],E=S._intersection;S._winding||g(S,l,u,b,h),E&&E._overlap||(S._path._overlapsOnly=!1)}d=v(x,h)}else d=f(_?y.concat(_):y.slice(),(function(t){return!!h[t]}));return o(d,!0,t,e,i)}function c(t,e,n){var i=s(t),r=s(e),a=i.getCrossings(r),l="subtract"===n,u="divide"===n,c={},h=[];function d(t){if(!c[t._id]&&(u||r.contains(t.getPointAt(t.getLength()/2))^l))return h.unshift(t),c[t._id]=!0}for(var f=a.length-1;0<=f;f--){var p=a[f].split();p&&(d(p)&&p.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return d(i),o(h,!1,t,e)}function h(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;(t._next=e)._previous=t}}function d(t){for(var e=t.length-1;0<=e;e--)t[e].clearHandles()}function f(t,e,n){var a=t&&t.length;if(a){var s=r.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),o=t.slice().sort((function(t,e){return i(e.getArea())-i(t.getArea())})),l=o[0];null==n&&(n=l.isClockwise());for(var u=0;u<a;u++){for(var c=o[u],h=s[c._id],d=c.getInteriorPoint(),f=0,p=u-1;0<=p;p--){var m=o[p];if(m.contains(d)){var g=s[m._id];f=g.winding,h.winding+=f,h.container=g.exclude?g.container:m;break}}if(e(h.winding)===e(f))h.exclude=!0,t[h.index]=null;else{var v=h.container;c.setClockwise(v?!v.isClockwise():n)}}}return t}function p(t,e,n){var i,r,a,s=e&&[],o=!1,l=n||[],u=n&&{};function c(t){return t._path._id+"."+t._segment1._index}for(var f=(n&&n.length)-1;0<=f;f--)(p=n[f])._path&&(u[c(p)]=!0);for(f=t.length-1;0<=f;f--){var p,m,g=t[f],v=g._time,y=v,_=e&&!e(g);if((p=g._curve)&&(p!==r?(o=!p.hasHandles()||u&&u[c(p)],i=[],a=null,r=p):1e-8<=a&&(v/=a)),_)i&&i.push(g);else{if(e&&s.unshift(g),a=y,v<1e-8)m=p._segment1;else if(1-1e-8<v)m=p._segment2;else{var x=p.divideAtTime(v,!0);o&&l.push(p,x),m=x._segment1;for(var b=i.length-1;0<=b;b--){var w=i[b];w._time=(w._time-v)/(1-v)}}g._setSegment(m);var T=m._intersection,M=g._intersection;if(T){h(T,M);for(var S=T;S;)h(S._intersection,T),S=S._next}else m._intersection=M}}return n||d(l),s||t}function m(e,r,a,s,o){var l,u,c=a?1:0,h=1^c,d=[e.x,e.y],f=d[c],p=d[h],g=1e-6,v=f-1e-9,y=f+1e-9,_=0,x=0,b=0,w=0,T=!1,M=!1,S=1,E=[];function C(i){var u=i[h+0],d=i[h+6];if(!(p<t(u,d)||p>n(u,d))){var _=i[c+0],x=i[c+2],M=i[c+4],C=i[c+6];if(u!==d){var A=p===u?0:p===d||v>n(_,x,M,C)||y<t(_,x,M,C)?1:0<P.solveCubic(i,h,p,E,0,1)?E[0]:1,L=0===A?_:1===A?C:P.getPoint(i,A)[a?"y":"x"],R=d<u?1:-1,I=l[h]>l[h+6]?1:-1,O=l[c+6];return p!==u?(L<v?b+=R:y<L?w+=R:T=!0,f-g<L&&L<f+g&&(S/=2)):(R!==I?_<v?b+=R:y<_&&(w+=R):_!=O&&(O<y&&y<L?(w+=R,T=!0):v<O&&L<v&&(b+=R,T=!0)),S=0),l=i,!o&&v<L&&L<y&&0===P.getTangent(i,A)[a?"x":"y"]&&m(e,r,!a,s,!0)}(_<y&&v<C||C<y&&v<_)&&(T=!0)}}function A(e){var i=e[h+0],r=e[h+2],s=e[h+4],o=e[h+6];if(p<=n(i,r,s,o)&&p>=t(i,r,s,o))for(var l,u=e[c+0],d=e[c+2],f=e[c+4],m=e[c+6],g=v>n(u,d,f,m)||y<t(u,d,f,m)?[e]:P.getMonoCurves(e,a),_=0,x=g.length;_<x;_++)if(l=C(g[_]))return l}for(var L=0,R=r.length;L<R;L++){var I,O=r[L],z=O._path,D=O.getValues();if(!(L&&r[L-1]._path===z||(l=null,z._closed||(u=P.getValues(z.getLastCurve().getSegment2(),O.getSegment1(),null,!s))[h]!==u[h+6]&&(l=u),l))){l=D;for(var N=z.getLastCurve();N&&N!==O;){var k=N.getValues();if(k[h]!==k[h+6]){l=k;break}N=N.getPrevious()}}if(I=A(D))return I;if(L+1===R||r[L+1]._path!==z){if(u&&(I=A(u)))return I;!T||b||w||(b=w=z.isClockwise(s)^a?1:-1),_+=b,x+=w,b=w=0,T&&(T=!(M=!0)),u=null}}return _=i(_),x=i(x),{winding:n(_,x),windingL:_,windingR:x,quality:S,onPath:M}}function g(t,e,n,r,a){var s=[],o=t,l=0;do{var c=(_=t.getCurve()).getLength();s.push({segment:t,curve:_,length:c}),l+=c,t=t.getNext()}while(t&&!t._intersection&&t!==o);for(var h=[.5,.25,.75],d={winding:0,quality:-1},f=0;f<h.length&&d.quality<.5;f++){c=l*h[f];for(var p=0,g=s.length;p<g;p++){var v=s[p],y=v.length;if(c<=y){var _,x=(_=v.curve)._path,b=x._parent,w=b instanceof z?b:x,T=u.clamp(_.getTimeAt(c),1e-8,1-1e-8),M=_.getPointAtTime(T),S=i(_.getTangentAtTime(T).y)<Math.SQRT1_2,E=null;if(a.subtract&&n){var C=w===e?n._getWinding(M,S,!0):e._getWinding(M,S,!0);if(w===e&&C.winding||w===n&&!C.winding){if(C.quality<1)continue;E={winding:0,quality:1}}}(E=E||m(M,r,S,!0)).quality>d.quality&&(d=E);break}c-=y}}for(p=s.length-1;0<=p;p--)s[p].segment._winding=d}function v(t,e){var n,i=[];function r(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(t){if(t)for(var e=0,i=n.length;e<i;e++)if(t===n[e])return!0;return!1}function s(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}function o(t,e){var i=t._intersection,s=i,o=[];function l(i,s){for(;i&&i!==s;){var l=i._segment,u=l&&l._path;if(u){var c=l.getNext()||u.getFirstSegment(),h=c._intersection;l!==t&&(a(l)||a(c)||c&&r(l)&&(r(c)||h&&r(h._segment)))&&o.push(l),e&&n.push(l)}i=i._next}}if(e&&(n=[t]),i){for(l(i);i&&i._prev;)i=i._prev;l(i,s)}return o}t.sort((function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),a=!(!i||!i._overlap),s=t._path,o=e._path;return r^a?r?1:-1:!n^!i?n?1:-1:s!==o?s._id-o._id:t._index-e._index}));for(var l=0,u=t.length;l<u;l++){var c,h,d,f=t[l],p=r(f),m=null,g=!1,v=!0,y=[];if(p&&f._path._overlapsOnly){var _=f._path,b=f._intersection._segment._path;_.compare(b)&&(_.getArea()&&i.push(_.clone(!1)),s(_),s(b),p=!1)}for(;p;){var w=!m,T=o(f,w),M=T.shift(),S=!(g=!w&&(a(f)||a(M)))&&M;if(w&&(m=new O(x.NO_INSERT),c=null),g){(f.isFirst()||f.isLast())&&(v=f._path._closed),f._visited=!0;break}if(S&&c&&(y.push(c),c=null),c||(S&&T.push(f),c={start:m._segments.length,crossings:T,visited:h=[],handleIn:d}),S&&(f=M),!r(f)){m.removeSegments(c.start);for(var E=0,C=h.length;E<C;E++)h[E]._visited=!1;for(h.length=0;(f=c&&c.crossings.shift())&&f._path||(f=null,(c=y.pop())&&(h=c.visited,d=c.handleIn)),c&&!r(f););if(!f)break}var L=f.getNext();m.add(new A(f._point,d,L&&f._handleOut)),f._visited=!0,h.push(f),f=L||f._path.getFirstSegment(),d=L&&L._handleIn}g&&(v&&(m.getFirstSegment().setHandleIn(d),m.setClosed(v)),0!==m.getArea()&&i.push(m))}return i}return{_getWinding:function(t,e,n){return m(t,this.getCurves(),e,n)},unite:function(t,e){return l(this,t,"unite",e)},intersect:function(t,e){return l(this,t,"intersect",e)},subtract:function(t,e){return l(this,t,"subtract",e)},exclude:function(t,e){return l(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?c(this,t,"divide"):o([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var i=!1,a=!1,s=this.getIntersections(null,(function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(a=!0)})),o=i&&a&&[];if(s=R.expand(s),i)for(var l=p(s,(function(t){return t.hasOverlap()}),o),u=l.length-1;0<=u;u--){var c=l[u],h=c._path,f=c._segment,m=f.getPrevious(),g=f.getNext();n(m,h)&&n(g,h)&&(f.remove(),m._handleOut._set(0,0),g._handleIn._set(0,0),m===f||m.getCurve().hasLength()||(g._handleIn.set(m._handleIn),m.remove()))}a&&(p(s,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,a=i._segment;if(e&&r&&e._path&&r._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},o),o&&d(o),e=v(r.each(e,(function(t){r.push(this,t._segments)}),[])));var y,_=e.length;return 1<_&&t?(e!==t&&this.setChildren(e),y=this):1!==_||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),y=this),y||((y=new z(x.NO_INSERT)).addChildren(e),(y=y.reduce()).copyAttributes(this),this.replaceWith(y)),y},reorient:function(t,n){var i=this._children;return i&&i.length?this.setChildren(f(this.removeChildren(),(function(e){return!!(t?e:1&e)}),n)):n!==e&&this.setClockwise(n),this},getInteriorPoint:function(){var e=this.getBounds().getCenter(!0);if(!this.contains(e)){for(var i=this.getCurves(),r=e.y,a=[],s=[],o=0,l=i.length;o<l;o++){var u=i[o].getValues(),c=u[1],h=u[3],d=u[5],f=u[7];if(r>=t(c,h,d,f)&&r<=n(c,h,d,f))for(var p=P.getMonoCurves(u),m=0,g=p.length;m<g;m++){var v=p[m],y=v[1],_=v[7];if(y!==_&&(y<=r&&r<=_||_<=r&&r<=y)){var x=r===y?v[0]:r===_?v[6]:1===P.solveCubic(v,1,r,s,0,1)?P.getPoint(v,s[0]).x:(v[0]+v[6])/2;a.push(x)}}}1<a.length&&(a.sort((function(t,e){return t-e})),e.x=(a[0]+a[1])/2)}return e}}});var D=r.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){var a,s=[],o=[],l=0,u=1/(n||32),c=t._segments,h=c[0];function d(t,n){var a=P.getValues(t,n,r);s.push(a),function t(n,r,a,s){if(!(u<s-a)||i&&P.isStraight(n)||P.isFlatEnough(n,e||.25)){var c=n[6]-n[0],h=n[7]-n[1],d=Math.sqrt(c*c+h*h);0<d&&(l+=d,o.push({offset:l,curve:n,index:r,time:s}))}else{var f=P.subdivide(n,.5),p=(a+s)/2;t(f[0],r,a,p),t(f[1],r,p,s)}}(a,t._index,0,1)}for(var f=1,p=c.length;f<p;f++)d(h,a=c[f]),h=a;t._closed&&d(a||h,c[0]),this.curves=s,this.parts=o,this.length=l,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;(e=r)&&!(n[--r].offset<t););for(;e<i;e++){var a=n[e];if(a.offset>=t){var s=n[(this.index=e)-1],o=s&&s.index===a.index?s.time:0,l=s?s.offset:0;return{index:a.index,time:o+(a.time-o)*(t-l)/(a.offset-l)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),a=i.index,s=r.index;a<=s;a++){var o=P.getPart(this.curves[a],a===i.index?i.time:0,a===r.index?r.time:1);a===i.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},r.each(P._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this._get(e);return P[t](this.curves[n.index],n.time)}}),{})),N=r.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,a=0,s=i.length;a<s;a++){var o=i[a].point;e&&e.equals(o)||n.push(e=o.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return 0<n&&(i=[new A(e[0])],1<n&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,a){var s=this.points;if(i-n!=1){for(var o,l=this.chordLengthParameterize(n,i),u=Math.max(e,e*e),c=!0,h=0;h<=4;h++){var d=this.generateBezier(n,i,l,r,a),f=this.findMaxError(n,i,d,l);if(f.error<e&&c)return void this.addCurve(t,d);if(o=f.index,f.error>=u)break;c=this.reparameterize(n,i,l,d),u=f.error}var p=s[o-1].subtract(s[o+1]);this.fitCubic(t,e,n,o,r,p),this.fitCubic(t,e,o,i,p.negate(),a)}else{var m=s[n],g=s[i],v=m.getDistance(g)/3;this.addCurve(t,[m,m.add(r.normalize(v)),g.add(a.normalize(v)),g])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new A(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var a=Math.abs,s=this.points,o=s[t],l=s[e],u=[[0,0],[0,0]],c=[0,0],h=0,d=e-t+1;h<d;h++){var f=n[h],p=1-f,m=3*f*p,g=p*p*p,v=m*p,y=m*f,_=f*f*f,x=i.normalize(v),b=r.normalize(y),w=s[t+h].subtract(o.multiply(g+v)).subtract(l.multiply(y+_));u[0][0]+=x.dot(x),u[0][1]+=x.dot(b),u[1][0]=u[0][1],u[1][1]+=b.dot(b),c[0]+=x.dot(w),c[1]+=b.dot(w)}var T,M,S=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(1e-12<a(S)){var E=u[0][0]*c[1]-u[1][0]*c[0];T=(c[0]*u[1][1]-c[1]*u[0][1])/S,M=E/S}else{var C=u[0][0]+u[0][1],A=u[1][0]+u[1][1];T=M=1e-12<a(C)?c[0]/C:1e-12<a(A)?c[1]/A:0}var L,P,R=l.getDistance(o),I=1e-12*R;if(T<I||M<I)T=M=R/3;else{var O=l.subtract(o);L=i.normalize(T),P=r.normalize(M),L.dot(O)-P.dot(O)>R*R&&(T=M=R/3,L=P=null)}return[o,o.add(L||i.normalize(T)),l.add(P||r.normalize(M)),l]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var a=n.length;r<a;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],a=0;a<=2;a++)i[a]=t[a+1].subtract(t[a]).multiply(3);for(a=0;a<=1;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);var s=this.evaluate(3,t,n),o=this.evaluate(2,i,n),l=this.evaluate(1,r,n),c=s.subtract(e),h=o.dot(o)+c.dot(l);return u.isZero(h)?n:n-c.dot(o)/h},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var a=0;a<=t-r;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),a=0,s=t+1;s<e;s++){var o=this.evaluate(3,n,i[s-t]).subtract(this.points[s]),l=o.x*o.x+o.y*o.y;a<=l&&(a=l,r=s)}return{error:a,index:r}}}),k=x.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var n=t&&r.isPlainObject(t)&&t.x===e&&t.y===e;this._initialize(n&&t,!n&&h.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),B=k.extend({_class:"PointText",initialize:function(){k.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new d(t.x,t.y,this,"setPoint")},setPoint:function(){var t=h.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,a=r.hasFill(),s=r.hasStroke(),o=r.getLeading(),l=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var u=0,c=i.length;u<c;u++){t.shadowColor=l;var h=i[u];a&&(t.fillText(h,0,0),t.shadowColor="rgba(0,0,0,0)"),s&&t.strokeText(h,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,a=n.getJustification(),s=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==a&&(l-=o/("center"===a?2:1));var u=new m(l,r?-.75*s:0,o,r*s);return t?t._transformBounds(u,u):u}}),F=r.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},a={transparent:[0,0,0,0]},s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i,r=(t=(t/60%6+6)%6)-(i=Math.floor(t)),a=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[a[(i=s[i])[0]],a[i[1]],a[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r,s=0===a,o=(i+r)/2;return[s?0:60*(i==t?(e-n)/a+(e<n?6:0):i==e?(n-t)/a+2:(t-e)/a+4),s?0:o<.5?a/(i+r):a/(2-i-r),o]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,s=[],o=0;o<3;o++){var l=i[o];l<0&&(l+=1),1<l&&(l-=1),s[o]=6*l<1?a+6*(r-a)*l:2*l<1?r:3*l<2?a+(r-a)*(2/3-l)*6:a}return s},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return r.each(e,(function(t,n){i[n]=[],r.each(t,(function(t,a){var s=r.capitalize(t),o=/^(hue|saturation)$/.test(t),l=i[n][a]="gradient"===n?"gradient"===t?function(t){var e=this._components[0];return e!==(t=U.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return h.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+s]=function(){return this._type===n||o&&/^hs[bl]$/.test(this._type)?this._components[a]:this._convert(n)[a]},this["set"+s]=function(t){this._type===n||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(n),this._properties=e[n],this._type=n),this._components[a]=l.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function s(o){var l,u,c,h,d=arguments,f=this.__read,p=0;Array.isArray(o)&&(o=(d=o)[0]);var m=null!=o&&typeof o;if("string"===m&&o in e&&(l=o,o=d[1],Array.isArray(o)?(u=o,c=d[2]):(f&&(p=1),d=r.slice(d,1),m=typeof o)),!u){if(h="number"===m?d:"object"===m&&null!=o.length?o:null){l||(l=3<=h.length?"rgb":"gray");var g=e[l].length;c=h[g],f&&(p+=h===arguments?g+(null!=c?1:0):1),h.length>g&&(h=r.slice(h,0,g))}else if("string"===m){var v=function(e){var i,r=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),s="rgb";if(r){var o=r[4]?4:3;i=new Array(o);for(var l=0;l<o;l++){var u=r[l+1];i[l]=parseInt(1==u.length?u+u:u,16)/255}}else if(r=e.match(/^(rgb|hsl)a?\((.*)\)$/)){s=r[1],i=r[2].split(/[,\s]+/g);for(var c="hsl"===s,h=(l=0,Math.min(i.length,4));l<h;l++){var d=i[l];if(u=parseFloat(d),c)if(0===l){var f=d.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[f]||1}else l<3&&(u/=100);else l<3&&(u/=255);i[l]=u}}else{var p=a[e];if(!p)if(n){t||((t=K.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var m=t.getImageData(0,0,1,1).data;p=a[e]=[m[0]/255,m[1]/255,m[2]/255]}else p=[0,0,0];i=p.slice()}return[s,i]}(o);l=v[0],4===(u=v[1]).length&&(c=u[3],u.length--)}else if("object"===m)if(o.constructor===s){if(l=o._type,u=o._components.slice(),c=o._alpha,"gradient"===l)for(var y=1,_=u.length;y<_;y++){var x=u[y];x&&(u[y]=x.clone())}}else if(o.constructor===U)l="gradient",h=d;else{var b=e[l="hue"in o?"lightness"in o?"hsl":"hsb":"gradient"in o||"stops"in o||"radial"in o?"gradient":"gray"in o?"gray":"rgb"],w=i[l];for(this._components=u=[],y=0,_=b.length;y<_;y++)null==(T=o[b[y]])&&!y&&"gradient"===l&&"stops"in o&&(T={stops:o.stops,radial:o.radial}),null!=(T=w[y].call(this,T))&&(u[y]=T);c=o.alpha}f&&l&&(p=1)}if(this._type=l||"rgb",!u)for(this._components=u=[],y=0,_=(w=i[this._type]).length;y<_;y++){var T;null!=(T=w[y].call(this,h&&h[y]))&&(u[y]=T)}return this._components=u,this._properties=e[this._type],this._alpha=c,f&&(this.__read=p),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return r.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(129)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new F(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=r.isPlainValue(t,!0)?F.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&r.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=l.instance,r=0,a=t.length;r<a;r++){var s=this._components[r];null!=s&&e.push(t[r]+": "+(n?s:i.number(s)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round(255*(t<0?0:1<t?1:t))}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],a=r._stops,s=i[1],o=i[2],l=i[3],u=e&&e.inverted();if(u&&(s=u._transformPoint(s),o=u._transformPoint(o),l&&(l=u._transformPoint(l))),r._radial){var c=o.getDistance(s);if(l){var h=l.subtract(s);h.getLength()>c&&(l=s.add(h.normalize(c-.1)))}var d=l||s;n=t.createRadialGradient(d.x,d.y,0,s.x,s.y,c)}else n=t.createLinearGradient(s.x,s.y,o.x,o.y);for(var f=0,p=a.length;f<p;f++){var m=a[f],g=m._offset;n.addColorStop(null==g?f/(p-1):g,m._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new F(t(),t(),t())}}})},new function(){return r.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=F.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),a=0,s=i.length;a<s;a++)r[a]=t(i[a],r[a]);return new F(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),U=r.extend({_class:"Gradient",initialize:function(t,e){this._id=c.get(),t&&r.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return r.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var n=this._owners?this._owners.indexOf(t):-1;-1!=n&&(this._owners.splice(n,1),this._owners.length||(this._owners=e))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new U(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var n=this._stops;if(n)for(var i=0,r=n.length;i<r;i++)n[i]._owner=e;for(i=0,r=(n=this._stops=H.readList(t,0,{clone:!0})).length;i<r;i++)n[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),H=r.extend({_class:"GradientStop",initialize:function(t,n){var i=t,r=n;"object"==typeof t&&n===e&&(Array.isArray(t)&&"number"!=typeof t[0]?(i=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(i=t.color,r=t.offset||t.rampPoint||0)),this.setColor(i),this.setOffset(r)},clone:function(){return new H(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return r.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=F.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),G=r.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new h,selectedColor:null},n=r.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=r.set({},n,{fillColor:new F}),a={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},o={_class:"Style",beans:!0,initialize:function(e,r,a){this._values={},this._owner=r,this._project=r&&r._project||a||it.project,this._defaults=!r||r instanceof b?n:r instanceof k?i:t,e&&this.set(e)}};return r.each(n,(function(t,n){var i=/Color$/.test(n),l="shadowOffset"===n,u=r.capitalize(n),c=a[n],d="set"+u,f="get"+u;o[d]=function(t){var r=this._owner,a=r&&r._children,s=a&&0<a.length&&!(r instanceof z);if(s)for(var o=0,l=a.length;o<l;o++)a[o]._style[d](t);if(("selectedColor"===n||!s)&&n in this._defaults){var u=this._values[n];u!==t&&(i&&(u&&u._owner!==e&&(u._owner=e,u._canvasStyle=null),t&&t.constructor===F&&(t._owner&&(t=t.clone()),t._owner=r)),this._values[n]=t,r&&r._changed(c||129))}},o[f]=function(t){var a,s=this._owner,o=s&&s._children;if(n in this._defaults&&(!o||!o.length||t||s instanceof z))if((a=this._values[n])===e)(a=this._defaults[n])&&a.clone&&(a=a.clone());else{var u=i?F:l?h:null;!u||a&&a.constructor===u||(this._values[n]=a=u.read([a],0,{readNull:!0,clone:!0}),a&&i&&(a._owner=s))}else if(o)for(var c=0,d=o.length;c<d;c++){var p=o[c]._style[f]();if(c){if(!r.equals(a,p))return e}else a=p}return a},s[f]=function(t){return this._style[f](t)},s[d]=function(t){this._style[d](t)}})),r.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var n="get"+e,i="set"+e;o[n]=s[n]="#get"+t,o[i]=s[i]="#set"+t})),x.inject(s),o},{set:function(t){var e=t instanceof G,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function n(t,n,i){var a=t._values,s=n._values,o=n._defaults;for(var l in a){var u=a[l],c=s[l];if(!(i&&l in s||r.equals(u,c===e?o[l]:c)))return!1}return!0}return t===this||t&&this._class===t._class&&n(this,t)&&n(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&0<t.alpha},hasStroke:function(){var t=this.getStrokeColor();return!!t&&0<t.alpha&&0<this.getStrokeWidth()},hasShadow:function(){var t=this.getShadowColor();return!!t&&0<t.alpha&&(0<this.getShadowBlur()||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),j=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),s=0;s<6;s++){var o=r[s],l=o?o+a:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,a=i.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var s=n.left-(a.clientLeft||r.clientLeft||0),o=n.top-(a.clientTop||r.clientTop||0);if(!e){var l=i.defaultView;s+=l.pageXOffset||a.scrollLeft||r.scrollLeft,o+=l.pageYOffset||a.scrollTop||r.scrollTop}return new m(s,o,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new m(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return j.getBounds(t,e).getPoint()},getSize:function(t){return j.getBounds(t,!0).getSize()},isInvisible:function(t){return j.getSize(t).equals(new f(0,0))},isInView:function(t){return!j.isInvisible(t)&&j.getViewportBounds(t).intersects(j.getBounds(t,!0))},isInserted:function(t){return i.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},V={add:function(t,e){if(t)for(var n in e)for(var r=e[n],a=n.split(/[\s,]+/g),s=0,o=a.length;s<o;s++){var l=a[s],u=t===i&&("touchstart"===l||"touchmove"===l)&&{passive:!1};t.addEventListener(l,r,u)}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,s=r.length;a<s;a++)t.removeEventListener(r[a],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new h(e.pageX||e.clientX+i.documentElement.scrollLeft,e.pageY||e.clientY+i.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return V.getPoint(t).subtract(j.getOffset(e||V.getTarget(t)))}};V.requestAnimationFrame=new function(){var t,e=j.getPrefixed(n,"requestAnimationFrame"),i=!1,r=[];function a(){var t=r;r=[];for(var n=0,s=t.length;n<s;n++)t[n]();(i=e&&r.length)&&e(a)}return function(n){r.push(n),e?i||(e(a),i=!0):t||(t=setInterval(a,1e3/60))}};var W=r.extend(a,{_class:"View",initialize:function t(e,r){function a(t){return r[t]||parseInt(r.getAttribute(t),10)}function o(){var t=j.getSize(r);return t.isNaN()||t.isZero()?new f(a("width"),a("height")):t}var l;if(n&&r){this._id=r.getAttribute("id"),null==this._id&&r.setAttribute("id",this._id="view-"+t._id++),V.add(r,this._viewEvents);var u="none";if(j.setPrefixed(r.style,{userDrag:u,userSelect:u,touchCallout:u,contentZooming:u,tapHighlightColor:"rgba(0,0,0,0)"}),s.hasAttribute(r,"resize")){var c=this;V.add(n,this._windowEvents={resize:function(){c.setViewSize(o())}})}if(l=o(),s.hasAttribute(r,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var h=this._stats.domElement,d=h.style,p=j.getOffset(r);d.position="absolute",d.left=p.x+"px",d.top=p.y+"px",i.body.appendChild(h)}}else l=new f(r),r=null;this._project=e,this._scope=e._scope,this._element=r,this._pixelRatio||(this._pixelRatio=n&&n.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,t._views.push(this),((t._viewsById[this._id]=this)._matrix=new v)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!it.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;W._focused===this&&(W._focused=null),W._views.splice(W._views.indexOf(this),1),delete W._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),V.remove(this._element,this._viewEvents),V.remove(n,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:r.each(x._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){(this._autoUpdate=t)&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;V.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;j.getPrefixed(i,"hidden")&&"true"!==s.getAttribute(e,"keepalive")||!j.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){it=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new r({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new r(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new p(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=f.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new m(new h,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return j.isInView(this._element)},isInserted:function(){return j.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var r=n.parentNode,a=i.createElement("div");a.style.fontSize=t,r.appendChild(a),e=parseFloat(j.getStyles(a).fontSize),r.removeChild(a)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},r.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=(e?r:h).read(arguments),i=h.read(arguments,0,{readNull:!0});return this.transform((new v)[t](n,i||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new v;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=h.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new v).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new d(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=h.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(h.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(h.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(h.read(arguments))},getEventPoint:function(t){return this.viewToProject(V.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return i&&"string"==typeof e&&(e=i.getElementById(e)),new(n?q:W)(t,e)}}},new function(){if(n){var t,e,r,a,s,o=!1,l=!1,u=n.navigator;u.pointerEnabled||u.msPointerEnabled?(r="pointerdown MSPointerDown",a="pointermove MSPointerMove",s="pointerup pointercancel MSPointerUp MSPointerCancel"):(r="touchstart",a="touchmove",s="touchend touchcancel","ontouchstart"in n&&u.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(r+=" mousedown",a+=" mousemove",s+=" mouseup"));var c={},h={mouseout:function(t){var e=W._focused,n=V.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var i=V.getOffset(t,e._element),r=i.x,a=Math.abs,s=a(r),o=s-(1<<25);i.x=a(o)<s?o*(r<0?-1:1):r,C(e,t,e.viewToProject(i))}},scroll:E};c[r]=function(t){var e=W._focused=S(t);o||(o=!0,e._handleMouseEvent("mousedown",t))},h[a]=function(n){var i=W._focused;if(!l){var r=S(n);r?i!==r&&(i&&C(i,n),t||(t=i),i=W._focused=e=r):e&&e===i&&(t&&!t.isInserted()&&(t=null),i=W._focused=t,t=null,E())}i&&C(i,n)},h[r]=function(){l=!0},h[s]=function(t){var e=W._focused;e&&o&&e._handleMouseEvent("mouseup",t),l=o=!1},V.add(i,h),V.add(n,{load:E});var d,f,p,m,g,v,y,_,x=!1,b=!1,w={doubleclick:"click",mousedrag:"mousemove"},T=!1,M={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,n){var i=this._itemEvents,r=i.native[t],a="mousemove"===t,s=this._scope.tool,l=this;function u(t){return i.virtual[t]||l.responds(t)||s&&s.responds(t)}a&&o&&u("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),h=r&&c&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=h&&h.item||null,M=!1,S={};if(S[t.substr(5)]=!0,r&&w!==m&&(m&&A(m,null,"mouseleave",e,n),w&&A(w,null,"mouseenter",e,n),m=w),T^c&&(A(this,null,c?"mouseenter":"mouseleave",e,n),M=!0),!c&&!S.drag||n.equals(f)||(L(this,w,a?t:"mousemove",e,n,f),M=!0),T=c,S.down&&c||S.up&&d){if(L(this,w,t,e,n,d),S.down){if(_=w===v&&Date.now()-y<300,p=v=w,!b&&w){for(var E=w;E&&!E.responds("mousedrag");)E=E._parent;E&&(g=w)}d=n}else S.up&&(b||w!==p||(y=Date.now(),L(this,w,_?"doubleclick":"click",e,n,d),_=!1),p=g=null);M=!(T=!1)}f=n,M&&s&&(x=s._handleMouseEvent(t,e,n,S)||x),!1!==e.cancelable&&(x&&!S.move||S.down&&u("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){var r,a=this._scope,s=a.tool;function o(s){s.responds(t)&&(it=a,s.emit(t,r=r||new Y(t,e,n,i)))}this.isVisible()&&(o(this),s&&s.responds(t)&&o(s))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var a in M)i[a]=(i[a]||0)+(M[a][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:E,_resetState:function(){o=l=x=T=!1,t=e=d=f=p=m=g=v=y=_=null}}}}function S(t){var e=V.getTarget(t);return e.getAttribute&&W._viewsById[e.getAttribute("id")]}function E(){var t=W._focused;if(!t||!t.isVisible())for(var n=0,i=W._views.length;n<i;n++)if((t=W._views[n]).isVisible()){W._focused=e=t;break}}function C(t,e,n){t._handleMouseEvent("mousemove",e,n)}function A(t,e,n,i,r,a,s){var o,l=!1;function u(t,n){if(t.responds(n)){if(o||(o=new Z(n,i,r,e||t,a?r.subtract(a):null)),t.emit(n,o)&&(x=!0,o.prevented&&(b=!0),o.stopped))return l=!0}else{var s=w[n];if(s)return u(t,s)}}for(;t&&t!==s&&!u(t,n);)t=t._parent;return l}function L(t,e,n,i,r,a){return t._project.removeOn(n),b=x=!1,g&&A(g,null,n,i,r,a)||e&&e!==g&&!e.isDescendant(g)&&A(e,null,"mousedrag"===n?"mousemove":n,i,r,a,g)||A(t,g||e||t,n,i,r,a)}}),q=W.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof n.HTMLCanvasElement)){var i=f.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+r.slice(arguments,1));e=K.getCanvas(i)}var a=this._context=e.getContext("2d");if(a.save(),this._pixelRatio=1,!/^off|false$/.test(s.getAttribute(e,"hidpi"))){var o=n.devicePixelRatio||1,l=j.getPrefixed(a,"backingStorePixelRatio")||1;this._pixelRatio=o/l}W.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,a=this._context;if(!s.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=n+"px"}a.restore(),a.save(),a.scale(i,i)}},getPixelSize:function t(e){var n,i=it.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,a=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=a}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var a=0,s=e.length;a<s;a++)r=Math.max(r,n.measureText(e[a]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),!(this._needsUpdate=!1)}}),X=r.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return $.modifiers}}),Y=X.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),$=new function(){var t,a,s={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},o={tab:"\t",space:" ",enter:"\r"},l={},u={},c=new r({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=it&&it.agent;return t&&t.mac?this.meta:this.control}}});function h(t){var n=t.key||t.keyIdentifier;return n=/^U\+/.test(n)?String.fromCharCode(parseInt(n.substr(2),16)):/^Arrow[A-Z]/.test(n)?n.substr(5):"Unidentified"===n||n===e?String.fromCharCode(t.keyCode):n,s[n]||(1<n.length?r.hyphenate(n):n.toLowerCase())}function d(e,n,i,a){var s,o=W._focused;if((l[n]=e)?u[n]=i:delete u[n],1<n.length&&(s=r.camelize(n))in c){c[s]=e;var h=it&&it.agent;if("meta"===s&&h&&h.mac)if(e)t={};else{for(var f in t)f in u&&d(!1,f,t[f],a);t=null}}else e&&t&&(t[n]=i);o&&o._handleKeyEvent(e?"keydown":"keyup",a,n,i)}return V.add(i,{keydown:function(t){var e=h(t),n=it&&it.agent;1<e.length||n&&n.chrome&&(t.altKey||n.mac&&t.metaKey||!n.mac&&t.ctrlKey)?d(!0,e,o[e]||(1<e.length?"":e),t):a=e},keypress:function(t){if(a){var e=h(t),n=t.charCode,i=32<=n?String.fromCharCode(n):1<e.length?"":e;e!==a&&(e=i.toLowerCase()),d(!0,e,i,t),a=null}},keyup:function(t){var e=h(t);e in u&&d(!1,e,u[e],t)}}),V.add(n,{blur:function(t){for(var e in u)d(!1,e,u[e],t)}}),{modifiers:c,isDown:function(t){return!!l[t]}}},Z=X.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),J=X.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)n=(e=n)._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Q=(o.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){o.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){null!=(this._minDistance=t)&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){it=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var r=i.move||i.drag,a=this.responds(t),s=this.minDistance,o=this.maxDistance,l=!1,u=this;function c(t,e){var a=n,s=r?u._point:u._downPoint||a;if(r){if(0<=u._moveCount&&a.equals(s))return!1;if(s&&(null!=t||null!=e)){var o=a.subtract(s),l=o.getLength();if(l<(t||0))return!1;e&&(a=s.add(o.normalize(Math.min(l,e))))}u._moveCount++}return u._point=a,u._lastPoint=s||a,i.down&&(u._moveCount=-1,u._downPoint=a,u._downCount++),!0}function h(){a&&(l=u.emit(t,new J(u,t,e))||l)}if(i.down)c(),h();else if(i.up)c(null,o),h();else if(a)for(;c(s,o);)h();return l}}),r.extend(a,{_class:"Tween",statics:{easings:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},initialize:function t(e,n,i,r,a,s){this.object=e;var o=typeof a,l="function"===o;this.type=l?o:"string"===o?a:"linear",this.easing=l?a:t.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var u=n||i;this._keys=u?Object.keys(u):[],this._parsedKeys=this._parseKeys(this._keys),this._from=u&&this._getState(n),this._to=u&&this._getState(i),!1!==s&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){1<t&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,i=function(n){return"function"==typeof n?n(e,t):n},a=0,s=n&&n.length;a<s;a++){var o=n[a],l=i(this._from[o]),u=i(this._to[o]),c=l&&u&&l.__add&&u.__add?u.__subtract(l).__multiply(e).__add(l):(u-l)*e+l;this._setProperty(this._parsedKeys[o],c)}!this.running&&this._then&&this._then(this.object),this.responds("update")&&this.emit("update",new r({progress:t,factor:e}))}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,r=e.length;i<r;i++){var a,s=e[i],o=this._parsedKeys[s],l=this._getProperty(o);if(t){var u=this._resolveValue(l,t[s]);this._setProperty(o,u),a=(a=this._getProperty(o))&&a.clone?a.clone():a,this._setProperty(o,l)}else a=l&&l.clone?l.clone():l;n[s]=a}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-*/]=/)?this._calculate(t,n[0],e[1]):e}if("string"==typeof e){var i=e.match(/^[+\-*/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],r)}}}return e},_calculate:function(t,e,n){return it.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n],a=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[r]=a.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,r=t.length-(e||0);i<r&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}})),K={canvases:[],getCanvas:function(t,e){if(!n)return null;var r,a=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?r=this.canvases.pop():(r=i.createElement("canvas"),a=!1);var s=r.getContext("2d");if(!s)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===t&&r.height===e?a&&s.clearRect(0,0,t+1,e+1):(r.width=t,r.height=e),s.save(),r},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},tt=new function(){var t,e,n,i,a,s,o,l,u,c,h,d=Math.min,f=Math.max,p=Math.abs;function m(t,e,n){return.2989*t+.587*e+.114*n}function g(t,e,n,i){var r=i-m(t,e,n),a=(i=m(u=t+r,c=e+r,h=n+r),d(u,c,h)),s=f(u,c,h);if(a<0){var o=i-a;u=i+(u-i)*i/o,c=i+(c-i)*i/o,h=i+(h-i)*i/o}if(255<s){var l=255-i,p=s-i;u=i+(u-i)*l/p,c=i+(c-i)*l/p,h=i+(h-i)*l/p}}function v(t,e,n){return f(t,e,n)-d(t,e,n)}function y(t,e,n,i){var r,a=[t,e,n],s=f(t,e,n),o=d(t,e,n);r=0===d(o=o===t?0:o===e?1:2,s=s===t?0:s===e?1:2)?1===f(o,s)?2:1:0,a[s]>a[o]?(a[r]=(a[r]-a[o])*i/(a[s]-a[o]),a[s]=i):a[r]=a[s]=0,a[o]=0,u=a[0],c=a[1],h=a[2]}var _={multiply:function(){u=a*t/255,c=s*e/255,h=o*n/255},screen:function(){u=a+t-a*t/255,c=s+e-s*e/255,h=o+n-o*n/255},overlay:function(){u=a<128?2*a*t/255:255-2*(255-a)*(255-t)/255,c=s<128?2*s*e/255:255-2*(255-s)*(255-e)/255,h=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var i=t*a/255;u=i+a*(255-(255-a)*(255-t)/255-i)/255,c=(i=e*s/255)+s*(255-(255-s)*(255-e)/255-i)/255,h=(i=n*o/255)+o*(255-(255-o)*(255-n)/255-i)/255},"hard-light":function(){u=t<128?2*t*a/255:255-2*(255-t)*(255-a)/255,c=e<128?2*e*s/255:255-2*(255-e)*(255-s)/255,h=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){u=0===a?0:255===t?255:d(255,255*a/(255-t)),c=0===s?0:255===e?255:d(255,255*s/(255-e)),h=0===o?0:255===n?255:d(255,255*o/(255-n))},"color-burn":function(){u=255===a?255:0===t?0:f(0,255-255*(255-a)/t),c=255===s?255:0===e?0:f(0,255-255*(255-s)/e),h=255===o?255:0===n?0:f(0,255-255*(255-o)/n)},darken:function(){u=a<t?a:t,c=s<e?s:e,h=o<n?o:n},lighten:function(){u=t<a?a:t,c=e<s?s:e,h=n<o?o:n},difference:function(){(u=a-t)<0&&(u=-u),(c=s-e)<0&&(c=-c),(h=o-n)<0&&(h=-h)},exclusion:function(){u=a+t*(255-a-a)/255,c=s+e*(255-s-s)/255,h=o+n*(255-o-o)/255},hue:function(){y(t,e,n,v(a,s,o)),g(u,c,h,m(a,s,o))},saturation:function(){y(a,s,o,v(t,e,n)),g(u,c,h,m(a,s,o))},luminosity:function(){g(a,s,o,m(t,e,n))},color:function(){g(t,e,n,m(a,s,o))},add:function(){u=d(a+t,255),c=d(s+e,255),h=d(o+n,255)},subtract:function(){u=f(a-t,0),c=f(s-e,0),h=f(o-n,0)},average:function(){u=(a+t)/2,c=(s+e)/2,h=(o+n)/2},negation:function(){u=255-p(255-t-a),c=255-p(255-e-s),h=255-p(255-n-o)}},x=this.nativeModes=r.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),b=K.getContext(1,1);b&&(r.each(_,(function(t,e){var n="darken"===e,i=!1;b.save();try{b.fillStyle=n?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=n?"#a00":"#300",b.fillRect(0,0,1,1),i=b.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}b.restore(),x[e]=i})),K.release(b)),this.process=function(r,d,f,p,m){var g=d.canvas,v="normal"===r;if(v||x[r])f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=p,v||(f.globalCompositeOperation=r),f.drawImage(g,m.x,m.y),f.restore();else{var y=_[r];if(!y)return;for(var b=f.getImageData(m.x,m.y,g.width,g.height),w=b.data,T=d.getImageData(0,0,g.width,g.height).data,M=0,S=w.length;M<S;M+=4){t=T[M],a=w[M],e=T[M+1],s=w[M+1],n=T[M+2],o=w[M+2],i=T[M+3],l=w[M+3],y();var E=i*p/255,C=1-E;w[M]=E*u+C*a,w[M+1]=E*c+C*s,w[M+2]=E*h+C*o,w[M+3]=i*p+C*l}f.putImageData(b,m.x,m.y)}}},et=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function a(t,e,n){for(var i in e){var a=e[i],s=r[i];"number"==typeof a&&n&&(a=n.number(a)),s?t.setAttributeNS(s,i,a):t.setAttribute(i,a)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,r){return a(i.createElementNS(t,e),n,r)},get:function(t,e){var n=r[e],i=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===i?null:i},set:a}},nt=r.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof I||t instanceof T||t instanceof k)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var n=r.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&r.each(i,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+n,set:"set"+n}}),{});new function(){var e;function n(t,n,i){var a=new r,s=t.getTranslation();if(n){var o=(t=t._shiftless())._inverseTransform(s);a[i?"cx":"x"]=o.x,a[i?"cy":"y"]=o.y,s=null}if(!t.isIdentity()){var l=t.decompose();if(l){var c=[],h=l.rotation,d=l.scaling,f=l.skewing;s&&!s.isZero()&&c.push("translate("+e.point(s)+")"),h&&c.push("rotate("+e.number(h)+")"),u.isZero(d.x-1)&&u.isZero(d.y-1)||c.push("scale("+e.point(d)+")"),f.x&&c.push("skewX("+e.number(f.x)+")"),f.y&&c.push("skewY("+e.number(f.y)+")"),a.transform=c.join(" ")}else a.transform="matrix("+t.getValues().join(",")+")"}return a}function i(t,i){for(var r=n(t._matrix),a=t._children,s=et.create("g",r,e),o=0,l=a.length;o<l;o++){var u=a[o],c=p(u,i);if(c)if(u.isClipMask()){var h=et.create("clipPath");h.appendChild(c),d(u,h,"clip"),et.set(s,{"clip-path":"url(#"+h.id+")"})}else s.appendChild(c)}return s}function a(t){var i=t._type,r=t._radius,a=n(t._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var s=t._size,o=s.width,l=s.height;a.x-=o/2,a.y-=l/2,a.width=o,a.height=l,r.isZero()&&(r=null)}return r&&("circle"===i?a.r=r:(a.rx=r.width,a.ry=r.height)),et.create(i,a,e)}var s,o={Group:i,Layer:i,Raster:function(t,i){var r=n(t._matrix,!0),a=t.getSize(),s=t.getImage();return r.x-=a.width/2,r.y-=a.height/2,r.width=a.width,r.height=a.height,r.href=0==i.embedImages&&s&&s.src||t.toDataURL(),et.create("image",r,e)},Path:function(t,i){var r=i.matchShapes;if(r){var s=t.toShape(!1);if(s)return a(s)}var o,l=t._segments,u=l.length,c=n(t._matrix);if(r&&2<=u&&!t.hasHandles())if(2<u){o=t._closed?"polygon":"polyline";for(var h=[],d=0;d<u;d++)h.push(e.point(l[d]._point));c.points=h.join(" ")}else{o="line";var f=l[0]._point,p=l[1]._point;c.set({x1:f.x,y1:f.y,x2:p.x,y2:p.y})}else o="path",c.d=t.getPathData(null,i.precision);return et.create(o,c,e)},Shape:a,CompoundPath:function(t,i){var r=n(t._matrix),a=t.getPathData(null,i.precision);return a&&(r.d=a),et.create("path",r,e)},SymbolItem:function(t,i){var r=n(t._matrix,!0),a=t._definition,s=h(a,"symbol"),o=a._item,l=o.getBounds();return s||((s=et.create("symbol",{viewBox:e.rectangle(l)})).appendChild(p(o,i)),d(a,s,"symbol")),r.href="#"+s.id,r.x+=l.x,r.y+=l.y,r.width=l.width,r.height=l.height,r.overflow="visible",et.create("use",r,e)},PointText:function(t){var i=et.create("text",n(t._matrix,!0),e);return i.textContent=t._content,i}};function h(t,e){return s||(s={ids:{},svgs:{}}),t&&s.svgs[e+"-"+(t._id||t.__id||(t.__id=c.get("svg")))]}function d(t,e,n){s||h();var i=s.ids[n]=(s.ids[n]||0)+1;e.id=n+"-"+i,s.svgs[n+"-"+(t._id||t.__id)]=e}function f(e,n){var i=e,r=null;if(s){for(var a in i="svg"===e.nodeName.toLowerCase()&&e,s.svgs)r||(i||(i=et.create("svg")).appendChild(e),r=i.insertBefore(et.create("defs"),i.firstChild)),r.appendChild(s.svgs[a]);s=null}return n.asString?(new t.XMLSerializer).serializeToString(i):i}function p(t,n,i){var a=o[t._class],s=a&&a(t,n);if(s){var l=n.onExport;l&&(s=l(t,s,n)||s);var u=JSON.stringify(t._data);u&&"{}"!==u&&"null"!==u&&s.setAttribute("data-paper-data",u)}return s&&function(t,n,i){var a={},s=!i&&t.getParent(),o=[];return null!=t._name&&(a.id=t._name),r.each(nt,(function(n){var i=n.get,l=n.type,u=t[i]();if(n.exportFilter?n.exportFilter(t,u):!s||!r.equals(s[i](),u)){if("color"===l&&null!=u){var c=u.getAlpha();c<1&&(a[n.attribute+"-opacity"]=c)}"style"===l?o.push(n.attribute+": "+u):a[n.attribute]=null==u?"none":"color"===l?u.gradient?function(t){var n=h(t,"color");if(!n){var i,r=t.getGradient(),a=r._radial,s=t.getOrigin(),o=t.getDestination();if(a){i={cx:s.x,cy:s.y,r:s.getDistance(o)};var l=t.getHighlight();l&&(i.fx=l.x,i.fy=l.y)}else i={x1:s.x,y1:s.y,x2:o.x,y2:o.y};i.gradientUnits="userSpaceOnUse",n=et.create((a?"radial":"linear")+"Gradient",i,e);for(var u=r._stops,c=0,f=u.length;c<f;c++){var p=u[c],m=p._color,g=m.getAlpha(),v=p._offset;i={offset:null==v?c/(f-1):v},m&&(i["stop-color"]=m.toCSS(!0)),g<1&&(i["stop-opacity"]=g),n.appendChild(et.create("stop",i,e))}d(t,n,"color")}return"url(#"+n.id+")"}(u):u.toCSS(!0):"array"===l?u.join(","):"lookup"===l?n.toSVG[u]:u}})),o.length&&(a.style=o.join(";")),1===a.opacity&&delete a.opacity,t._visible||(a.visibility="hidden"),et.set(n,a,e)}(t,s,i)}function g(t){return t||(t={}),e=new l(t.precision),t}x.inject({exportSVG:function(t){return f(p(this,t=g(t),!0),t)}}),_.inject({exportSVG:function(t){t=g(t);var i=this._children,a=this.getView(),s=r.pick(t.bounds,"view"),o=t.matrix||"view"===s&&a._matrix,l=o&&v.read([o]),u="view"===s?new m([0,0],a.getViewSize()):"content"===s?x._getBounds(i,l,{stroke:!0}).rect:m.read([s],0,{readNull:!0}),c={version:"1.1",xmlns:et.svg,"xmlns:xlink":et.xlink};u&&(c.width=u.width,c.height=u.height,(u.x||u.y)&&(c.viewBox=e.rectangle(u)));var h=et.create("svg",c,e),d=h;l&&!l.isIdentity()&&(d=h.appendChild(et.create("g",n(l),e)));for(var y=0,_=i.length;y<_;y++)d.appendChild(p(i[y],t,!0));return f(h,t)}})},new function(){var a,s={};function o(t,e,n,i,r){var s=et.get(t,e),o=null==s?i?null:n?"":0:n?s:parseFloat(s);return/%\s*$/.test(s)?o/100*(r?1:a[/x|^width/.test(e)?"width":"height"]):o}function l(t,e,n,i,r){return e=o(t,e||"x",!1,i,r),n=o(t,n||"y",!1,i,r),!i||null!=e&&null!=n?new h(e,n):null}function u(t,e,n,i,r){return e=o(t,e||"width",!1,i,r),n=o(t,n||"height",!1,i,r),!i||null!=e&&null!=n?new f(e,n):null}function c(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?P(t)||t:"lookup"===e?n[t]:t}function d(t,e,n,i){var r=t.childNodes,a="clippath"===e,s="defs"===e,o=new b,l=o._project,u=l._currentStyle,c=[];if(a||s||(o=L(o,t,i),l._currentStyle=o._style.clone()),i)for(var h=t.querySelectorAll("defs"),d=0,f=h.length;d<f;d++)R(h[d],n,!1);for(d=0,f=r.length;d<f;d++){var p,m=r[d];1!==m.nodeType||/^defs$/i.test(m.nodeName)||!(p=R(m,n,!1))||p instanceof E||c.push(p)}return o.addChildren(c),a&&(o=L(o.reduce(),t,i)),l._currentStyle=u,(a||s)&&(o.remove(),o=null),o}function p(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,a=n.length;r<a;r+=2)i.push(new h(parseFloat(n[r]),parseFloat(n[r+1])));var s=new O(i);return"polygon"===e&&s.closePath(),s}function g(t,e){var n,i=(o(t,"href",!0)||"").substring(1),r="radialgradient"===e;if(i)(n=s[i].getGradient())._radial^r&&((n=n.clone())._radial=r);else{for(var a=t.childNodes,u=[],c=0,h=a.length;c<h;c++){var d=a[c];1===d.nodeType&&u.push(L(new H,d))}n=new U(u,r)}var f,p,m,g="userSpaceOnUse"!==o(t,"gradientUnits",!0);return r?(p=(f=l(t,"cx","cy",!1,g)).add(o(t,"r",!1,!1,g),0),m=l(t,"fx","fy",!0,g)):(f=l(t,"x1","y1",!1,g),p=l(t,"x2","y2",!1,g)),L(new F(n,f,p,m),t)._scaleToBounds=g,null}var y={"#document":function(t,e,n,i){for(var r=t.childNodes,a=0,s=r.length;a<s;a++){var o=r[a];if(1===o.nodeType)return R(o,n,i)}},g:d,svg:d,clippath:d,polygon:p,polyline:p,path:function(t){return I.create(t.getAttribute("d"))},lineargradient:g,radialgradient:g,image:function(t){var e=new M(o(t,"href",!0));return e.on("load",(function(){var e=u(t);this.setSize(e);var n=l(t).add(e.divide(2));this._matrix.append((new v).translate(n))})),e},symbol:function(t,e,n,i){return new E(d(t,e,n,i),!0)},defs:d,use:function(t){var e=(o(t,"href",!0)||"").substring(1),n=s[e],i=l(t);return n?n instanceof E?n.place(i):n.clone().translate(i):null},circle:function(t){return new T.Circle(l(t,"cx","cy"),o(t,"r"))},ellipse:function(t){return new T.Ellipse({center:l(t,"cx","cy"),radius:u(t,"rx","ry")})},rect:function(t){return new T.Rectangle(new m(l(t),u(t)),u(t,"rx","ry"))},line:function(t){return new O.Line(l(t,"x1","y1"),l(t,"x2","y2"))},text:function(t){var e=new B(l(t).add(l(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}};function w(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),a=new v,s=0,o=r.length;s<o;s++){var l=r[s];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],h=u[1].split(/[\s,]+/g),d=0,f=h.length;d<f;d++)h[d]=parseFloat(h[d]);switch(c){case"matrix":a.append(new v(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":a.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":a.translate(h[0],h[1]||0);break;case"scale":a.scale(h);break;case"skewX":a.skew(h[0],0);break;case"skewY":a.skew(0,h[0])}}t.transform(a)}}function S(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}var C=r.set(r.each(nt,(function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](c(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i&&i._scaleToBounds){var r=e.getBounds();i.transform((new v).translate(r.getPoint()).scale(r.getSize()))}}}}),{}),{id:function(t,e){(s[e]=t).setName&&t.setName(e)},"clip-path":function(t,e){var n=P(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof b))return new b(n,t);t.insertChild(0,n)}},gradientTransform:w,transform:w,"fill-opacity":S,"stroke-opacity":S,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,r){var a,s=new m(c(e,"array")),o=u(i,null,null,!0);if(t instanceof b){var l=o?o.divide(s.getSize()):1,h=(new v).scale(l).translate(s.getPoint().negate());a=t}else t instanceof E&&(o&&s.setSize(o),a=t._item);if(a){if("visible"!==A(i,"overflow",r)){var d=new T.Rectangle(s);d.setClipMask(!0),a.addChild(d)}h&&a.transform(h)}}});function A(t,n,i){var a=t.attributes[n],s=a&&a.value;if(!s&&t.style){var o=r.camelize(n);(s=t.style[o])||i.node[o]===i.parent[o]||(s=i.node[o])}return s?"none"===s?null:s:e}function L(t,n,i){var a=n.parentNode,s={node:j.getStyles(n)||{},parent:!i&&!/^defs$/i.test(a.tagName)&&j.getStyles(a)||{}};return r.each(C,(function(i,r){var a=A(n,r,s);t=a!==e&&i(t,a,r,n,s)||t})),t}function P(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=e&&e[1],r=i&&s[n?i.replace(n.location.href.split("#")[0]+"#",""):i];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function R(t,e,n){var o,l,c,h=t.nodeName.toLowerCase(),d="#document"!==h,f=i.body;n&&d&&(a=it.getView().getSize(),a=u(t,null,null,!0)||a,o=et.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),l=t.parentNode,c=t.nextSibling,o.appendChild(t),f.appendChild(o));var p=it.settings,m=p.applyMatrix,g=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var v=y[h],_=v&&v(t,h,e,n)||null;if(p.insertItems=g,p.applyMatrix=m,_){!d||_ instanceof b||(_=L(_,t,n));var x=e.onImport,w=d&&t.getAttribute("data-paper-data");x&&(_=x(t,_,e)||_),e.expandShapes&&_ instanceof T&&(_.remove(),_=_.toPath()),w&&(_._data=JSON.parse(w))}return o&&(f.removeChild(o),l&&(c?l.insertBefore(t,c):l.appendChild(t))),n&&(s={},_&&r.pick(e.applyMatrix,m)&&_.matrix.apply(!0,!0)),_}function z(n,a,s){if(!n)return null;a="function"==typeof a?{onLoad:a}:a||{};var o=it,l=null;function u(i){try{var r="object"==typeof i?i:(new t.DOMParser).parseFromString(i,"image/svg+xml");if(!r.nodeName)throw r=null,new Error("Unsupported SVG source: "+n);it=o,l=R(r,a,!0),a&&!1===a.insert||s._insertItem(e,l);var u=a.onLoad;u&&u(l,i)}catch(i){c(i)}}function c(t,e){var n=a.onError;if(!n)throw new Error(t);n(t,e)}if("string"!=typeof n||/^.*</.test(n)){if("undefined"!=typeof File&&n instanceof File){var h=new FileReader;return h.onload=function(){u(h.result)},h.onerror=function(){c(h.error)},h.readAsText(n)}u(n)}else{var d=i.getElementById(n);d?u(d):function(e){var n=new t.XMLHttpRequest;n.open((e.method||"get").toUpperCase(),e.url,r.pick(e.async,!0)),e.mimeType&&n.overrideMimeType(e.mimeType),n.onload=function(){var t=n.status;0===t||200===t?e.onLoad&&e.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var t=n.status,i='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(i);e.onError(i,t)},n.send(null)}({url:n,async:!0,onLoad:u,onError:c})}return l}x.inject({importSVG:function(t,e){return z(t,e,this)}}),_.inject({importSVG:function(t,e){return this.activate(),z(t,e,this)}})};var it=new(s.inject(r.exports,{Base:r,Numerical:u,Key:$,DomEvent:V,DomElement:j,document:i,window:n,Symbol:E,PlacedSymbol:S}));return it.agent.node&&require("./node/extend.js")(it),"function"==typeof define&&define.amd?define("paper",it):"object"==typeof module&&module&&(module.exports=it),it}.call(this,"object"==typeof self?self:null);!function(){"use strict";var t=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,n=1/6,i=(Math.sqrt(5)-1)/4,r=(5-Math.sqrt(5))/20;function a(t){var e;e="function"==typeof t?t:t?function(){var t,e=0,n=0,i=0,r=1,a=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)});e=a(" "),n=a(" "),i=a(" ");for(var s=0;s<arguments.length;s++)(e-=a(arguments[s]))<0&&(e+=1),(n-=a(arguments[s]))<0&&(n+=1),(i-=a(arguments[s]))<0&&(i+=1);return a=null,function(){var t=2091639*e+2.3283064365386963e-10*r;return e=n,n=i,i=t-(r=0|t)}}(t):Math.random,this.p=s(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function s(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var i=e+~~(t()*(256-e)),r=n[e];n[e]=n[i],n[i]=r}return n}a.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(n,i){var r,a,s=this.permMod12,o=this.perm,l=this.grad3,u=0,c=0,h=0,d=(n+i)*t,f=Math.floor(n+d),p=Math.floor(i+d),m=(f+p)*e,g=n-(f-m),v=i-(p-m);g>v?(r=1,a=0):(r=0,a=1);var y=g-r+e,_=v-a+e,x=g-1+2*e,b=v-1+2*e,w=255&f,T=255&p,M=.5-g*g-v*v;if(M>=0){var S=3*s[w+o[T]];u=(M*=M)*M*(l[S]*g+l[S+1]*v)}var E=.5-y*y-_*_;if(E>=0){var C=3*s[w+r+o[T+a]];c=(E*=E)*E*(l[C]*y+l[C+1]*_)}var A=.5-x*x-b*b;if(A>=0){var L=3*s[w+1+o[T+1]];h=(A*=A)*A*(l[L]*x+l[L+1]*b)}return 70*(u+c+h)},noise3D:function(t,e,i){var r,a,s,o,l,u,c,h,d,f,p=this.permMod12,m=this.perm,g=this.grad3,v=(t+e+i)*(1/3),y=Math.floor(t+v),_=Math.floor(e+v),x=Math.floor(i+v),b=(y+_+x)*n,w=t-(y-b),T=e-(_-b),M=i-(x-b);w>=T?T>=M?(l=1,u=0,c=0,h=1,d=1,f=0):w>=M?(l=1,u=0,c=0,h=1,d=0,f=1):(l=0,u=0,c=1,h=1,d=0,f=1):T<M?(l=0,u=0,c=1,h=0,d=1,f=1):w<M?(l=0,u=1,c=0,h=0,d=1,f=1):(l=0,u=1,c=0,h=1,d=1,f=0);var S=w-l+n,E=T-u+n,C=M-c+n,A=w-h+2*n,L=T-d+2*n,P=M-f+2*n,R=w-1+.5,I=T-1+.5,O=M-1+.5,z=255&y,D=255&_,N=255&x,k=.6-w*w-T*T-M*M;if(k<0)r=0;else{var B=3*p[z+m[D+m[N]]];r=(k*=k)*k*(g[B]*w+g[B+1]*T+g[B+2]*M)}var F=.6-S*S-E*E-C*C;if(F<0)a=0;else{var U=3*p[z+l+m[D+u+m[N+c]]];a=(F*=F)*F*(g[U]*S+g[U+1]*E+g[U+2]*C)}var H=.6-A*A-L*L-P*P;if(H<0)s=0;else{var G=3*p[z+h+m[D+d+m[N+f]]];s=(H*=H)*H*(g[G]*A+g[G+1]*L+g[G+2]*P)}var j=.6-R*R-I*I-O*O;if(j<0)o=0;else{var V=3*p[z+1+m[D+1+m[N+1]]];o=(j*=j)*j*(g[V]*R+g[V+1]*I+g[V+2]*O)}return 32*(r+a+s+o)},noise4D:function(t,e,n,a){var s,o,l,u,c,h,d,f,p,m,g,v,y,_,x,b,w,T=this.perm,M=this.grad4,S=(t+e+n+a)*i,E=Math.floor(t+S),C=Math.floor(e+S),A=Math.floor(n+S),L=Math.floor(a+S),P=(E+C+A+L)*r,R=t-(E-P),I=e-(C-P),O=n-(A-P),z=a-(L-P),D=0,N=0,k=0,B=0;R>I?D++:N++,R>O?D++:k++,R>z?D++:B++,I>O?N++:k++,I>z?N++:B++,O>z?k++:B++;var F=R-(h=D>=3?1:0)+r,U=I-(d=N>=3?1:0)+r,H=O-(f=k>=3?1:0)+r,G=z-(p=B>=3?1:0)+r,j=R-(m=D>=2?1:0)+2*r,V=I-(g=N>=2?1:0)+2*r,W=O-(v=k>=2?1:0)+2*r,q=z-(y=B>=2?1:0)+2*r,X=R-(_=D>=1?1:0)+3*r,Y=I-(x=N>=1?1:0)+3*r,$=O-(b=k>=1?1:0)+3*r,Z=z-(w=B>=1?1:0)+3*r,J=R-1+4*r,Q=I-1+4*r,K=O-1+4*r,tt=z-1+4*r,et=255&E,nt=255&C,it=255&A,rt=255&L,at=.6-R*R-I*I-O*O-z*z;if(at<0)s=0;else{var st=T[et+T[nt+T[it+T[rt]]]]%32*4;s=(at*=at)*at*(M[st]*R+M[st+1]*I+M[st+2]*O+M[st+3]*z)}var ot=.6-F*F-U*U-H*H-G*G;if(ot<0)o=0;else{var lt=T[et+h+T[nt+d+T[it+f+T[rt+p]]]]%32*4;o=(ot*=ot)*ot*(M[lt]*F+M[lt+1]*U+M[lt+2]*H+M[lt+3]*G)}var ut=.6-j*j-V*V-W*W-q*q;if(ut<0)l=0;else{var ct=T[et+m+T[nt+g+T[it+v+T[rt+y]]]]%32*4;l=(ut*=ut)*ut*(M[ct]*j+M[ct+1]*V+M[ct+2]*W+M[ct+3]*q)}var ht=.6-X*X-Y*Y-$*$-Z*Z;if(ht<0)u=0;else{var dt=T[et+_+T[nt+x+T[it+b+T[rt+w]]]]%32*4;u=(ht*=ht)*ht*(M[dt]*X+M[dt+1]*Y+M[dt+2]*$+M[dt+3]*Z)}var ft=.6-J*J-Q*Q-K*K-tt*tt;if(ft<0)c=0;else{var pt=T[et+1+T[nt+1+T[it+1+T[rt+1]]]]%32*4;c=(ft*=ft)*ft*(M[pt]*J+M[pt+1]*Q+M[pt+2]*K+M[pt+3]*tt)}return 27*(s+o+l+u+c)}},a._buildPermutationTable=s,"undefined"!=typeof define&&define.amd&&define((function(){return a})),"undefined"!=typeof exports?exports.SimplexNoise=a:"undefined"!=typeof window&&(window.SimplexNoise=a),"undefined"!=typeof module&&(module.exports=a)}();